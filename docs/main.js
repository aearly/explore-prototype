/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const t="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,i=(t,i,e=null)=>{for(;i!==e;){const e=i.nextSibling;t.removeChild(i),i=e}},e=`{{lit-${String(Math.random()).slice(2)}}}`,s=`\x3c!--${e}--\x3e`,n=new RegExp(`${e}|${s}`);class o{constructor(t,i){this.parts=[],this.element=i;const s=[],o=[],a=document.createTreeWalker(i.content,133,null,!1);let c=0,d=-1,u=0;const{strings:p,values:{length:f}}=t;for(;u<f;){const t=a.nextNode();if(null!==t){if(d++,1===t.nodeType){if(t.hasAttributes()){const i=t.attributes,{length:e}=i;let s=0;for(let t=0;t<e;t++)r(i[t].name,"$lit$")&&s++;for(;s-- >0;){const i=p[u],e=l.exec(i)[2],s=e.toLowerCase()+"$lit$",o=t.getAttribute(s);t.removeAttribute(s);const r=o.split(n);this.parts.push({type:"attribute",index:d,name:e,strings:r}),u+=r.length-1}}"TEMPLATE"===t.tagName&&(o.push(t),a.currentNode=t.content)}else if(3===t.nodeType){const i=t.data;if(i.indexOf(e)>=0){const e=t.parentNode,o=i.split(n),a=o.length-1;for(let i=0;i<a;i++){let s,n=o[i];if(""===n)s=h();else{const t=l.exec(n);null!==t&&r(t[2],"$lit$")&&(n=n.slice(0,t.index)+t[1]+t[2].slice(0,-"$lit$".length)+t[3]),s=document.createTextNode(n)}e.insertBefore(s,t),this.parts.push({type:"node",index:++d})}""===o[a]?(e.insertBefore(h(),t),s.push(t)):t.data=o[a],u+=a}}else if(8===t.nodeType)if(t.data===e){const i=t.parentNode;null!==t.previousSibling&&d!==c||(d++,i.insertBefore(h(),t)),c=d,this.parts.push({type:"node",index:d}),null===t.nextSibling?t.data="":(s.push(t),d--),u++}else{let i=-1;for(;-1!==(i=t.data.indexOf(e,i+1));)this.parts.push({type:"node",index:-1}),u++}}else a.currentNode=o.pop()}for(const t of s)t.parentNode.removeChild(t)}}const r=(t,i)=>{const e=t.length-i.length;return e>=0&&t.slice(e)===i},a=t=>-1!==t.index,h=()=>document.createComment(""),l=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function c(t,i){const{element:{content:e},parts:s}=t,n=document.createTreeWalker(e,133,null,!1);let o=u(s),r=s[o],a=-1,h=0;const l=[];let c=null;for(;n.nextNode();){a++;const t=n.currentNode;for(t.previousSibling===c&&(c=null),i.has(t)&&(l.push(t),null===c&&(c=t)),null!==c&&h++;void 0!==r&&r.index===a;)r.index=null!==c?-1:r.index-h,o=u(s,o),r=s[o]}l.forEach(t=>t.parentNode.removeChild(t))}const d=t=>{let i=11===t.nodeType?0:1;const e=document.createTreeWalker(t,133,null,!1);for(;e.nextNode();)i++;return i},u=(t,i=-1)=>{for(let e=i+1;e<t.length;e++){const i=t[e];if(a(i))return e}return-1};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const p=new WeakMap,f=t=>(...i)=>{const e=t(...i);return p.set(e,!0),e},g=t=>"function"==typeof t&&p.has(t),v={},m={};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class w{constructor(t,i,e){this.t=[],this.template=t,this.processor=i,this.options=e}update(t){let i=0;for(const e of this.t)void 0!==e&&e.setValue(t[i]),i++;for(const t of this.t)void 0!==t&&t.commit()}_clone(){const i=t?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],s=this.template.parts,n=document.createTreeWalker(i,133,null,!1);let o,r=0,h=0,l=n.nextNode();for(;r<s.length;)if(o=s[r],a(o)){for(;h<o.index;)h++,"TEMPLATE"===l.nodeName&&(e.push(l),n.currentNode=l.content),null===(l=n.nextNode())&&(n.currentNode=e.pop(),l=n.nextNode());if("node"===o.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(l.previousSibling),this.t.push(t)}else this.t.push(...this.processor.handleAttributeExpressions(l,o.name,o.strings,this.options));r++}else this.t.push(void 0),r++;return t&&(document.adoptNode(i),customElements.upgrade(i)),i}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const b=` ${e} `;class y{constructor(t,i,e,s){this.strings=t,this.values=i,this.type=e,this.processor=s}getHTML(){const t=this.strings.length-1;let i="",n=!1;for(let o=0;o<t;o++){const t=this.strings[o],r=t.lastIndexOf("\x3c!--");n=(r>-1||n)&&-1===t.indexOf("--\x3e",r+1);const a=l.exec(t);i+=null===a?t+(n?b:s):t.substr(0,a.index)+a[1]+a[2]+"$lit$"+a[3]+e}return i+=this.strings[t],i}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const x=t=>null===t||!("object"==typeof t||"function"==typeof t),$=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);class k{constructor(t,i,e){this.dirty=!0,this.element=t,this.name=i,this.strings=e,this.parts=[];for(let t=0;t<e.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new S(this)}_getValue(){const t=this.strings,i=t.length-1;let e="";for(let s=0;s<i;s++){e+=t[s];const i=this.parts[s];if(void 0!==i){const t=i.value;if(x(t)||!$(t))e+="string"==typeof t?t:String(t);else for(const i of t)e+="string"==typeof i?i:String(i)}}return e+=t[i],e}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class S{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===v||x(t)&&t===this.value||(this.value=t,g(t)||(this.committer.dirty=!0))}commit(){for(;g(this.value);){const t=this.value;this.value=v,t(this)}this.value!==v&&this.committer.commit()}}class M{constructor(t){this.value=void 0,this.i=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(h()),this.endNode=t.appendChild(h())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.o(this.startNode=h()),t.o(this.endNode=h())}insertAfterPart(t){t.o(this.startNode=h()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.i=t}commit(){if(null===this.startNode.parentNode)return;for(;g(this.i);){const t=this.i;this.i=v,t(this)}const t=this.i;t!==v&&(x(t)?t!==this.value&&this.h(t):t instanceof y?this.l(t):t instanceof Node?this.g(t):$(t)?this.v(t):t===m?(this.value=m,this.clear()):this.h(t))}o(t){this.endNode.parentNode.insertBefore(t,this.endNode)}g(t){this.value!==t&&(this.clear(),this.o(t),this.value=t)}h(t){const i=this.startNode.nextSibling,e="string"==typeof(t=null==t?"":t)?t:String(t);i===this.endNode.previousSibling&&3===i.nodeType?i.data=e:this.g(document.createTextNode(e)),this.value=t}l(t){const i=this.options.templateFactory(t);if(this.value instanceof w&&this.value.template===i)this.value.update(t.values);else{const e=new w(i,t.processor,this.options),s=e._clone();e.update(t.values),this.g(s),this.value=e}}v(t){Array.isArray(this.value)||(this.value=[],this.clear());const i=this.value;let e,s=0;for(const n of t)e=i[s],void 0===e&&(e=new M(this.options),i.push(e),0===s?e.appendIntoPart(this):e.insertAfterPart(i[s-1])),e.setValue(n),e.commit(),s++;s<i.length&&(i.length=s,this.clear(e&&e.endNode))}clear(t=this.startNode){i(this.startNode.parentNode,t.nextSibling,this.endNode)}}class _{constructor(t,i,e){if(this.value=void 0,this.i=void 0,2!==e.length||""!==e[0]||""!==e[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=i,this.strings=e}setValue(t){this.i=t}commit(){for(;g(this.i);){const t=this.i;this.i=v,t(this)}if(this.i===v)return;const t=!!this.i;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.i=v}}class A extends k{constructor(t,i,e){super(t,i,e),this.single=2===e.length&&""===e[0]&&""===e[1]}_createPart(){return new C(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class C extends S{}let O=!1;(()=>{try{const t={get capture(){return O=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class j{constructor(t,i,e){this.value=void 0,this.i=void 0,this.element=t,this.eventName=i,this.eventContext=e,this.m=t=>this.handleEvent(t)}setValue(t){this.i=t}commit(){for(;g(this.i);){const t=this.i;this.i=v,t(this)}if(this.i===v)return;const t=this.i,i=this.value,e=null==t||null!=i&&(t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive),s=null!=t&&(null==i||e);e&&this.element.removeEventListener(this.eventName,this.m,this.$),s&&(this.$=T(t),this.element.addEventListener(this.eventName,this.m,this.$)),this.value=t,this.i=v}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const T=t=>t&&(O?{capture:t.capture,passive:t.passive,once:t.once}:t.capture)
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */;function P(t){let i=E.get(t.type);void 0===i&&(i={stringsArray:new WeakMap,keyString:new Map},E.set(t.type,i));let s=i.stringsArray.get(t.strings);if(void 0!==s)return s;const n=t.strings.join(e);return s=i.keyString.get(n),void 0===s&&(s=new o(t,t.getTemplateElement()),i.keyString.set(n,s)),i.stringsArray.set(t.strings,s),s}const E=new Map,B=new WeakMap;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const z=new
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class{handleAttributeExpressions(t,i,e,s){const n=i[0];if("."===n){return new A(t,i.slice(1),e).parts}return"@"===n?[new j(t,i.slice(1),s.eventContext)]:"?"===n?[new _(t,i.slice(1),e)]:new k(t,i,e).parts}handleTextExpression(t){return new M(t)}};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");const U=(t,...i)=>new y(t,i,"html",z)
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */,F=(t,i)=>`${t}--${i}`;let I=!0;void 0===window.ShadyCSS?I=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),I=!1);const L=t=>i=>{const s=F(i.type,t);let n=E.get(s);void 0===n&&(n={stringsArray:new WeakMap,keyString:new Map},E.set(s,n));let r=n.stringsArray.get(i.strings);if(void 0!==r)return r;const a=i.strings.join(e);if(r=n.keyString.get(a),void 0===r){const e=i.getTemplateElement();I&&window.ShadyCSS.prepareTemplateDom(e,t),r=new o(i,e),n.keyString.set(a,r)}return n.stringsArray.set(i.strings,r),r},N=["html","svg"],V=new Set,R=(t,i,e)=>{V.add(t);const s=e?e.element:document.createElement("template"),n=i.querySelectorAll("style"),{length:o}=n;if(0===o)return void window.ShadyCSS.prepareTemplateStyles(s,t);const r=document.createElement("style");for(let t=0;t<o;t++){const i=n[t];i.parentNode.removeChild(i),r.textContent+=i.textContent}(t=>{N.forEach(i=>{const e=E.get(F(i,t));void 0!==e&&e.keyString.forEach(t=>{const{element:{content:i}}=t,e=new Set;Array.from(i.querySelectorAll("style")).forEach(t=>{e.add(t)}),c(t,e)})})})(t);const a=s.content;e?function(t,i,e=null){const{element:{content:s},parts:n}=t;if(null==e)return void s.appendChild(i);const o=document.createTreeWalker(s,133,null,!1);let r=u(n),a=0,h=-1;for(;o.nextNode();){for(h++,o.currentNode===e&&(a=d(i),e.parentNode.insertBefore(i,e));-1!==r&&n[r].index===h;){if(a>0){for(;-1!==r;)n[r].index+=a,r=u(n,r);return}r=u(n,r)}}}(e,r,a.firstChild):a.insertBefore(r,a.firstChild),window.ShadyCSS.prepareTemplateStyles(s,t);const h=a.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==h)i.insertBefore(h.cloneNode(!0),i.firstChild);else if(e){a.insertBefore(r,a.firstChild);const t=new Set;t.add(r),c(e,t)}};window.JSCompiler_renameProperty=(t,i)=>t;const H={toAttribute(t,i){switch(i){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,i){switch(i){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},W=(t,i)=>i!==t&&(i==i||t==t),G={attribute:!0,type:String,converter:H,reflect:!1,hasChanged:W};class q extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=new Promise(t=>this._enableUpdatingResolver=t),this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach((i,e)=>{const s=this._attributeNameForProperty(e,i);void 0!==s&&(this._attributeToPropertyMap.set(s,e),t.push(s))}),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach((t,i)=>this._classProperties.set(i,t))}}static createProperty(t,i=G){if(this._ensureClassProperties(),this._classProperties.set(t,i),i.noAccessor||this.prototype.hasOwnProperty(t))return;const e="symbol"==typeof t?Symbol():`__${t}`,s=this.getPropertyDescriptor(t,e,i);void 0!==s&&Object.defineProperty(this.prototype,t,s)}static getPropertyDescriptor(t,i,e){return{get(){return this[i]},set(e){const s=this[t];this[i]=e,this._requestUpdate(t,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||G}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty("finalized")||t.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const t=this.properties,i=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const e of i)this.createProperty(e,t[e])}}static _attributeNameForProperty(t,i){const e=i.attribute;return!1===e?void 0:"string"==typeof e?e:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,i,e=W){return e(t,i)}static _propertyValueFromAttribute(t,i){const e=i.type,s=i.converter||H,n="function"==typeof s?s:s.fromAttribute;return n?n(t,e):t}static _propertyValueToAttribute(t,i){if(void 0===i.reflect)return;const e=i.type,s=i.converter;return(s&&s.toAttribute||H.toAttribute)(t,e)}initialize(){this._saveInstanceProperties(),this._requestUpdate()}_saveInstanceProperties(){this.constructor._classProperties.forEach((t,i)=>{if(this.hasOwnProperty(i)){const t=this[i];delete this[i],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(i,t)}})}_applyInstanceProperties(){this._instanceProperties.forEach((t,i)=>this[i]=t),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,i,e){i!==e&&this._attributeToProperty(t,e)}_propertyToAttribute(t,i,e=G){const s=this.constructor,n=s._attributeNameForProperty(t,e);if(void 0!==n){const t=s._propertyValueToAttribute(i,e);if(void 0===t)return;this._updateState=8|this._updateState,null==t?this.removeAttribute(n):this.setAttribute(n,t),this._updateState=-9&this._updateState}}_attributeToProperty(t,i){if(8&this._updateState)return;const e=this.constructor,s=e._attributeToPropertyMap.get(t);if(void 0!==s){const t=e.getPropertyOptions(s);this._updateState=16|this._updateState,this[s]=e._propertyValueFromAttribute(i,t),this._updateState=-17&this._updateState}}_requestUpdate(t,i){let e=!0;if(void 0!==t){const s=this.constructor,n=s.getPropertyOptions(t);s._valueHasChanged(this[t],i,n.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,i),!0!==n.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,n))):e=!1}!this._hasRequestedUpdate&&e&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,i){return this._requestUpdate(t,i),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(t){}const t=this.performUpdate();return null!=t&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){this._instanceProperties&&this._applyInstanceProperties();let t=!1;const i=this._changedProperties;try{t=this.shouldUpdate(i),t?this.update(i):this._markUpdated()}catch(i){throw t=!1,this._markUpdated(),i}t&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(i)),this.updated(i))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((t,i)=>this._propertyToAttribute(i,this[i],t)),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}q.finalized=!0;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const D=t=>i=>"function"==typeof i?((t,i)=>(window.customElements.define(t,i),i))(t,i):((t,i)=>{const{kind:e,elements:s}=i;return{kind:e,elements:s,finisher(i){window.customElements.define(t,i)}}})(t,i),J=(t,i)=>"method"===i.kind&&i.descriptor&&!("value"in i.descriptor)?Object.assign(Object.assign({},i),{finisher(e){e.createProperty(i.key,t)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof i.initializer&&(this[i.key]=i.initializer.call(this))},finisher(e){e.createProperty(i.key,t)}};function K(t){return(i,e)=>void 0!==e?((t,i,e)=>{i.constructor.createProperty(e,t)})(t,i,e):J(t,i)}function Q(t){return(i,e)=>{const s={get(){return this.renderRoot.querySelector(t)},enumerable:!0,configurable:!0};return void 0!==e?Y(s,i,e):X(s,i)}}const Y=(t,i,e)=>{Object.defineProperty(i,e,t)},X=(t,i)=>({kind:"method",placement:"prototype",key:i.key,descriptor:t})
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/,Z="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,tt=Symbol();class it{constructor(t,i){if(i!==tt)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return void 0===this._styleSheet&&(Z?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const et=(t,...i)=>{const e=i.reduce((i,e,s)=>i+(t=>{if(t instanceof it)return t.cssText;if("number"==typeof t)return t;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${t}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(e)+t[s+1],t[0]);return new it(e,tt)};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litElementVersions||(window.litElementVersions=[])).push("2.3.1");const st={};class nt extends q{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(void 0===t)this._styles=[];else if(Array.isArray(t)){const i=(t,e)=>t.reduceRight((t,e)=>Array.isArray(e)?i(e,t):(t.add(e),t),e),e=i(t,new Set),s=[];e.forEach(t=>s.unshift(t)),this._styles=s}else this._styles=[t]}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const t=this.constructor._styles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?Z?this.renderRoot.adoptedStyleSheets=t.map(t=>t.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(t=>t.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(t){const i=this.render();super.update(t),i!==st&&this.constructor.render(i,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(t=>{const i=document.createElement("style");i.textContent=t.cssText,this.renderRoot.appendChild(i)}))}render(){return st}}nt.finalized=!0,nt.render=(t,e,s)=>{if(!s||"object"!=typeof s||!s.scopeName)throw new Error("The `scopeName` option is required.");const n=s.scopeName,o=B.has(e),r=I&&11===e.nodeType&&!!e.host,a=r&&!V.has(n),h=a?document.createDocumentFragment():e;if(((t,e,s)=>{let n=B.get(e);void 0===n&&(i(e,e.firstChild),B.set(e,n=new M(Object.assign({templateFactory:P},s))),n.appendInto(e)),n.setValue(t),n.commit()})(t,h,Object.assign({templateFactory:L(n)},s)),a){const t=B.get(h);B.delete(h);const s=t.value instanceof w?t.value.template:void 0;R(n,h,s),i(e,e.firstChild),e.appendChild(h),B.set(e,t)}!o&&r&&window.ShadyCSS.styleElement(e.host)};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const ot=new WeakMap,rt=f(t=>i=>{if(!(i instanceof M))throw new Error("unsafeHTML can only be used in text bindings");const e=ot.get(i);if(void 0!==e&&x(t)&&t===e.value&&i.value===e.fragment)return;const s=document.createElement("template");s.innerHTML=t;const n=document.importNode(s.content,!0);i.setValue(n),ot.set(i,{value:t,fragment:n})});
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class at{constructor(t){this.classes=new Set,this.changed=!1,this.element=t;const i=(t.getAttribute("class")||"").split(/\s+/);for(const t of i)this.classes.add(t)}add(t){this.classes.add(t),this.changed=!0}remove(t){this.classes.delete(t),this.changed=!0}commit(){if(this.changed){let t="";this.classes.forEach(i=>t+=i+" "),this.element.setAttribute("class",t)}}}const ht=new WeakMap,lt=f(t=>i=>{if(!(i instanceof S)||i instanceof C||"class"!==i.committer.name||i.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");const{committer:e}=i,{element:s}=e;let n=ht.get(i);void 0===n&&(s.setAttribute("class",e.strings.join(" ")),ht.set(i,n=new Set));const o=s.classList||new at(s);n.forEach(i=>{i in t||(o.remove(i),n.delete(i))});for(const i in t){const e=t[i];e!=n.has(i)&&(e?(o.add(i),n.add(i)):(o.remove(i),n.delete(i)))}"function"==typeof o.commit&&o.commit()});function ct(t){var i,e;return"image"===t.post_hint?t.url:null!==(e=null===(i=dt(t))||void 0===i?void 0:i.url)&&void 0!==e?e:""}function dt(t){var i,e,s;const n="image"===t.post_hint;return ut(t)?function(t){const i=t.gallery_data.items[0],e=t.media_metadata[i.media_id];if(!e)return;let s=e.p.find(t=>t.x>300);s||(s=e.s);if(!s)return;return{url:s.u,width:s.x,height:s.y}}(t):n?null===(i=t.preview)||void 0===i?void 0:i.images[0].source:(null===(e=t.preview)||void 0===e?void 0:e.images[0].resolutions)?null===(s=t.preview)||void 0===s?void 0:s.images[0].source:void 0}function ut(t){return!!t.gallery_data}function pt(t){return(new DOMParser).parseFromString(t,"text/html").documentElement.textContent}var ft=function(t,i,e,s){for(var n,o=arguments.length,r=o<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r};let gt=class extends nt{constructor(){super(),this.subreddit&&this.makeQuery()}attributeChangedCallback(t,i,e){"subreddit"===t&&i!==e&&(this.subreddit=e,this.makeQuery(),this.fetchAbout())}async makeQuery(){var t;if(this.data=void 0,!this.subreddit)return;const i=await fetch(`https://www.reddit.com/r/${this.subreddit}.json`,{mode:"cors"}),e=await i.json();this.data=e.data,console.log(null===(t=this.data)||void 0===t?void 0:t.children.map(t=>t.data.title))}async fetchAbout(){if(this.about=void 0,!this.subreddit)return;const t=await fetch(`https://www.reddit.com/r/${this.subreddit}/about.json`,{mode:"cors"}),i=await t.json();this.about=i.data}static get styles(){return et`
      .posts {
        background-color: white;
        color: black;
      }

      .post {
        display: block;
        text-decoration: none;
        color: inherit;
      }

      .post-top {
        display: flex;
        flex-direction: row;
        padding: 12px 16px 0px;
      }

      .sr-icon {
        width: 32px;
        height: 32px;
        flex: none;
        margin-right: 4px;
        border-radius: 50px;
        border: 1px solid rgba(0, 0, 0, 0.2);
      }
      .no-icon {
        background-color: blueviolet;
      }
      .sr {
        flex: auto;
        font-size: 14px;
        line-height: 1em;
      }
      .sr .author {
        color: grey;
        font-size: 12px;
        line-height: 1;
      }
      .join {
        background: transparent;
        color: black;
        border-radius: 50px;
        border: 1.5px solid black;
        flex: none;
        font-weight: bold;
        font-size: 17px;
        line-height: 1em;
        text-align: center;
        text-indent: -3px;
        width: 20px;
        height: 20px;
        cursor: pointer;
      }

      .post-title {
        padding: 8px 16px;
        font-weight: bold;
        font-size: 16px;
      }

      .media {
        display: block;
        width: 100%;
      }

      .selftext {
        padding: 8px 16px;
        font-size: 14px;
        max-width: 100%;
        word-break: break-word;
      }

      .post-bottom {
        padding: 12px 12px 16px;
      }

      .post-bottom img {
        display: inline-block;
        width: 305px;
      }

      video {
        width: 100%;
      }
    `}onMouseOver(t){const i=this.renderRoot.querySelector(`video#${t}`);i&&i.play()}onMouseOut(t){const i=this.renderRoot.querySelector(`video#${t}`);i&&i.pause()}render(){var t;if(!this.data)return null;const i=(null===(t=this.about)||void 0===t?void 0:t.icon_img)||"https://www.redditstatic.com/icon_planet_2x.png";return U`<div class="posts">
      ${this.data.children.filter(t=>!t.data.stickied).map(t=>{var e,s;const n=t.data,o=dt(n);return U`<a
            class="post"
            target="_blank"
            href="https://reddit.com/${n.id}"
            @mouseover=${()=>this.onMouseOver(n.id)}
            @mouseout=${()=>this.onMouseOut(n.id)}
          >
            <div class="post-top">
              <img
                class=${lt({"sr-icon":!0,"no-icon":!(null===(e=this.about)||void 0===e?void 0:e.icon_img)})}
                src="${i}"
              />
              <div class="sr">
                r/${n.subreddit}<br /><span class="author"
                  >u/${n.author}</span
                >
              </div>
              <button class="join" title="join r/${n.subreddit}">+</button>
            </div>
            <div class="post-title">
              ${rt(n.title)}
            </div>
            ${n.selftext_html?U`<div class="selftext">
                  ${rt(pt(n.selftext_html))}
                </div>`:""}
            ${"hosted:video"===n.post_hint?U`<video
                  id=${n.id}
                  src=${(null===(s=n.media)||void 0===s?void 0:s.reddit_video.fallback_url)||""}
                  muted
                ></video>`:o?rt(`<img class="media" src=${o.url} />`):""}
            <div class="post-bottom">
              <img src="fake-post-meta.png" />
            </div>
          </a>`})}
    </div>`}};ft([K({attribute:!0,type:String})],gt.prototype,"subreddit",void 0),ft([K({attribute:!0,type:Object})],gt.prototype,"data",void 0),ft([K({attribute:!0,type:Object})],gt.prototype,"about",void 0),gt=ft([D("subreddit-view")],gt);class vt{constructor(t,i){this.original=t,this.clamped=i}}function mt(t,i){const e=window;i||(i={clamp:"auto",truncationChar:"…",splitOnChars:[".","-","–","—"," "]});const s={clamp:i.clamp||"auto",splitOnChars:i.splitOnChars||[".","-","–","—"," "],truncationChar:i.truncationChar||"…",truncationHTML:i.truncationHTML};let n,o,r=s.splitOnChars.slice(0),a=r[0];t.style;const h=t.innerHTML;let l=s.clamp;const c=l.indexOf&&(l.indexOf("px")>-1||l.indexOf("em")>-1);let d,u;function p(t,i){return e.getComputedStyle(t).getPropertyValue(i)}function f(i){const e=i||t.clientHeight,s=g(t);return Math.max(Math.floor(e/s),0)}function g(t){if(null==i?void 0:i.lineHeight)return i.lineHeight;let e=p(t,"line-height");return"normal"===e&&(e=1.1*parseFloat(parseFloat(p(t,"font-size")).toFixed(0))),parseFloat(parseFloat(e).toFixed(0))}function v(t){return Math.max(t.scrollHeight,t.clientHeight)-4}function m(i){if(i.lastChild)return i.lastChild.children&&i.lastChild.children.length>0?m(Array.prototype.slice.call(i.children).pop()):i.lastChild&&i.lastChild.nodeValue&&""!==i.lastChild.nodeValue&&i.lastChild.nodeValue!==s.truncationChar?i.lastChild:i.lastChild.nodeValue?i.lastChild&&i.lastChild.parentNode&&i.lastChild.nodeValue===s.truncationChar?(i.lastChild.parentNode.removeChild(i.lastChild),m(t)):i:null!==i.lastChild.firstChild&&i.lastChild.firstChild.nodeValue!==s.truncationChar||!i.lastChild.parentNode||(i.lastChild.parentNode.removeChild(i.lastChild),i.children&&0!==i.children.length||!i.parentNode)?3===i.lastChild.nodeType?i.lastChild:m(i.lastChild):(i.parentNode.removeChild(i),m(t))}function w(t,i){t.nodeValue=i+s.truncationChar}s.truncationHTML&&(d=document.createElement("span"),d.innerHTML=s.truncationHTML),"auto"===l?l=f().toString():c&&(l=f(parseInt(l,10)).toString());const b=(y=Number(l),g(t)*y);var y;return b<v(t)&&(u=function i(e,h){if(!e||!h||!e.nodeValue)return;if(e.nodeValue.trim().endsWith(s.truncationChar)||w(e,e.nodeValue),v(t)<=h)return t.innerHTML;const l=e.nodeValue.replace(s.truncationChar,"");if(n||(a=r.length>0?r.shift():"",n=l.split(a)),n.length>1?(o=n.pop(),w(e,n.join(a))):n=null,d&&(e.nodeValue=e.nodeValue.replace(s.truncationChar,""),t.innerHTML=e.nodeValue+" "+d.innerHTML+s.truncationChar),n){if(t.clientHeight<=h){if(!(r.length>=0&&""!==a))return t.innerHTML;w(e,n.join(a)+a+o),n=null}}else""===a&&(w(e,""),e=m(t),r=s.splitOnChars.slice(0),a=r[0],n=null,o=null);return i(e,h)}(m(t),b)),new vt(h,u)}var wt=()=>{return et`
  :host {
    --tile-size: 156px;
    --gradient-1: linear-gradient(97.51deg, #ff4400 -7.08%, #ffb330 116.57%);
    --gradient-2: linear-gradient(89.94deg, #c274f0 0%, #f14fb0 100%);
    --gradient-3: linear-gradient(
      89.94deg,
      #51b9ff 0%,
      #7785ff 52.6%,
      #b279ff 73.96%,
      #ff81ed 100%
    );
    --gradient-4: linear-gradient(97.51deg, #048de9 -7.08%, #0fc0d2 116.57%);
    --gradient-5: linear-gradient(71.53deg, #c30d47 20.89%, #fe4301 121.62%);
    --gradient-6: linear-gradient(91.64deg, #f5441f -10.49%, #fc7519 109.75%);
    --gradient-7: linear-gradient(91.64deg, #5b3dc1 -10.49%, #aa48c0 109.75%);
    --gradient-8: linear-gradient(91.64deg, #3353b8 -10.49%, #685cfc 109.75%);
  }
  .grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-auto-rows: calc((var(--tile-size) + 16px) / ${4});
    background-color: #fff;
    padding: 8px;
    /* grid-gap: 16px; */
    grid-auto-flow: dense;
  }

  .post-tile {
    overflow: hidden;
    position: relative;
    cursor: pointer;
    border-radius: 16px;
    margin: 8px;
    color: white;
    box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.15);

    grid-row-end: span 4;
  }

  .post-tile-text {
    display: flex;
    flex-direction: column;
    padding: 16px;
    font-size: 12px;
    line-height: 17px;
    text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25);
    text-overflow: ellipsis;
    margin: 0;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }

  .shim {
    background-color: rgba(0, 0, 0, 0.25);
  }

  .post-text-only .post-tile-text {
    box-shadow: unset;
    background-color: transparent;
  }

  .loader {
    grid-column-end: span 2;
  }

  .post-tile-image {
    background-repeat: no-repeat;
    background-size: cover;
    background-position: top center;
    /* height: var(--tile-size); */
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }
  .post-text-only {
    background-image: var(--gradient-1);
  }

  .post-tile:nth-child(8n).post-text-only {
    background-image: var(--gradient-2);
  }
  .post-tile:nth-child(8n + 1).post-text-only {
    background-image: var(--gradient-3);
  }
  .post-tile:nth-child(8n + 2).post-text-only {
    background-image: var(--gradient-4);
  }
  .post-tile:nth-child(8n + 3).post-text-only {
    background-image: var(--gradient-5);
  }
  .post-tile:nth-child(8n + 4).post-text-only {
    background-image: var(--gradient-6);
  }
  .post-tile:nth-child(8n + 5).post-text-only {
    background-image: var(--gradient-7);
  }
  .post-tile:nth-child(8n + 6).post-text-only {
    background-image: var(--gradient-8);
  }

  .hidden {
    display: none;
  }

  .subreddit {
    font-weight: normal;
    line-height: 1.2em;
    margin-top: 16px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: none;
  }

  .post-text-only .post-tile-text .post-tile-title {
    text-shadow: none;
  }

  .spacer {
    flex: auto;
  }

  .gallery-icon {
    position: absolute;
    top: 10px;
    right: 6px;
    width: 28px;
    height: 28px;
  }
  .video-icon {
    position: absolute;
    top: 10px;
    right: 10px;
    width: 20px;
    height: 18px;
  }

  .post-tile-title {
    margin: 0;
    font-weight: 600;
    flex: none;
    vertical-align: bottom;
  }

  .post-tile-body {
    margin-top: 8px;
    font-weight: normal;
  }

  .post-tile-large {
    grid-column-end: span 2;
    /* grid-row-end: span 16; */
  }
  ${t=function(t){const i=Array(t);for(var e=0;e<t;e++)i[e]=e;return i}(17).map(t=>`\n    .span${t} {\n      grid-row-end: span ${t};\n    }\n  `).join("\n"),new it(String(t),tt)}

  .md a {
    color: inherit;
  }
`;var t};var bt=function(t,i,e,s){for(var n,o=arguments.length,r=o<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r};let yt=class extends nt{constructor(){super(...arguments),this.isImage=!1,this.showshim=!0,this.showtitle=!0,this.showsubreddit=!0,this.isClamped=!1}static get styles(){return wt()}updated(){var t;this.titleElem&&!this.isClamped&&mt(this.titleElem,{clamp:(null===(t=this.post)||void 0===t?void 0:t.selftext)?"3":"5",lineHeight:17}),this.bodyElem&&!this.isClamped&&(mt(this.bodyElem,{clamp:"5",lineHeight:17}),this.isClamped=!0)}render(){return this.post?this._renderText(this.post,this.isImage):""}_renderText(t,i=!1){var e,s,n;const o=null!==(n=function(t){var i,e;const s=document.createElement("div");s.innerHTML=t;const n=null===(i=s.querySelector(".md"))||void 0===i?void 0:i.firstElementChild;if(n)return null===(e=n.textContent)||void 0===e?void 0:e.toString()}(null!==(s=pt(null!==(e=t.selftext_html)&&void 0!==e?e:""))&&void 0!==s?s:""))&&void 0!==n?n:"";return U`<div
      class=${lt({"post-tile-text":!0,shim:i&&this.showshim})}
    >
      <h3
        class=${lt({"post-tile-title":!0,hidden:i&&!this.showtitle})}
        title=${t.title}
      >
        ${pt(t.title)}
      </h3>
      ${(null==o?void 0:o.length)?U`<div
            class=${lt({"post-tile-body":!0,hidden:i&&!this.showtitle})}
          >
            ${rt(o)}
          </div>`:""}
      <div class="spacer"></div>
      <div
        class=${lt({subreddit:!0,hidden:i&&!this.showsubreddit})}
      >
        r/${t.subreddit}
      </div>
    </div>`}};bt([K({attribute:!0,type:Object})],yt.prototype,"post",void 0),bt([K({attribute:!0,type:Boolean})],yt.prototype,"isImage",void 0),bt([Q(".post-tile-title")],yt.prototype,"titleElem",void 0),bt([Q(".post-tile-body")],yt.prototype,"bodyElem",void 0),yt=bt([D("tile-text")],yt);var xt=function(t,i,e,s){for(var n,o=arguments.length,r=o<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r};const $t={gaming:"gaming+halo+PS4+rpg+iosgaming+gamingsuggestions+computers+ShouldIbuythisgame+MechanicalKeyboards+Monitors+hardwareswap+OpTicGaming+DotA2+pcmasterrace+GirlGamers+gamecollecting+IndieGaming+Fallout+Games+nintendo+SuggestALaptop+Steam+Competitiveoverwatch+wow+funny",music:'Music+Vaporwave+Guitar+MusicEd+WeAreTheMusicMakers+indieheads+Metal+LetsTalkMusic+DeepIntoYouTube+musictheory+Metalcore+CasualConversation+ListeningHeads+AskReddit+woahdude+composer+poppunkers+anime+ThisIsOurMusic+unpopularopinion+AdviceAnimals+BABYMETAL+gaming+EDM+technology"',sports:"sports+soccer+todayilearned+starcraft+baseball+esports+reddevils+AskReddit+nfl+CFB+nba+hockey+leagueoflegends+ABraThatFits+funny+formula1+MMA+Patriots+gaming+cordcutters+dogecoin+granturismo+Showerthoughts+unpopularopinion+MLS",beauty:"beauty+AsianBeauty+OldSchoolCool+funny+MUAontheCheap+makeupexchange+KoreanBeauty+pics+Porsche+RandomActsofMakeup+MakeupAddiction+disney+BeautyAddiction+BeautyBoxes+AskWomen+succulents+BeautyGuruChatter+beautytalkph+houseplants+aww+ShinyPokemon+cats+gardening+FreeKarma4U+gaming"};let kt=class extends nt{constructor(){super(),this.pending=!1,this.showtitle=!1,this.showsubreddit=!1,this.showshim=!1,this.largeKarmaThreshold=2e4,this.largeCommentThreshold=100,this.loaderRegistered=!1,this.posts=[]}connectedCallback(){super.connectedCallback(),this.makeQuery()}updated(){this.observer||(this.observer=new IntersectionObserver(t=>{var i;console.log({entries:t}),t[0].isIntersecting&&(console.log(`load more ${this.afterId}`),this._loader&&(null===(i=this.observer)||void 0===i||i.unobserve(this._loader)),this.pending||this.makeQuery())},{root:document.querySelector("main"),rootMargin:"100px"})),this._loader&&this.afterId&&setTimeout(()=>{var t;this._loader&&(null===(t=this.observer)||void 0===t||t.observe(this._loader))},1e3)}static get styles(){return wt()}onTileClick(t){this.subreddit=t,this.setAttribute("topic","")}attributeChangedCallback(t,i,e){if(console.log(arguments),"topic"===t&&i!==e)return this.topic=e,void(this.topic&&(this.posts=[],this.afterId=void 0,this.subreddit=void 0,this.makeQuery()));t.includes("show")&&(this[t]="true"===e,this.showshim=this.showsubreddit||this.showtitle)}async makeQuery(){var t,i,e;if(!this.topic)return;if(this.pending)return;this.data=void 0,console.log(this.topic),this.pending=!0;const s=await fetch(`https://www.reddit.com/r/${$t[this.topic]}.json?after=${null!==(t=this.afterId)&&void 0!==t?t:""}`,{mode:"cors"}),n=await s.json();this.pending=!1,this.data=n.data;const o=null!==(e=null===(i=this.data)||void 0===i?void 0:i.children.map(t=>t.data))&&void 0!==e?e:[];console.log(o),this.posts=this.posts.concat(o.filter(t=>"link"!==t.post_hint)),this.afterId=n.data.after}render(){return this.subreddit?U`<subreddit-view
        subreddit=${this.subreddit}
      ></subreddit-view>`:U`
      <div class="grid">
        ${this._renderTiles()}
        ${0===this.posts.length?"":this._renderSpacers()}
      </div>
    `}_renderTiles(){return this.posts.map(t=>!!ct(t)?this._renderMediaTile(t):this._renderTextTile(t))}_renderSpacers(){return U`<div class="post-tile post-text-only span3"></div>
      <div class="post-tile post-text-only span2"></div>
      ${Array(4).fill(1).map(()=>U`<div class="post-tile post-text-only span1"></div>`)}
      <div class="loader"></div>`}_renderMediaTile(t){const i=t.ups>this.largeKarmaThreshold||t.num_comments/t.ups>.1,e=ct(t),s=`url('${e}')`,n=function(t){const i=dt(t);return i?i.height/i.width:1}(t),o=Math.round(4*n)*(i?2:1),r=`span${a=o,h=Math.round(4/3),l=8*(i?2:1),Math.min(Math.max(a,h),l)}`;var a,h,l;return U`<div
      @click=${()=>this.onTileClick(t.subreddit)}
      class=${lt({"post-tile":!0,[r]:!0,"post-tile-large":i})}
    >
      ${e?rt(`<div class="post-tile-image" style="background-image: ${s}" />`):""}
      ${this.showshim?U`<tile-text .post=${t} isImage></tile-text>`:""}
      ${ut(t)?U`<img class="gallery-icon" src="gallery.png" />`:""}
      ${function(t){var i;return null===(i=t.post_hint)||void 0===i?void 0:i.includes("video")}(t)?U`<img class="video-icon" src="video.png" />`:""}
    </div>`}_renderTextTile(t){const i=t.ups>this.largeKarmaThreshold||t.title.length>100;return U`<div
      @click=${()=>this.onTileClick(t.subreddit)}
      class=${lt({"post-tile":!0,span6:!!t.selftext,span4:!t.selftext,"post-tile-large":i,"post-text-only":!0})}
    >
      <tile-text .post=${t} .isimage=${!1}></tile-text>
    </div>`}_renderText(t,i=!1){return U`<tile-text .post=${t} .isimage=${i} />`}};xt([K({attribute:!0,type:String})],kt.prototype,"topic",void 0),xt([K({attribute:!0,type:String})],kt.prototype,"subreddit",void 0),xt([K({attribute:!0,type:Object})],kt.prototype,"data",void 0),xt([K({attribute:!0,type:Boolean})],kt.prototype,"showtitle",void 0),xt([K({attribute:!0,type:Boolean})],kt.prototype,"showsubreddit",void 0),xt([K({attribute:!0,type:Boolean})],kt.prototype,"showshim",void 0),xt([Q(".loader")],kt.prototype,"_loader",void 0),kt=xt([D("explore-page")],kt),async function(){const t=document.querySelector("explore-page");document.querySelectorAll("button.pill").forEach(i=>{i.addEventListener("click",()=>{const e=i.innerHTML.toLowerCase();console.log({topic:e}),t.setAttribute("topic",e)})}),document.querySelectorAll("input.checkbox").forEach(i=>{const e=i;e.addEventListener("change",()=>{switch(e.id){case"showtitle":return t.setAttribute("showtitle",e.checked+""),void t.setAttribute("showsubreddit",e.checked+"")}})})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi9kb20uanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3RlbXBsYXRlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi9tb2RpZnktdGVtcGxhdGUuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL2RpcmVjdGl2ZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvcGFydC5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvdGVtcGxhdGUtaW5zdGFuY2UuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3RlbXBsYXRlLXJlc3VsdC5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvcGFydHMuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3RlbXBsYXRlLWZhY3RvcnkuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3JlbmRlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvZGVmYXVsdC10ZW1wbGF0ZS1wcm9jZXNzb3IuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGl0LWh0bWwuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3NoYWR5LXJlbmRlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtZWxlbWVudC9saWIvdXBkYXRpbmctZWxlbWVudC5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtZWxlbWVudC9saWIvZGVjb3JhdG9ycy5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtZWxlbWVudC9saWIvY3NzLXRhZy5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtZWxlbWVudC9saXQtZWxlbWVudC5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9kaXJlY3RpdmVzL3Vuc2FmZS1odG1sLmpzIiwiLi4vbm9kZV9tb2R1bGVzL2xpdC1odG1sL2RpcmVjdGl2ZXMvY2xhc3MtbWFwLmpzIiwiLi4vbGliL2NvbXBvbmVudHMvaGVscGVycy5qcyIsIi4uL2xpYi9jb21wb25lbnRzL3N1YnJlZGRpdC12aWV3LmpzIiwiLi4vbGliL3ZlbmRvci9jbGFtcHkuanMiLCIuLi9saWIvY29tcG9uZW50cy9leHBsb3JlLXN0eWxlcy5qcyIsIi4uL2xpYi9jb21wb25lbnRzL3R5cGVzLmpzIiwiLi4vbGliL2NvbXBvbmVudHMvdGlsZS10ZXh0LmpzIiwiLi4vbGliL2NvbXBvbmVudHMvZXhwbG9yZS1wYWdlLmpzIiwiLi4vbGliL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICogVHJ1ZSBpZiB0aGUgY3VzdG9tIGVsZW1lbnRzIHBvbHlmaWxsIGlzIGluIHVzZS5cbiAqL1xuZXhwb3J0IGNvbnN0IGlzQ0VQb2x5ZmlsbCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgd2luZG93LmN1c3RvbUVsZW1lbnRzICE9IG51bGwgJiZcbiAgICB3aW5kb3cuY3VzdG9tRWxlbWVudHMucG9seWZpbGxXcmFwRmx1c2hDYWxsYmFjayAhPT1cbiAgICAgICAgdW5kZWZpbmVkO1xuLyoqXG4gKiBSZXBhcmVudHMgbm9kZXMsIHN0YXJ0aW5nIGZyb20gYHN0YXJ0YCAoaW5jbHVzaXZlKSB0byBgZW5kYCAoZXhjbHVzaXZlKSxcbiAqIGludG8gYW5vdGhlciBjb250YWluZXIgKGNvdWxkIGJlIHRoZSBzYW1lIGNvbnRhaW5lciksIGJlZm9yZSBgYmVmb3JlYC4gSWZcbiAqIGBiZWZvcmVgIGlzIG51bGwsIGl0IGFwcGVuZHMgdGhlIG5vZGVzIHRvIHRoZSBjb250YWluZXIuXG4gKi9cbmV4cG9ydCBjb25zdCByZXBhcmVudE5vZGVzID0gKGNvbnRhaW5lciwgc3RhcnQsIGVuZCA9IG51bGwsIGJlZm9yZSA9IG51bGwpID0+IHtcbiAgICB3aGlsZSAoc3RhcnQgIT09IGVuZCkge1xuICAgICAgICBjb25zdCBuID0gc3RhcnQubmV4dFNpYmxpbmc7XG4gICAgICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoc3RhcnQsIGJlZm9yZSk7XG4gICAgICAgIHN0YXJ0ID0gbjtcbiAgICB9XG59O1xuLyoqXG4gKiBSZW1vdmVzIG5vZGVzLCBzdGFydGluZyBmcm9tIGBzdGFydGAgKGluY2x1c2l2ZSkgdG8gYGVuZGAgKGV4Y2x1c2l2ZSksIGZyb21cbiAqIGBjb250YWluZXJgLlxuICovXG5leHBvcnQgY29uc3QgcmVtb3ZlTm9kZXMgPSAoY29udGFpbmVyLCBzdGFydCwgZW5kID0gbnVsbCkgPT4ge1xuICAgIHdoaWxlIChzdGFydCAhPT0gZW5kKSB7XG4gICAgICAgIGNvbnN0IG4gPSBzdGFydC5uZXh0U2libGluZztcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKHN0YXJ0KTtcbiAgICAgICAgc3RhcnQgPSBuO1xuICAgIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kb20uanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBBbiBleHByZXNzaW9uIG1hcmtlciB3aXRoIGVtYmVkZGVkIHVuaXF1ZSBrZXkgdG8gYXZvaWQgY29sbGlzaW9uIHdpdGhcbiAqIHBvc3NpYmxlIHRleHQgaW4gdGVtcGxhdGVzLlxuICovXG5leHBvcnQgY29uc3QgbWFya2VyID0gYHt7bGl0LSR7U3RyaW5nKE1hdGgucmFuZG9tKCkpLnNsaWNlKDIpfX19YDtcbi8qKlxuICogQW4gZXhwcmVzc2lvbiBtYXJrZXIgdXNlZCB0ZXh0LXBvc2l0aW9ucywgbXVsdGktYmluZGluZyBhdHRyaWJ1dGVzLCBhbmRcbiAqIGF0dHJpYnV0ZXMgd2l0aCBtYXJrdXAtbGlrZSB0ZXh0IHZhbHVlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IG5vZGVNYXJrZXIgPSBgPCEtLSR7bWFya2VyfS0tPmA7XG5leHBvcnQgY29uc3QgbWFya2VyUmVnZXggPSBuZXcgUmVnRXhwKGAke21hcmtlcn18JHtub2RlTWFya2VyfWApO1xuLyoqXG4gKiBTdWZmaXggYXBwZW5kZWQgdG8gYWxsIGJvdW5kIGF0dHJpYnV0ZSBuYW1lcy5cbiAqL1xuZXhwb3J0IGNvbnN0IGJvdW5kQXR0cmlidXRlU3VmZml4ID0gJyRsaXQkJztcbi8qKlxuICogQW4gdXBkYXRhYmxlIFRlbXBsYXRlIHRoYXQgdHJhY2tzIHRoZSBsb2NhdGlvbiBvZiBkeW5hbWljIHBhcnRzLlxuICovXG5leHBvcnQgY2xhc3MgVGVtcGxhdGUge1xuICAgIGNvbnN0cnVjdG9yKHJlc3VsdCwgZWxlbWVudCkge1xuICAgICAgICB0aGlzLnBhcnRzID0gW107XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IG5vZGVzVG9SZW1vdmUgPSBbXTtcbiAgICAgICAgY29uc3Qgc3RhY2sgPSBbXTtcbiAgICAgICAgLy8gRWRnZSBuZWVkcyBhbGwgNCBwYXJhbWV0ZXJzIHByZXNlbnQ7IElFMTEgbmVlZHMgM3JkIHBhcmFtZXRlciB0byBiZSBudWxsXG4gICAgICAgIGNvbnN0IHdhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIoZWxlbWVudC5jb250ZW50LCAxMzMgLyogTm9kZUZpbHRlci5TSE9XX3tFTEVNRU5UfENPTU1FTlR8VEVYVH0gKi8sIG51bGwsIGZhbHNlKTtcbiAgICAgICAgLy8gS2VlcHMgdHJhY2sgb2YgdGhlIGxhc3QgaW5kZXggYXNzb2NpYXRlZCB3aXRoIGEgcGFydC4gV2UgdHJ5IHRvIGRlbGV0ZVxuICAgICAgICAvLyB1bm5lY2Vzc2FyeSBub2RlcywgYnV0IHdlIG5ldmVyIHdhbnQgdG8gYXNzb2NpYXRlIHR3byBkaWZmZXJlbnQgcGFydHNcbiAgICAgICAgLy8gdG8gdGhlIHNhbWUgaW5kZXguIFRoZXkgbXVzdCBoYXZlIGEgY29uc3RhbnQgbm9kZSBiZXR3ZWVuLlxuICAgICAgICBsZXQgbGFzdFBhcnRJbmRleCA9IDA7XG4gICAgICAgIGxldCBpbmRleCA9IC0xO1xuICAgICAgICBsZXQgcGFydEluZGV4ID0gMDtcbiAgICAgICAgY29uc3QgeyBzdHJpbmdzLCB2YWx1ZXM6IHsgbGVuZ3RoIH0gfSA9IHJlc3VsdDtcbiAgICAgICAgd2hpbGUgKHBhcnRJbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHdhbGtlci5uZXh0Tm9kZSgpO1xuICAgICAgICAgICAgaWYgKG5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSd2ZSBleGhhdXN0ZWQgdGhlIGNvbnRlbnQgaW5zaWRlIGEgbmVzdGVkIHRlbXBsYXRlIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgLy8gQmVjYXVzZSB3ZSBzdGlsbCBoYXZlIHBhcnRzICh0aGUgb3V0ZXIgZm9yLWxvb3ApLCB3ZSBrbm93OlxuICAgICAgICAgICAgICAgIC8vIC0gVGhlcmUgaXMgYSB0ZW1wbGF0ZSBpbiB0aGUgc3RhY2tcbiAgICAgICAgICAgICAgICAvLyAtIFRoZSB3YWxrZXIgd2lsbCBmaW5kIGEgbmV4dE5vZGUgb3V0c2lkZSB0aGUgdGVtcGxhdGVcbiAgICAgICAgICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMSAvKiBOb2RlLkVMRU1FTlRfTk9ERSAqLykge1xuICAgICAgICAgICAgICAgIGlmIChub2RlLmhhc0F0dHJpYnV0ZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gbm9kZS5hdHRyaWJ1dGVzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGxlbmd0aCB9ID0gYXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgLy8gUGVyXG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9OYW1lZE5vZGVNYXAsXG4gICAgICAgICAgICAgICAgICAgIC8vIGF0dHJpYnV0ZXMgYXJlIG5vdCBndWFyYW50ZWVkIHRvIGJlIHJldHVybmVkIGluIGRvY3VtZW50IG9yZGVyLlxuICAgICAgICAgICAgICAgICAgICAvLyBJbiBwYXJ0aWN1bGFyLCBFZGdlL0lFIGNhbiByZXR1cm4gdGhlbSBvdXQgb2Ygb3JkZXIsIHNvIHdlIGNhbm5vdFxuICAgICAgICAgICAgICAgICAgICAvLyBhc3N1bWUgYSBjb3JyZXNwb25kZW5jZSBiZXR3ZWVuIHBhcnQgaW5kZXggYW5kIGF0dHJpYnV0ZSBpbmRleC5cbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZHNXaXRoKGF0dHJpYnV0ZXNbaV0ubmFtZSwgYm91bmRBdHRyaWJ1dGVTdWZmaXgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY291bnQtLSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgdGVtcGxhdGUgbGl0ZXJhbCBzZWN0aW9uIGxlYWRpbmcgdXAgdG8gdGhlIGZpcnN0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBleHByZXNzaW9uIGluIHRoaXMgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJpbmdGb3JQYXJ0ID0gc3RyaW5nc1twYXJ0SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgYXR0cmlidXRlIG5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBsYXN0QXR0cmlidXRlTmFtZVJlZ2V4LmV4ZWMoc3RyaW5nRm9yUGFydClbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBjb3JyZXNwb25kaW5nIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxsIGJvdW5kIGF0dHJpYnV0ZXMgaGF2ZSBoYWQgYSBzdWZmaXggYWRkZWQgaW5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRlbXBsYXRlUmVzdWx0I2dldEhUTUwgdG8gb3B0IG91dCBvZiBzcGVjaWFsIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxpbmcuIFRvIGxvb2sgdXAgdGhlIGF0dHJpYnV0ZSB2YWx1ZSB3ZSBhbHNvIG5lZWQgdG8gYWRkXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgc3VmZml4LlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlTG9va3VwTmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKSArIGJvdW5kQXR0cmlidXRlU3VmZml4O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlVmFsdWUgPSBub2RlLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVMb29rdXBOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZUxvb2t1cE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhdGljcyA9IGF0dHJpYnV0ZVZhbHVlLnNwbGl0KG1hcmtlclJlZ2V4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFydHMucHVzaCh7IHR5cGU6ICdhdHRyaWJ1dGUnLCBpbmRleCwgbmFtZSwgc3RyaW5nczogc3RhdGljcyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRJbmRleCArPSBzdGF0aWNzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1RFTVBMQVRFJykge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBub2RlLmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMyAvKiBOb2RlLlRFWFRfTk9ERSAqLykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBub2RlLmRhdGE7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuaW5kZXhPZihtYXJrZXIpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJpbmdzID0gZGF0YS5zcGxpdChtYXJrZXJSZWdleCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RJbmRleCA9IHN0cmluZ3MubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgdGV4dCBub2RlIGZvciBlYWNoIGxpdGVyYWwgc2VjdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyBUaGVzZSBub2RlcyBhcmUgYWxzbyB1c2VkIGFzIHRoZSBtYXJrZXJzIGZvciBub2RlIHBhcnRzXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGFzdEluZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbnNlcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcyA9IHN0cmluZ3NbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocyA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQgPSBjcmVhdGVNYXJrZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gbGFzdEF0dHJpYnV0ZU5hbWVSZWdleC5leGVjKHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCAhPT0gbnVsbCAmJiBlbmRzV2l0aChtYXRjaFsyXSwgYm91bmRBdHRyaWJ1dGVTdWZmaXgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBzLnNsaWNlKDAsIG1hdGNoLmluZGV4KSArIG1hdGNoWzFdICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoWzJdLnNsaWNlKDAsIC1ib3VuZEF0dHJpYnV0ZVN1ZmZpeC5sZW5ndGgpICsgbWF0Y2hbM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShpbnNlcnQsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJ0cy5wdXNoKHsgdHlwZTogJ25vZGUnLCBpbmRleDogKytpbmRleCB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIHRleHQsIHdlIG11c3QgaW5zZXJ0IGEgY29tbWVudCB0byBtYXJrIG91ciBwbGFjZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gRWxzZSwgd2UgY2FuIHRydXN0IGl0IHdpbGwgc3RpY2sgYXJvdW5kIGFmdGVyIGNsb25pbmcuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHJpbmdzW2xhc3RJbmRleF0gPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNyZWF0ZU1hcmtlcigpLCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzVG9SZW1vdmUucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuZGF0YSA9IHN0cmluZ3NbbGFzdEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGEgcGFydCBmb3IgZWFjaCBtYXRjaCBmb3VuZFxuICAgICAgICAgICAgICAgICAgICBwYXJ0SW5kZXggKz0gbGFzdEluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT09IDggLyogTm9kZS5DT01NRU5UX05PREUgKi8pIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5kYXRhID09PSBtYXJrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYSBuZXcgbWFya2VyIG5vZGUgdG8gYmUgdGhlIHN0YXJ0Tm9kZSBvZiB0aGUgUGFydCBpZiBhbnkgb2ZcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGZvbGxvd2luZyBhcmUgdHJ1ZTpcbiAgICAgICAgICAgICAgICAgICAgLy8gICogV2UgZG9uJ3QgaGF2ZSBhIHByZXZpb3VzU2libGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyAgKiBUaGUgcHJldmlvdXNTaWJsaW5nIGlzIGFscmVhZHkgdGhlIHN0YXJ0IG9mIGEgcHJldmlvdXMgcGFydFxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5wcmV2aW91c1NpYmxpbmcgPT09IG51bGwgfHwgaW5kZXggPT09IGxhc3RQYXJ0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNyZWF0ZU1hcmtlcigpLCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsYXN0UGFydEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFydHMucHVzaCh7IHR5cGU6ICdub2RlJywgaW5kZXggfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYSBuZXh0U2libGluZywga2VlcCB0aGlzIG5vZGUgc28gd2UgaGF2ZSBhbiBlbmQuXG4gICAgICAgICAgICAgICAgICAgIC8vIEVsc2UsIHdlIGNhbiByZW1vdmUgaXQgdG8gc2F2ZSBmdXR1cmUgY29zdHMuXG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLm5leHRTaWJsaW5nID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmRhdGEgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzVG9SZW1vdmUucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4LS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGFydEluZGV4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IC0xO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKGkgPSBub2RlLmRhdGEuaW5kZXhPZihtYXJrZXIsIGkgKyAxKSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21tZW50IG5vZGUgaGFzIGEgYmluZGluZyBtYXJrZXIgaW5zaWRlLCBtYWtlIGFuIGluYWN0aXZlIHBhcnRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBiaW5kaW5nIHdvbid0IHdvcmssIGJ1dCBzdWJzZXF1ZW50IGJpbmRpbmdzIHdpbGxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gKGp1c3RpbmZhZ25hbmkpOiBjb25zaWRlciB3aGV0aGVyIGl0J3MgZXZlbiB3b3J0aCBpdCB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBiaW5kaW5ncyBpbiBjb21tZW50cyB3b3JrXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnRzLnB1c2goeyB0eXBlOiAnbm9kZScsIGluZGV4OiAtMSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRJbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFJlbW92ZSB0ZXh0IGJpbmRpbmcgbm9kZXMgYWZ0ZXIgdGhlIHdhbGsgdG8gbm90IGRpc3R1cmIgdGhlIFRyZWVXYWxrZXJcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIG5vZGVzVG9SZW1vdmUpIHtcbiAgICAgICAgICAgIG4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNvbnN0IGVuZHNXaXRoID0gKHN0ciwgc3VmZml4KSA9PiB7XG4gICAgY29uc3QgaW5kZXggPSBzdHIubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aDtcbiAgICByZXR1cm4gaW5kZXggPj0gMCAmJiBzdHIuc2xpY2UoaW5kZXgpID09PSBzdWZmaXg7XG59O1xuZXhwb3J0IGNvbnN0IGlzVGVtcGxhdGVQYXJ0QWN0aXZlID0gKHBhcnQpID0+IHBhcnQuaW5kZXggIT09IC0xO1xuLy8gQWxsb3dzIGBkb2N1bWVudC5jcmVhdGVDb21tZW50KCcnKWAgdG8gYmUgcmVuYW1lZCBmb3IgYVxuLy8gc21hbGwgbWFudWFsIHNpemUtc2F2aW5ncy5cbmV4cG9ydCBjb25zdCBjcmVhdGVNYXJrZXIgPSAoKSA9PiBkb2N1bWVudC5jcmVhdGVDb21tZW50KCcnKTtcbi8qKlxuICogVGhpcyByZWdleCBleHRyYWN0cyB0aGUgYXR0cmlidXRlIG5hbWUgcHJlY2VkaW5nIGFuIGF0dHJpYnV0ZS1wb3NpdGlvblxuICogZXhwcmVzc2lvbi4gSXQgZG9lcyB0aGlzIGJ5IG1hdGNoaW5nIHRoZSBzeW50YXggYWxsb3dlZCBmb3IgYXR0cmlidXRlc1xuICogYWdhaW5zdCB0aGUgc3RyaW5nIGxpdGVyYWwgZGlyZWN0bHkgcHJlY2VkaW5nIHRoZSBleHByZXNzaW9uLCBhc3N1bWluZyB0aGF0XG4gKiB0aGUgZXhwcmVzc2lvbiBpcyBpbiBhbiBhdHRyaWJ1dGUtdmFsdWUgcG9zaXRpb24uXG4gKlxuICogU2VlIGF0dHJpYnV0ZXMgaW4gdGhlIEhUTUwgc3BlYzpcbiAqIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9zeW50YXguaHRtbCNlbGVtZW50cy1hdHRyaWJ1dGVzXG4gKlxuICogXCIgXFx4MDlcXHgwYVxceDBjXFx4MGRcIiBhcmUgSFRNTCBzcGFjZSBjaGFyYWN0ZXJzOlxuICogaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2luZnJhc3RydWN0dXJlLmh0bWwjc3BhY2UtY2hhcmFjdGVyc1xuICpcbiAqIFwiXFwwLVxceDFGXFx4N0YtXFx4OUZcIiBhcmUgVW5pY29kZSBjb250cm9sIGNoYXJhY3RlcnMsIHdoaWNoIGluY2x1ZGVzIGV2ZXJ5XG4gKiBzcGFjZSBjaGFyYWN0ZXIgZXhjZXB0IFwiIFwiLlxuICpcbiAqIFNvIGFuIGF0dHJpYnV0ZSBpczpcbiAqICAqIFRoZSBuYW1lOiBhbnkgY2hhcmFjdGVyIGV4Y2VwdCBhIGNvbnRyb2wgY2hhcmFjdGVyLCBzcGFjZSBjaGFyYWN0ZXIsICgnKSxcbiAqICAgIChcIiksIFwiPlwiLCBcIj1cIiwgb3IgXCIvXCJcbiAqICAqIEZvbGxvd2VkIGJ5IHplcm8gb3IgbW9yZSBzcGFjZSBjaGFyYWN0ZXJzXG4gKiAgKiBGb2xsb3dlZCBieSBcIj1cIlxuICogICogRm9sbG93ZWQgYnkgemVybyBvciBtb3JlIHNwYWNlIGNoYXJhY3RlcnNcbiAqICAqIEZvbGxvd2VkIGJ5OlxuICogICAgKiBBbnkgY2hhcmFjdGVyIGV4Y2VwdCBzcGFjZSwgKCcpLCAoXCIpLCBcIjxcIiwgXCI+XCIsIFwiPVwiLCAoYCksIG9yXG4gKiAgICAqIChcIikgdGhlbiBhbnkgbm9uLShcIiksIG9yXG4gKiAgICAqICgnKSB0aGVuIGFueSBub24tKCcpXG4gKi9cbmV4cG9ydCBjb25zdCBsYXN0QXR0cmlidXRlTmFtZVJlZ2V4ID0gXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuLyhbIFxceDA5XFx4MGFcXHgwY1xceDBkXSkoW15cXDAtXFx4MUZcXHg3Ri1cXHg5RiBcIic+PS9dKykoWyBcXHgwOVxceDBhXFx4MGNcXHgwZF0qPVsgXFx4MDlcXHgwYVxceDBjXFx4MGRdKig/OlteIFxceDA5XFx4MGFcXHgwY1xceDBkXCInYDw+PV0qfFwiW15cIl0qfCdbXiddKikpJC87XG4vLyMgc291cmNlTWFwcGluZ1VSTD10ZW1wbGF0ZS5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIEBtb2R1bGUgc2hhZHktcmVuZGVyXG4gKi9cbmltcG9ydCB7IGlzVGVtcGxhdGVQYXJ0QWN0aXZlIH0gZnJvbSAnLi90ZW1wbGF0ZS5qcyc7XG5jb25zdCB3YWxrZXJOb2RlRmlsdGVyID0gMTMzIC8qIE5vZGVGaWx0ZXIuU0hPV197RUxFTUVOVHxDT01NRU5UfFRFWFR9ICovO1xuLyoqXG4gKiBSZW1vdmVzIHRoZSBsaXN0IG9mIG5vZGVzIGZyb20gYSBUZW1wbGF0ZSBzYWZlbHkuIEluIGFkZGl0aW9uIHRvIHJlbW92aW5nXG4gKiBub2RlcyBmcm9tIHRoZSBUZW1wbGF0ZSwgdGhlIFRlbXBsYXRlIHBhcnQgaW5kaWNlcyBhcmUgdXBkYXRlZCB0byBtYXRjaFxuICogdGhlIG11dGF0ZWQgVGVtcGxhdGUgRE9NLlxuICpcbiAqIEFzIHRoZSB0ZW1wbGF0ZSBpcyB3YWxrZWQgdGhlIHJlbW92YWwgc3RhdGUgaXMgdHJhY2tlZCBhbmRcbiAqIHBhcnQgaW5kaWNlcyBhcmUgYWRqdXN0ZWQgYXMgbmVlZGVkLlxuICpcbiAqIGRpdlxuICogICBkaXYjMSAocmVtb3ZlKSA8LS0gc3RhcnQgcmVtb3ZpbmcgKHJlbW92aW5nIG5vZGUgaXMgZGl2IzEpXG4gKiAgICAgZGl2XG4gKiAgICAgICBkaXYjMiAocmVtb3ZlKSAgPC0tIGNvbnRpbnVlIHJlbW92aW5nIChyZW1vdmluZyBub2RlIGlzIHN0aWxsIGRpdiMxKVxuICogICAgICAgICBkaXZcbiAqIGRpdiA8LS0gc3RvcCByZW1vdmluZyBzaW5jZSBwcmV2aW91cyBzaWJsaW5nIGlzIHRoZSByZW1vdmluZyBub2RlIChkaXYjMSxcbiAqIHJlbW92ZWQgNCBub2RlcylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZU5vZGVzRnJvbVRlbXBsYXRlKHRlbXBsYXRlLCBub2Rlc1RvUmVtb3ZlKSB7XG4gICAgY29uc3QgeyBlbGVtZW50OiB7IGNvbnRlbnQgfSwgcGFydHMgfSA9IHRlbXBsYXRlO1xuICAgIGNvbnN0IHdhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIoY29udGVudCwgd2Fsa2VyTm9kZUZpbHRlciwgbnVsbCwgZmFsc2UpO1xuICAgIGxldCBwYXJ0SW5kZXggPSBuZXh0QWN0aXZlSW5kZXhJblRlbXBsYXRlUGFydHMocGFydHMpO1xuICAgIGxldCBwYXJ0ID0gcGFydHNbcGFydEluZGV4XTtcbiAgICBsZXQgbm9kZUluZGV4ID0gLTE7XG4gICAgbGV0IHJlbW92ZUNvdW50ID0gMDtcbiAgICBjb25zdCBub2Rlc1RvUmVtb3ZlSW5UZW1wbGF0ZSA9IFtdO1xuICAgIGxldCBjdXJyZW50UmVtb3ZpbmdOb2RlID0gbnVsbDtcbiAgICB3aGlsZSAod2Fsa2VyLm5leHROb2RlKCkpIHtcbiAgICAgICAgbm9kZUluZGV4Kys7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB3YWxrZXIuY3VycmVudE5vZGU7XG4gICAgICAgIC8vIEVuZCByZW1vdmFsIGlmIHN0ZXBwZWQgcGFzdCB0aGUgcmVtb3Zpbmcgbm9kZVxuICAgICAgICBpZiAobm9kZS5wcmV2aW91c1NpYmxpbmcgPT09IGN1cnJlbnRSZW1vdmluZ05vZGUpIHtcbiAgICAgICAgICAgIGN1cnJlbnRSZW1vdmluZ05vZGUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vIEEgbm9kZSB0byByZW1vdmUgd2FzIGZvdW5kIGluIHRoZSB0ZW1wbGF0ZVxuICAgICAgICBpZiAobm9kZXNUb1JlbW92ZS5oYXMobm9kZSkpIHtcbiAgICAgICAgICAgIG5vZGVzVG9SZW1vdmVJblRlbXBsYXRlLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAvLyBUcmFjayBub2RlIHdlJ3JlIHJlbW92aW5nXG4gICAgICAgICAgICBpZiAoY3VycmVudFJlbW92aW5nTm9kZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRSZW1vdmluZ05vZGUgPSBub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFdoZW4gcmVtb3ZpbmcsIGluY3JlbWVudCBjb3VudCBieSB3aGljaCB0byBhZGp1c3Qgc3Vic2VxdWVudCBwYXJ0IGluZGljZXNcbiAgICAgICAgaWYgKGN1cnJlbnRSZW1vdmluZ05vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJlbW92ZUNvdW50Kys7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHBhcnQgIT09IHVuZGVmaW5lZCAmJiBwYXJ0LmluZGV4ID09PSBub2RlSW5kZXgpIHtcbiAgICAgICAgICAgIC8vIElmIHBhcnQgaXMgaW4gYSByZW1vdmVkIG5vZGUgZGVhY3RpdmF0ZSBpdCBieSBzZXR0aW5nIGluZGV4IHRvIC0xIG9yXG4gICAgICAgICAgICAvLyBhZGp1c3QgdGhlIGluZGV4IGFzIG5lZWRlZC5cbiAgICAgICAgICAgIHBhcnQuaW5kZXggPSBjdXJyZW50UmVtb3ZpbmdOb2RlICE9PSBudWxsID8gLTEgOiBwYXJ0LmluZGV4IC0gcmVtb3ZlQ291bnQ7XG4gICAgICAgICAgICAvLyBnbyB0byB0aGUgbmV4dCBhY3RpdmUgcGFydC5cbiAgICAgICAgICAgIHBhcnRJbmRleCA9IG5leHRBY3RpdmVJbmRleEluVGVtcGxhdGVQYXJ0cyhwYXJ0cywgcGFydEluZGV4KTtcbiAgICAgICAgICAgIHBhcnQgPSBwYXJ0c1twYXJ0SW5kZXhdO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5vZGVzVG9SZW1vdmVJblRlbXBsYXRlLmZvckVhY2goKG4pID0+IG4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKSk7XG59XG5jb25zdCBjb3VudE5vZGVzID0gKG5vZGUpID0+IHtcbiAgICBsZXQgY291bnQgPSAobm9kZS5ub2RlVHlwZSA9PT0gMTEgLyogTm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFICovKSA/IDAgOiAxO1xuICAgIGNvbnN0IHdhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIobm9kZSwgd2Fsa2VyTm9kZUZpbHRlciwgbnVsbCwgZmFsc2UpO1xuICAgIHdoaWxlICh3YWxrZXIubmV4dE5vZGUoKSkge1xuICAgICAgICBjb3VudCsrO1xuICAgIH1cbiAgICByZXR1cm4gY291bnQ7XG59O1xuY29uc3QgbmV4dEFjdGl2ZUluZGV4SW5UZW1wbGF0ZVBhcnRzID0gKHBhcnRzLCBzdGFydEluZGV4ID0gLTEpID0+IHtcbiAgICBmb3IgKGxldCBpID0gc3RhcnRJbmRleCArIDE7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBwYXJ0ID0gcGFydHNbaV07XG4gICAgICAgIGlmIChpc1RlbXBsYXRlUGFydEFjdGl2ZShwYXJ0KSkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufTtcbi8qKlxuICogSW5zZXJ0cyB0aGUgZ2l2ZW4gbm9kZSBpbnRvIHRoZSBUZW1wbGF0ZSwgb3B0aW9uYWxseSBiZWZvcmUgdGhlIGdpdmVuXG4gKiByZWZOb2RlLiBJbiBhZGRpdGlvbiB0byBpbnNlcnRpbmcgdGhlIG5vZGUgaW50byB0aGUgVGVtcGxhdGUsIHRoZSBUZW1wbGF0ZVxuICogcGFydCBpbmRpY2VzIGFyZSB1cGRhdGVkIHRvIG1hdGNoIHRoZSBtdXRhdGVkIFRlbXBsYXRlIERPTS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc2VydE5vZGVJbnRvVGVtcGxhdGUodGVtcGxhdGUsIG5vZGUsIHJlZk5vZGUgPSBudWxsKSB7XG4gICAgY29uc3QgeyBlbGVtZW50OiB7IGNvbnRlbnQgfSwgcGFydHMgfSA9IHRlbXBsYXRlO1xuICAgIC8vIElmIHRoZXJlJ3Mgbm8gcmVmTm9kZSwgdGhlbiBwdXQgbm9kZSBhdCBlbmQgb2YgdGVtcGxhdGUuXG4gICAgLy8gTm8gcGFydCBpbmRpY2VzIG5lZWQgdG8gYmUgc2hpZnRlZCBpbiB0aGlzIGNhc2UuXG4gICAgaWYgKHJlZk5vZGUgPT09IG51bGwgfHwgcmVmTm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihjb250ZW50LCB3YWxrZXJOb2RlRmlsdGVyLCBudWxsLCBmYWxzZSk7XG4gICAgbGV0IHBhcnRJbmRleCA9IG5leHRBY3RpdmVJbmRleEluVGVtcGxhdGVQYXJ0cyhwYXJ0cyk7XG4gICAgbGV0IGluc2VydENvdW50ID0gMDtcbiAgICBsZXQgd2Fsa2VySW5kZXggPSAtMTtcbiAgICB3aGlsZSAod2Fsa2VyLm5leHROb2RlKCkpIHtcbiAgICAgICAgd2Fsa2VySW5kZXgrKztcbiAgICAgICAgY29uc3Qgd2Fsa2VyTm9kZSA9IHdhbGtlci5jdXJyZW50Tm9kZTtcbiAgICAgICAgaWYgKHdhbGtlck5vZGUgPT09IHJlZk5vZGUpIHtcbiAgICAgICAgICAgIGluc2VydENvdW50ID0gY291bnROb2Rlcyhub2RlKTtcbiAgICAgICAgICAgIHJlZk5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgcmVmTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHBhcnRJbmRleCAhPT0gLTEgJiYgcGFydHNbcGFydEluZGV4XS5pbmRleCA9PT0gd2Fsa2VySW5kZXgpIHtcbiAgICAgICAgICAgIC8vIElmIHdlJ3ZlIGluc2VydGVkIHRoZSBub2RlLCBzaW1wbHkgYWRqdXN0IGFsbCBzdWJzZXF1ZW50IHBhcnRzXG4gICAgICAgICAgICBpZiAoaW5zZXJ0Q291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHBhcnRJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFydHNbcGFydEluZGV4XS5pbmRleCArPSBpbnNlcnRDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgcGFydEluZGV4ID0gbmV4dEFjdGl2ZUluZGV4SW5UZW1wbGF0ZVBhcnRzKHBhcnRzLCBwYXJ0SW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJ0SW5kZXggPSBuZXh0QWN0aXZlSW5kZXhJblRlbXBsYXRlUGFydHMocGFydHMsIHBhcnRJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb2RpZnktdGVtcGxhdGUuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuY29uc3QgZGlyZWN0aXZlcyA9IG5ldyBXZWFrTWFwKCk7XG4vKipcbiAqIEJyYW5kcyBhIGZ1bmN0aW9uIGFzIGEgZGlyZWN0aXZlIGZhY3RvcnkgZnVuY3Rpb24gc28gdGhhdCBsaXQtaHRtbCB3aWxsIGNhbGxcbiAqIHRoZSBmdW5jdGlvbiBkdXJpbmcgdGVtcGxhdGUgcmVuZGVyaW5nLCByYXRoZXIgdGhhbiBwYXNzaW5nIGFzIGEgdmFsdWUuXG4gKlxuICogQSBfZGlyZWN0aXZlXyBpcyBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBQYXJ0IGFzIGFuIGFyZ3VtZW50LiBJdCBoYXMgdGhlXG4gKiBzaWduYXR1cmU6IGAocGFydDogUGFydCkgPT4gdm9pZGAuXG4gKlxuICogQSBkaXJlY3RpdmUgX2ZhY3RvcnlfIGlzIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhcmd1bWVudHMgZm9yIGRhdGEgYW5kXG4gKiBjb25maWd1cmF0aW9uIGFuZCByZXR1cm5zIGEgZGlyZWN0aXZlLiBVc2VycyBvZiBkaXJlY3RpdmUgdXN1YWxseSByZWZlciB0b1xuICogdGhlIGRpcmVjdGl2ZSBmYWN0b3J5IGFzIHRoZSBkaXJlY3RpdmUuIEZvciBleGFtcGxlLCBcIlRoZSByZXBlYXQgZGlyZWN0aXZlXCIuXG4gKlxuICogVXN1YWxseSBhIHRlbXBsYXRlIGF1dGhvciB3aWxsIGludm9rZSBhIGRpcmVjdGl2ZSBmYWN0b3J5IGluIHRoZWlyIHRlbXBsYXRlXG4gKiB3aXRoIHJlbGV2YW50IGFyZ3VtZW50cywgd2hpY2ggd2lsbCB0aGVuIHJldHVybiBhIGRpcmVjdGl2ZSBmdW5jdGlvbi5cbiAqXG4gKiBIZXJlJ3MgYW4gZXhhbXBsZSBvZiB1c2luZyB0aGUgYHJlcGVhdCgpYCBkaXJlY3RpdmUgZmFjdG9yeSB0aGF0IHRha2VzIGFuXG4gKiBhcnJheSBhbmQgYSBmdW5jdGlvbiB0byByZW5kZXIgYW4gaXRlbTpcbiAqXG4gKiBgYGBqc1xuICogaHRtbGA8dWw+PCR7cmVwZWF0KGl0ZW1zLCAoaXRlbSkgPT4gaHRtbGA8bGk+JHtpdGVtfTwvbGk+YCl9PC91bD5gXG4gKiBgYGBcbiAqXG4gKiBXaGVuIGByZXBlYXRgIGlzIGludm9rZWQsIGl0IHJldHVybnMgYSBkaXJlY3RpdmUgZnVuY3Rpb24gdGhhdCBjbG9zZXMgb3ZlclxuICogYGl0ZW1zYCBhbmQgdGhlIHRlbXBsYXRlIGZ1bmN0aW9uLiBXaGVuIHRoZSBvdXRlciB0ZW1wbGF0ZSBpcyByZW5kZXJlZCwgdGhlXG4gKiByZXR1cm4gZGlyZWN0aXZlIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIHRoZSBQYXJ0IGZvciB0aGUgZXhwcmVzc2lvbi5cbiAqIGByZXBlYXRgIHRoZW4gcGVyZm9ybXMgaXQncyBjdXN0b20gbG9naWMgdG8gcmVuZGVyIG11bHRpcGxlIGl0ZW1zLlxuICpcbiAqIEBwYXJhbSBmIFRoZSBkaXJlY3RpdmUgZmFjdG9yeSBmdW5jdGlvbi4gTXVzdCBiZSBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhXG4gKiBmdW5jdGlvbiBvZiB0aGUgc2lnbmF0dXJlIGAocGFydDogUGFydCkgPT4gdm9pZGAuIFRoZSByZXR1cm5lZCBmdW5jdGlvbiB3aWxsXG4gKiBiZSBjYWxsZWQgd2l0aCB0aGUgcGFydCBvYmplY3QuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBpbXBvcnQge2RpcmVjdGl2ZSwgaHRtbH0gZnJvbSAnbGl0LWh0bWwnO1xuICpcbiAqIGNvbnN0IGltbXV0YWJsZSA9IGRpcmVjdGl2ZSgodikgPT4gKHBhcnQpID0+IHtcbiAqICAgaWYgKHBhcnQudmFsdWUgIT09IHYpIHtcbiAqICAgICBwYXJ0LnNldFZhbHVlKHYpXG4gKiAgIH1cbiAqIH0pO1xuICovXG5leHBvcnQgY29uc3QgZGlyZWN0aXZlID0gKGYpID0+ICgoLi4uYXJncykgPT4ge1xuICAgIGNvbnN0IGQgPSBmKC4uLmFyZ3MpO1xuICAgIGRpcmVjdGl2ZXMuc2V0KGQsIHRydWUpO1xuICAgIHJldHVybiBkO1xufSk7XG5leHBvcnQgY29uc3QgaXNEaXJlY3RpdmUgPSAobykgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgbyA9PT0gJ2Z1bmN0aW9uJyAmJiBkaXJlY3RpdmVzLmhhcyhvKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kaXJlY3RpdmUuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBBIHNlbnRpbmVsIHZhbHVlIHRoYXQgc2lnbmFscyB0aGF0IGEgdmFsdWUgd2FzIGhhbmRsZWQgYnkgYSBkaXJlY3RpdmUgYW5kXG4gKiBzaG91bGQgbm90IGJlIHdyaXR0ZW4gdG8gdGhlIERPTS5cbiAqL1xuZXhwb3J0IGNvbnN0IG5vQ2hhbmdlID0ge307XG4vKipcbiAqIEEgc2VudGluZWwgdmFsdWUgdGhhdCBzaWduYWxzIGEgTm9kZVBhcnQgdG8gZnVsbHkgY2xlYXIgaXRzIGNvbnRlbnQuXG4gKi9cbmV4cG9ydCBjb25zdCBub3RoaW5nID0ge307XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJ0LmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICogQG1vZHVsZSBsaXQtaHRtbFxuICovXG5pbXBvcnQgeyBpc0NFUG9seWZpbGwgfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQgeyBpc1RlbXBsYXRlUGFydEFjdGl2ZSB9IGZyb20gJy4vdGVtcGxhdGUuanMnO1xuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiBhIGBUZW1wbGF0ZWAgdGhhdCBjYW4gYmUgYXR0YWNoZWQgdG8gdGhlIERPTSBhbmQgdXBkYXRlZFxuICogd2l0aCBuZXcgdmFsdWVzLlxuICovXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVJbnN0YW5jZSB7XG4gICAgY29uc3RydWN0b3IodGVtcGxhdGUsIHByb2Nlc3Nvciwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLl9fcGFydHMgPSBbXTtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgICAgICB0aGlzLnByb2Nlc3NvciA9IHByb2Nlc3NvcjtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgdXBkYXRlKHZhbHVlcykge1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiB0aGlzLl9fcGFydHMpIHtcbiAgICAgICAgICAgIGlmIChwYXJ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwYXJ0LnNldFZhbHVlKHZhbHVlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHRoaXMuX19wYXJ0cykge1xuICAgICAgICAgICAgaWYgKHBhcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHBhcnQuY29tbWl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2Nsb25lKCkge1xuICAgICAgICAvLyBUaGVyZSBhcmUgYSBudW1iZXIgb2Ygc3RlcHMgaW4gdGhlIGxpZmVjeWNsZSBvZiBhIHRlbXBsYXRlIGluc3RhbmNlJ3NcbiAgICAgICAgLy8gRE9NIGZyYWdtZW50OlxuICAgICAgICAvLyAgMS4gQ2xvbmUgLSBjcmVhdGUgdGhlIGluc3RhbmNlIGZyYWdtZW50XG4gICAgICAgIC8vICAyLiBBZG9wdCAtIGFkb3B0IGludG8gdGhlIG1haW4gZG9jdW1lbnRcbiAgICAgICAgLy8gIDMuIFByb2Nlc3MgLSBmaW5kIHBhcnQgbWFya2VycyBhbmQgY3JlYXRlIHBhcnRzXG4gICAgICAgIC8vICA0LiBVcGdyYWRlIC0gdXBncmFkZSBjdXN0b20gZWxlbWVudHNcbiAgICAgICAgLy8gIDUuIFVwZGF0ZSAtIHNldCBub2RlLCBhdHRyaWJ1dGUsIHByb3BlcnR5LCBldGMuLCB2YWx1ZXNcbiAgICAgICAgLy8gIDYuIENvbm5lY3QgLSBjb25uZWN0IHRvIHRoZSBkb2N1bWVudC4gT3B0aW9uYWwgYW5kIG91dHNpZGUgb2YgdGhpc1xuICAgICAgICAvLyAgICAgbWV0aG9kLlxuICAgICAgICAvL1xuICAgICAgICAvLyBXZSBoYXZlIGEgZmV3IGNvbnN0cmFpbnRzIG9uIHRoZSBvcmRlcmluZyBvZiB0aGVzZSBzdGVwczpcbiAgICAgICAgLy8gICogV2UgbmVlZCB0byB1cGdyYWRlIGJlZm9yZSB1cGRhdGluZywgc28gdGhhdCBwcm9wZXJ0eSB2YWx1ZXMgd2lsbCBwYXNzXG4gICAgICAgIC8vICAgIHRocm91Z2ggYW55IHByb3BlcnR5IHNldHRlcnMuXG4gICAgICAgIC8vICAqIFdlIHdvdWxkIGxpa2UgdG8gcHJvY2VzcyBiZWZvcmUgdXBncmFkaW5nIHNvIHRoYXQgd2UncmUgc3VyZSB0aGF0IHRoZVxuICAgICAgICAvLyAgICBjbG9uZWQgZnJhZ21lbnQgaXMgaW5lcnQgYW5kIG5vdCBkaXN0dXJiZWQgYnkgc2VsZi1tb2RpZnlpbmcgRE9NLlxuICAgICAgICAvLyAgKiBXZSB3YW50IGN1c3RvbSBlbGVtZW50cyB0byB1cGdyYWRlIGV2ZW4gaW4gZGlzY29ubmVjdGVkIGZyYWdtZW50cy5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gR2l2ZW4gdGhlc2UgY29uc3RyYWludHMsIHdpdGggZnVsbCBjdXN0b20gZWxlbWVudHMgc3VwcG9ydCB3ZSB3b3VsZFxuICAgICAgICAvLyBwcmVmZXIgdGhlIG9yZGVyOiBDbG9uZSwgUHJvY2VzcywgQWRvcHQsIFVwZ3JhZGUsIFVwZGF0ZSwgQ29ubmVjdFxuICAgICAgICAvL1xuICAgICAgICAvLyBCdXQgU2FmYXJpIGRvZXMgbm90IGltcGxlbWVudCBDdXN0b21FbGVtZW50UmVnaXN0cnkjdXBncmFkZSwgc28gd2VcbiAgICAgICAgLy8gY2FuIG5vdCBpbXBsZW1lbnQgdGhhdCBvcmRlciBhbmQgc3RpbGwgaGF2ZSB1cGdyYWRlLWJlZm9yZS11cGRhdGUgYW5kXG4gICAgICAgIC8vIHVwZ3JhZGUgZGlzY29ubmVjdGVkIGZyYWdtZW50cy4gU28gd2UgaW5zdGVhZCBzYWNyaWZpY2UgdGhlXG4gICAgICAgIC8vIHByb2Nlc3MtYmVmb3JlLXVwZ3JhZGUgY29uc3RyYWludCwgc2luY2UgaW4gQ3VzdG9tIEVsZW1lbnRzIHYxIGVsZW1lbnRzXG4gICAgICAgIC8vIG11c3Qgbm90IG1vZGlmeSB0aGVpciBsaWdodCBET00gaW4gdGhlIGNvbnN0cnVjdG9yLiBXZSBzdGlsbCBoYXZlIGlzc3Vlc1xuICAgICAgICAvLyB3aGVuIGNvLWV4aXN0aW5nIHdpdGggQ0V2MCBlbGVtZW50cyBsaWtlIFBvbHltZXIgMSwgYW5kIHdpdGggcG9seWZpbGxzXG4gICAgICAgIC8vIHRoYXQgZG9uJ3Qgc3RyaWN0bHkgYWRoZXJlIHRvIHRoZSBuby1tb2RpZmljYXRpb24gcnVsZSBiZWNhdXNlIHNoYWRvd1xuICAgICAgICAvLyBET00sIHdoaWNoIG1heSBiZSBjcmVhdGVkIGluIHRoZSBjb25zdHJ1Y3RvciwgaXMgZW11bGF0ZWQgYnkgYmVpbmcgcGxhY2VkXG4gICAgICAgIC8vIGluIHRoZSBsaWdodCBET00uXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoZSByZXN1bHRpbmcgb3JkZXIgaXMgb24gbmF0aXZlIGlzOiBDbG9uZSwgQWRvcHQsIFVwZ3JhZGUsIFByb2Nlc3MsXG4gICAgICAgIC8vIFVwZGF0ZSwgQ29ubmVjdC4gZG9jdW1lbnQuaW1wb3J0Tm9kZSgpIHBlcmZvcm1zIENsb25lLCBBZG9wdCwgYW5kIFVwZ3JhZGVcbiAgICAgICAgLy8gaW4gb25lIHN0ZXAuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoZSBDdXN0b20gRWxlbWVudHMgdjEgcG9seWZpbGwgc3VwcG9ydHMgdXBncmFkZSgpLCBzbyB0aGUgb3JkZXIgd2hlblxuICAgICAgICAvLyBwb2x5ZmlsbGVkIGlzIHRoZSBtb3JlIGlkZWFsOiBDbG9uZSwgUHJvY2VzcywgQWRvcHQsIFVwZ3JhZGUsIFVwZGF0ZSxcbiAgICAgICAgLy8gQ29ubmVjdC5cbiAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBpc0NFUG9seWZpbGwgP1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZS5lbGVtZW50LmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpIDpcbiAgICAgICAgICAgIGRvY3VtZW50LmltcG9ydE5vZGUodGhpcy50ZW1wbGF0ZS5lbGVtZW50LmNvbnRlbnQsIHRydWUpO1xuICAgICAgICBjb25zdCBzdGFjayA9IFtdO1xuICAgICAgICBjb25zdCBwYXJ0cyA9IHRoaXMudGVtcGxhdGUucGFydHM7XG4gICAgICAgIC8vIEVkZ2UgbmVlZHMgYWxsIDQgcGFyYW1ldGVycyBwcmVzZW50OyBJRTExIG5lZWRzIDNyZCBwYXJhbWV0ZXIgdG8gYmUgbnVsbFxuICAgICAgICBjb25zdCB3YWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKGZyYWdtZW50LCAxMzMgLyogTm9kZUZpbHRlci5TSE9XX3tFTEVNRU5UfENPTU1FTlR8VEVYVH0gKi8sIG51bGwsIGZhbHNlKTtcbiAgICAgICAgbGV0IHBhcnRJbmRleCA9IDA7XG4gICAgICAgIGxldCBub2RlSW5kZXggPSAwO1xuICAgICAgICBsZXQgcGFydDtcbiAgICAgICAgbGV0IG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKTtcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCB0aGUgbm9kZXMgYW5kIHBhcnRzIG9mIGEgdGVtcGxhdGVcbiAgICAgICAgd2hpbGUgKHBhcnRJbmRleCA8IHBhcnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgcGFydCA9IHBhcnRzW3BhcnRJbmRleF07XG4gICAgICAgICAgICBpZiAoIWlzVGVtcGxhdGVQYXJ0QWN0aXZlKHBhcnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX3BhcnRzLnB1c2godW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICBwYXJ0SW5kZXgrKztcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFByb2dyZXNzIHRoZSB0cmVlIHdhbGtlciB1bnRpbCB3ZSBmaW5kIG91ciBuZXh0IHBhcnQncyBub2RlLlxuICAgICAgICAgICAgLy8gTm90ZSB0aGF0IG11bHRpcGxlIHBhcnRzIG1heSBzaGFyZSB0aGUgc2FtZSBub2RlIChhdHRyaWJ1dGUgcGFydHNcbiAgICAgICAgICAgIC8vIG9uIGEgc2luZ2xlIGVsZW1lbnQpLCBzbyB0aGlzIGxvb3AgbWF5IG5vdCBydW4gYXQgYWxsLlxuICAgICAgICAgICAgd2hpbGUgKG5vZGVJbmRleCA8IHBhcnQuaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBub2RlSW5kZXgrKztcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5ub2RlTmFtZSA9PT0gJ1RFTVBMQVRFJykge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBub2RlLmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgobm9kZSA9IHdhbGtlci5uZXh0Tm9kZSgpKSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSd2ZSBleGhhdXN0ZWQgdGhlIGNvbnRlbnQgaW5zaWRlIGEgbmVzdGVkIHRlbXBsYXRlIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgICAgIC8vIEJlY2F1c2Ugd2Ugc3RpbGwgaGF2ZSBwYXJ0cyAodGhlIG91dGVyIGZvci1sb29wKSwgd2Uga25vdzpcbiAgICAgICAgICAgICAgICAgICAgLy8gLSBUaGVyZSBpcyBhIHRlbXBsYXRlIGluIHRoZSBzdGFja1xuICAgICAgICAgICAgICAgICAgICAvLyAtIFRoZSB3YWxrZXIgd2lsbCBmaW5kIGEgbmV4dE5vZGUgb3V0c2lkZSB0aGUgdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gc3RhY2sucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXZSd2ZSBhcnJpdmVkIGF0IG91ciBwYXJ0J3Mgbm9kZS5cbiAgICAgICAgICAgIGlmIChwYXJ0LnR5cGUgPT09ICdub2RlJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnQgPSB0aGlzLnByb2Nlc3Nvci5oYW5kbGVUZXh0RXhwcmVzc2lvbih0aGlzLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHBhcnQuaW5zZXJ0QWZ0ZXJOb2RlKG5vZGUucHJldmlvdXNTaWJsaW5nKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9fcGFydHMucHVzaChwYXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX19wYXJ0cy5wdXNoKC4uLnRoaXMucHJvY2Vzc29yLmhhbmRsZUF0dHJpYnV0ZUV4cHJlc3Npb25zKG5vZGUsIHBhcnQubmFtZSwgcGFydC5zdHJpbmdzLCB0aGlzLm9wdGlvbnMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnRJbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0NFUG9seWZpbGwpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkb3B0Tm9kZShmcmFnbWVudCk7XG4gICAgICAgICAgICBjdXN0b21FbGVtZW50cy51cGdyYWRlKGZyYWdtZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnJhZ21lbnQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGVtcGxhdGUtaW5zdGFuY2UuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBAbW9kdWxlIGxpdC1odG1sXG4gKi9cbmltcG9ydCB7IHJlcGFyZW50Tm9kZXMgfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQgeyBib3VuZEF0dHJpYnV0ZVN1ZmZpeCwgbGFzdEF0dHJpYnV0ZU5hbWVSZWdleCwgbWFya2VyLCBub2RlTWFya2VyIH0gZnJvbSAnLi90ZW1wbGF0ZS5qcyc7XG5jb25zdCBjb21tZW50TWFya2VyID0gYCAke21hcmtlcn0gYDtcbi8qKlxuICogVGhlIHJldHVybiB0eXBlIG9mIGBodG1sYCwgd2hpY2ggaG9sZHMgYSBUZW1wbGF0ZSBhbmQgdGhlIHZhbHVlcyBmcm9tXG4gKiBpbnRlcnBvbGF0ZWQgZXhwcmVzc2lvbnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgY29uc3RydWN0b3Ioc3RyaW5ncywgdmFsdWVzLCB0eXBlLCBwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy5zdHJpbmdzID0gc3RyaW5ncztcbiAgICAgICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXM7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMucHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIG9mIEhUTUwgdXNlZCB0byBjcmVhdGUgYSBgPHRlbXBsYXRlPmAgZWxlbWVudC5cbiAgICAgKi9cbiAgICBnZXRIVE1MKCkge1xuICAgICAgICBjb25zdCBsID0gdGhpcy5zdHJpbmdzLmxlbmd0aCAtIDE7XG4gICAgICAgIGxldCBodG1sID0gJyc7XG4gICAgICAgIGxldCBpc0NvbW1lbnRCaW5kaW5nID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5zdHJpbmdzW2ldO1xuICAgICAgICAgICAgLy8gRm9yIGVhY2ggYmluZGluZyB3ZSB3YW50IHRvIGRldGVybWluZSB0aGUga2luZCBvZiBtYXJrZXIgdG8gaW5zZXJ0XG4gICAgICAgICAgICAvLyBpbnRvIHRoZSB0ZW1wbGF0ZSBzb3VyY2UgYmVmb3JlIGl0J3MgcGFyc2VkIGJ5IHRoZSBicm93c2VyJ3MgSFRNTFxuICAgICAgICAgICAgLy8gcGFyc2VyLiBUaGUgbWFya2VyIHR5cGUgaXMgYmFzZWQgb24gd2hldGhlciB0aGUgZXhwcmVzc2lvbiBpcyBpbiBhblxuICAgICAgICAgICAgLy8gYXR0cmlidXRlLCB0ZXh0LCBvciBjb21tZW50IHBvc2l0aW9uLlxuICAgICAgICAgICAgLy8gICAqIEZvciBub2RlLXBvc2l0aW9uIGJpbmRpbmdzIHdlIGluc2VydCBhIGNvbW1lbnQgd2l0aCB0aGUgbWFya2VyXG4gICAgICAgICAgICAvLyAgICAgc2VudGluZWwgYXMgaXRzIHRleHQgY29udGVudCwgbGlrZSA8IS0te3tsaXQtZ3VpZH19LS0+LlxuICAgICAgICAgICAgLy8gICAqIEZvciBhdHRyaWJ1dGUgYmluZGluZ3Mgd2UgaW5zZXJ0IGp1c3QgdGhlIG1hcmtlciBzZW50aW5lbCBmb3IgdGhlXG4gICAgICAgICAgICAvLyAgICAgZmlyc3QgYmluZGluZywgc28gdGhhdCB3ZSBzdXBwb3J0IHVucXVvdGVkIGF0dHJpYnV0ZSBiaW5kaW5ncy5cbiAgICAgICAgICAgIC8vICAgICBTdWJzZXF1ZW50IGJpbmRpbmdzIGNhbiB1c2UgYSBjb21tZW50IG1hcmtlciBiZWNhdXNlIG11bHRpLWJpbmRpbmdcbiAgICAgICAgICAgIC8vICAgICBhdHRyaWJ1dGVzIG11c3QgYmUgcXVvdGVkLlxuICAgICAgICAgICAgLy8gICAqIEZvciBjb21tZW50IGJpbmRpbmdzIHdlIGluc2VydCBqdXN0IHRoZSBtYXJrZXIgc2VudGluZWwgc28gd2UgZG9uJ3RcbiAgICAgICAgICAgIC8vICAgICBjbG9zZSB0aGUgY29tbWVudC5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGNvZGUgc2NhbnMgdGhlIHRlbXBsYXRlIHNvdXJjZSwgYnV0IGlzICpub3QqIGFuIEhUTUxcbiAgICAgICAgICAgIC8vIHBhcnNlci4gV2UgZG9uJ3QgbmVlZCB0byB0cmFjayB0aGUgdHJlZSBzdHJ1Y3R1cmUgb2YgdGhlIEhUTUwsIG9ubHlcbiAgICAgICAgICAgIC8vIHdoZXRoZXIgYSBiaW5kaW5nIGlzIGluc2lkZSBhIGNvbW1lbnQsIGFuZCBpZiBub3QsIGlmIGl0IGFwcGVhcnMgdG8gYmVcbiAgICAgICAgICAgIC8vIHRoZSBmaXJzdCBiaW5kaW5nIGluIGFuIGF0dHJpYnV0ZS5cbiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRPcGVuID0gcy5sYXN0SW5kZXhPZignPCEtLScpO1xuICAgICAgICAgICAgLy8gV2UncmUgaW4gY29tbWVudCBwb3NpdGlvbiBpZiB3ZSBoYXZlIGEgY29tbWVudCBvcGVuIHdpdGggbm8gZm9sbG93aW5nXG4gICAgICAgICAgICAvLyBjb21tZW50IGNsb3NlLiBCZWNhdXNlIDwtLSBjYW4gYXBwZWFyIGluIGFuIGF0dHJpYnV0ZSB2YWx1ZSB0aGVyZSBjYW5cbiAgICAgICAgICAgIC8vIGJlIGZhbHNlIHBvc2l0aXZlcy5cbiAgICAgICAgICAgIGlzQ29tbWVudEJpbmRpbmcgPSAoY29tbWVudE9wZW4gPiAtMSB8fCBpc0NvbW1lbnRCaW5kaW5nKSAmJlxuICAgICAgICAgICAgICAgIHMuaW5kZXhPZignLS0+JywgY29tbWVudE9wZW4gKyAxKSA9PT0gLTE7XG4gICAgICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhbiBhdHRyaWJ1dGUtbGlrZSBzZXF1ZW5jZSBwcmVjZWRpbmcgdGhlXG4gICAgICAgICAgICAvLyBleHByZXNzaW9uLiBUaGlzIGNhbiBtYXRjaCBcIm5hbWU9dmFsdWVcIiBsaWtlIHN0cnVjdHVyZXMgaW4gdGV4dCxcbiAgICAgICAgICAgIC8vIGNvbW1lbnRzLCBhbmQgYXR0cmlidXRlIHZhbHVlcywgc28gdGhlcmUgY2FuIGJlIGZhbHNlLXBvc2l0aXZlcy5cbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZU1hdGNoID0gbGFzdEF0dHJpYnV0ZU5hbWVSZWdleC5leGVjKHMpO1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZU1hdGNoID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UncmUgb25seSBpbiB0aGlzIGJyYW5jaCBpZiB3ZSBkb24ndCBoYXZlIGEgYXR0cmlidXRlLWxpa2VcbiAgICAgICAgICAgICAgICAvLyBwcmVjZWRpbmcgc2VxdWVuY2UuIEZvciBjb21tZW50cywgdGhpcyBndWFyZHMgYWdhaW5zdCB1bnVzdWFsXG4gICAgICAgICAgICAgICAgLy8gYXR0cmlidXRlIHZhbHVlcyBsaWtlIDxkaXYgZm9vPVwiPCEtLSR7J2Jhcid9XCI+LiBDYXNlcyBsaWtlXG4gICAgICAgICAgICAgICAgLy8gPCEtLSBmb289JHsnYmFyJ30tLT4gYXJlIGhhbmRsZWQgY29ycmVjdGx5IGluIHRoZSBhdHRyaWJ1dGUgYnJhbmNoXG4gICAgICAgICAgICAgICAgLy8gYmVsb3cuXG4gICAgICAgICAgICAgICAgaHRtbCArPSBzICsgKGlzQ29tbWVudEJpbmRpbmcgPyBjb21tZW50TWFya2VyIDogbm9kZU1hcmtlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBGb3IgYXR0cmlidXRlcyB3ZSB1c2UganVzdCBhIG1hcmtlciBzZW50aW5lbCwgYW5kIGFsc28gYXBwZW5kIGFcbiAgICAgICAgICAgICAgICAvLyAkbGl0JCBzdWZmaXggdG8gdGhlIG5hbWUgdG8gb3B0LW91dCBvZiBhdHRyaWJ1dGUtc3BlY2lmaWMgcGFyc2luZ1xuICAgICAgICAgICAgICAgIC8vIHRoYXQgSUUgYW5kIEVkZ2UgZG8gZm9yIHN0eWxlIGFuZCBjZXJ0YWluIFNWRyBhdHRyaWJ1dGVzLlxuICAgICAgICAgICAgICAgIGh0bWwgKz0gcy5zdWJzdHIoMCwgYXR0cmlidXRlTWF0Y2guaW5kZXgpICsgYXR0cmlidXRlTWF0Y2hbMV0gK1xuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVNYXRjaFsyXSArIGJvdW5kQXR0cmlidXRlU3VmZml4ICsgYXR0cmlidXRlTWF0Y2hbM10gK1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaHRtbCArPSB0aGlzLnN0cmluZ3NbbF07XG4gICAgICAgIHJldHVybiBodG1sO1xuICAgIH1cbiAgICBnZXRUZW1wbGF0ZUVsZW1lbnQoKSB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gdGhpcy5nZXRIVE1MKCk7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICB9XG59XG4vKipcbiAqIEEgVGVtcGxhdGVSZXN1bHQgZm9yIFNWRyBmcmFnbWVudHMuXG4gKlxuICogVGhpcyBjbGFzcyB3cmFwcyBIVE1MIGluIGFuIGA8c3ZnPmAgdGFnIGluIG9yZGVyIHRvIHBhcnNlIGl0cyBjb250ZW50cyBpbiB0aGVcbiAqIFNWRyBuYW1lc3BhY2UsIHRoZW4gbW9kaWZpZXMgdGhlIHRlbXBsYXRlIHRvIHJlbW92ZSB0aGUgYDxzdmc+YCB0YWcgc28gdGhhdFxuICogY2xvbmVzIG9ubHkgY29udGFpbmVyIHRoZSBvcmlnaW5hbCBmcmFnbWVudC5cbiAqL1xuZXhwb3J0IGNsYXNzIFNWR1RlbXBsYXRlUmVzdWx0IGV4dGVuZHMgVGVtcGxhdGVSZXN1bHQge1xuICAgIGdldEhUTUwoKSB7XG4gICAgICAgIHJldHVybiBgPHN2Zz4ke3N1cGVyLmdldEhUTUwoKX08L3N2Zz5gO1xuICAgIH1cbiAgICBnZXRUZW1wbGF0ZUVsZW1lbnQoKSB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gc3VwZXIuZ2V0VGVtcGxhdGVFbGVtZW50KCk7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0ZW1wbGF0ZS5jb250ZW50O1xuICAgICAgICBjb25zdCBzdmdFbGVtZW50ID0gY29udGVudC5maXJzdENoaWxkO1xuICAgICAgICBjb250ZW50LnJlbW92ZUNoaWxkKHN2Z0VsZW1lbnQpO1xuICAgICAgICByZXBhcmVudE5vZGVzKGNvbnRlbnQsIHN2Z0VsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10ZW1wbGF0ZS1yZXN1bHQuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBAbW9kdWxlIGxpdC1odG1sXG4gKi9cbmltcG9ydCB7IGlzRGlyZWN0aXZlIH0gZnJvbSAnLi9kaXJlY3RpdmUuanMnO1xuaW1wb3J0IHsgcmVtb3ZlTm9kZXMgfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQgeyBub0NoYW5nZSwgbm90aGluZyB9IGZyb20gJy4vcGFydC5qcyc7XG5pbXBvcnQgeyBUZW1wbGF0ZUluc3RhbmNlIH0gZnJvbSAnLi90ZW1wbGF0ZS1pbnN0YW5jZS5qcyc7XG5pbXBvcnQgeyBUZW1wbGF0ZVJlc3VsdCB9IGZyb20gJy4vdGVtcGxhdGUtcmVzdWx0LmpzJztcbmltcG9ydCB7IGNyZWF0ZU1hcmtlciB9IGZyb20gJy4vdGVtcGxhdGUuanMnO1xuZXhwb3J0IGNvbnN0IGlzUHJpbWl0aXZlID0gKHZhbHVlKSA9PiB7XG4gICAgcmV0dXJuICh2YWx1ZSA9PT0gbnVsbCB8fFxuICAgICAgICAhKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSk7XG59O1xuZXhwb3J0IGNvbnN0IGlzSXRlcmFibGUgPSAodmFsdWUpID0+IHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSkgfHxcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgISEodmFsdWUgJiYgdmFsdWVbU3ltYm9sLml0ZXJhdG9yXSk7XG59O1xuLyoqXG4gKiBXcml0ZXMgYXR0cmlidXRlIHZhbHVlcyB0byB0aGUgRE9NIGZvciBhIGdyb3VwIG9mIEF0dHJpYnV0ZVBhcnRzIGJvdW5kIHRvIGFcbiAqIHNpbmdsZSBhdHRyaWJ1dGUuIFRoZSB2YWx1ZSBpcyBvbmx5IHNldCBvbmNlIGV2ZW4gaWYgdGhlcmUgYXJlIG11bHRpcGxlIHBhcnRzXG4gKiBmb3IgYW4gYXR0cmlidXRlLlxuICovXG5leHBvcnQgY2xhc3MgQXR0cmlidXRlQ29tbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBuYW1lLCBzdHJpbmdzKSB7XG4gICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnN0cmluZ3MgPSBzdHJpbmdzO1xuICAgICAgICB0aGlzLnBhcnRzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyaW5ncy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMucGFydHNbaV0gPSB0aGlzLl9jcmVhdGVQYXJ0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNpbmdsZSBwYXJ0LiBPdmVycmlkZSB0aGlzIHRvIGNyZWF0ZSBhIGRpZmZlcm50IHR5cGUgb2YgcGFydC5cbiAgICAgKi9cbiAgICBfY3JlYXRlUGFydCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyaWJ1dGVQYXJ0KHRoaXMpO1xuICAgIH1cbiAgICBfZ2V0VmFsdWUoKSB7XG4gICAgICAgIGNvbnN0IHN0cmluZ3MgPSB0aGlzLnN0cmluZ3M7XG4gICAgICAgIGNvbnN0IGwgPSBzdHJpbmdzLmxlbmd0aCAtIDE7XG4gICAgICAgIGxldCB0ZXh0ID0gJyc7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICB0ZXh0ICs9IHN0cmluZ3NbaV07XG4gICAgICAgICAgICBjb25zdCBwYXJ0ID0gdGhpcy5wYXJ0c1tpXTtcbiAgICAgICAgICAgIGlmIChwYXJ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2ID0gcGFydC52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoaXNQcmltaXRpdmUodikgfHwgIWlzSXRlcmFibGUodikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCArPSB0eXBlb2YgdiA9PT0gJ3N0cmluZycgPyB2IDogU3RyaW5nKHYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgKz0gdHlwZW9mIHQgPT09ICdzdHJpbmcnID8gdCA6IFN0cmluZyh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0ZXh0ICs9IHN0cmluZ3NbbF07XG4gICAgICAgIHJldHVybiB0ZXh0O1xuICAgIH1cbiAgICBjb21taXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmRpcnR5KSB7XG4gICAgICAgICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKHRoaXMubmFtZSwgdGhpcy5fZ2V0VmFsdWUoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEEgUGFydCB0aGF0IGNvbnRyb2xzIGFsbCBvciBwYXJ0IG9mIGFuIGF0dHJpYnV0ZSB2YWx1ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEF0dHJpYnV0ZVBhcnQge1xuICAgIGNvbnN0cnVjdG9yKGNvbW1pdHRlcikge1xuICAgICAgICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNvbW1pdHRlciA9IGNvbW1pdHRlcjtcbiAgICB9XG4gICAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlICE9PSBub0NoYW5nZSAmJiAoIWlzUHJpbWl0aXZlKHZhbHVlKSB8fCB2YWx1ZSAhPT0gdGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIC8vIElmIHRoZSB2YWx1ZSBpcyBhIG5vdCBhIGRpcmVjdGl2ZSwgZGlydHkgdGhlIGNvbW1pdHRlciBzbyB0aGF0IGl0J2xsXG4gICAgICAgICAgICAvLyBjYWxsIHNldEF0dHJpYnV0ZS4gSWYgdGhlIHZhbHVlIGlzIGEgZGlyZWN0aXZlLCBpdCdsbCBkaXJ0eSB0aGVcbiAgICAgICAgICAgIC8vIGNvbW1pdHRlciBpZiBpdCBjYWxscyBzZXRWYWx1ZSgpLlxuICAgICAgICAgICAgaWYgKCFpc0RpcmVjdGl2ZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1pdHRlci5kaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tbWl0KCkge1xuICAgICAgICB3aGlsZSAoaXNEaXJlY3RpdmUodGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGl2ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gbm9DaGFuZ2U7XG4gICAgICAgICAgICBkaXJlY3RpdmUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IG5vQ2hhbmdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb21taXR0ZXIuY29tbWl0KCk7XG4gICAgfVxufVxuLyoqXG4gKiBBIFBhcnQgdGhhdCBjb250cm9scyBhIGxvY2F0aW9uIHdpdGhpbiBhIE5vZGUgdHJlZS4gTGlrZSBhIFJhbmdlLCBOb2RlUGFydFxuICogaGFzIHN0YXJ0IGFuZCBlbmQgbG9jYXRpb25zIGFuZCBjYW4gc2V0IGFuZCB1cGRhdGUgdGhlIE5vZGVzIGJldHdlZW4gdGhvc2VcbiAqIGxvY2F0aW9ucy5cbiAqXG4gKiBOb2RlUGFydHMgc3VwcG9ydCBzZXZlcmFsIHZhbHVlIHR5cGVzOiBwcmltaXRpdmVzLCBOb2RlcywgVGVtcGxhdGVSZXN1bHRzLFxuICogYXMgd2VsbCBhcyBhcnJheXMgYW5kIGl0ZXJhYmxlcyBvZiB0aG9zZSB0eXBlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIE5vZGVQYXJ0IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGVuZHMgdGhpcyBwYXJ0IGludG8gYSBjb250YWluZXIuXG4gICAgICpcbiAgICAgKiBUaGlzIHBhcnQgbXVzdCBiZSBlbXB0eSwgYXMgaXRzIGNvbnRlbnRzIGFyZSBub3QgYXV0b21hdGljYWxseSBtb3ZlZC5cbiAgICAgKi9cbiAgICBhcHBlbmRJbnRvKGNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLnN0YXJ0Tm9kZSA9IGNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVNYXJrZXIoKSk7XG4gICAgICAgIHRoaXMuZW5kTm9kZSA9IGNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVNYXJrZXIoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluc2VydHMgdGhpcyBwYXJ0IGFmdGVyIHRoZSBgcmVmYCBub2RlIChiZXR3ZWVuIGByZWZgIGFuZCBgcmVmYCdzIG5leHRcbiAgICAgKiBzaWJsaW5nKS4gQm90aCBgcmVmYCBhbmQgaXRzIG5leHQgc2libGluZyBtdXN0IGJlIHN0YXRpYywgdW5jaGFuZ2luZyBub2Rlc1xuICAgICAqIHN1Y2ggYXMgdGhvc2UgdGhhdCBhcHBlYXIgaW4gYSBsaXRlcmFsIHNlY3Rpb24gb2YgYSB0ZW1wbGF0ZS5cbiAgICAgKlxuICAgICAqIFRoaXMgcGFydCBtdXN0IGJlIGVtcHR5LCBhcyBpdHMgY29udGVudHMgYXJlIG5vdCBhdXRvbWF0aWNhbGx5IG1vdmVkLlxuICAgICAqL1xuICAgIGluc2VydEFmdGVyTm9kZShyZWYpIHtcbiAgICAgICAgdGhpcy5zdGFydE5vZGUgPSByZWY7XG4gICAgICAgIHRoaXMuZW5kTm9kZSA9IHJlZi5uZXh0U2libGluZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwZW5kcyB0aGlzIHBhcnQgaW50byBhIHBhcmVudCBwYXJ0LlxuICAgICAqXG4gICAgICogVGhpcyBwYXJ0IG11c3QgYmUgZW1wdHksIGFzIGl0cyBjb250ZW50cyBhcmUgbm90IGF1dG9tYXRpY2FsbHkgbW92ZWQuXG4gICAgICovXG4gICAgYXBwZW5kSW50b1BhcnQocGFydCkge1xuICAgICAgICBwYXJ0Ll9faW5zZXJ0KHRoaXMuc3RhcnROb2RlID0gY3JlYXRlTWFya2VyKCkpO1xuICAgICAgICBwYXJ0Ll9faW5zZXJ0KHRoaXMuZW5kTm9kZSA9IGNyZWF0ZU1hcmtlcigpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5zZXJ0cyB0aGlzIHBhcnQgYWZ0ZXIgdGhlIGByZWZgIHBhcnQuXG4gICAgICpcbiAgICAgKiBUaGlzIHBhcnQgbXVzdCBiZSBlbXB0eSwgYXMgaXRzIGNvbnRlbnRzIGFyZSBub3QgYXV0b21hdGljYWxseSBtb3ZlZC5cbiAgICAgKi9cbiAgICBpbnNlcnRBZnRlclBhcnQocmVmKSB7XG4gICAgICAgIHJlZi5fX2luc2VydCh0aGlzLnN0YXJ0Tm9kZSA9IGNyZWF0ZU1hcmtlcigpKTtcbiAgICAgICAgdGhpcy5lbmROb2RlID0gcmVmLmVuZE5vZGU7XG4gICAgICAgIHJlZi5lbmROb2RlID0gdGhpcy5zdGFydE5vZGU7XG4gICAgfVxuICAgIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgY29tbWl0KCkge1xuICAgICAgICBpZiAodGhpcy5zdGFydE5vZGUucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChpc0RpcmVjdGl2ZSh0aGlzLl9fcGVuZGluZ1ZhbHVlKSkge1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0aXZlID0gdGhpcy5fX3BlbmRpbmdWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSBub0NoYW5nZTtcbiAgICAgICAgICAgIGRpcmVjdGl2ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuX19wZW5kaW5nVmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbm9DaGFuZ2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcmltaXRpdmUodmFsdWUpKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IHRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fY29tbWl0VGV4dCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBUZW1wbGF0ZVJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5fX2NvbW1pdFRlbXBsYXRlUmVzdWx0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuX19jb21taXROb2RlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0l0ZXJhYmxlKHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5fX2NvbW1pdEl0ZXJhYmxlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gbm90aGluZykge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5vdGhpbmc7XG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBGYWxsYmFjaywgd2lsbCByZW5kZXIgdGhlIHN0cmluZyByZXByZXNlbnRhdGlvblxuICAgICAgICAgICAgdGhpcy5fX2NvbW1pdFRleHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9faW5zZXJ0KG5vZGUpIHtcbiAgICAgICAgdGhpcy5lbmROb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIHRoaXMuZW5kTm9kZSk7XG4gICAgfVxuICAgIF9fY29tbWl0Tm9kZSh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuX19pbnNlcnQodmFsdWUpO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIF9fY29tbWl0VGV4dCh2YWx1ZSkge1xuICAgICAgICBjb25zdCBub2RlID0gdGhpcy5zdGFydE5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIHZhbHVlID0gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XG4gICAgICAgIC8vIElmIGB2YWx1ZWAgaXNuJ3QgYWxyZWFkeSBhIHN0cmluZywgd2UgZXhwbGljaXRseSBjb252ZXJ0IGl0IGhlcmUgaW4gY2FzZVxuICAgICAgICAvLyBpdCBjYW4ndCBiZSBpbXBsaWNpdGx5IGNvbnZlcnRlZCAtIGkuZS4gaXQncyBhIHN5bWJvbC5cbiAgICAgICAgY29uc3QgdmFsdWVBc1N0cmluZyA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IFN0cmluZyh2YWx1ZSk7XG4gICAgICAgIGlmIChub2RlID09PSB0aGlzLmVuZE5vZGUucHJldmlvdXNTaWJsaW5nICYmXG4gICAgICAgICAgICBub2RlLm5vZGVUeXBlID09PSAzIC8qIE5vZGUuVEVYVF9OT0RFICovKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBvbmx5IGhhdmUgYSBzaW5nbGUgdGV4dCBub2RlIGJldHdlZW4gdGhlIG1hcmtlcnMsIHdlIGNhbiBqdXN0XG4gICAgICAgICAgICAvLyBzZXQgaXRzIHZhbHVlLCByYXRoZXIgdGhhbiByZXBsYWNpbmcgaXQuXG4gICAgICAgICAgICAvLyBUT0RPKGp1c3RpbmZhZ25hbmkpOiBDYW4gd2UganVzdCBjaGVjayBpZiB0aGlzLnZhbHVlIGlzIHByaW1pdGl2ZT9cbiAgICAgICAgICAgIG5vZGUuZGF0YSA9IHZhbHVlQXNTdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9fY29tbWl0Tm9kZShkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh2YWx1ZUFzU3RyaW5nKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBfX2NvbW1pdFRlbXBsYXRlUmVzdWx0KHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5vcHRpb25zLnRlbXBsYXRlRmFjdG9yeSh2YWx1ZSk7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlIGluc3RhbmNlb2YgVGVtcGxhdGVJbnN0YW5jZSAmJlxuICAgICAgICAgICAgdGhpcy52YWx1ZS50ZW1wbGF0ZSA9PT0gdGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUudXBkYXRlKHZhbHVlLnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgd2UgcHJvcGFnYXRlIHRoZSB0ZW1wbGF0ZSBwcm9jZXNzb3IgZnJvbSB0aGUgVGVtcGxhdGVSZXN1bHRcbiAgICAgICAgICAgIC8vIHNvIHRoYXQgd2UgdXNlIGl0cyBzeW50YXggZXh0ZW5zaW9uLCBldGMuIFRoZSB0ZW1wbGF0ZSBmYWN0b3J5IGNvbWVzXG4gICAgICAgICAgICAvLyBmcm9tIHRoZSByZW5kZXIgZnVuY3Rpb24gb3B0aW9ucyBzbyB0aGF0IGl0IGNhbiBjb250cm9sIHRlbXBsYXRlXG4gICAgICAgICAgICAvLyBjYWNoaW5nIGFuZCBwcmVwcm9jZXNzaW5nLlxuICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgVGVtcGxhdGVJbnN0YW5jZSh0ZW1wbGF0ZSwgdmFsdWUucHJvY2Vzc29yLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBpbnN0YW5jZS5fY2xvbmUoKTtcbiAgICAgICAgICAgIGluc3RhbmNlLnVwZGF0ZSh2YWx1ZS52YWx1ZXMpO1xuICAgICAgICAgICAgdGhpcy5fX2NvbW1pdE5vZGUoZnJhZ21lbnQpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGluc3RhbmNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9fY29tbWl0SXRlcmFibGUodmFsdWUpIHtcbiAgICAgICAgLy8gRm9yIGFuIEl0ZXJhYmxlLCB3ZSBjcmVhdGUgYSBuZXcgSW5zdGFuY2VQYXJ0IHBlciBpdGVtLCB0aGVuIHNldCBpdHNcbiAgICAgICAgLy8gdmFsdWUgdG8gdGhlIGl0ZW0uIFRoaXMgaXMgYSBsaXR0bGUgYml0IG9mIG92ZXJoZWFkIGZvciBldmVyeSBpdGVtIGluXG4gICAgICAgIC8vIGFuIEl0ZXJhYmxlLCBidXQgaXQgbGV0cyB1cyByZWN1cnNlIGVhc2lseSBhbmQgZWZmaWNpZW50bHkgdXBkYXRlIEFycmF5c1xuICAgICAgICAvLyBvZiBUZW1wbGF0ZVJlc3VsdHMgdGhhdCB3aWxsIGJlIGNvbW1vbmx5IHJldHVybmVkIGZyb20gZXhwcmVzc2lvbnMgbGlrZTpcbiAgICAgICAgLy8gYXJyYXkubWFwKChpKSA9PiBodG1sYCR7aX1gKSwgYnkgcmV1c2luZyBleGlzdGluZyBUZW1wbGF0ZUluc3RhbmNlcy5cbiAgICAgICAgLy8gSWYgX3ZhbHVlIGlzIGFuIGFycmF5LCB0aGVuIHRoZSBwcmV2aW91cyByZW5kZXIgd2FzIG9mIGFuXG4gICAgICAgIC8vIGl0ZXJhYmxlIGFuZCBfdmFsdWUgd2lsbCBjb250YWluIHRoZSBOb2RlUGFydHMgZnJvbSB0aGUgcHJldmlvdXNcbiAgICAgICAgLy8gcmVuZGVyLiBJZiBfdmFsdWUgaXMgbm90IGFuIGFycmF5LCBjbGVhciB0aGlzIHBhcnQgYW5kIG1ha2UgYSBuZXdcbiAgICAgICAgLy8gYXJyYXkgZm9yIE5vZGVQYXJ0cy5cbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gW107XG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTGV0cyB1cyBrZWVwIHRyYWNrIG9mIGhvdyBtYW55IGl0ZW1zIHdlIHN0YW1wZWQgc28gd2UgY2FuIGNsZWFyIGxlZnRvdmVyXG4gICAgICAgIC8vIGl0ZW1zIGZyb20gYSBwcmV2aW91cyByZW5kZXJcbiAgICAgICAgY29uc3QgaXRlbVBhcnRzID0gdGhpcy52YWx1ZTtcbiAgICAgICAgbGV0IHBhcnRJbmRleCA9IDA7XG4gICAgICAgIGxldCBpdGVtUGFydDtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHZhbHVlKSB7XG4gICAgICAgICAgICAvLyBUcnkgdG8gcmV1c2UgYW4gZXhpc3RpbmcgcGFydFxuICAgICAgICAgICAgaXRlbVBhcnQgPSBpdGVtUGFydHNbcGFydEluZGV4XTtcbiAgICAgICAgICAgIC8vIElmIG5vIGV4aXN0aW5nIHBhcnQsIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgICAgICAgIGlmIChpdGVtUGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaXRlbVBhcnQgPSBuZXcgTm9kZVBhcnQodGhpcy5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICBpdGVtUGFydHMucHVzaChpdGVtUGFydCk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnRJbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtUGFydC5hcHBlbmRJbnRvUGFydCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1QYXJ0Lmluc2VydEFmdGVyUGFydChpdGVtUGFydHNbcGFydEluZGV4IC0gMV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGl0ZW1QYXJ0LnNldFZhbHVlKGl0ZW0pO1xuICAgICAgICAgICAgaXRlbVBhcnQuY29tbWl0KCk7XG4gICAgICAgICAgICBwYXJ0SW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFydEluZGV4IDwgaXRlbVBhcnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gVHJ1bmNhdGUgdGhlIHBhcnRzIGFycmF5IHNvIF92YWx1ZSByZWZsZWN0cyB0aGUgY3VycmVudCBzdGF0ZVxuICAgICAgICAgICAgaXRlbVBhcnRzLmxlbmd0aCA9IHBhcnRJbmRleDtcbiAgICAgICAgICAgIHRoaXMuY2xlYXIoaXRlbVBhcnQgJiYgaXRlbVBhcnQuZW5kTm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xlYXIoc3RhcnROb2RlID0gdGhpcy5zdGFydE5vZGUpIHtcbiAgICAgICAgcmVtb3ZlTm9kZXModGhpcy5zdGFydE5vZGUucGFyZW50Tm9kZSwgc3RhcnROb2RlLm5leHRTaWJsaW5nLCB0aGlzLmVuZE5vZGUpO1xuICAgIH1cbn1cbi8qKlxuICogSW1wbGVtZW50cyBhIGJvb2xlYW4gYXR0cmlidXRlLCByb3VnaGx5IGFzIGRlZmluZWQgaW4gdGhlIEhUTUxcbiAqIHNwZWNpZmljYXRpb24uXG4gKlxuICogSWYgdGhlIHZhbHVlIGlzIHRydXRoeSwgdGhlbiB0aGUgYXR0cmlidXRlIGlzIHByZXNlbnQgd2l0aCBhIHZhbHVlIG9mXG4gKiAnJy4gSWYgdGhlIHZhbHVlIGlzIGZhbHNleSwgdGhlIGF0dHJpYnV0ZSBpcyByZW1vdmVkLlxuICovXG5leHBvcnQgY2xhc3MgQm9vbGVhbkF0dHJpYnV0ZVBhcnQge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIG5hbWUsIHN0cmluZ3MpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHN0cmluZ3MubGVuZ3RoICE9PSAyIHx8IHN0cmluZ3NbMF0gIT09ICcnIHx8IHN0cmluZ3NbMV0gIT09ICcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Jvb2xlYW4gYXR0cmlidXRlcyBjYW4gb25seSBjb250YWluIGEgc2luZ2xlIGV4cHJlc3Npb24nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnN0cmluZ3MgPSBzdHJpbmdzO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIGNvbW1pdCgpIHtcbiAgICAgICAgd2hpbGUgKGlzRGlyZWN0aXZlKHRoaXMuX19wZW5kaW5nVmFsdWUpKSB7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3RpdmUgPSB0aGlzLl9fcGVuZGluZ1ZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IG5vQ2hhbmdlO1xuICAgICAgICAgICAgZGlyZWN0aXZlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9fcGVuZGluZ1ZhbHVlID09PSBub0NoYW5nZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlID0gISF0aGlzLl9fcGVuZGluZ1ZhbHVlO1xuICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUodGhpcy5uYW1lLCAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKHRoaXMubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IG5vQ2hhbmdlO1xuICAgIH1cbn1cbi8qKlxuICogU2V0cyBhdHRyaWJ1dGUgdmFsdWVzIGZvciBQcm9wZXJ0eVBhcnRzLCBzbyB0aGF0IHRoZSB2YWx1ZSBpcyBvbmx5IHNldCBvbmNlXG4gKiBldmVuIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSBwYXJ0cyBmb3IgYSBwcm9wZXJ0eS5cbiAqXG4gKiBJZiBhbiBleHByZXNzaW9uIGNvbnRyb2xzIHRoZSB3aG9sZSBwcm9wZXJ0eSB2YWx1ZSwgdGhlbiB0aGUgdmFsdWUgaXMgc2ltcGx5XG4gKiBhc3NpZ25lZCB0byB0aGUgcHJvcGVydHkgdW5kZXIgY29udHJvbC4gSWYgdGhlcmUgYXJlIHN0cmluZyBsaXRlcmFscyBvclxuICogbXVsdGlwbGUgZXhwcmVzc2lvbnMsIHRoZW4gdGhlIHN0cmluZ3MgYXJlIGV4cHJlc3Npb25zIGFyZSBpbnRlcnBvbGF0ZWQgaW50b1xuICogYSBzdHJpbmcgZmlyc3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBQcm9wZXJ0eUNvbW1pdHRlciBleHRlbmRzIEF0dHJpYnV0ZUNvbW1pdHRlciB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgbmFtZSwgc3RyaW5ncykge1xuICAgICAgICBzdXBlcihlbGVtZW50LCBuYW1lLCBzdHJpbmdzKTtcbiAgICAgICAgdGhpcy5zaW5nbGUgPVxuICAgICAgICAgICAgKHN0cmluZ3MubGVuZ3RoID09PSAyICYmIHN0cmluZ3NbMF0gPT09ICcnICYmIHN0cmluZ3NbMV0gPT09ICcnKTtcbiAgICB9XG4gICAgX2NyZWF0ZVBhcnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvcGVydHlQYXJ0KHRoaXMpO1xuICAgIH1cbiAgICBfZ2V0VmFsdWUoKSB7XG4gICAgICAgIGlmICh0aGlzLnNpbmdsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFydHNbMF0udmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRWYWx1ZSgpO1xuICAgIH1cbiAgICBjb21taXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmRpcnR5KSB7XG4gICAgICAgICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgdGhpcy5lbGVtZW50W3RoaXMubmFtZV0gPSB0aGlzLl9nZXRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFByb3BlcnR5UGFydCBleHRlbmRzIEF0dHJpYnV0ZVBhcnQge1xufVxuLy8gRGV0ZWN0IGV2ZW50IGxpc3RlbmVyIG9wdGlvbnMgc3VwcG9ydC4gSWYgdGhlIGBjYXB0dXJlYCBwcm9wZXJ0eSBpcyByZWFkXG4vLyBmcm9tIHRoZSBvcHRpb25zIG9iamVjdCwgdGhlbiBvcHRpb25zIGFyZSBzdXBwb3J0ZWQuIElmIG5vdCwgdGhlbiB0aGUgdGhpcmRcbi8vIGFyZ3VtZW50IHRvIGFkZC9yZW1vdmVFdmVudExpc3RlbmVyIGlzIGludGVycHJldGVkIGFzIHRoZSBib29sZWFuIGNhcHR1cmVcbi8vIHZhbHVlIHNvIHdlIHNob3VsZCBvbmx5IHBhc3MgdGhlIGBjYXB0dXJlYCBwcm9wZXJ0eS5cbmxldCBldmVudE9wdGlvbnNTdXBwb3J0ZWQgPSBmYWxzZTtcbi8vIFdyYXAgaW50byBhbiBJSUZFIGJlY2F1c2UgTVMgRWRnZSA8PSB2NDEgZG9lcyBub3Qgc3VwcG9ydCBoYXZpbmcgdHJ5L2NhdGNoXG4vLyBibG9ja3MgcmlnaHQgaW50byB0aGUgYm9keSBvZiBhIG1vZHVsZVxuKCgpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgZ2V0IGNhcHR1cmUoKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRPcHRpb25zU3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0ZXN0Jywgb3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0ZXN0Jywgb3B0aW9ucywgb3B0aW9ucyk7XG4gICAgfVxuICAgIGNhdGNoIChfZSkge1xuICAgICAgICAvLyBldmVudCBvcHRpb25zIG5vdCBzdXBwb3J0ZWRcbiAgICB9XG59KSgpO1xuZXhwb3J0IGNsYXNzIEV2ZW50UGFydCB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgZXZlbnROYW1lLCBldmVudENvbnRleHQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5ldmVudE5hbWUgPSBldmVudE5hbWU7XG4gICAgICAgIHRoaXMuZXZlbnRDb250ZXh0ID0gZXZlbnRDb250ZXh0O1xuICAgICAgICB0aGlzLl9fYm91bmRIYW5kbGVFdmVudCA9IChlKSA9PiB0aGlzLmhhbmRsZUV2ZW50KGUpO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIGNvbW1pdCgpIHtcbiAgICAgICAgd2hpbGUgKGlzRGlyZWN0aXZlKHRoaXMuX19wZW5kaW5nVmFsdWUpKSB7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3RpdmUgPSB0aGlzLl9fcGVuZGluZ1ZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IG5vQ2hhbmdlO1xuICAgICAgICAgICAgZGlyZWN0aXZlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9fcGVuZGluZ1ZhbHVlID09PSBub0NoYW5nZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld0xpc3RlbmVyID0gdGhpcy5fX3BlbmRpbmdWYWx1ZTtcbiAgICAgICAgY29uc3Qgb2xkTGlzdGVuZXIgPSB0aGlzLnZhbHVlO1xuICAgICAgICBjb25zdCBzaG91bGRSZW1vdmVMaXN0ZW5lciA9IG5ld0xpc3RlbmVyID09IG51bGwgfHxcbiAgICAgICAgICAgIG9sZExpc3RlbmVyICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAobmV3TGlzdGVuZXIuY2FwdHVyZSAhPT0gb2xkTGlzdGVuZXIuY2FwdHVyZSB8fFxuICAgICAgICAgICAgICAgICAgICBuZXdMaXN0ZW5lci5vbmNlICE9PSBvbGRMaXN0ZW5lci5vbmNlIHx8XG4gICAgICAgICAgICAgICAgICAgIG5ld0xpc3RlbmVyLnBhc3NpdmUgIT09IG9sZExpc3RlbmVyLnBhc3NpdmUpO1xuICAgICAgICBjb25zdCBzaG91bGRBZGRMaXN0ZW5lciA9IG5ld0xpc3RlbmVyICE9IG51bGwgJiYgKG9sZExpc3RlbmVyID09IG51bGwgfHwgc2hvdWxkUmVtb3ZlTGlzdGVuZXIpO1xuICAgICAgICBpZiAoc2hvdWxkUmVtb3ZlTGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuZXZlbnROYW1lLCB0aGlzLl9fYm91bmRIYW5kbGVFdmVudCwgdGhpcy5fX29wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaG91bGRBZGRMaXN0ZW5lcikge1xuICAgICAgICAgICAgdGhpcy5fX29wdGlvbnMgPSBnZXRPcHRpb25zKG5ld0xpc3RlbmVyKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHRoaXMuZXZlbnROYW1lLCB0aGlzLl9fYm91bmRIYW5kbGVFdmVudCwgdGhpcy5fX29wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmFsdWUgPSBuZXdMaXN0ZW5lcjtcbiAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IG5vQ2hhbmdlO1xuICAgIH1cbiAgICBoYW5kbGVFdmVudChldmVudCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMudmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUuY2FsbCh0aGlzLmV2ZW50Q29udGV4dCB8fCB0aGlzLmVsZW1lbnQsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUuaGFuZGxlRXZlbnQoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8gV2UgY29weSBvcHRpb25zIGJlY2F1c2Ugb2YgdGhlIGluY29uc2lzdGVudCBiZWhhdmlvciBvZiBicm93c2VycyB3aGVuIHJlYWRpbmdcbi8vIHRoZSB0aGlyZCBhcmd1bWVudCBvZiBhZGQvcmVtb3ZlRXZlbnRMaXN0ZW5lci4gSUUxMSBkb2Vzbid0IHN1cHBvcnQgb3B0aW9uc1xuLy8gYXQgYWxsLiBDaHJvbWUgNDEgb25seSByZWFkcyBgY2FwdHVyZWAgaWYgdGhlIGFyZ3VtZW50IGlzIGFuIG9iamVjdC5cbmNvbnN0IGdldE9wdGlvbnMgPSAobykgPT4gbyAmJlxuICAgIChldmVudE9wdGlvbnNTdXBwb3J0ZWQgP1xuICAgICAgICB7IGNhcHR1cmU6IG8uY2FwdHVyZSwgcGFzc2l2ZTogby5wYXNzaXZlLCBvbmNlOiBvLm9uY2UgfSA6XG4gICAgICAgIG8uY2FwdHVyZSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJ0cy5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG5pbXBvcnQgeyBtYXJrZXIsIFRlbXBsYXRlIH0gZnJvbSAnLi90ZW1wbGF0ZS5qcyc7XG4vKipcbiAqIFRoZSBkZWZhdWx0IFRlbXBsYXRlRmFjdG9yeSB3aGljaCBjYWNoZXMgVGVtcGxhdGVzIGtleWVkIG9uXG4gKiByZXN1bHQudHlwZSBhbmQgcmVzdWx0LnN0cmluZ3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZUZhY3RvcnkocmVzdWx0KSB7XG4gICAgbGV0IHRlbXBsYXRlQ2FjaGUgPSB0ZW1wbGF0ZUNhY2hlcy5nZXQocmVzdWx0LnR5cGUpO1xuICAgIGlmICh0ZW1wbGF0ZUNhY2hlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGVtcGxhdGVDYWNoZSA9IHtcbiAgICAgICAgICAgIHN0cmluZ3NBcnJheTogbmV3IFdlYWtNYXAoKSxcbiAgICAgICAgICAgIGtleVN0cmluZzogbmV3IE1hcCgpXG4gICAgICAgIH07XG4gICAgICAgIHRlbXBsYXRlQ2FjaGVzLnNldChyZXN1bHQudHlwZSwgdGVtcGxhdGVDYWNoZSk7XG4gICAgfVxuICAgIGxldCB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ2FjaGUuc3RyaW5nc0FycmF5LmdldChyZXN1bHQuc3RyaW5ncyk7XG4gICAgaWYgKHRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlO1xuICAgIH1cbiAgICAvLyBJZiB0aGUgVGVtcGxhdGVTdHJpbmdzQXJyYXkgaXMgbmV3LCBnZW5lcmF0ZSBhIGtleSBmcm9tIHRoZSBzdHJpbmdzXG4gICAgLy8gVGhpcyBrZXkgaXMgc2hhcmVkIGJldHdlZW4gYWxsIHRlbXBsYXRlcyB3aXRoIGlkZW50aWNhbCBjb250ZW50XG4gICAgY29uc3Qga2V5ID0gcmVzdWx0LnN0cmluZ3Muam9pbihtYXJrZXIpO1xuICAgIC8vIENoZWNrIGlmIHdlIGFscmVhZHkgaGF2ZSBhIFRlbXBsYXRlIGZvciB0aGlzIGtleVxuICAgIHRlbXBsYXRlID0gdGVtcGxhdGVDYWNoZS5rZXlTdHJpbmcuZ2V0KGtleSk7XG4gICAgaWYgKHRlbXBsYXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBub3Qgc2VlbiB0aGlzIGtleSBiZWZvcmUsIGNyZWF0ZSBhIG5ldyBUZW1wbGF0ZVxuICAgICAgICB0ZW1wbGF0ZSA9IG5ldyBUZW1wbGF0ZShyZXN1bHQsIHJlc3VsdC5nZXRUZW1wbGF0ZUVsZW1lbnQoKSk7XG4gICAgICAgIC8vIENhY2hlIHRoZSBUZW1wbGF0ZSBmb3IgdGhpcyBrZXlcbiAgICAgICAgdGVtcGxhdGVDYWNoZS5rZXlTdHJpbmcuc2V0KGtleSwgdGVtcGxhdGUpO1xuICAgIH1cbiAgICAvLyBDYWNoZSBhbGwgZnV0dXJlIHF1ZXJpZXMgZm9yIHRoaXMgVGVtcGxhdGVTdHJpbmdzQXJyYXlcbiAgICB0ZW1wbGF0ZUNhY2hlLnN0cmluZ3NBcnJheS5zZXQocmVzdWx0LnN0cmluZ3MsIHRlbXBsYXRlKTtcbiAgICByZXR1cm4gdGVtcGxhdGU7XG59XG5leHBvcnQgY29uc3QgdGVtcGxhdGVDYWNoZXMgPSBuZXcgTWFwKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10ZW1wbGF0ZS1mYWN0b3J5LmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICogQG1vZHVsZSBsaXQtaHRtbFxuICovXG5pbXBvcnQgeyByZW1vdmVOb2RlcyB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IE5vZGVQYXJ0IH0gZnJvbSAnLi9wYXJ0cy5qcyc7XG5pbXBvcnQgeyB0ZW1wbGF0ZUZhY3RvcnkgfSBmcm9tICcuL3RlbXBsYXRlLWZhY3RvcnkuanMnO1xuZXhwb3J0IGNvbnN0IHBhcnRzID0gbmV3IFdlYWtNYXAoKTtcbi8qKlxuICogUmVuZGVycyBhIHRlbXBsYXRlIHJlc3VsdCBvciBvdGhlciB2YWx1ZSB0byBhIGNvbnRhaW5lci5cbiAqXG4gKiBUbyB1cGRhdGUgYSBjb250YWluZXIgd2l0aCBuZXcgdmFsdWVzLCByZWV2YWx1YXRlIHRoZSB0ZW1wbGF0ZSBsaXRlcmFsIGFuZFxuICogY2FsbCBgcmVuZGVyYCB3aXRoIHRoZSBuZXcgcmVzdWx0LlxuICpcbiAqIEBwYXJhbSByZXN1bHQgQW55IHZhbHVlIHJlbmRlcmFibGUgYnkgTm9kZVBhcnQgLSB0eXBpY2FsbHkgYSBUZW1wbGF0ZVJlc3VsdFxuICogICAgIGNyZWF0ZWQgYnkgZXZhbHVhdGluZyBhIHRlbXBsYXRlIHRhZyBsaWtlIGBodG1sYCBvciBgc3ZnYC5cbiAqIEBwYXJhbSBjb250YWluZXIgQSBET00gcGFyZW50IHRvIHJlbmRlciB0by4gVGhlIGVudGlyZSBjb250ZW50cyBhcmUgZWl0aGVyXG4gKiAgICAgcmVwbGFjZWQsIG9yIGVmZmljaWVudGx5IHVwZGF0ZWQgaWYgdGhlIHNhbWUgcmVzdWx0IHR5cGUgd2FzIHByZXZpb3VzXG4gKiAgICAgcmVuZGVyZWQgdGhlcmUuXG4gKiBAcGFyYW0gb3B0aW9ucyBSZW5kZXJPcHRpb25zIGZvciB0aGUgZW50aXJlIHJlbmRlciB0cmVlIHJlbmRlcmVkIHRvIHRoaXNcbiAqICAgICBjb250YWluZXIuIFJlbmRlciBvcHRpb25zIG11c3QgKm5vdCogY2hhbmdlIGJldHdlZW4gcmVuZGVycyB0byB0aGUgc2FtZVxuICogICAgIGNvbnRhaW5lciwgYXMgdGhvc2UgY2hhbmdlcyB3aWxsIG5vdCBlZmZlY3QgcHJldmlvdXNseSByZW5kZXJlZCBET00uXG4gKi9cbmV4cG9ydCBjb25zdCByZW5kZXIgPSAocmVzdWx0LCBjb250YWluZXIsIG9wdGlvbnMpID0+IHtcbiAgICBsZXQgcGFydCA9IHBhcnRzLmdldChjb250YWluZXIpO1xuICAgIGlmIChwYXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmVtb3ZlTm9kZXMoY29udGFpbmVyLCBjb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgIHBhcnRzLnNldChjb250YWluZXIsIHBhcnQgPSBuZXcgTm9kZVBhcnQoT2JqZWN0LmFzc2lnbih7IHRlbXBsYXRlRmFjdG9yeSB9LCBvcHRpb25zKSkpO1xuICAgICAgICBwYXJ0LmFwcGVuZEludG8oY29udGFpbmVyKTtcbiAgICB9XG4gICAgcGFydC5zZXRWYWx1ZShyZXN1bHQpO1xuICAgIHBhcnQuY29tbWl0KCk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVuZGVyLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbmltcG9ydCB7IEF0dHJpYnV0ZUNvbW1pdHRlciwgQm9vbGVhbkF0dHJpYnV0ZVBhcnQsIEV2ZW50UGFydCwgTm9kZVBhcnQsIFByb3BlcnR5Q29tbWl0dGVyIH0gZnJvbSAnLi9wYXJ0cy5qcyc7XG4vKipcbiAqIENyZWF0ZXMgUGFydHMgd2hlbiBhIHRlbXBsYXRlIGlzIGluc3RhbnRpYXRlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIERlZmF1bHRUZW1wbGF0ZVByb2Nlc3NvciB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHBhcnRzIGZvciBhbiBhdHRyaWJ1dGUtcG9zaXRpb24gYmluZGluZywgZ2l2ZW4gdGhlIGV2ZW50LCBhdHRyaWJ1dGVcbiAgICAgKiBuYW1lLCBhbmQgc3RyaW5nIGxpdGVyYWxzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgY29udGFpbmluZyB0aGUgYmluZGluZ1xuICAgICAqIEBwYXJhbSBuYW1lICBUaGUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gc3RyaW5ncyBUaGUgc3RyaW5nIGxpdGVyYWxzLiBUaGVyZSBhcmUgYWx3YXlzIGF0IGxlYXN0IHR3byBzdHJpbmdzLFxuICAgICAqICAgZXZlbnQgZm9yIGZ1bGx5LWNvbnRyb2xsZWQgYmluZGluZ3Mgd2l0aCBhIHNpbmdsZSBleHByZXNzaW9uLlxuICAgICAqL1xuICAgIGhhbmRsZUF0dHJpYnV0ZUV4cHJlc3Npb25zKGVsZW1lbnQsIG5hbWUsIHN0cmluZ3MsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcHJlZml4ID0gbmFtZVswXTtcbiAgICAgICAgaWYgKHByZWZpeCA9PT0gJy4nKSB7XG4gICAgICAgICAgICBjb25zdCBjb21taXR0ZXIgPSBuZXcgUHJvcGVydHlDb21taXR0ZXIoZWxlbWVudCwgbmFtZS5zbGljZSgxKSwgc3RyaW5ncyk7XG4gICAgICAgICAgICByZXR1cm4gY29tbWl0dGVyLnBhcnRzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmVmaXggPT09ICdAJykge1xuICAgICAgICAgICAgcmV0dXJuIFtuZXcgRXZlbnRQYXJ0KGVsZW1lbnQsIG5hbWUuc2xpY2UoMSksIG9wdGlvbnMuZXZlbnRDb250ZXh0KV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZWZpeCA9PT0gJz8nKSB7XG4gICAgICAgICAgICByZXR1cm4gW25ldyBCb29sZWFuQXR0cmlidXRlUGFydChlbGVtZW50LCBuYW1lLnNsaWNlKDEpLCBzdHJpbmdzKV07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tbWl0dGVyID0gbmV3IEF0dHJpYnV0ZUNvbW1pdHRlcihlbGVtZW50LCBuYW1lLCBzdHJpbmdzKTtcbiAgICAgICAgcmV0dXJuIGNvbW1pdHRlci5wYXJ0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHBhcnRzIGZvciBhIHRleHQtcG9zaXRpb24gYmluZGluZy5cbiAgICAgKiBAcGFyYW0gdGVtcGxhdGVGYWN0b3J5XG4gICAgICovXG4gICAgaGFuZGxlVGV4dEV4cHJlc3Npb24ob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IE5vZGVQYXJ0KG9wdGlvbnMpO1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBkZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3IgPSBuZXcgRGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZhdWx0LXRlbXBsYXRlLXByb2Nlc3Nvci5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqXG4gKiBNYWluIGxpdC1odG1sIG1vZHVsZS5cbiAqXG4gKiBNYWluIGV4cG9ydHM6XG4gKlxuICogLSAgW1todG1sXV1cbiAqIC0gIFtbc3ZnXV1cbiAqIC0gIFtbcmVuZGVyXV1cbiAqXG4gKiBAbW9kdWxlIGxpdC1odG1sXG4gKiBAcHJlZmVycmVkXG4gKi9cbi8qKlxuICogRG8gbm90IHJlbW92ZSB0aGlzIGNvbW1lbnQ7IGl0IGtlZXBzIHR5cGVkb2MgZnJvbSBtaXNwbGFjaW5nIHRoZSBtb2R1bGVcbiAqIGRvY3MuXG4gKi9cbmltcG9ydCB7IGRlZmF1bHRUZW1wbGF0ZVByb2Nlc3NvciB9IGZyb20gJy4vbGliL2RlZmF1bHQtdGVtcGxhdGUtcHJvY2Vzc29yLmpzJztcbmltcG9ydCB7IFNWR1RlbXBsYXRlUmVzdWx0LCBUZW1wbGF0ZVJlc3VsdCB9IGZyb20gJy4vbGliL3RlbXBsYXRlLXJlc3VsdC5qcyc7XG5leHBvcnQgeyBEZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3IsIGRlZmF1bHRUZW1wbGF0ZVByb2Nlc3NvciB9IGZyb20gJy4vbGliL2RlZmF1bHQtdGVtcGxhdGUtcHJvY2Vzc29yLmpzJztcbmV4cG9ydCB7IGRpcmVjdGl2ZSwgaXNEaXJlY3RpdmUgfSBmcm9tICcuL2xpYi9kaXJlY3RpdmUuanMnO1xuLy8gVE9ETyhqdXN0aW5mYWduYW5pKTogcmVtb3ZlIGxpbmUgd2hlbiB3ZSBnZXQgTm9kZVBhcnQgbW92aW5nIG1ldGhvZHNcbmV4cG9ydCB7IHJlbW92ZU5vZGVzLCByZXBhcmVudE5vZGVzIH0gZnJvbSAnLi9saWIvZG9tLmpzJztcbmV4cG9ydCB7IG5vQ2hhbmdlLCBub3RoaW5nIH0gZnJvbSAnLi9saWIvcGFydC5qcyc7XG5leHBvcnQgeyBBdHRyaWJ1dGVDb21taXR0ZXIsIEF0dHJpYnV0ZVBhcnQsIEJvb2xlYW5BdHRyaWJ1dGVQYXJ0LCBFdmVudFBhcnQsIGlzSXRlcmFibGUsIGlzUHJpbWl0aXZlLCBOb2RlUGFydCwgUHJvcGVydHlDb21taXR0ZXIsIFByb3BlcnR5UGFydCB9IGZyb20gJy4vbGliL3BhcnRzLmpzJztcbmV4cG9ydCB7IHBhcnRzLCByZW5kZXIgfSBmcm9tICcuL2xpYi9yZW5kZXIuanMnO1xuZXhwb3J0IHsgdGVtcGxhdGVDYWNoZXMsIHRlbXBsYXRlRmFjdG9yeSB9IGZyb20gJy4vbGliL3RlbXBsYXRlLWZhY3RvcnkuanMnO1xuZXhwb3J0IHsgVGVtcGxhdGVJbnN0YW5jZSB9IGZyb20gJy4vbGliL3RlbXBsYXRlLWluc3RhbmNlLmpzJztcbmV4cG9ydCB7IFNWR1RlbXBsYXRlUmVzdWx0LCBUZW1wbGF0ZVJlc3VsdCB9IGZyb20gJy4vbGliL3RlbXBsYXRlLXJlc3VsdC5qcyc7XG5leHBvcnQgeyBjcmVhdGVNYXJrZXIsIGlzVGVtcGxhdGVQYXJ0QWN0aXZlLCBUZW1wbGF0ZSB9IGZyb20gJy4vbGliL3RlbXBsYXRlLmpzJztcbi8vIElNUE9SVEFOVDogZG8gbm90IGNoYW5nZSB0aGUgcHJvcGVydHkgbmFtZSBvciB0aGUgYXNzaWdubWVudCBleHByZXNzaW9uLlxuLy8gVGhpcyBsaW5lIHdpbGwgYmUgdXNlZCBpbiByZWdleGVzIHRvIHNlYXJjaCBmb3IgbGl0LWh0bWwgdXNhZ2UuXG4vLyBUT0RPKGp1c3RpbmZhZ25hbmkpOiBpbmplY3QgdmVyc2lvbiBudW1iZXIgYXQgYnVpbGQgdGltZVxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgKHdpbmRvd1snbGl0SHRtbFZlcnNpb25zJ10gfHwgKHdpbmRvd1snbGl0SHRtbFZlcnNpb25zJ10gPSBbXSkpLnB1c2goJzEuMi4xJyk7XG59XG4vKipcbiAqIEludGVycHJldHMgYSB0ZW1wbGF0ZSBsaXRlcmFsIGFzIGFuIEhUTUwgdGVtcGxhdGUgdGhhdCBjYW4gZWZmaWNpZW50bHlcbiAqIHJlbmRlciB0byBhbmQgdXBkYXRlIGEgY29udGFpbmVyLlxuICovXG5leHBvcnQgY29uc3QgaHRtbCA9IChzdHJpbmdzLCAuLi52YWx1ZXMpID0+IG5ldyBUZW1wbGF0ZVJlc3VsdChzdHJpbmdzLCB2YWx1ZXMsICdodG1sJywgZGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yKTtcbi8qKlxuICogSW50ZXJwcmV0cyBhIHRlbXBsYXRlIGxpdGVyYWwgYXMgYW4gU1ZHIHRlbXBsYXRlIHRoYXQgY2FuIGVmZmljaWVudGx5XG4gKiByZW5kZXIgdG8gYW5kIHVwZGF0ZSBhIGNvbnRhaW5lci5cbiAqL1xuZXhwb3J0IGNvbnN0IHN2ZyA9IChzdHJpbmdzLCAuLi52YWx1ZXMpID0+IG5ldyBTVkdUZW1wbGF0ZVJlc3VsdChzdHJpbmdzLCB2YWx1ZXMsICdzdmcnLCBkZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3IpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGl0LWh0bWwuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBNb2R1bGUgdG8gYWRkIHNoYWR5IERPTS9zaGFkeSBDU1MgcG9seWZpbGwgc3VwcG9ydCB0byBsaXQtaHRtbCB0ZW1wbGF0ZVxuICogcmVuZGVyaW5nLiBTZWUgdGhlIFtbcmVuZGVyXV0gbWV0aG9kIGZvciBkZXRhaWxzLlxuICpcbiAqIEBtb2R1bGUgc2hhZHktcmVuZGVyXG4gKiBAcHJlZmVycmVkXG4gKi9cbi8qKlxuICogRG8gbm90IHJlbW92ZSB0aGlzIGNvbW1lbnQ7IGl0IGtlZXBzIHR5cGVkb2MgZnJvbSBtaXNwbGFjaW5nIHRoZSBtb2R1bGVcbiAqIGRvY3MuXG4gKi9cbmltcG9ydCB7IHJlbW92ZU5vZGVzIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgaW5zZXJ0Tm9kZUludG9UZW1wbGF0ZSwgcmVtb3ZlTm9kZXNGcm9tVGVtcGxhdGUgfSBmcm9tICcuL21vZGlmeS10ZW1wbGF0ZS5qcyc7XG5pbXBvcnQgeyBwYXJ0cywgcmVuZGVyIGFzIGxpdFJlbmRlciB9IGZyb20gJy4vcmVuZGVyLmpzJztcbmltcG9ydCB7IHRlbXBsYXRlQ2FjaGVzIH0gZnJvbSAnLi90ZW1wbGF0ZS1mYWN0b3J5LmpzJztcbmltcG9ydCB7IFRlbXBsYXRlSW5zdGFuY2UgfSBmcm9tICcuL3RlbXBsYXRlLWluc3RhbmNlLmpzJztcbmltcG9ydCB7IG1hcmtlciwgVGVtcGxhdGUgfSBmcm9tICcuL3RlbXBsYXRlLmpzJztcbmV4cG9ydCB7IGh0bWwsIHN2ZywgVGVtcGxhdGVSZXN1bHQgfSBmcm9tICcuLi9saXQtaHRtbC5qcyc7XG4vLyBHZXQgYSBrZXkgdG8gbG9va3VwIGluIGB0ZW1wbGF0ZUNhY2hlc2AuXG5jb25zdCBnZXRUZW1wbGF0ZUNhY2hlS2V5ID0gKHR5cGUsIHNjb3BlTmFtZSkgPT4gYCR7dHlwZX0tLSR7c2NvcGVOYW1lfWA7XG5sZXQgY29tcGF0aWJsZVNoYWR5Q1NTVmVyc2lvbiA9IHRydWU7XG5pZiAodHlwZW9mIHdpbmRvdy5TaGFkeUNTUyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjb21wYXRpYmxlU2hhZHlDU1NWZXJzaW9uID0gZmFsc2U7XG59XG5lbHNlIGlmICh0eXBlb2Ygd2luZG93LlNoYWR5Q1NTLnByZXBhcmVUZW1wbGF0ZURvbSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjb25zb2xlLndhcm4oYEluY29tcGF0aWJsZSBTaGFkeUNTUyB2ZXJzaW9uIGRldGVjdGVkLiBgICtcbiAgICAgICAgYFBsZWFzZSB1cGRhdGUgdG8gYXQgbGVhc3QgQHdlYmNvbXBvbmVudHMvd2ViY29tcG9uZW50c2pzQDIuMC4yIGFuZCBgICtcbiAgICAgICAgYEB3ZWJjb21wb25lbnRzL3NoYWR5Y3NzQDEuMy4xLmApO1xuICAgIGNvbXBhdGlibGVTaGFkeUNTU1ZlcnNpb24gPSBmYWxzZTtcbn1cbi8qKlxuICogVGVtcGxhdGUgZmFjdG9yeSB3aGljaCBzY29wZXMgdGVtcGxhdGUgRE9NIHVzaW5nIFNoYWR5Q1NTLlxuICogQHBhcmFtIHNjb3BlTmFtZSB7c3RyaW5nfVxuICovXG5jb25zdCBzaGFkeVRlbXBsYXRlRmFjdG9yeSA9IChzY29wZU5hbWUpID0+IChyZXN1bHQpID0+IHtcbiAgICBjb25zdCBjYWNoZUtleSA9IGdldFRlbXBsYXRlQ2FjaGVLZXkocmVzdWx0LnR5cGUsIHNjb3BlTmFtZSk7XG4gICAgbGV0IHRlbXBsYXRlQ2FjaGUgPSB0ZW1wbGF0ZUNhY2hlcy5nZXQoY2FjaGVLZXkpO1xuICAgIGlmICh0ZW1wbGF0ZUNhY2hlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGVtcGxhdGVDYWNoZSA9IHtcbiAgICAgICAgICAgIHN0cmluZ3NBcnJheTogbmV3IFdlYWtNYXAoKSxcbiAgICAgICAgICAgIGtleVN0cmluZzogbmV3IE1hcCgpXG4gICAgICAgIH07XG4gICAgICAgIHRlbXBsYXRlQ2FjaGVzLnNldChjYWNoZUtleSwgdGVtcGxhdGVDYWNoZSk7XG4gICAgfVxuICAgIGxldCB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ2FjaGUuc3RyaW5nc0FycmF5LmdldChyZXN1bHQuc3RyaW5ncyk7XG4gICAgaWYgKHRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlO1xuICAgIH1cbiAgICBjb25zdCBrZXkgPSByZXN1bHQuc3RyaW5ncy5qb2luKG1hcmtlcik7XG4gICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZUNhY2hlLmtleVN0cmluZy5nZXQoa2V5KTtcbiAgICBpZiAodGVtcGxhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gcmVzdWx0LmdldFRlbXBsYXRlRWxlbWVudCgpO1xuICAgICAgICBpZiAoY29tcGF0aWJsZVNoYWR5Q1NTVmVyc2lvbikge1xuICAgICAgICAgICAgd2luZG93LlNoYWR5Q1NTLnByZXBhcmVUZW1wbGF0ZURvbShlbGVtZW50LCBzY29wZU5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHRlbXBsYXRlID0gbmV3IFRlbXBsYXRlKHJlc3VsdCwgZWxlbWVudCk7XG4gICAgICAgIHRlbXBsYXRlQ2FjaGUua2V5U3RyaW5nLnNldChrZXksIHRlbXBsYXRlKTtcbiAgICB9XG4gICAgdGVtcGxhdGVDYWNoZS5zdHJpbmdzQXJyYXkuc2V0KHJlc3VsdC5zdHJpbmdzLCB0ZW1wbGF0ZSk7XG4gICAgcmV0dXJuIHRlbXBsYXRlO1xufTtcbmNvbnN0IFRFTVBMQVRFX1RZUEVTID0gWydodG1sJywgJ3N2ZyddO1xuLyoqXG4gKiBSZW1vdmVzIGFsbCBzdHlsZSBlbGVtZW50cyBmcm9tIFRlbXBsYXRlcyBmb3IgdGhlIGdpdmVuIHNjb3BlTmFtZS5cbiAqL1xuY29uc3QgcmVtb3ZlU3R5bGVzRnJvbUxpdFRlbXBsYXRlcyA9IChzY29wZU5hbWUpID0+IHtcbiAgICBURU1QTEFURV9UWVBFUy5mb3JFYWNoKCh0eXBlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlcyA9IHRlbXBsYXRlQ2FjaGVzLmdldChnZXRUZW1wbGF0ZUNhY2hlS2V5KHR5cGUsIHNjb3BlTmFtZSkpO1xuICAgICAgICBpZiAodGVtcGxhdGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRlbXBsYXRlcy5rZXlTdHJpbmcuZm9yRWFjaCgodGVtcGxhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGVsZW1lbnQ6IHsgY29udGVudCB9IH0gPSB0ZW1wbGF0ZTtcbiAgICAgICAgICAgICAgICAvLyBJRSAxMSBkb2Vzbid0IHN1cHBvcnQgdGhlIGl0ZXJhYmxlIHBhcmFtIFNldCBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgICAgICBBcnJheS5mcm9tKGNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnc3R5bGUnKSkuZm9yRWFjaCgocykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZXMuYWRkKHMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJlbW92ZU5vZGVzRnJvbVRlbXBsYXRlKHRlbXBsYXRlLCBzdHlsZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5jb25zdCBzaGFkeVJlbmRlclNldCA9IG5ldyBTZXQoKTtcbi8qKlxuICogRm9yIHRoZSBnaXZlbiBzY29wZSBuYW1lLCBlbnN1cmVzIHRoYXQgU2hhZHlDU1Mgc3R5bGUgc2NvcGluZyBpcyBwZXJmb3JtZWQuXG4gKiBUaGlzIGlzIGRvbmUganVzdCBvbmNlIHBlciBzY29wZSBuYW1lIHNvIHRoZSBmcmFnbWVudCBhbmQgdGVtcGxhdGUgY2Fubm90XG4gKiBiZSBtb2RpZmllZC5cbiAqICgxKSBleHRyYWN0cyBzdHlsZXMgZnJvbSB0aGUgcmVuZGVyZWQgZnJhZ21lbnQgYW5kIGhhbmRzIHRoZW0gdG8gU2hhZHlDU1NcbiAqIHRvIGJlIHNjb3BlZCBhbmQgYXBwZW5kZWQgdG8gdGhlIGRvY3VtZW50XG4gKiAoMikgcmVtb3ZlcyBzdHlsZSBlbGVtZW50cyBmcm9tIGFsbCBsaXQtaHRtbCBUZW1wbGF0ZXMgZm9yIHRoaXMgc2NvcGUgbmFtZS5cbiAqXG4gKiBOb3RlLCA8c3R5bGU+IGVsZW1lbnRzIGNhbiBvbmx5IGJlIHBsYWNlZCBpbnRvIHRlbXBsYXRlcyBmb3IgdGhlXG4gKiBpbml0aWFsIHJlbmRlcmluZyBvZiB0aGUgc2NvcGUuIElmIDxzdHlsZT4gZWxlbWVudHMgYXJlIGluY2x1ZGVkIGluIHRlbXBsYXRlc1xuICogZHluYW1pY2FsbHkgcmVuZGVyZWQgdG8gdGhlIHNjb3BlIChhZnRlciB0aGUgZmlyc3Qgc2NvcGUgcmVuZGVyKSwgdGhleSB3aWxsXG4gKiBub3QgYmUgc2NvcGVkIGFuZCB0aGUgPHN0eWxlPiB3aWxsIGJlIGxlZnQgaW4gdGhlIHRlbXBsYXRlIGFuZCByZW5kZXJlZFxuICogb3V0cHV0LlxuICovXG5jb25zdCBwcmVwYXJlVGVtcGxhdGVTdHlsZXMgPSAoc2NvcGVOYW1lLCByZW5kZXJlZERPTSwgdGVtcGxhdGUpID0+IHtcbiAgICBzaGFkeVJlbmRlclNldC5hZGQoc2NvcGVOYW1lKTtcbiAgICAvLyBJZiBgcmVuZGVyZWRET01gIGlzIHN0YW1wZWQgZnJvbSBhIFRlbXBsYXRlLCB0aGVuIHdlIG5lZWQgdG8gZWRpdCB0aGF0XG4gICAgLy8gVGVtcGxhdGUncyB1bmRlcmx5aW5nIHRlbXBsYXRlIGVsZW1lbnQuIE90aGVyd2lzZSwgd2UgY3JlYXRlIG9uZSBoZXJlXG4gICAgLy8gdG8gZ2l2ZSB0byBTaGFkeUNTUywgd2hpY2ggc3RpbGwgcmVxdWlyZXMgb25lIHdoaWxlIHNjb3BpbmcuXG4gICAgY29uc3QgdGVtcGxhdGVFbGVtZW50ID0gISF0ZW1wbGF0ZSA/IHRlbXBsYXRlLmVsZW1lbnQgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuICAgIC8vIE1vdmUgc3R5bGVzIG91dCBvZiByZW5kZXJlZCBET00gYW5kIHN0b3JlLlxuICAgIGNvbnN0IHN0eWxlcyA9IHJlbmRlcmVkRE9NLnF1ZXJ5U2VsZWN0b3JBbGwoJ3N0eWxlJyk7XG4gICAgY29uc3QgeyBsZW5ndGggfSA9IHN0eWxlcztcbiAgICAvLyBJZiB0aGVyZSBhcmUgbm8gc3R5bGVzLCBza2lwIHVubmVjZXNzYXJ5IHdvcmtcbiAgICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIEVuc3VyZSBwcmVwYXJlVGVtcGxhdGVTdHlsZXMgaXMgY2FsbGVkIHRvIHN1cHBvcnQgYWRkaW5nXG4gICAgICAgIC8vIHN0eWxlcyB2aWEgYHByZXBhcmVBZG9wdGVkQ3NzVGV4dGAgc2luY2UgdGhhdCByZXF1aXJlcyB0aGF0XG4gICAgICAgIC8vIGBwcmVwYXJlVGVtcGxhdGVTdHlsZXNgIGlzIGNhbGxlZC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gU2hhZHlDU1Mgd2lsbCBvbmx5IHVwZGF0ZSBzdHlsZXMgY29udGFpbmluZyBAYXBwbHkgaW4gdGhlIHRlbXBsYXRlXG4gICAgICAgIC8vIGdpdmVuIHRvIGBwcmVwYXJlVGVtcGxhdGVTdHlsZXNgLiBJZiBubyBsaXQgVGVtcGxhdGUgd2FzIGdpdmVuLFxuICAgICAgICAvLyBTaGFkeUNTUyB3aWxsIG5vdCBiZSBhYmxlIHRvIHVwZGF0ZSB1c2VzIG9mIEBhcHBseSBpbiBhbnkgcmVsZXZhbnRcbiAgICAgICAgLy8gdGVtcGxhdGUuIEhvd2V2ZXIsIHRoaXMgaXMgbm90IGEgcHJvYmxlbSBiZWNhdXNlIHdlIG9ubHkgY3JlYXRlIHRoZVxuICAgICAgICAvLyB0ZW1wbGF0ZSBmb3IgdGhlIHB1cnBvc2Ugb2Ygc3VwcG9ydGluZyBgcHJlcGFyZUFkb3B0ZWRDc3NUZXh0YCxcbiAgICAgICAgLy8gd2hpY2ggZG9lc24ndCBzdXBwb3J0IEBhcHBseSBhdCBhbGwuXG4gICAgICAgIHdpbmRvdy5TaGFkeUNTUy5wcmVwYXJlVGVtcGxhdGVTdHlsZXModGVtcGxhdGVFbGVtZW50LCBzY29wZU5hbWUpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvbmRlbnNlZFN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAvLyBDb2xsZWN0IHN0eWxlcyBpbnRvIGEgc2luZ2xlIHN0eWxlLiBUaGlzIGhlbHBzIHVzIG1ha2Ugc3VyZSBTaGFkeUNTU1xuICAgIC8vIG1hbmlwdWxhdGlvbnMgd2lsbCBub3QgcHJldmVudCB1cyBmcm9tIGJlaW5nIGFibGUgdG8gZml4IHVwIHRlbXBsYXRlXG4gICAgLy8gcGFydCBpbmRpY2VzLlxuICAgIC8vIE5PVEU6IGNvbGxlY3Rpbmcgc3R5bGVzIGlzIGluZWZmaWNpZW50IGZvciBicm93c2VycyBidXQgU2hhZHlDU1NcbiAgICAvLyBjdXJyZW50bHkgZG9lcyB0aGlzIGFueXdheS4gV2hlbiBpdCBkb2VzIG5vdCwgdGhpcyBzaG91bGQgYmUgY2hhbmdlZC5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gc3R5bGVzW2ldO1xuICAgICAgICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbiAgICAgICAgY29uZGVuc2VkU3R5bGUudGV4dENvbnRlbnQgKz0gc3R5bGUudGV4dENvbnRlbnQ7XG4gICAgfVxuICAgIC8vIFJlbW92ZSBzdHlsZXMgZnJvbSBuZXN0ZWQgdGVtcGxhdGVzIGluIHRoaXMgc2NvcGUuXG4gICAgcmVtb3ZlU3R5bGVzRnJvbUxpdFRlbXBsYXRlcyhzY29wZU5hbWUpO1xuICAgIC8vIEFuZCB0aGVuIHB1dCB0aGUgY29uZGVuc2VkIHN0eWxlIGludG8gdGhlIFwicm9vdFwiIHRlbXBsYXRlIHBhc3NlZCBpbiBhc1xuICAgIC8vIGB0ZW1wbGF0ZWAuXG4gICAgY29uc3QgY29udGVudCA9IHRlbXBsYXRlRWxlbWVudC5jb250ZW50O1xuICAgIGlmICghIXRlbXBsYXRlKSB7XG4gICAgICAgIGluc2VydE5vZGVJbnRvVGVtcGxhdGUodGVtcGxhdGUsIGNvbmRlbnNlZFN0eWxlLCBjb250ZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29udGVudC5pbnNlcnRCZWZvcmUoY29uZGVuc2VkU3R5bGUsIGNvbnRlbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIC8vIE5vdGUsIGl0J3MgaW1wb3J0YW50IHRoYXQgU2hhZHlDU1MgZ2V0cyB0aGUgdGVtcGxhdGUgdGhhdCBgbGl0LWh0bWxgXG4gICAgLy8gd2lsbCBhY3R1YWxseSByZW5kZXIgc28gdGhhdCBpdCBjYW4gdXBkYXRlIHRoZSBzdHlsZSBpbnNpZGUgd2hlblxuICAgIC8vIG5lZWRlZCAoZS5nLiBAYXBwbHkgbmF0aXZlIFNoYWRvdyBET00gY2FzZSkuXG4gICAgd2luZG93LlNoYWR5Q1NTLnByZXBhcmVUZW1wbGF0ZVN0eWxlcyh0ZW1wbGF0ZUVsZW1lbnQsIHNjb3BlTmFtZSk7XG4gICAgY29uc3Qgc3R5bGUgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ3N0eWxlJyk7XG4gICAgaWYgKHdpbmRvdy5TaGFkeUNTUy5uYXRpdmVTaGFkb3cgJiYgc3R5bGUgIT09IG51bGwpIHtcbiAgICAgICAgLy8gV2hlbiBpbiBuYXRpdmUgU2hhZG93IERPTSwgZW5zdXJlIHRoZSBzdHlsZSBjcmVhdGVkIGJ5IFNoYWR5Q1NTIGlzXG4gICAgICAgIC8vIGluY2x1ZGVkIGluIGluaXRpYWxseSByZW5kZXJlZCBvdXRwdXQgKGByZW5kZXJlZERPTWApLlxuICAgICAgICByZW5kZXJlZERPTS5pbnNlcnRCZWZvcmUoc3R5bGUuY2xvbmVOb2RlKHRydWUpLCByZW5kZXJlZERPTS5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoISF0ZW1wbGF0ZSkge1xuICAgICAgICAvLyBXaGVuIG5vIHN0eWxlIGlzIGxlZnQgaW4gdGhlIHRlbXBsYXRlLCBwYXJ0cyB3aWxsIGJlIGJyb2tlbiBhcyBhXG4gICAgICAgIC8vIHJlc3VsdC4gVG8gZml4IHRoaXMsIHdlIHB1dCBiYWNrIHRoZSBzdHlsZSBub2RlIFNoYWR5Q1NTIHJlbW92ZWRcbiAgICAgICAgLy8gYW5kIHRoZW4gdGVsbCBsaXQgdG8gcmVtb3ZlIHRoYXQgbm9kZSBmcm9tIHRoZSB0ZW1wbGF0ZS5cbiAgICAgICAgLy8gVGhlcmUgY2FuIGJlIG5vIHN0eWxlIGluIHRoZSB0ZW1wbGF0ZSBpbiAyIGNhc2VzICgxKSB3aGVuIFNoYWR5IERPTVxuICAgICAgICAvLyBpcyBpbiB1c2UsIFNoYWR5Q1NTIHJlbW92ZXMgYWxsIHN0eWxlcywgKDIpIHdoZW4gbmF0aXZlIFNoYWRvdyBET01cbiAgICAgICAgLy8gaXMgaW4gdXNlIFNoYWR5Q1NTIHJlbW92ZXMgdGhlIHN0eWxlIGlmIGl0IGNvbnRhaW5zIG5vIGNvbnRlbnQuXG4gICAgICAgIC8vIE5PVEUsIFNoYWR5Q1NTIGNyZWF0ZXMgaXRzIG93biBzdHlsZSBzbyB3ZSBjYW4gc2FmZWx5IGFkZC9yZW1vdmVcbiAgICAgICAgLy8gYGNvbmRlbnNlZFN0eWxlYCBoZXJlLlxuICAgICAgICBjb250ZW50Lmluc2VydEJlZm9yZShjb25kZW5zZWRTdHlsZSwgY29udGVudC5maXJzdENoaWxkKTtcbiAgICAgICAgY29uc3QgcmVtb3ZlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgcmVtb3Zlcy5hZGQoY29uZGVuc2VkU3R5bGUpO1xuICAgICAgICByZW1vdmVOb2Rlc0Zyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgcmVtb3Zlcyk7XG4gICAgfVxufTtcbi8qKlxuICogRXh0ZW5zaW9uIHRvIHRoZSBzdGFuZGFyZCBgcmVuZGVyYCBtZXRob2Qgd2hpY2ggc3VwcG9ydHMgcmVuZGVyaW5nXG4gKiB0byBTaGFkb3dSb290cyB3aGVuIHRoZSBTaGFkeURPTSAoaHR0cHM6Ly9naXRodWIuY29tL3dlYmNvbXBvbmVudHMvc2hhZHlkb20pXG4gKiBhbmQgU2hhZHlDU1MgKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJjb21wb25lbnRzL3NoYWR5Y3NzKSBwb2x5ZmlsbHMgYXJlIHVzZWRcbiAqIG9yIHdoZW4gdGhlIHdlYmNvbXBvbmVudHNqc1xuICogKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJjb21wb25lbnRzL3dlYmNvbXBvbmVudHNqcykgcG9seWZpbGwgaXMgdXNlZC5cbiAqXG4gKiBBZGRzIGEgYHNjb3BlTmFtZWAgb3B0aW9uIHdoaWNoIGlzIHVzZWQgdG8gc2NvcGUgZWxlbWVudCBET00gYW5kIHN0eWxlc2hlZXRzXG4gKiB3aGVuIG5hdGl2ZSBTaGFkb3dET00gaXMgdW5hdmFpbGFibGUuIFRoZSBgc2NvcGVOYW1lYCB3aWxsIGJlIGFkZGVkIHRvXG4gKiB0aGUgY2xhc3MgYXR0cmlidXRlIG9mIGFsbCByZW5kZXJlZCBET00uIEluIGFkZGl0aW9uLCBhbnkgc3R5bGUgZWxlbWVudHMgd2lsbFxuICogYmUgYXV0b21hdGljYWxseSByZS13cml0dGVuIHdpdGggdGhpcyBgc2NvcGVOYW1lYCBzZWxlY3RvciBhbmQgbW92ZWQgb3V0XG4gKiBvZiB0aGUgcmVuZGVyZWQgRE9NIGFuZCBpbnRvIHRoZSBkb2N1bWVudCBgPGhlYWQ+YC5cbiAqXG4gKiBJdCBpcyBjb21tb24gdG8gdXNlIHRoaXMgcmVuZGVyIG1ldGhvZCBpbiBjb25qdW5jdGlvbiB3aXRoIGEgY3VzdG9tIGVsZW1lbnRcbiAqIHdoaWNoIHJlbmRlcnMgYSBzaGFkb3dSb290LiBXaGVuIHRoaXMgaXMgZG9uZSwgdHlwaWNhbGx5IHRoZSBlbGVtZW50J3NcbiAqIGBsb2NhbE5hbWVgIHNob3VsZCBiZSB1c2VkIGFzIHRoZSBgc2NvcGVOYW1lYC5cbiAqXG4gKiBJbiBhZGRpdGlvbiB0byBET00gc2NvcGluZywgU2hhZHlDU1MgYWxzbyBzdXBwb3J0cyBhIGJhc2ljIHNoaW0gZm9yIGNzc1xuICogY3VzdG9tIHByb3BlcnRpZXMgKG5lZWRlZCBvbmx5IG9uIG9sZGVyIGJyb3dzZXJzIGxpa2UgSUUxMSkgYW5kIGEgc2hpbSBmb3JcbiAqIGEgZGVwcmVjYXRlZCBmZWF0dXJlIGNhbGxlZCBgQGFwcGx5YCB0aGF0IHN1cHBvcnRzIGFwcGx5aW5nIGEgc2V0IG9mIGNzc1xuICogY3VzdG9tIHByb3BlcnRpZXMgdG8gYSBnaXZlbiBsb2NhdGlvbi5cbiAqXG4gKiBVc2FnZSBjb25zaWRlcmF0aW9uczpcbiAqXG4gKiAqIFBhcnQgdmFsdWVzIGluIGA8c3R5bGU+YCBlbGVtZW50cyBhcmUgb25seSBhcHBsaWVkIHRoZSBmaXJzdCB0aW1lIGEgZ2l2ZW5cbiAqIGBzY29wZU5hbWVgIHJlbmRlcnMuIFN1YnNlcXVlbnQgY2hhbmdlcyB0byBwYXJ0cyBpbiBzdHlsZSBlbGVtZW50cyB3aWxsIGhhdmVcbiAqIG5vIGVmZmVjdC4gQmVjYXVzZSBvZiB0aGlzLCBwYXJ0cyBpbiBzdHlsZSBlbGVtZW50cyBzaG91bGQgb25seSBiZSB1c2VkIGZvclxuICogdmFsdWVzIHRoYXQgd2lsbCBuZXZlciBjaGFuZ2UsIGZvciBleGFtcGxlIHBhcnRzIHRoYXQgc2V0IHNjb3BlLXdpZGUgdGhlbWVcbiAqIHZhbHVlcyBvciBwYXJ0cyB3aGljaCByZW5kZXIgc2hhcmVkIHN0eWxlIGVsZW1lbnRzLlxuICpcbiAqICogTm90ZSwgZHVlIHRvIGEgbGltaXRhdGlvbiBvZiB0aGUgU2hhZHlET00gcG9seWZpbGwsIHJlbmRlcmluZyBpbiBhXG4gKiBjdXN0b20gZWxlbWVudCdzIGBjb25zdHJ1Y3RvcmAgaXMgbm90IHN1cHBvcnRlZC4gSW5zdGVhZCByZW5kZXJpbmcgc2hvdWxkXG4gKiBlaXRoZXIgZG9uZSBhc3luY2hyb25vdXNseSwgZm9yIGV4YW1wbGUgYXQgbWljcm90YXNrIHRpbWluZyAoZm9yIGV4YW1wbGVcbiAqIGBQcm9taXNlLnJlc29sdmUoKWApLCBvciBiZSBkZWZlcnJlZCB1bnRpbCB0aGUgZmlyc3QgdGltZSB0aGUgZWxlbWVudCdzXG4gKiBgY29ubmVjdGVkQ2FsbGJhY2tgIHJ1bnMuXG4gKlxuICogVXNhZ2UgY29uc2lkZXJhdGlvbnMgd2hlbiB1c2luZyBzaGltbWVkIGN1c3RvbSBwcm9wZXJ0aWVzIG9yIGBAYXBwbHlgOlxuICpcbiAqICogV2hlbmV2ZXIgYW55IGR5bmFtaWMgY2hhbmdlcyBhcmUgbWFkZSB3aGljaCBhZmZlY3RcbiAqIGNzcyBjdXN0b20gcHJvcGVydGllcywgYFNoYWR5Q1NTLnN0eWxlRWxlbWVudChlbGVtZW50KWAgbXVzdCBiZSBjYWxsZWRcbiAqIHRvIHVwZGF0ZSB0aGUgZWxlbWVudC4gVGhlcmUgYXJlIHR3byBjYXNlcyB3aGVuIHRoaXMgaXMgbmVlZGVkOlxuICogKDEpIHRoZSBlbGVtZW50IGlzIGNvbm5lY3RlZCB0byBhIG5ldyBwYXJlbnQsICgyKSBhIGNsYXNzIGlzIGFkZGVkIHRvIHRoZVxuICogZWxlbWVudCB0aGF0IGNhdXNlcyBpdCB0byBtYXRjaCBkaWZmZXJlbnQgY3VzdG9tIHByb3BlcnRpZXMuXG4gKiBUbyBhZGRyZXNzIHRoZSBmaXJzdCBjYXNlIHdoZW4gcmVuZGVyaW5nIGEgY3VzdG9tIGVsZW1lbnQsIGBzdHlsZUVsZW1lbnRgXG4gKiBzaG91bGQgYmUgY2FsbGVkIGluIHRoZSBlbGVtZW50J3MgYGNvbm5lY3RlZENhbGxiYWNrYC5cbiAqXG4gKiAqIFNoaW1tZWQgY3VzdG9tIHByb3BlcnRpZXMgbWF5IG9ubHkgYmUgZGVmaW5lZCBlaXRoZXIgZm9yIGFuIGVudGlyZVxuICogc2hhZG93Um9vdCAoZm9yIGV4YW1wbGUsIGluIGEgYDpob3N0YCBydWxlKSBvciB2aWEgYSBydWxlIHRoYXQgZGlyZWN0bHlcbiAqIG1hdGNoZXMgYW4gZWxlbWVudCB3aXRoIGEgc2hhZG93Um9vdC4gSW4gb3RoZXIgd29yZHMsIGluc3RlYWQgb2YgZmxvd2luZyBmcm9tXG4gKiBwYXJlbnQgdG8gY2hpbGQgYXMgZG8gbmF0aXZlIGNzcyBjdXN0b20gcHJvcGVydGllcywgc2hpbW1lZCBjdXN0b20gcHJvcGVydGllc1xuICogZmxvdyBvbmx5IGZyb20gc2hhZG93Um9vdHMgdG8gbmVzdGVkIHNoYWRvd1Jvb3RzLlxuICpcbiAqICogV2hlbiB1c2luZyBgQGFwcGx5YCBtaXhpbmcgY3NzIHNob3J0aGFuZCBwcm9wZXJ0eSBuYW1lcyB3aXRoXG4gKiBub24tc2hvcnRoYW5kIG5hbWVzIChmb3IgZXhhbXBsZSBgYm9yZGVyYCBhbmQgYGJvcmRlci13aWR0aGApIGlzIG5vdFxuICogc3VwcG9ydGVkLlxuICovXG5leHBvcnQgY29uc3QgcmVuZGVyID0gKHJlc3VsdCwgY29udGFpbmVyLCBvcHRpb25zKSA9PiB7XG4gICAgaWYgKCFvcHRpb25zIHx8IHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0JyB8fCAhb3B0aW9ucy5zY29wZU5hbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgYHNjb3BlTmFtZWAgb3B0aW9uIGlzIHJlcXVpcmVkLicpO1xuICAgIH1cbiAgICBjb25zdCBzY29wZU5hbWUgPSBvcHRpb25zLnNjb3BlTmFtZTtcbiAgICBjb25zdCBoYXNSZW5kZXJlZCA9IHBhcnRzLmhhcyhjb250YWluZXIpO1xuICAgIGNvbnN0IG5lZWRzU2NvcGluZyA9IGNvbXBhdGlibGVTaGFkeUNTU1ZlcnNpb24gJiZcbiAgICAgICAgY29udGFpbmVyLm5vZGVUeXBlID09PSAxMSAvKiBOb2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUgKi8gJiZcbiAgICAgICAgISFjb250YWluZXIuaG9zdDtcbiAgICAvLyBIYW5kbGUgZmlyc3QgcmVuZGVyIHRvIGEgc2NvcGUgc3BlY2lhbGx5Li4uXG4gICAgY29uc3QgZmlyc3RTY29wZVJlbmRlciA9IG5lZWRzU2NvcGluZyAmJiAhc2hhZHlSZW5kZXJTZXQuaGFzKHNjb3BlTmFtZSk7XG4gICAgLy8gT24gZmlyc3Qgc2NvcGUgcmVuZGVyLCByZW5kZXIgaW50byBhIGZyYWdtZW50OyB0aGlzIGNhbm5vdCBiZSBhIHNpbmdsZVxuICAgIC8vIGZyYWdtZW50IHRoYXQgaXMgcmV1c2VkIHNpbmNlIG5lc3RlZCByZW5kZXJzIGNhbiBvY2N1ciBzeW5jaHJvbm91c2x5LlxuICAgIGNvbnN0IHJlbmRlckNvbnRhaW5lciA9IGZpcnN0U2NvcGVSZW5kZXIgPyBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkgOiBjb250YWluZXI7XG4gICAgbGl0UmVuZGVyKHJlc3VsdCwgcmVuZGVyQ29udGFpbmVyLCBPYmplY3QuYXNzaWduKHsgdGVtcGxhdGVGYWN0b3J5OiBzaGFkeVRlbXBsYXRlRmFjdG9yeShzY29wZU5hbWUpIH0sIG9wdGlvbnMpKTtcbiAgICAvLyBXaGVuIHBlcmZvcm1pbmcgZmlyc3Qgc2NvcGUgcmVuZGVyLFxuICAgIC8vICgxKSBXZSd2ZSByZW5kZXJlZCBpbnRvIGEgZnJhZ21lbnQgc28gdGhhdCB0aGVyZSdzIGEgY2hhbmNlIHRvXG4gICAgLy8gYHByZXBhcmVUZW1wbGF0ZVN0eWxlc2AgYmVmb3JlIHN1Yi1lbGVtZW50cyBoaXQgdGhlIERPTVxuICAgIC8vICh3aGljaCBtaWdodCBjYXVzZSB0aGVtIHRvIHJlbmRlciBiYXNlZCBvbiBhIGNvbW1vbiBwYXR0ZXJuIG9mXG4gICAgLy8gcmVuZGVyaW5nIGluIGEgY3VzdG9tIGVsZW1lbnQncyBgY29ubmVjdGVkQ2FsbGJhY2tgKTtcbiAgICAvLyAoMikgU2NvcGUgdGhlIHRlbXBsYXRlIHdpdGggU2hhZHlDU1Mgb25lIHRpbWUgb25seSBmb3IgdGhpcyBzY29wZS5cbiAgICAvLyAoMykgUmVuZGVyIHRoZSBmcmFnbWVudCBpbnRvIHRoZSBjb250YWluZXIgYW5kIG1ha2Ugc3VyZSB0aGVcbiAgICAvLyBjb250YWluZXIga25vd3MgaXRzIGBwYXJ0YCBpcyB0aGUgb25lIHdlIGp1c3QgcmVuZGVyZWQuIFRoaXMgZW5zdXJlc1xuICAgIC8vIERPTSB3aWxsIGJlIHJlLXVzZWQgb24gc3Vic2VxdWVudCByZW5kZXJzLlxuICAgIGlmIChmaXJzdFNjb3BlUmVuZGVyKSB7XG4gICAgICAgIGNvbnN0IHBhcnQgPSBwYXJ0cy5nZXQocmVuZGVyQ29udGFpbmVyKTtcbiAgICAgICAgcGFydHMuZGVsZXRlKHJlbmRlckNvbnRhaW5lcik7XG4gICAgICAgIC8vIFNoYWR5Q1NTIG1pZ2h0IGhhdmUgc3R5bGUgc2hlZXRzIChlLmcuIGZyb20gYHByZXBhcmVBZG9wdGVkQ3NzVGV4dGApXG4gICAgICAgIC8vIHRoYXQgc2hvdWxkIGFwcGx5IHRvIGByZW5kZXJDb250YWluZXJgIGV2ZW4gaWYgdGhlIHJlbmRlcmVkIHZhbHVlIGlzXG4gICAgICAgIC8vIG5vdCBhIFRlbXBsYXRlSW5zdGFuY2UuIEhvd2V2ZXIsIGl0IHdpbGwgb25seSBpbnNlcnQgc2NvcGVkIHN0eWxlc1xuICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudCBpZiBgcHJlcGFyZVRlbXBsYXRlU3R5bGVzYCBoYXMgYWxyZWFkeSBiZWVuIGNhbGxlZFxuICAgICAgICAvLyBmb3IgdGhlIGdpdmVuIHNjb3BlIG5hbWUuXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gcGFydC52YWx1ZSBpbnN0YW5jZW9mIFRlbXBsYXRlSW5zdGFuY2UgP1xuICAgICAgICAgICAgcGFydC52YWx1ZS50ZW1wbGF0ZSA6XG4gICAgICAgICAgICB1bmRlZmluZWQ7XG4gICAgICAgIHByZXBhcmVUZW1wbGF0ZVN0eWxlcyhzY29wZU5hbWUsIHJlbmRlckNvbnRhaW5lciwgdGVtcGxhdGUpO1xuICAgICAgICByZW1vdmVOb2Rlcyhjb250YWluZXIsIGNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJlbmRlckNvbnRhaW5lcik7XG4gICAgICAgIHBhcnRzLnNldChjb250YWluZXIsIHBhcnQpO1xuICAgIH1cbiAgICAvLyBBZnRlciBlbGVtZW50cyBoYXZlIGhpdCB0aGUgRE9NLCB1cGRhdGUgc3R5bGluZyBpZiB0aGlzIGlzIHRoZVxuICAgIC8vIGluaXRpYWwgcmVuZGVyIHRvIHRoaXMgY29udGFpbmVyLlxuICAgIC8vIFRoaXMgaXMgbmVlZGVkIHdoZW5ldmVyIGR5bmFtaWMgY2hhbmdlcyBhcmUgbWFkZSBzbyBpdCB3b3VsZCBiZVxuICAgIC8vIHNhZmVzdCB0byBkbyBldmVyeSByZW5kZXI7IGhvd2V2ZXIsIHRoaXMgd291bGQgcmVncmVzcyBwZXJmb3JtYW5jZVxuICAgIC8vIHNvIHdlIGxlYXZlIGl0IHVwIHRvIHRoZSB1c2VyIHRvIGNhbGwgYFNoYWR5Q1NTLnN0eWxlRWxlbWVudGBcbiAgICAvLyBmb3IgZHluYW1pYyBjaGFuZ2VzLlxuICAgIGlmICghaGFzUmVuZGVyZWQgJiYgbmVlZHNTY29waW5nKSB7XG4gICAgICAgIHdpbmRvdy5TaGFkeUNTUy5zdHlsZUVsZW1lbnQoY29udGFpbmVyLmhvc3QpO1xuICAgIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGFkeS1yZW5kZXIuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xudmFyIF9hO1xuLyoqXG4gKiBXaGVuIHVzaW5nIENsb3N1cmUgQ29tcGlsZXIsIEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkocHJvcGVydHksIG9iamVjdCkgaXNcbiAqIHJlcGxhY2VkIGF0IGNvbXBpbGUgdGltZSBieSB0aGUgbXVuZ2VkIG5hbWUgZm9yIG9iamVjdFtwcm9wZXJ0eV0uIFdlIGNhbm5vdFxuICogYWxpYXMgdGhpcyBmdW5jdGlvbiwgc28gd2UgaGF2ZSB0byB1c2UgYSBzbWFsbCBzaGltIHRoYXQgaGFzIHRoZSBzYW1lXG4gKiBiZWhhdmlvciB3aGVuIG5vdCBjb21waWxpbmcuXG4gKi9cbndpbmRvdy5KU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5ID1cbiAgICAocHJvcCwgX29iaikgPT4gcHJvcDtcbmV4cG9ydCBjb25zdCBkZWZhdWx0Q29udmVydGVyID0ge1xuICAgIHRvQXR0cmlidXRlKHZhbHVlLCB0eXBlKSB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBCb29sZWFuOlxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSA/ICcnIDogbnVsbDtcbiAgICAgICAgICAgIGNhc2UgT2JqZWN0OlxuICAgICAgICAgICAgY2FzZSBBcnJheTpcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgdmFsdWUgaXMgYG51bGxgIG9yIGB1bmRlZmluZWRgIHBhc3MgdGhpcyB0aHJvdWdoXG4gICAgICAgICAgICAgICAgLy8gdG8gYWxsb3cgcmVtb3Zpbmcvbm8gY2hhbmdlIGJlaGF2aW9yLlxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gdmFsdWUgOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgZnJvbUF0dHJpYnV0ZSh2YWx1ZSwgdHlwZSkge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgQm9vbGVhbjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgIT09IG51bGw7XG4gICAgICAgICAgICBjYXNlIE51bWJlcjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgPyBudWxsIDogTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgICAgIGNhc2UgT2JqZWN0OlxuICAgICAgICAgICAgY2FzZSBBcnJheTpcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn07XG4vKipcbiAqIENoYW5nZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGRpZmZlcmVudCBmcm9tIGBvbGRWYWx1ZWAuXG4gKiBUaGlzIG1ldGhvZCBpcyB1c2VkIGFzIHRoZSBkZWZhdWx0IGZvciBhIHByb3BlcnR5J3MgYGhhc0NoYW5nZWRgIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgY29uc3Qgbm90RXF1YWwgPSAodmFsdWUsIG9sZCkgPT4ge1xuICAgIC8vIFRoaXMgZW5zdXJlcyAob2xkPT1OYU4sIHZhbHVlPT1OYU4pIGFsd2F5cyByZXR1cm5zIGZhbHNlXG4gICAgcmV0dXJuIG9sZCAhPT0gdmFsdWUgJiYgKG9sZCA9PT0gb2xkIHx8IHZhbHVlID09PSB2YWx1ZSk7XG59O1xuY29uc3QgZGVmYXVsdFByb3BlcnR5RGVjbGFyYXRpb24gPSB7XG4gICAgYXR0cmlidXRlOiB0cnVlLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjb252ZXJ0ZXI6IGRlZmF1bHRDb252ZXJ0ZXIsXG4gICAgcmVmbGVjdDogZmFsc2UsXG4gICAgaGFzQ2hhbmdlZDogbm90RXF1YWxcbn07XG5jb25zdCBTVEFURV9IQVNfVVBEQVRFRCA9IDE7XG5jb25zdCBTVEFURV9VUERBVEVfUkVRVUVTVEVEID0gMSA8PCAyO1xuY29uc3QgU1RBVEVfSVNfUkVGTEVDVElOR19UT19BVFRSSUJVVEUgPSAxIDw8IDM7XG5jb25zdCBTVEFURV9JU19SRUZMRUNUSU5HX1RPX1BST1BFUlRZID0gMSA8PCA0O1xuLyoqXG4gKiBUaGUgQ2xvc3VyZSBKUyBDb21waWxlciBkb2Vzbid0IGN1cnJlbnRseSBoYXZlIGdvb2Qgc3VwcG9ydCBmb3Igc3RhdGljXG4gKiBwcm9wZXJ0eSBzZW1hbnRpY3Mgd2hlcmUgXCJ0aGlzXCIgaXMgZHluYW1pYyAoZS5nLlxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWNvbXBpbGVyL2lzc3Vlcy8zMTc3IGFuZCBvdGhlcnMpIHNvIHdlIHVzZVxuICogdGhpcyBoYWNrIHRvIGJ5cGFzcyBhbnkgcmV3cml0aW5nIGJ5IHRoZSBjb21waWxlci5cbiAqL1xuY29uc3QgZmluYWxpemVkID0gJ2ZpbmFsaXplZCc7XG4vKipcbiAqIEJhc2UgZWxlbWVudCBjbGFzcyB3aGljaCBtYW5hZ2VzIGVsZW1lbnQgcHJvcGVydGllcyBhbmQgYXR0cmlidXRlcy4gV2hlblxuICogcHJvcGVydGllcyBjaGFuZ2UsIHRoZSBgdXBkYXRlYCBtZXRob2QgaXMgYXN5bmNocm9ub3VzbHkgY2FsbGVkLiBUaGlzIG1ldGhvZFxuICogc2hvdWxkIGJlIHN1cHBsaWVkIGJ5IHN1YmNsYXNzZXJzIHRvIHJlbmRlciB1cGRhdGVzIGFzIGRlc2lyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBVcGRhdGluZ0VsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gMDtcbiAgICAgICAgdGhpcy5faW5zdGFuY2VQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICAvLyBJbml0aWFsaXplIHRvIGFuIHVucmVzb2x2ZWQgUHJvbWlzZSBzbyB3ZSBjYW4gbWFrZSBzdXJlIHRoZSBlbGVtZW50IGhhc1xuICAgICAgICAvLyBjb25uZWN0ZWQgYmVmb3JlIGZpcnN0IHVwZGF0ZS5cbiAgICAgICAgdGhpcy5fdXBkYXRlUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXMpID0+IHRoaXMuX2VuYWJsZVVwZGF0aW5nUmVzb2x2ZXIgPSByZXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogTWFwIHdpdGgga2V5cyBmb3IgYW55IHByb3BlcnRpZXMgdGhhdCBoYXZlIGNoYW5nZWQgc2luY2UgdGhlIGxhc3RcbiAgICAgICAgICogdXBkYXRlIGN5Y2xlIHdpdGggcHJldmlvdXMgdmFsdWVzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fY2hhbmdlZFByb3BlcnRpZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXAgd2l0aCBrZXlzIG9mIHByb3BlcnRpZXMgdGhhdCBzaG91bGQgYmUgcmVmbGVjdGVkIHdoZW4gdXBkYXRlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3JlZmxlY3RpbmdQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxpc3Qgb2YgYXR0cmlidXRlcyBjb3JyZXNwb25kaW5nIHRvIHRoZSByZWdpc3RlcmVkIHByb3BlcnRpZXMuXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAgICAgICAgLy8gbm90ZTogcGlnZ3kgYmFja2luZyBvbiB0aGlzIHRvIGVuc3VyZSB3ZSdyZSBmaW5hbGl6ZWQuXG4gICAgICAgIHRoaXMuZmluYWxpemUoKTtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IFtdO1xuICAgICAgICAvLyBVc2UgZm9yRWFjaCBzbyB0aGlzIHdvcmtzIGV2ZW4gaWYgZm9yL29mIGxvb3BzIGFyZSBjb21waWxlZCB0byBmb3IgbG9vcHNcbiAgICAgICAgLy8gZXhwZWN0aW5nIGFycmF5c1xuICAgICAgICB0aGlzLl9jbGFzc1Byb3BlcnRpZXMuZm9yRWFjaCgodiwgcCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYXR0ciA9IHRoaXMuX2F0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eShwLCB2KTtcbiAgICAgICAgICAgIGlmIChhdHRyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9hdHRyaWJ1dGVUb1Byb3BlcnR5TWFwLnNldChhdHRyLCBwKTtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLnB1c2goYXR0cik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXR0cmlidXRlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5zdXJlcyB0aGUgcHJpdmF0ZSBgX2NsYXNzUHJvcGVydGllc2AgcHJvcGVydHkgbWV0YWRhdGEgaXMgY3JlYXRlZC5cbiAgICAgKiBJbiBhZGRpdGlvbiB0byBgZmluYWxpemVgIHRoaXMgaXMgYWxzbyBjYWxsZWQgaW4gYGNyZWF0ZVByb3BlcnR5YCB0b1xuICAgICAqIGVuc3VyZSB0aGUgYEBwcm9wZXJ0eWAgZGVjb3JhdG9yIGNhbiBhZGQgcHJvcGVydHkgbWV0YWRhdGEuXG4gICAgICovXG4gICAgLyoqIEBub2NvbGxhcHNlICovXG4gICAgc3RhdGljIF9lbnN1cmVDbGFzc1Byb3BlcnRpZXMoKSB7XG4gICAgICAgIC8vIGVuc3VyZSBwcml2YXRlIHN0b3JhZ2UgZm9yIHByb3BlcnR5IGRlY2xhcmF0aW9ucy5cbiAgICAgICAgaWYgKCF0aGlzLmhhc093blByb3BlcnR5KEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ19jbGFzc1Byb3BlcnRpZXMnLCB0aGlzKSkpIHtcbiAgICAgICAgICAgIHRoaXMuX2NsYXNzUHJvcGVydGllcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIC8vIE5PVEU6IFdvcmthcm91bmQgSUUxMSBub3Qgc3VwcG9ydGluZyBNYXAgY29uc3RydWN0b3IgYXJndW1lbnQuXG4gICAgICAgICAgICBjb25zdCBzdXBlclByb3BlcnRpZXMgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykuX2NsYXNzUHJvcGVydGllcztcbiAgICAgICAgICAgIGlmIChzdXBlclByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHN1cGVyUHJvcGVydGllcy5mb3JFYWNoKCh2LCBrKSA9PiB0aGlzLl9jbGFzc1Byb3BlcnRpZXMuc2V0KGssIHYpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcHJvcGVydHkgYWNjZXNzb3Igb24gdGhlIGVsZW1lbnQgcHJvdG90eXBlIGlmIG9uZSBkb2VzIG5vdCBleGlzdFxuICAgICAqIGFuZCBzdG9yZXMgYSBQcm9wZXJ0eURlY2xhcmF0aW9uIGZvciB0aGUgcHJvcGVydHkgd2l0aCB0aGUgZ2l2ZW4gb3B0aW9ucy5cbiAgICAgKiBUaGUgcHJvcGVydHkgc2V0dGVyIGNhbGxzIHRoZSBwcm9wZXJ0eSdzIGBoYXNDaGFuZ2VkYCBwcm9wZXJ0eSBvcHRpb25cbiAgICAgKiBvciB1c2VzIGEgc3RyaWN0IGlkZW50aXR5IGNoZWNrIHRvIGRldGVybWluZSB3aGV0aGVyIG9yIG5vdCB0byByZXF1ZXN0XG4gICAgICogYW4gdXBkYXRlLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgbWF5IGJlIG92ZXJyaWRkZW4gdG8gY3VzdG9taXplIHByb3BlcnRpZXM7IGhvd2V2ZXIsXG4gICAgICogd2hlbiBkb2luZyBzbywgaXQncyBpbXBvcnRhbnQgdG8gY2FsbCBgc3VwZXIuY3JlYXRlUHJvcGVydHlgIHRvIGVuc3VyZVxuICAgICAqIHRoZSBwcm9wZXJ0eSBpcyBzZXR1cCBjb3JyZWN0bHkuIFRoaXMgbWV0aG9kIGNhbGxzXG4gICAgICogYGdldFByb3BlcnR5RGVzY3JpcHRvcmAgaW50ZXJuYWxseSB0byBnZXQgYSBkZXNjcmlwdG9yIHRvIGluc3RhbGwuXG4gICAgICogVG8gY3VzdG9taXplIHdoYXQgcHJvcGVydGllcyBkbyB3aGVuIHRoZXkgYXJlIGdldCBvciBzZXQsIG92ZXJyaWRlXG4gICAgICogYGdldFByb3BlcnR5RGVzY3JpcHRvcmAuIFRvIGN1c3RvbWl6ZSB0aGUgb3B0aW9ucyBmb3IgYSBwcm9wZXJ0eSxcbiAgICAgKiBpbXBsZW1lbnQgYGNyZWF0ZVByb3BlcnR5YCBsaWtlIHRoaXM6XG4gICAgICpcbiAgICAgKiBzdGF0aWMgY3JlYXRlUHJvcGVydHkobmFtZSwgb3B0aW9ucykge1xuICAgICAqICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24ob3B0aW9ucywge215T3B0aW9uOiB0cnVlfSk7XG4gICAgICogICBzdXBlci5jcmVhdGVQcm9wZXJ0eShuYW1lLCBvcHRpb25zKTtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVQcm9wZXJ0eShuYW1lLCBvcHRpb25zID0gZGVmYXVsdFByb3BlcnR5RGVjbGFyYXRpb24pIHtcbiAgICAgICAgLy8gTm90ZSwgc2luY2UgdGhpcyBjYW4gYmUgY2FsbGVkIGJ5IHRoZSBgQHByb3BlcnR5YCBkZWNvcmF0b3Igd2hpY2hcbiAgICAgICAgLy8gaXMgY2FsbGVkIGJlZm9yZSBgZmluYWxpemVgLCB3ZSBlbnN1cmUgc3RvcmFnZSBleGlzdHMgZm9yIHByb3BlcnR5XG4gICAgICAgIC8vIG1ldGFkYXRhLlxuICAgICAgICB0aGlzLl9lbnN1cmVDbGFzc1Byb3BlcnRpZXMoKTtcbiAgICAgICAgdGhpcy5fY2xhc3NQcm9wZXJ0aWVzLnNldChuYW1lLCBvcHRpb25zKTtcbiAgICAgICAgLy8gRG8gbm90IGdlbmVyYXRlIGFuIGFjY2Vzc29yIGlmIHRoZSBwcm90b3R5cGUgYWxyZWFkeSBoYXMgb25lLCBzaW5jZVxuICAgICAgICAvLyBpdCB3b3VsZCBiZSBsb3N0IG90aGVyd2lzZSBhbmQgdGhhdCB3b3VsZCBuZXZlciBiZSB0aGUgdXNlcidzIGludGVudGlvbjtcbiAgICAgICAgLy8gSW5zdGVhZCwgd2UgZXhwZWN0IHVzZXJzIHRvIGNhbGwgYHJlcXVlc3RVcGRhdGVgIHRoZW1zZWx2ZXMgZnJvbVxuICAgICAgICAvLyB1c2VyLWRlZmluZWQgYWNjZXNzb3JzLiBOb3RlIHRoYXQgaWYgdGhlIHN1cGVyIGhhcyBhbiBhY2Nlc3NvciB3ZSB3aWxsXG4gICAgICAgIC8vIHN0aWxsIG92ZXJ3cml0ZSBpdFxuICAgICAgICBpZiAob3B0aW9ucy5ub0FjY2Vzc29yIHx8IHRoaXMucHJvdG90eXBlLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qga2V5ID0gdHlwZW9mIG5hbWUgPT09ICdzeW1ib2wnID8gU3ltYm9sKCkgOiBgX18ke25hbWV9YDtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IHRoaXMuZ2V0UHJvcGVydHlEZXNjcmlwdG9yKG5hbWUsIGtleSwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChkZXNjcmlwdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLnByb3RvdHlwZSwgbmFtZSwgZGVzY3JpcHRvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHByb3BlcnR5IGRlc2NyaXB0b3IgdG8gYmUgZGVmaW5lZCBvbiB0aGUgZ2l2ZW4gbmFtZWQgcHJvcGVydHkuXG4gICAgICogSWYgbm8gZGVzY3JpcHRvciBpcyByZXR1cm5lZCwgdGhlIHByb3BlcnR5IHdpbGwgbm90IGJlY29tZSBhbiBhY2Nlc3Nvci5cbiAgICAgKiBGb3IgZXhhbXBsZSxcbiAgICAgKlxuICAgICAqICAgY2xhc3MgTXlFbGVtZW50IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gICAgICogICAgIHN0YXRpYyBnZXRQcm9wZXJ0eURlc2NyaXB0b3IobmFtZSwga2V5LCBvcHRpb25zKSB7XG4gICAgICogICAgICAgY29uc3QgZGVmYXVsdERlc2NyaXB0b3IgPVxuICAgICAqICAgICAgICAgICBzdXBlci5nZXRQcm9wZXJ0eURlc2NyaXB0b3IobmFtZSwga2V5LCBvcHRpb25zKTtcbiAgICAgKiAgICAgICBjb25zdCBzZXR0ZXIgPSBkZWZhdWx0RGVzY3JpcHRvci5zZXQ7XG4gICAgICogICAgICAgcmV0dXJuIHtcbiAgICAgKiAgICAgICAgIGdldDogZGVmYXVsdERlc2NyaXB0b3IuZ2V0LFxuICAgICAqICAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICogICAgICAgICAgIHNldHRlci5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgKiAgICAgICAgICAgLy8gY3VzdG9tIGFjdGlvbi5cbiAgICAgKiAgICAgICAgIH0sXG4gICAgICogICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICogICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICogICAgICAgfVxuICAgICAqICAgICB9XG4gICAgICogICB9XG4gICAgICpcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRQcm9wZXJ0eURlc2NyaXB0b3IobmFtZSwga2V5LCBfb3B0aW9ucykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueSBubyBzeW1ib2wgaW4gaW5kZXhcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1trZXldO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldCh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpc1tuYW1lXTtcbiAgICAgICAgICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXF1ZXN0VXBkYXRlKG5hbWUsIG9sZFZhbHVlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByb3BlcnR5IG9wdGlvbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBwcm9wZXJ0eS5cbiAgICAgKiBUaGVzZSBvcHRpb25zIGFyZSBkZWZpbmVkIHdpdGggYSBQcm9wZXJ0eURlY2xhcmF0aW9uIHZpYSB0aGUgYHByb3BlcnRpZXNgXG4gICAgICogb2JqZWN0IG9yIHRoZSBgQHByb3BlcnR5YCBkZWNvcmF0b3IgYW5kIGFyZSByZWdpc3RlcmVkIGluXG4gICAgICogYGNyZWF0ZVByb3BlcnR5KC4uLilgLlxuICAgICAqXG4gICAgICogTm90ZSwgdGhpcyBtZXRob2Qgc2hvdWxkIGJlIGNvbnNpZGVyZWQgXCJmaW5hbFwiIGFuZCBub3Qgb3ZlcnJpZGRlbi4gVG9cbiAgICAgKiBjdXN0b21pemUgdGhlIG9wdGlvbnMgZm9yIGEgZ2l2ZW4gcHJvcGVydHksIG92ZXJyaWRlIGBjcmVhdGVQcm9wZXJ0eWAuXG4gICAgICpcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqIEBmaW5hbFxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRQcm9wZXJ0eU9wdGlvbnMobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2xhc3NQcm9wZXJ0aWVzICYmIHRoaXMuX2NsYXNzUHJvcGVydGllcy5nZXQobmFtZSkgfHxcbiAgICAgICAgICAgIGRlZmF1bHRQcm9wZXJ0eURlY2xhcmF0aW9uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIHByb3BlcnR5IGFjY2Vzc29ycyBmb3IgcmVnaXN0ZXJlZCBwcm9wZXJ0aWVzIGFuZCBlbnN1cmVzXG4gICAgICogYW55IHN1cGVyY2xhc3NlcyBhcmUgYWxzbyBmaW5hbGl6ZWQuXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgZmluYWxpemUoKSB7XG4gICAgICAgIC8vIGZpbmFsaXplIGFueSBzdXBlcmNsYXNzZXNcbiAgICAgICAgY29uc3Qgc3VwZXJDdG9yID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpO1xuICAgICAgICBpZiAoIXN1cGVyQ3Rvci5oYXNPd25Qcm9wZXJ0eShmaW5hbGl6ZWQpKSB7XG4gICAgICAgICAgICBzdXBlckN0b3IuZmluYWxpemUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2ZpbmFsaXplZF0gPSB0cnVlO1xuICAgICAgICB0aGlzLl9lbnN1cmVDbGFzc1Byb3BlcnRpZXMoKTtcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBNYXAgcG9wdWxhdGVkIGluIG9ic2VydmVkQXR0cmlidXRlc1xuICAgICAgICB0aGlzLl9hdHRyaWJ1dGVUb1Byb3BlcnR5TWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAvLyBtYWtlIGFueSBwcm9wZXJ0aWVzXG4gICAgICAgIC8vIE5vdGUsIG9ubHkgcHJvY2VzcyBcIm93blwiIHByb3BlcnRpZXMgc2luY2UgdGhpcyBlbGVtZW50IHdpbGwgaW5oZXJpdFxuICAgICAgICAvLyBhbnkgcHJvcGVydGllcyBkZWZpbmVkIG9uIHRoZSBzdXBlckNsYXNzLCBhbmQgZmluYWxpemF0aW9uIGVuc3VyZXNcbiAgICAgICAgLy8gdGhlIGVudGlyZSBwcm90b3R5cGUgY2hhaW4gaXMgZmluYWxpemVkLlxuICAgICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdwcm9wZXJ0aWVzJywgdGhpcykpKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcGVydGllcztcbiAgICAgICAgICAgIC8vIHN1cHBvcnQgc3ltYm9scyBpbiBwcm9wZXJ0aWVzIChJRTExIGRvZXMgbm90IHN1cHBvcnQgdGhpcylcbiAgICAgICAgICAgIGNvbnN0IHByb3BLZXlzID0gW1xuICAgICAgICAgICAgICAgIC4uLk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb3BzKSxcbiAgICAgICAgICAgICAgICAuLi4odHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09ICdmdW5jdGlvbicpID9cbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhwcm9wcykgOlxuICAgICAgICAgICAgICAgICAgICBbXVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIC8vIFRoaXMgZm9yL29mIGlzIG9rIGJlY2F1c2UgcHJvcEtleXMgaXMgYW4gYXJyYXlcbiAgICAgICAgICAgIGZvciAoY29uc3QgcCBvZiBwcm9wS2V5cykge1xuICAgICAgICAgICAgICAgIC8vIG5vdGUsIHVzZSBvZiBgYW55YCBpcyBkdWUgdG8gVHlwZVNyaXB0IGxhY2sgb2Ygc3VwcG9ydCBmb3Igc3ltYm9sIGluXG4gICAgICAgICAgICAgICAgLy8gaW5kZXggdHlwZXNcbiAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55IG5vIHN5bWJvbCBpbiBpbmRleFxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlUHJvcGVydHkocCwgcHJvcHNbcF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByb3BlcnR5IG5hbWUgZm9yIHRoZSBnaXZlbiBhdHRyaWJ1dGUgYG5hbWVgLlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9hdHRyaWJ1dGVOYW1lRm9yUHJvcGVydHkobmFtZSwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGUgPSBvcHRpb25zLmF0dHJpYnV0ZTtcbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZSA9PT0gZmFsc2UgP1xuICAgICAgICAgICAgdW5kZWZpbmVkIDpcbiAgICAgICAgICAgICh0eXBlb2YgYXR0cmlidXRlID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlIDpcbiAgICAgICAgICAgICAgICAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnID8gbmFtZS50b0xvd2VyQ2FzZSgpIDogdW5kZWZpbmVkKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhIHByb3BlcnR5IHNob3VsZCByZXF1ZXN0IGFuIHVwZGF0ZS5cbiAgICAgKiBDYWxsZWQgd2hlbiBhIHByb3BlcnR5IHZhbHVlIGlzIHNldCBhbmQgdXNlcyB0aGUgYGhhc0NoYW5nZWRgXG4gICAgICogb3B0aW9uIGZvciB0aGUgcHJvcGVydHkgaWYgcHJlc2VudCBvciBhIHN0cmljdCBpZGVudGl0eSBjaGVjay5cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfdmFsdWVIYXNDaGFuZ2VkKHZhbHVlLCBvbGQsIGhhc0NoYW5nZWQgPSBub3RFcXVhbCkge1xuICAgICAgICByZXR1cm4gaGFzQ2hhbmdlZCh2YWx1ZSwgb2xkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgZm9yIHRoZSBnaXZlbiBhdHRyaWJ1dGUgdmFsdWUuXG4gICAgICogQ2FsbGVkIHZpYSB0aGUgYGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja2AgYW5kIHVzZXMgdGhlIHByb3BlcnR5J3NcbiAgICAgKiBgY29udmVydGVyYCBvciBgY29udmVydGVyLmZyb21BdHRyaWJ1dGVgIHByb3BlcnR5IG9wdGlvbi5cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfcHJvcGVydHlWYWx1ZUZyb21BdHRyaWJ1dGUodmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IG9wdGlvbnMudHlwZTtcbiAgICAgICAgY29uc3QgY29udmVydGVyID0gb3B0aW9ucy5jb252ZXJ0ZXIgfHwgZGVmYXVsdENvbnZlcnRlcjtcbiAgICAgICAgY29uc3QgZnJvbUF0dHJpYnV0ZSA9ICh0eXBlb2YgY29udmVydGVyID09PSAnZnVuY3Rpb24nID8gY29udmVydGVyIDogY29udmVydGVyLmZyb21BdHRyaWJ1dGUpO1xuICAgICAgICByZXR1cm4gZnJvbUF0dHJpYnV0ZSA/IGZyb21BdHRyaWJ1dGUodmFsdWUsIHR5cGUpIDogdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGF0dHJpYnV0ZSB2YWx1ZSBmb3IgdGhlIGdpdmVuIHByb3BlcnR5IHZhbHVlLiBJZiB0aGlzXG4gICAgICogcmV0dXJucyB1bmRlZmluZWQsIHRoZSBwcm9wZXJ0eSB3aWxsICpub3QqIGJlIHJlZmxlY3RlZCB0byBhbiBhdHRyaWJ1dGUuXG4gICAgICogSWYgdGhpcyByZXR1cm5zIG51bGwsIHRoZSBhdHRyaWJ1dGUgd2lsbCBiZSByZW1vdmVkLCBvdGhlcndpc2UgdGhlXG4gICAgICogYXR0cmlidXRlIHdpbGwgYmUgc2V0IHRvIHRoZSB2YWx1ZS5cbiAgICAgKiBUaGlzIHVzZXMgdGhlIHByb3BlcnR5J3MgYHJlZmxlY3RgIGFuZCBgdHlwZS50b0F0dHJpYnV0ZWAgcHJvcGVydHkgb3B0aW9ucy5cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfcHJvcGVydHlWYWx1ZVRvQXR0cmlidXRlKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zLnJlZmxlY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHR5cGUgPSBvcHRpb25zLnR5cGU7XG4gICAgICAgIGNvbnN0IGNvbnZlcnRlciA9IG9wdGlvbnMuY29udmVydGVyO1xuICAgICAgICBjb25zdCB0b0F0dHJpYnV0ZSA9IGNvbnZlcnRlciAmJiBjb252ZXJ0ZXIudG9BdHRyaWJ1dGUgfHxcbiAgICAgICAgICAgIGRlZmF1bHRDb252ZXJ0ZXIudG9BdHRyaWJ1dGU7XG4gICAgICAgIHJldHVybiB0b0F0dHJpYnV0ZSh2YWx1ZSwgdHlwZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGVsZW1lbnQgaW5pdGlhbGl6YXRpb24uIEJ5IGRlZmF1bHQgY2FwdHVyZXMgYW55IHByZS1zZXQgdmFsdWVzIGZvclxuICAgICAqIHJlZ2lzdGVyZWQgcHJvcGVydGllcy5cbiAgICAgKi9cbiAgICBpbml0aWFsaXplKCkge1xuICAgICAgICB0aGlzLl9zYXZlSW5zdGFuY2VQcm9wZXJ0aWVzKCk7XG4gICAgICAgIC8vIGVuc3VyZXMgZmlyc3QgdXBkYXRlIHdpbGwgYmUgY2F1Z2h0IGJ5IGFuIGVhcmx5IGFjY2VzcyBvZlxuICAgICAgICAvLyBgdXBkYXRlQ29tcGxldGVgXG4gICAgICAgIHRoaXMuX3JlcXVlc3RVcGRhdGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRml4ZXMgYW55IHByb3BlcnRpZXMgc2V0IG9uIHRoZSBpbnN0YW5jZSBiZWZvcmUgdXBncmFkZSB0aW1lLlxuICAgICAqIE90aGVyd2lzZSB0aGVzZSB3b3VsZCBzaGFkb3cgdGhlIGFjY2Vzc29yIGFuZCBicmVhayB0aGVzZSBwcm9wZXJ0aWVzLlxuICAgICAqIFRoZSBwcm9wZXJ0aWVzIGFyZSBzdG9yZWQgaW4gYSBNYXAgd2hpY2ggaXMgcGxheWVkIGJhY2sgYWZ0ZXIgdGhlXG4gICAgICogY29uc3RydWN0b3IgcnVucy4gTm90ZSwgb24gdmVyeSBvbGQgdmVyc2lvbnMgb2YgU2FmYXJpICg8PTkpIG9yIENocm9tZVxuICAgICAqICg8PTQxKSwgcHJvcGVydGllcyBjcmVhdGVkIGZvciBuYXRpdmUgcGxhdGZvcm0gcHJvcGVydGllcyBsaWtlIChgaWRgIG9yXG4gICAgICogYG5hbWVgKSBtYXkgbm90IGhhdmUgZGVmYXVsdCB2YWx1ZXMgc2V0IGluIHRoZSBlbGVtZW50IGNvbnN0cnVjdG9yLiBPblxuICAgICAqIHRoZXNlIGJyb3dzZXJzIG5hdGl2ZSBwcm9wZXJ0aWVzIGFwcGVhciBvbiBpbnN0YW5jZXMgYW5kIHRoZXJlZm9yZSB0aGVpclxuICAgICAqIGRlZmF1bHQgdmFsdWUgd2lsbCBvdmVyd3JpdGUgYW55IGVsZW1lbnQgZGVmYXVsdCAoZS5nLiBpZiB0aGUgZWxlbWVudCBzZXRzXG4gICAgICogdGhpcy5pZCA9ICdpZCcgaW4gdGhlIGNvbnN0cnVjdG9yLCB0aGUgJ2lkJyB3aWxsIGJlY29tZSAnJyBzaW5jZSB0aGlzIGlzXG4gICAgICogdGhlIG5hdGl2ZSBwbGF0Zm9ybSBkZWZhdWx0KS5cbiAgICAgKi9cbiAgICBfc2F2ZUluc3RhbmNlUHJvcGVydGllcygpIHtcbiAgICAgICAgLy8gVXNlIGZvckVhY2ggc28gdGhpcyB3b3JrcyBldmVuIGlmIGZvci9vZiBsb29wcyBhcmUgY29tcGlsZWQgdG8gZm9yIGxvb3BzXG4gICAgICAgIC8vIGV4cGVjdGluZyBhcnJheXNcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvclxuICAgICAgICAgICAgLl9jbGFzc1Byb3BlcnRpZXMuZm9yRWFjaCgoX3YsIHApID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KHApKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzW3BdO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzW3BdO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5faW5zdGFuY2VQcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlUHJvcGVydGllcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2VQcm9wZXJ0aWVzLnNldChwLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHByZXZpb3VzbHkgc2F2ZWQgaW5zdGFuY2UgcHJvcGVydGllcy5cbiAgICAgKi9cbiAgICBfYXBwbHlJbnN0YW5jZVByb3BlcnRpZXMoKSB7XG4gICAgICAgIC8vIFVzZSBmb3JFYWNoIHNvIHRoaXMgd29ya3MgZXZlbiBpZiBmb3Ivb2YgbG9vcHMgYXJlIGNvbXBpbGVkIHRvIGZvciBsb29wc1xuICAgICAgICAvLyBleHBlY3RpbmcgYXJyYXlzXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnlcbiAgICAgICAgdGhpcy5faW5zdGFuY2VQcm9wZXJ0aWVzLmZvckVhY2goKHYsIHApID0+IHRoaXNbcF0gPSB2KTtcbiAgICAgICAgdGhpcy5faW5zdGFuY2VQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgLy8gRW5zdXJlIGZpcnN0IGNvbm5lY3Rpb24gY29tcGxldGVzIGFuIHVwZGF0ZS4gVXBkYXRlcyBjYW5ub3QgY29tcGxldGVcbiAgICAgICAgLy8gYmVmb3JlIGNvbm5lY3Rpb24uXG4gICAgICAgIHRoaXMuZW5hYmxlVXBkYXRpbmcoKTtcbiAgICB9XG4gICAgZW5hYmxlVXBkYXRpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLl9lbmFibGVVcGRhdGluZ1Jlc29sdmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2VuYWJsZVVwZGF0aW5nUmVzb2x2ZXIoKTtcbiAgICAgICAgICAgIHRoaXMuX2VuYWJsZVVwZGF0aW5nUmVzb2x2ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQWxsb3dzIGZvciBgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKWAgaW4gZXh0ZW5zaW9ucyB3aGlsZVxuICAgICAqIHJlc2VydmluZyB0aGUgcG9zc2liaWxpdHkgb2YgbWFraW5nIG5vbi1icmVha2luZyBmZWF0dXJlIGFkZGl0aW9uc1xuICAgICAqIHdoZW4gZGlzY29ubmVjdGluZyBhdCBzb21lIHBvaW50IGluIHRoZSBmdXR1cmUuXG4gICAgICovXG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN5bmNocm9uaXplcyBwcm9wZXJ0eSB2YWx1ZXMgd2hlbiBhdHRyaWJ1dGVzIGNoYW5nZS5cbiAgICAgKi9cbiAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkLCB2YWx1ZSkge1xuICAgICAgICBpZiAob2xkICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fYXR0cmlidXRlVG9Qcm9wZXJ0eShuYW1lLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3Byb3BlcnR5VG9BdHRyaWJ1dGUobmFtZSwgdmFsdWUsIG9wdGlvbnMgPSBkZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvbikge1xuICAgICAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgY29uc3QgYXR0ciA9IGN0b3IuX2F0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eShuYW1lLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKGF0dHIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgYXR0clZhbHVlID0gY3Rvci5fcHJvcGVydHlWYWx1ZVRvQXR0cmlidXRlKHZhbHVlLCBvcHRpb25zKTtcbiAgICAgICAgICAgIC8vIGFuIHVuZGVmaW5lZCB2YWx1ZSBkb2VzIG5vdCBjaGFuZ2UgdGhlIGF0dHJpYnV0ZS5cbiAgICAgICAgICAgIGlmIChhdHRyVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRyYWNrIGlmIHRoZSBwcm9wZXJ0eSBpcyBiZWluZyByZWZsZWN0ZWQgdG8gYXZvaWRcbiAgICAgICAgICAgIC8vIHNldHRpbmcgdGhlIHByb3BlcnR5IGFnYWluIHZpYSBgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrYC4gTm90ZTpcbiAgICAgICAgICAgIC8vIDEuIHRoaXMgdGFrZXMgYWR2YW50YWdlIG9mIHRoZSBmYWN0IHRoYXQgdGhlIGNhbGxiYWNrIGlzIHN5bmNocm9ub3VzLlxuICAgICAgICAgICAgLy8gMi4gd2lsbCBiZWhhdmUgaW5jb3JyZWN0bHkgaWYgbXVsdGlwbGUgYXR0cmlidXRlcyBhcmUgaW4gdGhlIHJlYWN0aW9uXG4gICAgICAgICAgICAvLyBzdGFjayBhdCB0aW1lIG9mIGNhbGxpbmcuIEhvd2V2ZXIsIHNpbmNlIHdlIHByb2Nlc3MgYXR0cmlidXRlc1xuICAgICAgICAgICAgLy8gaW4gYHVwZGF0ZWAgdGhpcyBzaG91bGQgbm90IGJlIHBvc3NpYmxlIChvciBhbiBleHRyZW1lIGNvcm5lciBjYXNlXG4gICAgICAgICAgICAvLyB0aGF0IHdlJ2QgbGlrZSB0byBkaXNjb3ZlcikuXG4gICAgICAgICAgICAvLyBtYXJrIHN0YXRlIHJlZmxlY3RpbmdcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gdGhpcy5fdXBkYXRlU3RhdGUgfCBTVEFURV9JU19SRUZMRUNUSU5HX1RPX0FUVFJJQlVURTtcbiAgICAgICAgICAgIGlmIChhdHRyVmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0ciwgYXR0clZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG1hcmsgc3RhdGUgbm90IHJlZmxlY3RpbmdcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gdGhpcy5fdXBkYXRlU3RhdGUgJiB+U1RBVEVfSVNfUkVGTEVDVElOR19UT19BVFRSSUJVVEU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2F0dHJpYnV0ZVRvUHJvcGVydHkobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgLy8gVXNlIHRyYWNraW5nIGluZm8gdG8gYXZvaWQgZGVzZXJpYWxpemluZyBhdHRyaWJ1dGUgdmFsdWUgaWYgaXQgd2FzXG4gICAgICAgIC8vIGp1c3Qgc2V0IGZyb20gYSBwcm9wZXJ0eSBzZXR0ZXIuXG4gICAgICAgIGlmICh0aGlzLl91cGRhdGVTdGF0ZSAmIFNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fQVRUUklCVVRFKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIC8vIE5vdGUsIGhpbnQgdGhpcyBhcyBhbiBgQXR0cmlidXRlTWFwYCBzbyBjbG9zdXJlIGNsZWFybHkgdW5kZXJzdGFuZHNcbiAgICAgICAgLy8gdGhlIHR5cGU7IGl0IGhhcyBpc3N1ZXMgd2l0aCB0cmFja2luZyB0eXBlcyB0aHJvdWdoIHN0YXRpY3NcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXVubmVjZXNzYXJ5LXR5cGUtYXNzZXJ0aW9uXG4gICAgICAgIGNvbnN0IHByb3BOYW1lID0gY3Rvci5fYXR0cmlidXRlVG9Qcm9wZXJ0eU1hcC5nZXQobmFtZSk7XG4gICAgICAgIGlmIChwcm9wTmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gY3Rvci5nZXRQcm9wZXJ0eU9wdGlvbnMocHJvcE5hbWUpO1xuICAgICAgICAgICAgLy8gbWFyayBzdGF0ZSByZWZsZWN0aW5nXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlIHwgU1RBVEVfSVNfUkVGTEVDVElOR19UT19QUk9QRVJUWTtcbiAgICAgICAgICAgIHRoaXNbcHJvcE5hbWVdID1cbiAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XG4gICAgICAgICAgICAgICAgY3Rvci5fcHJvcGVydHlWYWx1ZUZyb21BdHRyaWJ1dGUodmFsdWUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgLy8gbWFyayBzdGF0ZSBub3QgcmVmbGVjdGluZ1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUgPSB0aGlzLl91cGRhdGVTdGF0ZSAmIH5TVEFURV9JU19SRUZMRUNUSU5HX1RPX1BST1BFUlRZO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgcHJpdmF0ZSB2ZXJzaW9uIG9mIGByZXF1ZXN0VXBkYXRlYCBkb2VzIG5vdCBhY2Nlc3Mgb3IgcmV0dXJuIHRoZVxuICAgICAqIGB1cGRhdGVDb21wbGV0ZWAgcHJvbWlzZS4gVGhpcyBwcm9taXNlIGNhbiBiZSBvdmVycmlkZGVuIGFuZCBpcyB0aGVyZWZvcmVcbiAgICAgKiBub3QgZnJlZSB0byBhY2Nlc3MuXG4gICAgICovXG4gICAgX3JlcXVlc3RVcGRhdGUobmFtZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgbGV0IHNob3VsZFJlcXVlc3RVcGRhdGUgPSB0cnVlO1xuICAgICAgICAvLyBJZiB3ZSBoYXZlIGEgcHJvcGVydHkga2V5LCBwZXJmb3JtIHByb3BlcnR5IHVwZGF0ZSBzdGVwcy5cbiAgICAgICAgaWYgKG5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gY3Rvci5nZXRQcm9wZXJ0eU9wdGlvbnMobmFtZSk7XG4gICAgICAgICAgICBpZiAoY3Rvci5fdmFsdWVIYXNDaGFuZ2VkKHRoaXNbbmFtZV0sIG9sZFZhbHVlLCBvcHRpb25zLmhhc0NoYW5nZWQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9jaGFuZ2VkUHJvcGVydGllcy5oYXMobmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hhbmdlZFByb3BlcnRpZXMuc2V0KG5hbWUsIG9sZFZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gQWRkIHRvIHJlZmxlY3RpbmcgcHJvcGVydGllcyBzZXQuXG4gICAgICAgICAgICAgICAgLy8gTm90ZSwgaXQncyBpbXBvcnRhbnQgdGhhdCBldmVyeSBjaGFuZ2UgaGFzIGEgY2hhbmNlIHRvIGFkZCB0aGVcbiAgICAgICAgICAgICAgICAvLyBwcm9wZXJ0eSB0byBgX3JlZmxlY3RpbmdQcm9wZXJ0aWVzYC4gVGhpcyBlbnN1cmVzIHNldHRpbmdcbiAgICAgICAgICAgICAgICAvLyBhdHRyaWJ1dGUgKyBwcm9wZXJ0eSByZWZsZWN0cyBjb3JyZWN0bHkuXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVmbGVjdCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAhKHRoaXMuX3VwZGF0ZVN0YXRlICYgU1RBVEVfSVNfUkVGTEVDVElOR19UT19QUk9QRVJUWSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlZmxlY3RpbmdQcm9wZXJ0aWVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZmxlY3RpbmdQcm9wZXJ0aWVzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZmxlY3RpbmdQcm9wZXJ0aWVzLnNldChuYW1lLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBBYm9ydCB0aGUgcmVxdWVzdCBpZiB0aGUgcHJvcGVydHkgc2hvdWxkIG5vdCBiZSBjb25zaWRlcmVkIGNoYW5nZWQuXG4gICAgICAgICAgICAgICAgc2hvdWxkUmVxdWVzdFVwZGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5faGFzUmVxdWVzdGVkVXBkYXRlICYmIHNob3VsZFJlcXVlc3RVcGRhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVByb21pc2UgPSB0aGlzLl9lbnF1ZXVlVXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVxdWVzdHMgYW4gdXBkYXRlIHdoaWNoIGlzIHByb2Nlc3NlZCBhc3luY2hyb25vdXNseS4gVGhpcyBzaG91bGRcbiAgICAgKiBiZSBjYWxsZWQgd2hlbiBhbiBlbGVtZW50IHNob3VsZCB1cGRhdGUgYmFzZWQgb24gc29tZSBzdGF0ZSBub3QgdHJpZ2dlcmVkXG4gICAgICogYnkgc2V0dGluZyBhIHByb3BlcnR5LiBJbiB0aGlzIGNhc2UsIHBhc3Mgbm8gYXJndW1lbnRzLiBJdCBzaG91bGQgYWxzbyBiZVxuICAgICAqIGNhbGxlZCB3aGVuIG1hbnVhbGx5IGltcGxlbWVudGluZyBhIHByb3BlcnR5IHNldHRlci4gSW4gdGhpcyBjYXNlLCBwYXNzIHRoZVxuICAgICAqIHByb3BlcnR5IGBuYW1lYCBhbmQgYG9sZFZhbHVlYCB0byBlbnN1cmUgdGhhdCBhbnkgY29uZmlndXJlZCBwcm9wZXJ0eVxuICAgICAqIG9wdGlvbnMgYXJlIGhvbm9yZWQuIFJldHVybnMgdGhlIGB1cGRhdGVDb21wbGV0ZWAgUHJvbWlzZSB3aGljaCBpcyByZXNvbHZlZFxuICAgICAqIHdoZW4gdGhlIHVwZGF0ZSBjb21wbGV0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSB7UHJvcGVydHlLZXl9IChvcHRpb25hbCkgbmFtZSBvZiByZXF1ZXN0aW5nIHByb3BlcnR5XG4gICAgICogQHBhcmFtIG9sZFZhbHVlIHthbnl9IChvcHRpb25hbCkgb2xkIHZhbHVlIG9mIHJlcXVlc3RpbmcgcHJvcGVydHlcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQSBQcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgdXBkYXRlIGNvbXBsZXRlcy5cbiAgICAgKi9cbiAgICByZXF1ZXN0VXBkYXRlKG5hbWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3JlcXVlc3RVcGRhdGUobmFtZSwgb2xkVmFsdWUpO1xuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVDb21wbGV0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB1cCB0aGUgZWxlbWVudCB0byBhc3luY2hyb25vdXNseSB1cGRhdGUuXG4gICAgICovXG4gICAgYXN5bmMgX2VucXVldWVVcGRhdGUoKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gdGhpcy5fdXBkYXRlU3RhdGUgfCBTVEFURV9VUERBVEVfUkVRVUVTVEVEO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gRW5zdXJlIGFueSBwcmV2aW91cyB1cGRhdGUgaGFzIHJlc29sdmVkIGJlZm9yZSB1cGRhdGluZy5cbiAgICAgICAgICAgIC8vIFRoaXMgYGF3YWl0YCBhbHNvIGVuc3VyZXMgdGhhdCBwcm9wZXJ0eSBjaGFuZ2VzIGFyZSBiYXRjaGVkLlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlUHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gSWdub3JlIGFueSBwcmV2aW91cyBlcnJvcnMuIFdlIG9ubHkgY2FyZSB0aGF0IHRoZSBwcmV2aW91cyBjeWNsZSBpc1xuICAgICAgICAgICAgLy8gZG9uZS4gQW55IGVycm9yIHNob3VsZCBoYXZlIGJlZW4gaGFuZGxlZCBpbiB0aGUgcHJldmlvdXMgdXBkYXRlLlxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucGVyZm9ybVVwZGF0ZSgpO1xuICAgICAgICAvLyBJZiBgcGVyZm9ybVVwZGF0ZWAgcmV0dXJucyBhIFByb21pc2UsIHdlIGF3YWl0IGl0LiBUaGlzIGlzIGRvbmUgdG9cbiAgICAgICAgLy8gZW5hYmxlIGNvb3JkaW5hdGluZyB1cGRhdGVzIHdpdGggYSBzY2hlZHVsZXIuIE5vdGUsIHRoZSByZXN1bHQgaXNcbiAgICAgICAgLy8gY2hlY2tlZCB0byBhdm9pZCBkZWxheWluZyBhbiBhZGRpdGlvbmFsIG1pY3JvdGFzayB1bmxlc3Mgd2UgbmVlZCB0by5cbiAgICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgICAgICBhd2FpdCByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICF0aGlzLl9oYXNSZXF1ZXN0ZWRVcGRhdGU7XG4gICAgfVxuICAgIGdldCBfaGFzUmVxdWVzdGVkVXBkYXRlKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuX3VwZGF0ZVN0YXRlICYgU1RBVEVfVVBEQVRFX1JFUVVFU1RFRCk7XG4gICAgfVxuICAgIGdldCBoYXNVcGRhdGVkKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuX3VwZGF0ZVN0YXRlICYgU1RBVEVfSEFTX1VQREFURUQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhbiBlbGVtZW50IHVwZGF0ZS4gTm90ZSwgaWYgYW4gZXhjZXB0aW9uIGlzIHRocm93biBkdXJpbmcgdGhlXG4gICAgICogdXBkYXRlLCBgZmlyc3RVcGRhdGVkYCBhbmQgYHVwZGF0ZWRgIHdpbGwgbm90IGJlIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gY2hhbmdlIHRoZSB0aW1pbmcgb2YgdXBkYXRlcy4gSWYgdGhpc1xuICAgICAqIG1ldGhvZCBpcyBvdmVycmlkZGVuLCBgc3VwZXIucGVyZm9ybVVwZGF0ZSgpYCBtdXN0IGJlIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEZvciBpbnN0YW5jZSwgdG8gc2NoZWR1bGUgdXBkYXRlcyB0byBvY2N1ciBqdXN0IGJlZm9yZSB0aGUgbmV4dCBmcmFtZTpcbiAgICAgKlxuICAgICAqIGBgYFxuICAgICAqIHByb3RlY3RlZCBhc3luYyBwZXJmb3JtVXBkYXRlKCk6IFByb21pc2U8dW5rbm93bj4ge1xuICAgICAqICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiByZXNvbHZlKCkpKTtcbiAgICAgKiAgIHN1cGVyLnBlcmZvcm1VcGRhdGUoKTtcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICovXG4gICAgcGVyZm9ybVVwZGF0ZSgpIHtcbiAgICAgICAgLy8gTWl4aW4gaW5zdGFuY2UgcHJvcGVydGllcyBvbmNlLCBpZiB0aGV5IGV4aXN0LlxuICAgICAgICBpZiAodGhpcy5faW5zdGFuY2VQcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICB0aGlzLl9hcHBseUluc3RhbmNlUHJvcGVydGllcygpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzaG91bGRVcGRhdGUgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgY2hhbmdlZFByb3BlcnRpZXMgPSB0aGlzLl9jaGFuZ2VkUHJvcGVydGllcztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNob3VsZFVwZGF0ZSA9IHRoaXMuc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIGlmIChzaG91bGRVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZShjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXJrVXBkYXRlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBQcmV2ZW50IGBmaXJzdFVwZGF0ZWRgIGFuZCBgdXBkYXRlZGAgZnJvbSBydW5uaW5nIHdoZW4gdGhlcmUncyBhblxuICAgICAgICAgICAgLy8gdXBkYXRlIGV4Y2VwdGlvbi5cbiAgICAgICAgICAgIHNob3VsZFVwZGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gRW5zdXJlIGVsZW1lbnQgY2FuIGFjY2VwdCBhZGRpdGlvbmFsIHVwZGF0ZXMgYWZ0ZXIgYW4gZXhjZXB0aW9uLlxuICAgICAgICAgICAgdGhpcy5fbWFya1VwZGF0ZWQoKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgICAgICAgaWYgKCEodGhpcy5fdXBkYXRlU3RhdGUgJiBTVEFURV9IQVNfVVBEQVRFRCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlIHwgU1RBVEVfSEFTX1VQREFURUQ7XG4gICAgICAgICAgICAgICAgdGhpcy5maXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfbWFya1VwZGF0ZWQoKSB7XG4gICAgICAgIHRoaXMuX2NoYW5nZWRQcm9wZXJ0aWVzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlICYgflNUQVRFX1VQREFURV9SRVFVRVNURUQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgZWxlbWVudCBoYXMgY29tcGxldGVkIHVwZGF0aW5nLlxuICAgICAqIFRoZSBQcm9taXNlIHZhbHVlIGlzIGEgYm9vbGVhbiB0aGF0IGlzIGB0cnVlYCBpZiB0aGUgZWxlbWVudCBjb21wbGV0ZWQgdGhlXG4gICAgICogdXBkYXRlIHdpdGhvdXQgdHJpZ2dlcmluZyBhbm90aGVyIHVwZGF0ZS4gVGhlIFByb21pc2UgcmVzdWx0IGlzIGBmYWxzZWAgaWZcbiAgICAgKiBhIHByb3BlcnR5IHdhcyBzZXQgaW5zaWRlIGB1cGRhdGVkKClgLiBJZiB0aGUgUHJvbWlzZSBpcyByZWplY3RlZCwgYW5cbiAgICAgKiBleGNlcHRpb24gd2FzIHRocm93biBkdXJpbmcgdGhlIHVwZGF0ZS5cbiAgICAgKlxuICAgICAqIFRvIGF3YWl0IGFkZGl0aW9uYWwgYXN5bmNocm9ub3VzIHdvcmssIG92ZXJyaWRlIHRoZSBgX2dldFVwZGF0ZUNvbXBsZXRlYFxuICAgICAqIG1ldGhvZC4gRm9yIGV4YW1wbGUsIGl0IGlzIHNvbWV0aW1lcyB1c2VmdWwgdG8gYXdhaXQgYSByZW5kZXJlZCBlbGVtZW50XG4gICAgICogYmVmb3JlIGZ1bGZpbGxpbmcgdGhpcyBQcm9taXNlLiBUbyBkbyB0aGlzLCBmaXJzdCBhd2FpdFxuICAgICAqIGBzdXBlci5fZ2V0VXBkYXRlQ29tcGxldGUoKWAsIHRoZW4gYW55IHN1YnNlcXVlbnQgc3RhdGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gVGhlIFByb21pc2UgcmV0dXJucyBhIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlXG4gICAgICogdXBkYXRlIHJlc29sdmVkIHdpdGhvdXQgdHJpZ2dlcmluZyBhbm90aGVyIHVwZGF0ZS5cbiAgICAgKi9cbiAgICBnZXQgdXBkYXRlQ29tcGxldGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRVcGRhdGVDb21wbGV0ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZSBwb2ludCBmb3IgdGhlIGB1cGRhdGVDb21wbGV0ZWAgcHJvbWlzZS5cbiAgICAgKlxuICAgICAqIEl0IGlzIG5vdCBzYWZlIHRvIG92ZXJyaWRlIHRoZSBgdXBkYXRlQ29tcGxldGVgIGdldHRlciBkaXJlY3RseSBkdWUgdG8gYVxuICAgICAqIGxpbWl0YXRpb24gaW4gVHlwZVNjcmlwdCB3aGljaCBtZWFucyBpdCBpcyBub3QgcG9zc2libGUgdG8gY2FsbCBhXG4gICAgICogc3VwZXJjbGFzcyBnZXR0ZXIgKGUuZy4gYHN1cGVyLnVwZGF0ZUNvbXBsZXRlLnRoZW4oLi4uKWApIHdoZW4gdGhlIHRhcmdldFxuICAgICAqIGxhbmd1YWdlIGlzIEVTNSAoaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8zMzgpLlxuICAgICAqIFRoaXMgbWV0aG9kIHNob3VsZCBiZSBvdmVycmlkZGVuIGluc3RlYWQuIEZvciBleGFtcGxlOlxuICAgICAqXG4gICAgICogICBjbGFzcyBNeUVsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgICAgKiAgICAgYXN5bmMgX2dldFVwZGF0ZUNvbXBsZXRlKCkge1xuICAgICAqICAgICAgIGF3YWl0IHN1cGVyLl9nZXRVcGRhdGVDb21wbGV0ZSgpO1xuICAgICAqICAgICAgIGF3YWl0IHRoaXMuX215Q2hpbGQudXBkYXRlQ29tcGxldGU7XG4gICAgICogICAgIH1cbiAgICAgKiAgIH1cbiAgICAgKi9cbiAgICBfZ2V0VXBkYXRlQ29tcGxldGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91cGRhdGVQcm9taXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb250cm9scyB3aGV0aGVyIG9yIG5vdCBgdXBkYXRlYCBzaG91bGQgYmUgY2FsbGVkIHdoZW4gdGhlIGVsZW1lbnQgcmVxdWVzdHNcbiAgICAgKiBhbiB1cGRhdGUuIEJ5IGRlZmF1bHQsIHRoaXMgbWV0aG9kIGFsd2F5cyByZXR1cm5zIGB0cnVlYCwgYnV0IHRoaXMgY2FuIGJlXG4gICAgICogY3VzdG9taXplZCB0byBjb250cm9sIHdoZW4gdG8gdXBkYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIF9jaGFuZ2VkUHJvcGVydGllcyBNYXAgb2YgY2hhbmdlZCBwcm9wZXJ0aWVzIHdpdGggb2xkIHZhbHVlc1xuICAgICAqL1xuICAgIHNob3VsZFVwZGF0ZShfY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGVsZW1lbnQuIFRoaXMgbWV0aG9kIHJlZmxlY3RzIHByb3BlcnR5IHZhbHVlcyB0byBhdHRyaWJ1dGVzLlxuICAgICAqIEl0IGNhbiBiZSBvdmVycmlkZGVuIHRvIHJlbmRlciBhbmQga2VlcCB1cGRhdGVkIGVsZW1lbnQgRE9NLlxuICAgICAqIFNldHRpbmcgcHJvcGVydGllcyBpbnNpZGUgdGhpcyBtZXRob2Qgd2lsbCAqbm90KiB0cmlnZ2VyXG4gICAgICogYW5vdGhlciB1cGRhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gX2NoYW5nZWRQcm9wZXJ0aWVzIE1hcCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgd2l0aCBvbGQgdmFsdWVzXG4gICAgICovXG4gICAgdXBkYXRlKF9jaGFuZ2VkUHJvcGVydGllcykge1xuICAgICAgICBpZiAodGhpcy5fcmVmbGVjdGluZ1Byb3BlcnRpZXMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgdGhpcy5fcmVmbGVjdGluZ1Byb3BlcnRpZXMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIC8vIFVzZSBmb3JFYWNoIHNvIHRoaXMgd29ya3MgZXZlbiBpZiBmb3Ivb2YgbG9vcHMgYXJlIGNvbXBpbGVkIHRvIGZvclxuICAgICAgICAgICAgLy8gbG9vcHMgZXhwZWN0aW5nIGFycmF5c1xuICAgICAgICAgICAgdGhpcy5fcmVmbGVjdGluZ1Byb3BlcnRpZXMuZm9yRWFjaCgodiwgaykgPT4gdGhpcy5fcHJvcGVydHlUb0F0dHJpYnV0ZShrLCB0aGlzW2tdLCB2KSk7XG4gICAgICAgICAgICB0aGlzLl9yZWZsZWN0aW5nUHJvcGVydGllcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9tYXJrVXBkYXRlZCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VkIHdoZW5ldmVyIHRoZSBlbGVtZW50IGlzIHVwZGF0ZWQuIEltcGxlbWVudCB0byBwZXJmb3JtXG4gICAgICogcG9zdC11cGRhdGluZyB0YXNrcyB2aWEgRE9NIEFQSXMsIGZvciBleGFtcGxlLCBmb2N1c2luZyBhbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogU2V0dGluZyBwcm9wZXJ0aWVzIGluc2lkZSB0aGlzIG1ldGhvZCB3aWxsIHRyaWdnZXIgdGhlIGVsZW1lbnQgdG8gdXBkYXRlXG4gICAgICogYWdhaW4gYWZ0ZXIgdGhpcyB1cGRhdGUgY3ljbGUgY29tcGxldGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIF9jaGFuZ2VkUHJvcGVydGllcyBNYXAgb2YgY2hhbmdlZCBwcm9wZXJ0aWVzIHdpdGggb2xkIHZhbHVlc1xuICAgICAqL1xuICAgIHVwZGF0ZWQoX2NoYW5nZWRQcm9wZXJ0aWVzKSB7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludm9rZWQgd2hlbiB0aGUgZWxlbWVudCBpcyBmaXJzdCB1cGRhdGVkLiBJbXBsZW1lbnQgdG8gcGVyZm9ybSBvbmUgdGltZVxuICAgICAqIHdvcmsgb24gdGhlIGVsZW1lbnQgYWZ0ZXIgdXBkYXRlLlxuICAgICAqXG4gICAgICogU2V0dGluZyBwcm9wZXJ0aWVzIGluc2lkZSB0aGlzIG1ldGhvZCB3aWxsIHRyaWdnZXIgdGhlIGVsZW1lbnQgdG8gdXBkYXRlXG4gICAgICogYWdhaW4gYWZ0ZXIgdGhpcyB1cGRhdGUgY3ljbGUgY29tcGxldGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIF9jaGFuZ2VkUHJvcGVydGllcyBNYXAgb2YgY2hhbmdlZCBwcm9wZXJ0aWVzIHdpdGggb2xkIHZhbHVlc1xuICAgICAqL1xuICAgIGZpcnN0VXBkYXRlZChfY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICB9XG59XG5fYSA9IGZpbmFsaXplZDtcbi8qKlxuICogTWFya3MgY2xhc3MgYXMgaGF2aW5nIGZpbmlzaGVkIGNyZWF0aW5nIHByb3BlcnRpZXMuXG4gKi9cblVwZGF0aW5nRWxlbWVudFtfYV0gPSB0cnVlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBkYXRpbmctZWxlbWVudC5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG5jb25zdCBsZWdhY3lDdXN0b21FbGVtZW50ID0gKHRhZ05hbWUsIGNsYXp6KSA9PiB7XG4gICAgd2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSh0YWdOYW1lLCBjbGF6eik7XG4gICAgLy8gQ2FzdCBhcyBhbnkgYmVjYXVzZSBUUyBkb2Vzbid0IHJlY29nbml6ZSB0aGUgcmV0dXJuIHR5cGUgYXMgYmVpbmcgYVxuICAgIC8vIHN1YnR5cGUgb2YgdGhlIGRlY29yYXRlZCBjbGFzcyB3aGVuIGNsYXp6IGlzIHR5cGVkIGFzXG4gICAgLy8gYENvbnN0cnVjdG9yPEhUTUxFbGVtZW50PmAgZm9yIHNvbWUgcmVhc29uLlxuICAgIC8vIGBDb25zdHJ1Y3RvcjxIVE1MRWxlbWVudD5gIGlzIGhlbHBmdWwgdG8gbWFrZSBzdXJlIHRoZSBkZWNvcmF0b3IgaXNcbiAgICAvLyBhcHBsaWVkIHRvIGVsZW1lbnRzIGhvd2V2ZXIuXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueVxuICAgIHJldHVybiBjbGF6ejtcbn07XG5jb25zdCBzdGFuZGFyZEN1c3RvbUVsZW1lbnQgPSAodGFnTmFtZSwgZGVzY3JpcHRvcikgPT4ge1xuICAgIGNvbnN0IHsga2luZCwgZWxlbWVudHMgfSA9IGRlc2NyaXB0b3I7XG4gICAgcmV0dXJuIHtcbiAgICAgICAga2luZCxcbiAgICAgICAgZWxlbWVudHMsXG4gICAgICAgIC8vIFRoaXMgY2FsbGJhY2sgaXMgY2FsbGVkIG9uY2UgdGhlIGNsYXNzIGlzIG90aGVyd2lzZSBmdWxseSBkZWZpbmVkXG4gICAgICAgIGZpbmlzaGVyKGNsYXp6KSB7XG4gICAgICAgICAgICB3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKHRhZ05hbWUsIGNsYXp6KTtcbiAgICAgICAgfVxuICAgIH07XG59O1xuLyoqXG4gKiBDbGFzcyBkZWNvcmF0b3IgZmFjdG9yeSB0aGF0IGRlZmluZXMgdGhlIGRlY29yYXRlZCBjbGFzcyBhcyBhIGN1c3RvbSBlbGVtZW50LlxuICpcbiAqIGBgYFxuICogQGN1c3RvbUVsZW1lbnQoJ215LWVsZW1lbnQnKVxuICogY2xhc3MgTXlFbGVtZW50IHtcbiAqICAgcmVuZGVyKCkge1xuICogICAgIHJldHVybiBodG1sYGA7XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB0YWdOYW1lIFRoZSBuYW1lIG9mIHRoZSBjdXN0b20gZWxlbWVudCB0byBkZWZpbmUuXG4gKi9cbmV4cG9ydCBjb25zdCBjdXN0b21FbGVtZW50ID0gKHRhZ05hbWUpID0+IChjbGFzc09yRGVzY3JpcHRvcikgPT4gKHR5cGVvZiBjbGFzc09yRGVzY3JpcHRvciA9PT0gJ2Z1bmN0aW9uJykgP1xuICAgIGxlZ2FjeUN1c3RvbUVsZW1lbnQodGFnTmFtZSwgY2xhc3NPckRlc2NyaXB0b3IpIDpcbiAgICBzdGFuZGFyZEN1c3RvbUVsZW1lbnQodGFnTmFtZSwgY2xhc3NPckRlc2NyaXB0b3IpO1xuY29uc3Qgc3RhbmRhcmRQcm9wZXJ0eSA9IChvcHRpb25zLCBlbGVtZW50KSA9PiB7XG4gICAgLy8gV2hlbiBkZWNvcmF0aW5nIGFuIGFjY2Vzc29yLCBwYXNzIGl0IHRocm91Z2ggYW5kIGFkZCBwcm9wZXJ0eSBtZXRhZGF0YS5cbiAgICAvLyBOb3RlLCB0aGUgYGhhc093blByb3BlcnR5YCBjaGVjayBpbiBgY3JlYXRlUHJvcGVydHlgIGVuc3VyZXMgd2UgZG9uJ3RcbiAgICAvLyBzdG9tcCBvdmVyIHRoZSB1c2VyJ3MgYWNjZXNzb3IuXG4gICAgaWYgKGVsZW1lbnQua2luZCA9PT0gJ21ldGhvZCcgJiYgZWxlbWVudC5kZXNjcmlwdG9yICYmXG4gICAgICAgICEoJ3ZhbHVlJyBpbiBlbGVtZW50LmRlc2NyaXB0b3IpKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGVsZW1lbnQpLCB7IGZpbmlzaGVyKGNsYXp6KSB7XG4gICAgICAgICAgICAgICAgY2xhenouY3JlYXRlUHJvcGVydHkoZWxlbWVudC5rZXksIG9wdGlvbnMpO1xuICAgICAgICAgICAgfSB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIGNyZWF0ZVByb3BlcnR5KCkgdGFrZXMgY2FyZSBvZiBkZWZpbmluZyB0aGUgcHJvcGVydHksIGJ1dCB3ZSBzdGlsbFxuICAgICAgICAvLyBtdXN0IHJldHVybiBzb21lIGtpbmQgb2YgZGVzY3JpcHRvciwgc28gcmV0dXJuIGEgZGVzY3JpcHRvciBmb3IgYW5cbiAgICAgICAgLy8gdW51c2VkIHByb3RvdHlwZSBmaWVsZC4gVGhlIGZpbmlzaGVyIGNhbGxzIGNyZWF0ZVByb3BlcnR5KCkuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiAnZmllbGQnLFxuICAgICAgICAgICAga2V5OiBTeW1ib2woKSxcbiAgICAgICAgICAgIHBsYWNlbWVudDogJ293bicsXG4gICAgICAgICAgICBkZXNjcmlwdG9yOiB7fSxcbiAgICAgICAgICAgIC8vIFdoZW4gQGJhYmVsL3BsdWdpbi1wcm9wb3NhbC1kZWNvcmF0b3JzIGltcGxlbWVudHMgaW5pdGlhbGl6ZXJzLFxuICAgICAgICAgICAgLy8gZG8gdGhpcyBpbnN0ZWFkIG9mIHRoZSBpbml0aWFsaXplciBiZWxvdy4gU2VlOlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2JhYmVsL2JhYmVsL2lzc3Vlcy85MjYwIGV4dHJhczogW1xuICAgICAgICAgICAgLy8gICB7XG4gICAgICAgICAgICAvLyAgICAga2luZDogJ2luaXRpYWxpemVyJyxcbiAgICAgICAgICAgIC8vICAgICBwbGFjZW1lbnQ6ICdvd24nLFxuICAgICAgICAgICAgLy8gICAgIGluaXRpYWxpemVyOiBkZXNjcmlwdG9yLmluaXRpYWxpemVyLFxuICAgICAgICAgICAgLy8gICB9XG4gICAgICAgICAgICAvLyBdLFxuICAgICAgICAgICAgaW5pdGlhbGl6ZXIoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50LmluaXRpYWxpemVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbZWxlbWVudC5rZXldID0gZWxlbWVudC5pbml0aWFsaXplci5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmaW5pc2hlcihjbGF6eikge1xuICAgICAgICAgICAgICAgIGNsYXp6LmNyZWF0ZVByb3BlcnR5KGVsZW1lbnQua2V5LCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59O1xuY29uc3QgbGVnYWN5UHJvcGVydHkgPSAob3B0aW9ucywgcHJvdG8sIG5hbWUpID0+IHtcbiAgICBwcm90by5jb25zdHJ1Y3RvclxuICAgICAgICAuY3JlYXRlUHJvcGVydHkobmFtZSwgb3B0aW9ucyk7XG59O1xuLyoqXG4gKiBBIHByb3BlcnR5IGRlY29yYXRvciB3aGljaCBjcmVhdGVzIGEgTGl0RWxlbWVudCBwcm9wZXJ0eSB3aGljaCByZWZsZWN0cyBhXG4gKiBjb3JyZXNwb25kaW5nIGF0dHJpYnV0ZSB2YWx1ZS4gQSBgUHJvcGVydHlEZWNsYXJhdGlvbmAgbWF5IG9wdGlvbmFsbHkgYmVcbiAqIHN1cHBsaWVkIHRvIGNvbmZpZ3VyZSBwcm9wZXJ0eSBmZWF0dXJlcy5cbiAqXG4gKiBUaGlzIGRlY29yYXRvciBzaG91bGQgb25seSBiZSB1c2VkIGZvciBwdWJsaWMgZmllbGRzLiBQcml2YXRlIG9yIHByb3RlY3RlZFxuICogZmllbGRzIHNob3VsZCB1c2UgdGhlIGludGVybmFsUHJvcGVydHkgZGVjb3JhdG9yLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogICAgIGNsYXNzIE15RWxlbWVudCB7XG4gKiAgICAgICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuIH0pXG4gKiAgICAgICBjbGlja2VkID0gZmFsc2U7XG4gKiAgICAgfVxuICpcbiAqIEBFeHBvcnREZWNvcmF0ZWRJdGVtc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcHJvcGVydHkob3B0aW9ucykge1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnkgZGVjb3JhdG9yXG4gICAgcmV0dXJuIChwcm90b09yRGVzY3JpcHRvciwgbmFtZSkgPT4gKG5hbWUgIT09IHVuZGVmaW5lZCkgP1xuICAgICAgICBsZWdhY3lQcm9wZXJ0eShvcHRpb25zLCBwcm90b09yRGVzY3JpcHRvciwgbmFtZSkgOlxuICAgICAgICBzdGFuZGFyZFByb3BlcnR5KG9wdGlvbnMsIHByb3RvT3JEZXNjcmlwdG9yKTtcbn1cbi8qKlxuICogRGVjbGFyZXMgYSBwcml2YXRlIG9yIHByb3RlY3RlZCBwcm9wZXJ0eSB0aGF0IHN0aWxsIHRyaWdnZXJzIHVwZGF0ZXMgdG8gdGhlXG4gKiBlbGVtZW50IHdoZW4gaXQgY2hhbmdlcy5cbiAqXG4gKiBQcm9wZXJ0aWVzIGRlY2xhcmVkIHRoaXMgd2F5IG11c3Qgbm90IGJlIHVzZWQgZnJvbSBIVE1MIG9yIEhUTUwgdGVtcGxhdGluZ1xuICogc3lzdGVtcywgdGhleSdyZSBzb2xlbHkgZm9yIHByb3BlcnRpZXMgaW50ZXJuYWwgdG8gdGhlIGVsZW1lbnQuIFRoZXNlXG4gKiBwcm9wZXJ0aWVzIG1heSBiZSByZW5hbWVkIGJ5IG9wdGltaXphdGlvbiB0b29scyBsaWtlIGNsb3N1cmUgY29tcGlsZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcm5hbFByb3BlcnR5KG9wdGlvbnMpIHtcbiAgICByZXR1cm4gcHJvcGVydHkoeyBhdHRyaWJ1dGU6IGZhbHNlLCBoYXNDaGFuZ2VkOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaGFzQ2hhbmdlZCB9KTtcbn1cbi8qKlxuICogQSBwcm9wZXJ0eSBkZWNvcmF0b3IgdGhhdCBjb252ZXJ0cyBhIGNsYXNzIHByb3BlcnR5IGludG8gYSBnZXR0ZXIgdGhhdFxuICogZXhlY3V0ZXMgYSBxdWVyeVNlbGVjdG9yIG9uIHRoZSBlbGVtZW50J3MgcmVuZGVyUm9vdC5cbiAqXG4gKiBAcGFyYW0gc2VsZWN0b3IgQSBET01TdHJpbmcgY29udGFpbmluZyBvbmUgb3IgbW9yZSBzZWxlY3RvcnMgdG8gbWF0Y2guXG4gKlxuICogU2VlOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRG9jdW1lbnQvcXVlcnlTZWxlY3RvclxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogICAgIGNsYXNzIE15RWxlbWVudCB7XG4gKiAgICAgICBAcXVlcnkoJyNmaXJzdCcpXG4gKiAgICAgICBmaXJzdDtcbiAqXG4gKiAgICAgICByZW5kZXIoKSB7XG4gKiAgICAgICAgIHJldHVybiBodG1sYFxuICogICAgICAgICAgIDxkaXYgaWQ9XCJmaXJzdFwiPjwvZGl2PlxuICogICAgICAgICAgIDxkaXYgaWQ9XCJzZWNvbmRcIj48L2Rpdj5cbiAqICAgICAgICAgYDtcbiAqICAgICAgIH1cbiAqICAgICB9XG4gKlxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVlcnkoc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gKHByb3RvT3JEZXNjcmlwdG9yLCBcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55IGRlY29yYXRvclxuICAgIG5hbWUpID0+IHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJSb290LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiAobmFtZSAhPT0gdW5kZWZpbmVkKSA/XG4gICAgICAgICAgICBsZWdhY3lRdWVyeShkZXNjcmlwdG9yLCBwcm90b09yRGVzY3JpcHRvciwgbmFtZSkgOlxuICAgICAgICAgICAgc3RhbmRhcmRRdWVyeShkZXNjcmlwdG9yLCBwcm90b09yRGVzY3JpcHRvcik7XG4gICAgfTtcbn1cbi8vIE5vdGUsIGluIHRoZSBmdXR1cmUsIHdlIG1heSBleHRlbmQgdGhpcyBkZWNvcmF0b3IgdG8gc3VwcG9ydCB0aGUgdXNlIGNhc2Vcbi8vIHdoZXJlIHRoZSBxdWVyaWVkIGVsZW1lbnQgbWF5IG5lZWQgdG8gZG8gd29yayB0byBiZWNvbWUgcmVhZHkgdG8gaW50ZXJhY3Rcbi8vIHdpdGggKGUuZy4gbG9hZCBzb21lIGltcGxlbWVudGF0aW9uIGNvZGUpLiBJZiBzbywgd2UgbWlnaHQgZWxlY3QgdG9cbi8vIGFkZCBhIHNlY29uZCBhcmd1bWVudCBkZWZpbmluZyBhIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHJ1biB0byBtYWtlIHRoZVxuLy8gcXVlcmllZCBlbGVtZW50IGxvYWRlZC91cGRhdGVkL3JlYWR5LlxuLyoqXG4gKiBBIHByb3BlcnR5IGRlY29yYXRvciB0aGF0IGNvbnZlcnRzIGEgY2xhc3MgcHJvcGVydHkgaW50byBhIGdldHRlciB0aGF0XG4gKiByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSByZXN1bHQgb2YgYSBxdWVyeVNlbGVjdG9yIG9uIHRoZVxuICogZWxlbWVudCdzIHJlbmRlclJvb3QgZG9uZSBhZnRlciB0aGUgZWxlbWVudCdzIGB1cGRhdGVDb21wbGV0ZWAgcHJvbWlzZVxuICogcmVzb2x2ZXMuIFdoZW4gdGhlIHF1ZXJpZWQgcHJvcGVydHkgbWF5IGNoYW5nZSB3aXRoIGVsZW1lbnQgc3RhdGUsIHRoaXNcbiAqIGRlY29yYXRvciBjYW4gYmUgdXNlZCBpbnN0ZWFkIG9mIHJlcXVpcmluZyB1c2VycyB0byBhd2FpdCB0aGVcbiAqIGB1cGRhdGVDb21wbGV0ZWAgYmVmb3JlIGFjY2Vzc2luZyB0aGUgcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHNlbGVjdG9yIEEgRE9NU3RyaW5nIGNvbnRhaW5pbmcgb25lIG9yIG1vcmUgc2VsZWN0b3JzIHRvIG1hdGNoLlxuICpcbiAqIFNlZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0RvY3VtZW50L3F1ZXJ5U2VsZWN0b3JcbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqICAgICBjbGFzcyBNeUVsZW1lbnQge1xuICogICAgICAgQHF1ZXJ5QXN5bmMoJyNmaXJzdCcpXG4gKiAgICAgICBmaXJzdDtcbiAqXG4gKiAgICAgICByZW5kZXIoKSB7XG4gKiAgICAgICAgIHJldHVybiBodG1sYFxuICogICAgICAgICAgIDxkaXYgaWQ9XCJmaXJzdFwiPjwvZGl2PlxuICogICAgICAgICAgIDxkaXYgaWQ9XCJzZWNvbmRcIj48L2Rpdj5cbiAqICAgICAgICAgYDtcbiAqICAgICAgIH1cbiAqICAgICB9XG4gKlxuICogICAgIC8vIGV4dGVybmFsIHVzYWdlXG4gKiAgICAgYXN5bmMgZG9Tb21ldGhpbmdXaXRoRmlyc3QoKSB7XG4gKiAgICAgIChhd2FpdCBhTXlFbGVtZW50LmZpcnN0KS5kb1NvbWV0aGluZygpO1xuICogICAgIH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5QXN5bmMoc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gKHByb3RvT3JEZXNjcmlwdG9yLCBcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55IGRlY29yYXRvclxuICAgIG5hbWUpID0+IHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IHtcbiAgICAgICAgICAgIGFzeW5jIGdldCgpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUNvbXBsZXRlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlclJvb3QucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIChuYW1lICE9PSB1bmRlZmluZWQpID9cbiAgICAgICAgICAgIGxlZ2FjeVF1ZXJ5KGRlc2NyaXB0b3IsIHByb3RvT3JEZXNjcmlwdG9yLCBuYW1lKSA6XG4gICAgICAgICAgICBzdGFuZGFyZFF1ZXJ5KGRlc2NyaXB0b3IsIHByb3RvT3JEZXNjcmlwdG9yKTtcbiAgICB9O1xufVxuLyoqXG4gKiBBIHByb3BlcnR5IGRlY29yYXRvciB0aGF0IGNvbnZlcnRzIGEgY2xhc3MgcHJvcGVydHkgaW50byBhIGdldHRlclxuICogdGhhdCBleGVjdXRlcyBhIHF1ZXJ5U2VsZWN0b3JBbGwgb24gdGhlIGVsZW1lbnQncyByZW5kZXJSb290LlxuICpcbiAqIEBwYXJhbSBzZWxlY3RvciBBIERPTVN0cmluZyBjb250YWluaW5nIG9uZSBvciBtb3JlIHNlbGVjdG9ycyB0byBtYXRjaC5cbiAqXG4gKiBTZWU6XG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRG9jdW1lbnQvcXVlcnlTZWxlY3RvckFsbFxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogICAgIGNsYXNzIE15RWxlbWVudCB7XG4gKiAgICAgICBAcXVlcnlBbGwoJ2RpdicpXG4gKiAgICAgICBkaXZzO1xuICpcbiAqICAgICAgIHJlbmRlcigpIHtcbiAqICAgICAgICAgcmV0dXJuIGh0bWxgXG4gKiAgICAgICAgICAgPGRpdiBpZD1cImZpcnN0XCI+PC9kaXY+XG4gKiAgICAgICAgICAgPGRpdiBpZD1cInNlY29uZFwiPjwvZGl2PlxuICogICAgICAgICBgO1xuICogICAgICAgfVxuICogICAgIH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5QWxsKHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIChwcm90b09yRGVzY3JpcHRvciwgXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueSBkZWNvcmF0b3JcbiAgICBuYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyUm9vdC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gKG5hbWUgIT09IHVuZGVmaW5lZCkgP1xuICAgICAgICAgICAgbGVnYWN5UXVlcnkoZGVzY3JpcHRvciwgcHJvdG9PckRlc2NyaXB0b3IsIG5hbWUpIDpcbiAgICAgICAgICAgIHN0YW5kYXJkUXVlcnkoZGVzY3JpcHRvciwgcHJvdG9PckRlc2NyaXB0b3IpO1xuICAgIH07XG59XG5jb25zdCBsZWdhY3lRdWVyeSA9IChkZXNjcmlwdG9yLCBwcm90bywgbmFtZSkgPT4ge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90bywgbmFtZSwgZGVzY3JpcHRvcik7XG59O1xuY29uc3Qgc3RhbmRhcmRRdWVyeSA9IChkZXNjcmlwdG9yLCBlbGVtZW50KSA9PiAoe1xuICAgIGtpbmQ6ICdtZXRob2QnLFxuICAgIHBsYWNlbWVudDogJ3Byb3RvdHlwZScsXG4gICAga2V5OiBlbGVtZW50LmtleSxcbiAgICBkZXNjcmlwdG9yLFxufSk7XG5jb25zdCBzdGFuZGFyZEV2ZW50T3B0aW9ucyA9IChvcHRpb25zLCBlbGVtZW50KSA9PiB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZWxlbWVudCksIHsgZmluaXNoZXIoY2xhenopIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY2xhenoucHJvdG90eXBlW2VsZW1lbnQua2V5XSwgb3B0aW9ucyk7XG4gICAgICAgIH0gfSk7XG59O1xuY29uc3QgbGVnYWN5RXZlbnRPcHRpb25zID0gXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55IGxlZ2FjeSBkZWNvcmF0b3JcbihvcHRpb25zLCBwcm90bywgbmFtZSkgPT4ge1xuICAgIE9iamVjdC5hc3NpZ24ocHJvdG9bbmFtZV0sIG9wdGlvbnMpO1xufTtcbi8qKlxuICogQWRkcyBldmVudCBsaXN0ZW5lciBvcHRpb25zIHRvIGEgbWV0aG9kIHVzZWQgYXMgYW4gZXZlbnQgbGlzdGVuZXIgaW4gYVxuICogbGl0LWh0bWwgdGVtcGxhdGUuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgQW4gb2JqZWN0IHRoYXQgc3BlY2lmaWVzIGV2ZW50IGxpc3RlbmVyIG9wdGlvbnMgYXMgYWNjZXB0ZWQgYnlcbiAqIGBFdmVudFRhcmdldCNhZGRFdmVudExpc3RlbmVyYCBhbmQgYEV2ZW50VGFyZ2V0I3JlbW92ZUV2ZW50TGlzdGVuZXJgLlxuICpcbiAqIEN1cnJlbnQgYnJvd3NlcnMgc3VwcG9ydCB0aGUgYGNhcHR1cmVgLCBgcGFzc2l2ZWAsIGFuZCBgb25jZWAgb3B0aW9ucy4gU2VlOlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0V2ZW50VGFyZ2V0L2FkZEV2ZW50TGlzdGVuZXIjUGFyYW1ldGVyc1xuICpcbiAqIEBleGFtcGxlXG4gKlxuICogICAgIGNsYXNzIE15RWxlbWVudCB7XG4gKiAgICAgICBjbGlja2VkID0gZmFsc2U7XG4gKlxuICogICAgICAgcmVuZGVyKCkge1xuICogICAgICAgICByZXR1cm4gaHRtbGBcbiAqICAgICAgICAgICA8ZGl2IEBjbGljaz0ke3RoaXMuX29uQ2xpY2t9YD5cbiAqICAgICAgICAgICAgIDxidXR0b24+PC9idXR0b24+XG4gKiAgICAgICAgICAgPC9kaXY+XG4gKiAgICAgICAgIGA7XG4gKiAgICAgICB9XG4gKlxuICogICAgICAgQGV2ZW50T3B0aW9ucyh7Y2FwdHVyZTogdHJ1ZX0pXG4gKiAgICAgICBfb25DbGljayhlKSB7XG4gKiAgICAgICAgIHRoaXMuY2xpY2tlZCA9IHRydWU7XG4gKiAgICAgICB9XG4gKiAgICAgfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXZlbnRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAvLyBSZXR1cm4gdmFsdWUgdHlwZWQgYXMgYW55IHRvIHByZXZlbnQgVHlwZVNjcmlwdCBmcm9tIGNvbXBsYWluaW5nIHRoYXRcbiAgICAvLyBzdGFuZGFyZCBkZWNvcmF0b3IgZnVuY3Rpb24gc2lnbmF0dXJlIGRvZXMgbm90IG1hdGNoIFR5cGVTY3JpcHQgZGVjb3JhdG9yXG4gICAgLy8gc2lnbmF0dXJlXG4gICAgLy8gVE9ETyhrc2NoYWFmKTogdW5jbGVhciB3aHkgaXQgd2FzIG9ubHkgZmFpbGluZyBvbiB0aGlzIGRlY29yYXRvciBhbmQgbm90XG4gICAgLy8gdGhlIG90aGVyc1xuICAgIHJldHVybiAoKHByb3RvT3JEZXNjcmlwdG9yLCBuYW1lKSA9PiAobmFtZSAhPT0gdW5kZWZpbmVkKSA/XG4gICAgICAgIGxlZ2FjeUV2ZW50T3B0aW9ucyhvcHRpb25zLCBwcm90b09yRGVzY3JpcHRvciwgbmFtZSkgOlxuICAgICAgICBzdGFuZGFyZEV2ZW50T3B0aW9ucyhvcHRpb25zLCBwcm90b09yRGVzY3JpcHRvcikpO1xufVxuLyoqXG4gKiBBIHByb3BlcnR5IGRlY29yYXRvciB0aGF0IGNvbnZlcnRzIGEgY2xhc3MgcHJvcGVydHkgaW50byBhIGdldHRlciB0aGF0XG4gKiByZXR1cm5zIHRoZSBgYXNzaWduZWROb2Rlc2Agb2YgdGhlIGdpdmVuIG5hbWVkIGBzbG90YC4gTm90ZSwgdGhlIHR5cGUgb2ZcbiAqIHRoaXMgcHJvcGVydHkgc2hvdWxkIGJlIGFubm90YXRlZCBhcyBgTm9kZUxpc3RPZjxIVE1MRWxlbWVudD5gLlxuICpcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5QXNzaWduZWROb2RlcyhzbG90TmFtZSA9ICcnLCBmbGF0dGVuID0gZmFsc2UpIHtcbiAgICByZXR1cm4gKHByb3RvT3JEZXNjcmlwdG9yLCBcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55IGRlY29yYXRvclxuICAgIG5hbWUpID0+IHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RvciA9IGBzbG90JHtzbG90TmFtZSA/IGBbbmFtZT0ke3Nsb3ROYW1lfV1gIDogJyd9YDtcbiAgICAgICAgICAgICAgICBjb25zdCBzbG90ID0gdGhpcy5yZW5kZXJSb290LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzbG90ICYmIHNsb3QuYXNzaWduZWROb2Rlcyh7IGZsYXR0ZW4gfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIChuYW1lICE9PSB1bmRlZmluZWQpID9cbiAgICAgICAgICAgIGxlZ2FjeVF1ZXJ5KGRlc2NyaXB0b3IsIHByb3RvT3JEZXNjcmlwdG9yLCBuYW1lKSA6XG4gICAgICAgICAgICBzdGFuZGFyZFF1ZXJ5KGRlc2NyaXB0b3IsIHByb3RvT3JEZXNjcmlwdG9yKTtcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVjb3JhdG9ycy5qcy5tYXAiLCIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTkgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZVxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQgQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXNcbnBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnRcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmV4cG9ydCBjb25zdCBzdXBwb3J0c0Fkb3B0aW5nU3R5bGVTaGVldHMgPSAoJ2Fkb3B0ZWRTdHlsZVNoZWV0cycgaW4gRG9jdW1lbnQucHJvdG90eXBlKSAmJlxuICAgICgncmVwbGFjZScgaW4gQ1NTU3R5bGVTaGVldC5wcm90b3R5cGUpO1xuY29uc3QgY29uc3RydWN0aW9uVG9rZW4gPSBTeW1ib2woKTtcbmV4cG9ydCBjbGFzcyBDU1NSZXN1bHQge1xuICAgIGNvbnN0cnVjdG9yKGNzc1RleHQsIHNhZmVUb2tlbikge1xuICAgICAgICBpZiAoc2FmZVRva2VuICE9PSBjb25zdHJ1Y3Rpb25Ub2tlbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDU1NSZXN1bHQgaXMgbm90IGNvbnN0cnVjdGFibGUuIFVzZSBgdW5zYWZlQ1NTYCBvciBgY3NzYCBpbnN0ZWFkLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3NzVGV4dCA9IGNzc1RleHQ7XG4gICAgfVxuICAgIC8vIE5vdGUsIHRoaXMgaXMgYSBnZXR0ZXIgc28gdGhhdCBpdCdzIGxhenkuIEluIHByYWN0aWNlLCB0aGlzIG1lYW5zXG4gICAgLy8gc3R5bGVzaGVldHMgYXJlIG5vdCBjcmVhdGVkIHVudGlsIHRoZSBmaXJzdCBlbGVtZW50IGluc3RhbmNlIGlzIG1hZGUuXG4gICAgZ2V0IHN0eWxlU2hlZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9zdHlsZVNoZWV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIE5vdGUsIGlmIGBhZG9wdGVkU3R5bGVTaGVldHNgIGlzIHN1cHBvcnRlZCB0aGVuIHdlIGFzc3VtZSBDU1NTdHlsZVNoZWV0XG4gICAgICAgICAgICAvLyBpcyBjb25zdHJ1Y3RhYmxlLlxuICAgICAgICAgICAgaWYgKHN1cHBvcnRzQWRvcHRpbmdTdHlsZVNoZWV0cykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3N0eWxlU2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3N0eWxlU2hlZXQucmVwbGFjZVN5bmModGhpcy5jc3NUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3N0eWxlU2hlZXQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9zdHlsZVNoZWV0O1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3NzVGV4dDtcbiAgICB9XG59XG4vKipcbiAqIFdyYXAgYSB2YWx1ZSBmb3IgaW50ZXJwb2xhdGlvbiBpbiBhIGNzcyB0YWdnZWQgdGVtcGxhdGUgbGl0ZXJhbC5cbiAqXG4gKiBUaGlzIGlzIHVuc2FmZSBiZWNhdXNlIHVudHJ1c3RlZCBDU1MgdGV4dCBjYW4gYmUgdXNlZCB0byBwaG9uZSBob21lXG4gKiBvciBleGZpbHRyYXRlIGRhdGEgdG8gYW4gYXR0YWNrZXIgY29udHJvbGxlZCBzaXRlLiBUYWtlIGNhcmUgdG8gb25seSB1c2VcbiAqIHRoaXMgd2l0aCB0cnVzdGVkIGlucHV0LlxuICovXG5leHBvcnQgY29uc3QgdW5zYWZlQ1NTID0gKHZhbHVlKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBDU1NSZXN1bHQoU3RyaW5nKHZhbHVlKSwgY29uc3RydWN0aW9uVG9rZW4pO1xufTtcbmNvbnN0IHRleHRGcm9tQ1NTUmVzdWx0ID0gKHZhbHVlKSA9PiB7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQ1NTUmVzdWx0KSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5jc3NUZXh0O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVmFsdWUgcGFzc2VkIHRvICdjc3MnIGZ1bmN0aW9uIG11c3QgYmUgYSAnY3NzJyBmdW5jdGlvbiByZXN1bHQ6ICR7dmFsdWV9LiBVc2UgJ3Vuc2FmZUNTUycgdG8gcGFzcyBub24tbGl0ZXJhbCB2YWx1ZXMsIGJ1dFxuICAgICAgICAgICAgdGFrZSBjYXJlIHRvIGVuc3VyZSBwYWdlIHNlY3VyaXR5LmApO1xuICAgIH1cbn07XG4vKipcbiAqIFRlbXBsYXRlIHRhZyB3aGljaCB3aGljaCBjYW4gYmUgdXNlZCB3aXRoIExpdEVsZW1lbnQncyBgc3R5bGVgIHByb3BlcnR5IHRvXG4gKiBzZXQgZWxlbWVudCBzdHlsZXMuIEZvciBzZWN1cml0eSByZWFzb25zLCBvbmx5IGxpdGVyYWwgc3RyaW5nIHZhbHVlcyBtYXkgYmVcbiAqIHVzZWQuIFRvIGluY29ycG9yYXRlIG5vbi1saXRlcmFsIHZhbHVlcyBgdW5zYWZlQ1NTYCBtYXkgYmUgdXNlZCBpbnNpZGUgYVxuICogdGVtcGxhdGUgc3RyaW5nIHBhcnQuXG4gKi9cbmV4cG9ydCBjb25zdCBjc3MgPSAoc3RyaW5ncywgLi4udmFsdWVzKSA9PiB7XG4gICAgY29uc3QgY3NzVGV4dCA9IHZhbHVlcy5yZWR1Y2UoKGFjYywgdiwgaWR4KSA9PiBhY2MgKyB0ZXh0RnJvbUNTU1Jlc3VsdCh2KSArIHN0cmluZ3NbaWR4ICsgMV0sIHN0cmluZ3NbMF0pO1xuICAgIHJldHVybiBuZXcgQ1NTUmVzdWx0KGNzc1RleHQsIGNvbnN0cnVjdGlvblRva2VuKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jc3MtdGFnLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbmltcG9ydCB7IHJlbmRlciB9IGZyb20gJ2xpdC1odG1sL2xpYi9zaGFkeS1yZW5kZXIuanMnO1xuaW1wb3J0IHsgVXBkYXRpbmdFbGVtZW50IH0gZnJvbSAnLi9saWIvdXBkYXRpbmctZWxlbWVudC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2xpYi91cGRhdGluZy1lbGVtZW50LmpzJztcbmV4cG9ydCAqIGZyb20gJy4vbGliL2RlY29yYXRvcnMuanMnO1xuZXhwb3J0IHsgaHRtbCwgc3ZnLCBUZW1wbGF0ZVJlc3VsdCwgU1ZHVGVtcGxhdGVSZXN1bHQgfSBmcm9tICdsaXQtaHRtbC9saXQtaHRtbC5qcyc7XG5pbXBvcnQgeyBzdXBwb3J0c0Fkb3B0aW5nU3R5bGVTaGVldHMgfSBmcm9tICcuL2xpYi9jc3MtdGFnLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vbGliL2Nzcy10YWcuanMnO1xuLy8gSU1QT1JUQU5UOiBkbyBub3QgY2hhbmdlIHRoZSBwcm9wZXJ0eSBuYW1lIG9yIHRoZSBhc3NpZ25tZW50IGV4cHJlc3Npb24uXG4vLyBUaGlzIGxpbmUgd2lsbCBiZSB1c2VkIGluIHJlZ2V4ZXMgdG8gc2VhcmNoIGZvciBMaXRFbGVtZW50IHVzYWdlLlxuLy8gVE9ETyhqdXN0aW5mYWduYW5pKTogaW5qZWN0IHZlcnNpb24gbnVtYmVyIGF0IGJ1aWxkIHRpbWVcbih3aW5kb3dbJ2xpdEVsZW1lbnRWZXJzaW9ucyddIHx8ICh3aW5kb3dbJ2xpdEVsZW1lbnRWZXJzaW9ucyddID0gW10pKVxuICAgIC5wdXNoKCcyLjMuMScpO1xuLyoqXG4gKiBTZW50aW5hbCB2YWx1ZSB1c2VkIHRvIGF2b2lkIGNhbGxpbmcgbGl0LWh0bWwncyByZW5kZXIgZnVuY3Rpb24gd2hlblxuICogc3ViY2xhc3NlcyBkbyBub3QgaW1wbGVtZW50IGByZW5kZXJgXG4gKi9cbmNvbnN0IHJlbmRlck5vdEltcGxlbWVudGVkID0ge307XG5leHBvcnQgY2xhc3MgTGl0RWxlbWVudCBleHRlbmRzIFVwZGF0aW5nRWxlbWVudCB7XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBhcnJheSBvZiBzdHlsZXMgdG8gYXBwbHkgdG8gdGhlIGVsZW1lbnQuXG4gICAgICogT3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gaW50ZWdyYXRlIGludG8gYSBzdHlsZSBtYW5hZ2VtZW50IHN5c3RlbS5cbiAgICAgKlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGdldFN0eWxlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3R5bGVzO1xuICAgIH1cbiAgICAvKiogQG5vY29sbGFwc2UgKi9cbiAgICBzdGF0aWMgX2dldFVuaXF1ZVN0eWxlcygpIHtcbiAgICAgICAgLy8gT25seSBnYXRoZXIgc3R5bGVzIG9uY2UgcGVyIGNsYXNzXG4gICAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ19zdHlsZXMnLCB0aGlzKSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBUYWtlIGNhcmUgbm90IHRvIGNhbGwgYHRoaXMuZ2V0U3R5bGVzKClgIG11bHRpcGxlIHRpbWVzIHNpbmNlIHRoaXNcbiAgICAgICAgLy8gZ2VuZXJhdGVzIG5ldyBDU1NSZXN1bHRzIGVhY2ggdGltZS5cbiAgICAgICAgLy8gVE9ETyhzb3J2ZWxsKTogU2luY2Ugd2UgZG8gbm90IGNhY2hlIENTU1Jlc3VsdHMgYnkgaW5wdXQsIGFueVxuICAgICAgICAvLyBzaGFyZWQgc3R5bGVzIHdpbGwgZ2VuZXJhdGUgbmV3IHN0eWxlc2hlZXQgb2JqZWN0cywgd2hpY2ggaXMgd2FzdGVmdWwuXG4gICAgICAgIC8vIFRoaXMgc2hvdWxkIGJlIGFkZHJlc3NlZCB3aGVuIGEgYnJvd3NlciBzaGlwcyBjb25zdHJ1Y3RhYmxlXG4gICAgICAgIC8vIHN0eWxlc2hlZXRzLlxuICAgICAgICBjb25zdCB1c2VyU3R5bGVzID0gdGhpcy5nZXRTdHlsZXMoKTtcbiAgICAgICAgaWYgKHVzZXJTdHlsZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5fc3R5bGVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh1c2VyU3R5bGVzKSkge1xuICAgICAgICAgICAgLy8gRGUtZHVwbGljYXRlIHN0eWxlcyBwcmVzZXJ2aW5nIHRoZSBfbGFzdF8gaW5zdGFuY2UgaW4gdGhlIHNldC5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24gdG8gYXZvaWQgZHVwbGljYXRlZCBzdHlsZXMgdGhhdCBjYW5cbiAgICAgICAgICAgIC8vIG9jY3VyIGVzcGVjaWFsbHkgd2hlbiBjb21wb3NpbmcgdmlhIHN1YmNsYXNzaW5nLlxuICAgICAgICAgICAgLy8gVGhlIGxhc3QgaXRlbSBpcyBrZXB0IHRvIHRyeSB0byBwcmVzZXJ2ZSB0aGUgY2FzY2FkZSBvcmRlciB3aXRoIHRoZVxuICAgICAgICAgICAgLy8gYXNzdW1wdGlvbiB0aGF0IGl0J3MgbW9zdCBpbXBvcnRhbnQgdGhhdCBsYXN0IGFkZGVkIHN0eWxlcyBvdmVycmlkZVxuICAgICAgICAgICAgLy8gcHJldmlvdXMgc3R5bGVzLlxuICAgICAgICAgICAgY29uc3QgYWRkU3R5bGVzID0gKHN0eWxlcywgc2V0KSA9PiBzdHlsZXMucmVkdWNlUmlnaHQoKHNldCwgcykgPT4gXG4gICAgICAgICAgICAvLyBOb3RlOiBPbiBJRSBzZXQuYWRkKCkgZG9lcyBub3QgcmV0dXJuIHRoZSBzZXRcbiAgICAgICAgICAgIEFycmF5LmlzQXJyYXkocykgPyBhZGRTdHlsZXMocywgc2V0KSA6IChzZXQuYWRkKHMpLCBzZXQpLCBzZXQpO1xuICAgICAgICAgICAgLy8gQXJyYXkuZnJvbSBkb2VzIG5vdCB3b3JrIG9uIFNldCBpbiBJRSwgb3RoZXJ3aXNlIHJldHVyblxuICAgICAgICAgICAgLy8gQXJyYXkuZnJvbShhZGRTdHlsZXModXNlclN0eWxlcywgbmV3IFNldDxDU1NSZXN1bHQ+KCkpKS5yZXZlcnNlKClcbiAgICAgICAgICAgIGNvbnN0IHNldCA9IGFkZFN0eWxlcyh1c2VyU3R5bGVzLCBuZXcgU2V0KCkpO1xuICAgICAgICAgICAgY29uc3Qgc3R5bGVzID0gW107XG4gICAgICAgICAgICBzZXQuZm9yRWFjaCgodikgPT4gc3R5bGVzLnVuc2hpZnQodikpO1xuICAgICAgICAgICAgdGhpcy5fc3R5bGVzID0gc3R5bGVzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc3R5bGVzID0gW3VzZXJTdHlsZXNdO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGVsZW1lbnQgaW5pdGlhbGl6YXRpb24uIEJ5IGRlZmF1bHQgdGhpcyBjYWxscyBgY3JlYXRlUmVuZGVyUm9vdGBcbiAgICAgKiB0byBjcmVhdGUgdGhlIGVsZW1lbnQgYHJlbmRlclJvb3RgIG5vZGUgYW5kIGNhcHR1cmVzIGFueSBwcmUtc2V0IHZhbHVlcyBmb3JcbiAgICAgKiByZWdpc3RlcmVkIHByb3BlcnRpZXMuXG4gICAgICovXG4gICAgaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yLl9nZXRVbmlxdWVTdHlsZXMoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJSb290ID1cbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUmVuZGVyUm9vdCgpO1xuICAgICAgICAvLyBOb3RlLCBpZiByZW5kZXJSb290IGlzIG5vdCBhIHNoYWRvd1Jvb3QsIHN0eWxlcyB3b3VsZC9jb3VsZCBhcHBseSB0byB0aGVcbiAgICAgICAgLy8gZWxlbWVudCdzIGdldFJvb3ROb2RlKCkuIFdoaWxlIHRoaXMgY291bGQgYmUgZG9uZSwgd2UncmUgY2hvb3Npbmcgbm90IHRvXG4gICAgICAgIC8vIHN1cHBvcnQgdGhpcyBub3cgc2luY2UgaXQgd291bGQgcmVxdWlyZSBkaWZmZXJlbnQgbG9naWMgYXJvdW5kIGRlLWR1cGluZy5cbiAgICAgICAgaWYgKHdpbmRvdy5TaGFkb3dSb290ICYmIHRoaXMucmVuZGVyUm9vdCBpbnN0YW5jZW9mIHdpbmRvdy5TaGFkb3dSb290KSB7XG4gICAgICAgICAgICB0aGlzLmFkb3B0U3R5bGVzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbm9kZSBpbnRvIHdoaWNoIHRoZSBlbGVtZW50IHNob3VsZCByZW5kZXIgYW5kIGJ5IGRlZmF1bHRcbiAgICAgKiBjcmVhdGVzIGFuZCByZXR1cm5zIGFuIG9wZW4gc2hhZG93Um9vdC4gSW1wbGVtZW50IHRvIGN1c3RvbWl6ZSB3aGVyZSB0aGVcbiAgICAgKiBlbGVtZW50J3MgRE9NIGlzIHJlbmRlcmVkLiBGb3IgZXhhbXBsZSwgdG8gcmVuZGVyIGludG8gdGhlIGVsZW1lbnQnc1xuICAgICAqIGNoaWxkTm9kZXMsIHJldHVybiBgdGhpc2AuXG4gICAgICogQHJldHVybnMge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gUmV0dXJucyBhIG5vZGUgaW50byB3aGljaCB0byByZW5kZXIuXG4gICAgICovXG4gICAgY3JlYXRlUmVuZGVyUm9vdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHN0eWxpbmcgdG8gdGhlIGVsZW1lbnQgc2hhZG93Um9vdCB1c2luZyB0aGUgYHN0YXRpYyBnZXQgc3R5bGVzYFxuICAgICAqIHByb3BlcnR5LiBTdHlsaW5nIHdpbGwgYXBwbHkgdXNpbmcgYHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzYCB3aGVyZVxuICAgICAqIGF2YWlsYWJsZSBhbmQgd2lsbCBmYWxsYmFjayBvdGhlcndpc2UuIFdoZW4gU2hhZG93IERPTSBpcyBwb2x5ZmlsbGVkLFxuICAgICAqIFNoYWR5Q1NTIHNjb3BlcyBzdHlsZXMgYW5kIGFkZHMgdGhlbSB0byB0aGUgZG9jdW1lbnQuIFdoZW4gU2hhZG93IERPTVxuICAgICAqIGlzIGF2YWlsYWJsZSBidXQgYGFkb3B0ZWRTdHlsZVNoZWV0c2AgaXMgbm90LCBzdHlsZXMgYXJlIGFwcGVuZGVkIHRvIHRoZVxuICAgICAqIGVuZCBvZiB0aGUgYHNoYWRvd1Jvb3RgIHRvIFttaW1pYyBzcGVjXG4gICAgICogYmVoYXZpb3JdKGh0dHBzOi8vd2ljZy5naXRodWIuaW8vY29uc3RydWN0LXN0eWxlc2hlZXRzLyN1c2luZy1jb25zdHJ1Y3RlZC1zdHlsZXNoZWV0cykuXG4gICAgICovXG4gICAgYWRvcHRTdHlsZXMoKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlcyA9IHRoaXMuY29uc3RydWN0b3IuX3N0eWxlcztcbiAgICAgICAgaWYgKHN0eWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGVyZSBhcmUgdGhyZWUgc2VwYXJhdGUgY2FzZXMgaGVyZSBiYXNlZCBvbiBTaGFkb3cgRE9NIHN1cHBvcnQuXG4gICAgICAgIC8vICgxKSBzaGFkb3dSb290IHBvbHlmaWxsZWQ6IHVzZSBTaGFkeUNTU1xuICAgICAgICAvLyAoMikgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgYXZhaWxhYmxlOiB1c2UgaXQuXG4gICAgICAgIC8vICgzKSBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyBwb2x5ZmlsbGVkOiBhcHBlbmQgc3R5bGVzIGFmdGVyXG4gICAgICAgIC8vIHJlbmRlcmluZ1xuICAgICAgICBpZiAod2luZG93LlNoYWR5Q1NTICE9PSB1bmRlZmluZWQgJiYgIXdpbmRvdy5TaGFkeUNTUy5uYXRpdmVTaGFkb3cpIHtcbiAgICAgICAgICAgIHdpbmRvdy5TaGFkeUNTUy5TY29waW5nU2hpbS5wcmVwYXJlQWRvcHRlZENzc1RleHQoc3R5bGVzLm1hcCgocykgPT4gcy5jc3NUZXh0KSwgdGhpcy5sb2NhbE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN1cHBvcnRzQWRvcHRpbmdTdHlsZVNoZWV0cykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyA9XG4gICAgICAgICAgICAgICAgc3R5bGVzLm1hcCgocykgPT4gcy5zdHlsZVNoZWV0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRoaXMgbXVzdCBiZSBkb25lIGFmdGVyIHJlbmRlcmluZyBzbyB0aGUgYWN0dWFsIHN0eWxlIGluc2VydGlvbiBpcyBkb25lXG4gICAgICAgICAgICAvLyBpbiBgdXBkYXRlYC5cbiAgICAgICAgICAgIHRoaXMuX25lZWRzU2hpbUFkb3B0ZWRTdHlsZVNoZWV0cyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIC8vIE5vdGUsIGZpcnN0IHVwZGF0ZS9yZW5kZXIgaGFuZGxlcyBzdHlsZUVsZW1lbnQgc28gd2Ugb25seSBjYWxsIHRoaXMgaWZcbiAgICAgICAgLy8gY29ubmVjdGVkIGFmdGVyIGZpcnN0IHVwZGF0ZS5cbiAgICAgICAgaWYgKHRoaXMuaGFzVXBkYXRlZCAmJiB3aW5kb3cuU2hhZHlDU1MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgd2luZG93LlNoYWR5Q1NTLnN0eWxlRWxlbWVudCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBlbGVtZW50LiBUaGlzIG1ldGhvZCByZWZsZWN0cyBwcm9wZXJ0eSB2YWx1ZXMgdG8gYXR0cmlidXRlc1xuICAgICAqIGFuZCBjYWxscyBgcmVuZGVyYCB0byByZW5kZXIgRE9NIHZpYSBsaXQtaHRtbC4gU2V0dGluZyBwcm9wZXJ0aWVzIGluc2lkZVxuICAgICAqIHRoaXMgbWV0aG9kIHdpbGwgKm5vdCogdHJpZ2dlciBhbm90aGVyIHVwZGF0ZS5cbiAgICAgKiBAcGFyYW0gX2NoYW5nZWRQcm9wZXJ0aWVzIE1hcCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgd2l0aCBvbGQgdmFsdWVzXG4gICAgICovXG4gICAgdXBkYXRlKGNoYW5nZWRQcm9wZXJ0aWVzKSB7XG4gICAgICAgIC8vIFNldHRpbmcgcHJvcGVydGllcyBpbiBgcmVuZGVyYCBzaG91bGQgbm90IHRyaWdnZXIgYW4gdXBkYXRlLiBTaW5jZVxuICAgICAgICAvLyB1cGRhdGVzIGFyZSBhbGxvd2VkIGFmdGVyIHN1cGVyLnVwZGF0ZSwgaXQncyBpbXBvcnRhbnQgdG8gY2FsbCBgcmVuZGVyYFxuICAgICAgICAvLyBiZWZvcmUgdGhhdC5cbiAgICAgICAgY29uc3QgdGVtcGxhdGVSZXN1bHQgPSB0aGlzLnJlbmRlcigpO1xuICAgICAgICBzdXBlci51cGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgICAgICAvLyBJZiByZW5kZXIgaXMgbm90IGltcGxlbWVudGVkIGJ5IHRoZSBjb21wb25lbnQsIGRvbid0IGNhbGwgbGl0LWh0bWwgcmVuZGVyXG4gICAgICAgIGlmICh0ZW1wbGF0ZVJlc3VsdCAhPT0gcmVuZGVyTm90SW1wbGVtZW50ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAucmVuZGVyKHRlbXBsYXRlUmVzdWx0LCB0aGlzLnJlbmRlclJvb3QsIHsgc2NvcGVOYW1lOiB0aGlzLmxvY2FsTmFtZSwgZXZlbnRDb250ZXh0OiB0aGlzIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdoZW4gbmF0aXZlIFNoYWRvdyBET00gaXMgdXNlZCBidXQgYWRvcHRlZFN0eWxlcyBhcmUgbm90IHN1cHBvcnRlZCxcbiAgICAgICAgLy8gaW5zZXJ0IHN0eWxpbmcgYWZ0ZXIgcmVuZGVyaW5nIHRvIGVuc3VyZSBhZG9wdGVkU3R5bGVzIGhhdmUgaGlnaGVzdFxuICAgICAgICAvLyBwcmlvcml0eS5cbiAgICAgICAgaWYgKHRoaXMuX25lZWRzU2hpbUFkb3B0ZWRTdHlsZVNoZWV0cykge1xuICAgICAgICAgICAgdGhpcy5fbmVlZHNTaGltQWRvcHRlZFN0eWxlU2hlZXRzID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yLl9zdHlsZXMuZm9yRWFjaCgocykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IHMuY3NzVGV4dDtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclJvb3QuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52b2tlZCBvbiBlYWNoIHVwZGF0ZSB0byBwZXJmb3JtIHJlbmRlcmluZyB0YXNrcy4gVGhpcyBtZXRob2QgbWF5IHJldHVyblxuICAgICAqIGFueSB2YWx1ZSByZW5kZXJhYmxlIGJ5IGxpdC1odG1sJ3MgTm9kZVBhcnQgLSB0eXBpY2FsbHkgYSBUZW1wbGF0ZVJlc3VsdC5cbiAgICAgKiBTZXR0aW5nIHByb3BlcnRpZXMgaW5zaWRlIHRoaXMgbWV0aG9kIHdpbGwgKm5vdCogdHJpZ2dlciB0aGUgZWxlbWVudCB0b1xuICAgICAqIHVwZGF0ZS5cbiAgICAgKi9cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiByZW5kZXJOb3RJbXBsZW1lbnRlZDtcbiAgICB9XG59XG4vKipcbiAqIEVuc3VyZSB0aGlzIGNsYXNzIGlzIG1hcmtlZCBhcyBgZmluYWxpemVkYCBhcyBhbiBvcHRpbWl6YXRpb24gZW5zdXJpbmdcbiAqIGl0IHdpbGwgbm90IG5lZWRsZXNzbHkgdHJ5IHRvIGBmaW5hbGl6ZWAuXG4gKlxuICogTm90ZSB0aGlzIHByb3BlcnR5IG5hbWUgaXMgYSBzdHJpbmcgdG8gcHJldmVudCBicmVha2luZyBDbG9zdXJlIEpTIENvbXBpbGVyXG4gKiBvcHRpbWl6YXRpb25zLiBTZWUgdXBkYXRpbmctZWxlbWVudC50cyBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqL1xuTGl0RWxlbWVudFsnZmluYWxpemVkJ10gPSB0cnVlO1xuLyoqXG4gKiBSZW5kZXIgbWV0aG9kIHVzZWQgdG8gcmVuZGVyIHRoZSB2YWx1ZSB0byB0aGUgZWxlbWVudCdzIERPTS5cbiAqIEBwYXJhbSByZXN1bHQgVGhlIHZhbHVlIHRvIHJlbmRlci5cbiAqIEBwYXJhbSBjb250YWluZXIgTm9kZSBpbnRvIHdoaWNoIHRvIHJlbmRlci5cbiAqIEBwYXJhbSBvcHRpb25zIEVsZW1lbnQgbmFtZS5cbiAqIEBub2NvbGxhcHNlXG4gKi9cbkxpdEVsZW1lbnQucmVuZGVyID0gcmVuZGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGl0LWVsZW1lbnQuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuaW1wb3J0IHsgaXNQcmltaXRpdmUgfSBmcm9tICcuLi9saWIvcGFydHMuanMnO1xuaW1wb3J0IHsgZGlyZWN0aXZlLCBOb2RlUGFydCB9IGZyb20gJy4uL2xpdC1odG1sLmpzJztcbi8vIEZvciBlYWNoIHBhcnQsIHJlbWVtYmVyIHRoZSB2YWx1ZSB0aGF0IHdhcyBsYXN0IHJlbmRlcmVkIHRvIHRoZSBwYXJ0IGJ5IHRoZVxuLy8gdW5zYWZlSFRNTCBkaXJlY3RpdmUsIGFuZCB0aGUgRG9jdW1lbnRGcmFnbWVudCB0aGF0IHdhcyBsYXN0IHNldCBhcyBhIHZhbHVlLlxuLy8gVGhlIERvY3VtZW50RnJhZ21lbnQgaXMgdXNlZCBhcyBhIHVuaXF1ZSBrZXkgdG8gY2hlY2sgaWYgdGhlIGxhc3QgdmFsdWVcbi8vIHJlbmRlcmVkIHRvIHRoZSBwYXJ0IHdhcyB3aXRoIHVuc2FmZUhUTUwuIElmIG5vdCwgd2UnbGwgYWx3YXlzIHJlLXJlbmRlciB0aGVcbi8vIHZhbHVlIHBhc3NlZCB0byB1bnNhZmVIVE1MLlxuY29uc3QgcHJldmlvdXNWYWx1ZXMgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBSZW5kZXJzIHRoZSByZXN1bHQgYXMgSFRNTCwgcmF0aGVyIHRoYW4gdGV4dC5cbiAqXG4gKiBOb3RlLCB0aGlzIGlzIHVuc2FmZSB0byB1c2Ugd2l0aCBhbnkgdXNlci1wcm92aWRlZCBpbnB1dCB0aGF0IGhhc24ndCBiZWVuXG4gKiBzYW5pdGl6ZWQgb3IgZXNjYXBlZCwgYXMgaXQgbWF5IGxlYWQgdG8gY3Jvc3Mtc2l0ZS1zY3JpcHRpbmdcbiAqIHZ1bG5lcmFiaWxpdGllcy5cbiAqL1xuZXhwb3J0IGNvbnN0IHVuc2FmZUhUTUwgPSBkaXJlY3RpdmUoKHZhbHVlKSA9PiAocGFydCkgPT4ge1xuICAgIGlmICghKHBhcnQgaW5zdGFuY2VvZiBOb2RlUGFydCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnNhZmVIVE1MIGNhbiBvbmx5IGJlIHVzZWQgaW4gdGV4dCBiaW5kaW5ncycpO1xuICAgIH1cbiAgICBjb25zdCBwcmV2aW91c1ZhbHVlID0gcHJldmlvdXNWYWx1ZXMuZ2V0KHBhcnQpO1xuICAgIGlmIChwcmV2aW91c1ZhbHVlICE9PSB1bmRlZmluZWQgJiYgaXNQcmltaXRpdmUodmFsdWUpICYmXG4gICAgICAgIHZhbHVlID09PSBwcmV2aW91c1ZhbHVlLnZhbHVlICYmIHBhcnQudmFsdWUgPT09IHByZXZpb3VzVmFsdWUuZnJhZ21lbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gdmFsdWU7IC8vIGlubmVySFRNTCBjYXN0cyB0byBzdHJpbmcgaW50ZXJuYWxseVxuICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0ZW1wbGF0ZS5jb250ZW50LCB0cnVlKTtcbiAgICBwYXJ0LnNldFZhbHVlKGZyYWdtZW50KTtcbiAgICBwcmV2aW91c1ZhbHVlcy5zZXQocGFydCwgeyB2YWx1ZSwgZnJhZ21lbnQgfSk7XG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuc2FmZS1odG1sLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbmltcG9ydCB7IEF0dHJpYnV0ZVBhcnQsIGRpcmVjdGl2ZSwgUHJvcGVydHlQYXJ0IH0gZnJvbSAnLi4vbGl0LWh0bWwuanMnO1xuLy8gSUUxMSBkb2Vzbid0IHN1cHBvcnQgY2xhc3NMaXN0IG9uIFNWRyBlbGVtZW50cywgc28gd2UgZW11bGF0ZSBpdCB3aXRoIGEgU2V0XG5jbGFzcyBDbGFzc0xpc3Qge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jbGFzc2VzID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLmNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgY29uc3QgY2xhc3NMaXN0ID0gKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKS5zcGxpdCgvXFxzKy8pO1xuICAgICAgICBmb3IgKGNvbnN0IGNscyBvZiBjbGFzc0xpc3QpIHtcbiAgICAgICAgICAgIHRoaXMuY2xhc3Nlcy5hZGQoY2xzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGQoY2xzKSB7XG4gICAgICAgIHRoaXMuY2xhc3Nlcy5hZGQoY2xzKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmVtb3ZlKGNscykge1xuICAgICAgICB0aGlzLmNsYXNzZXMuZGVsZXRlKGNscyk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCA9IHRydWU7XG4gICAgfVxuICAgIGNvbW1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2hhbmdlZCkge1xuICAgICAgICAgICAgbGV0IGNsYXNzU3RyaW5nID0gJyc7XG4gICAgICAgICAgICB0aGlzLmNsYXNzZXMuZm9yRWFjaCgoY2xzKSA9PiBjbGFzc1N0cmluZyArPSBjbHMgKyAnICcpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbGFzc1N0cmluZyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFN0b3JlcyB0aGUgQ2xhc3NJbmZvIG9iamVjdCBhcHBsaWVkIHRvIGEgZ2l2ZW4gQXR0cmlidXRlUGFydC5cbiAqIFVzZWQgdG8gdW5zZXQgZXhpc3RpbmcgdmFsdWVzIHdoZW4gYSBuZXcgQ2xhc3NJbmZvIG9iamVjdCBpcyBhcHBsaWVkLlxuICovXG5jb25zdCBwcmV2aW91c0NsYXNzZXNDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG4vKipcbiAqIEEgZGlyZWN0aXZlIHRoYXQgYXBwbGllcyBDU1MgY2xhc3Nlcy4gVGhpcyBtdXN0IGJlIHVzZWQgaW4gdGhlIGBjbGFzc2BcbiAqIGF0dHJpYnV0ZSBhbmQgbXVzdCBiZSB0aGUgb25seSBwYXJ0IHVzZWQgaW4gdGhlIGF0dHJpYnV0ZS4gSXQgdGFrZXMgZWFjaFxuICogcHJvcGVydHkgaW4gdGhlIGBjbGFzc0luZm9gIGFyZ3VtZW50IGFuZCBhZGRzIHRoZSBwcm9wZXJ0eSBuYW1lIHRvIHRoZVxuICogZWxlbWVudCdzIGBjbGFzc2AgaWYgdGhlIHByb3BlcnR5IHZhbHVlIGlzIHRydXRoeTsgaWYgdGhlIHByb3BlcnR5IHZhbHVlIGlzXG4gKiBmYWxzZXksIHRoZSBwcm9wZXJ0eSBuYW1lIGlzIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCdzIGBjbGFzc2AuIEZvciBleGFtcGxlXG4gKiBge2ZvbzogYmFyfWAgYXBwbGllcyB0aGUgY2xhc3MgYGZvb2AgaWYgdGhlIHZhbHVlIG9mIGBiYXJgIGlzIHRydXRoeS5cbiAqIEBwYXJhbSBjbGFzc0luZm8ge0NsYXNzSW5mb31cbiAqL1xuZXhwb3J0IGNvbnN0IGNsYXNzTWFwID0gZGlyZWN0aXZlKChjbGFzc0luZm8pID0+IChwYXJ0KSA9PiB7XG4gICAgaWYgKCEocGFydCBpbnN0YW5jZW9mIEF0dHJpYnV0ZVBhcnQpIHx8IChwYXJ0IGluc3RhbmNlb2YgUHJvcGVydHlQYXJ0KSB8fFxuICAgICAgICBwYXJ0LmNvbW1pdHRlci5uYW1lICE9PSAnY2xhc3MnIHx8IHBhcnQuY29tbWl0dGVyLnBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgYGNsYXNzTWFwYCBkaXJlY3RpdmUgbXVzdCBiZSB1c2VkIGluIHRoZSBgY2xhc3NgIGF0dHJpYnV0ZSAnICtcbiAgICAgICAgICAgICdhbmQgbXVzdCBiZSB0aGUgb25seSBwYXJ0IGluIHRoZSBhdHRyaWJ1dGUuJyk7XG4gICAgfVxuICAgIGNvbnN0IHsgY29tbWl0dGVyIH0gPSBwYXJ0O1xuICAgIGNvbnN0IHsgZWxlbWVudCB9ID0gY29tbWl0dGVyO1xuICAgIGxldCBwcmV2aW91c0NsYXNzZXMgPSBwcmV2aW91c0NsYXNzZXNDYWNoZS5nZXQocGFydCk7XG4gICAgaWYgKHByZXZpb3VzQ2xhc3NlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIFdyaXRlIHN0YXRpYyBjbGFzc2VzIG9uY2VcbiAgICAgICAgLy8gVXNlIHNldEF0dHJpYnV0ZSgpIGJlY2F1c2UgY2xhc3NOYW1lIGlzbid0IGEgc3RyaW5nIG9uIFNWRyBlbGVtZW50c1xuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjb21taXR0ZXIuc3RyaW5ncy5qb2luKCcgJykpO1xuICAgICAgICBwcmV2aW91c0NsYXNzZXNDYWNoZS5zZXQocGFydCwgcHJldmlvdXNDbGFzc2VzID0gbmV3IFNldCgpKTtcbiAgICB9XG4gICAgY29uc3QgY2xhc3NMaXN0ID0gKGVsZW1lbnQuY2xhc3NMaXN0IHx8IG5ldyBDbGFzc0xpc3QoZWxlbWVudCkpO1xuICAgIC8vIFJlbW92ZSBvbGQgY2xhc3NlcyB0aGF0IG5vIGxvbmdlciBhcHBseVxuICAgIC8vIFdlIHVzZSBmb3JFYWNoKCkgaW5zdGVhZCBvZiBmb3Itb2Ygc28gdGhhdCByZSBkb24ndCByZXF1aXJlIGRvd24tbGV2ZWxcbiAgICAvLyBpdGVyYXRpb24uXG4gICAgcHJldmlvdXNDbGFzc2VzLmZvckVhY2goKG5hbWUpID0+IHtcbiAgICAgICAgaWYgKCEobmFtZSBpbiBjbGFzc0luZm8pKSB7XG4gICAgICAgICAgICBjbGFzc0xpc3QucmVtb3ZlKG5hbWUpO1xuICAgICAgICAgICAgcHJldmlvdXNDbGFzc2VzLmRlbGV0ZShuYW1lKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vIEFkZCBvciByZW1vdmUgY2xhc3NlcyBiYXNlZCBvbiB0aGVpciBjbGFzc01hcCB2YWx1ZVxuICAgIGZvciAoY29uc3QgbmFtZSBpbiBjbGFzc0luZm8pIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBjbGFzc0luZm9bbmFtZV07XG4gICAgICAgIGlmICh2YWx1ZSAhPSBwcmV2aW91c0NsYXNzZXMuaGFzKG5hbWUpKSB7XG4gICAgICAgICAgICAvLyBXZSBleHBsaWNpdGx5IHdhbnQgYSBsb29zZSB0cnV0aHkgY2hlY2sgb2YgYHZhbHVlYCBiZWNhdXNlIGl0IHNlZW1zXG4gICAgICAgICAgICAvLyBtb3JlIGNvbnZlbmllbnQgdGhhdCAnJyBhbmQgMCBhcmUgc2tpcHBlZC5cbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNsYXNzTGlzdC5hZGQobmFtZSk7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNDbGFzc2VzLmFkZChuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsYXNzTGlzdC5yZW1vdmUobmFtZSk7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNDbGFzc2VzLmRlbGV0ZShuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNsYXNzTGlzdC5jb21taXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY2xhc3NMaXN0LmNvbW1pdCgpO1xuICAgIH1cbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xhc3MtbWFwLmpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBnZXRBc3BlY3RSYXRpbyhwb3N0KSB7XG4gICAgY29uc3QgaW1hZ2UgPSBnZXRQcmV2aWV3KHBvc3QpO1xuICAgIGlmICghaW1hZ2UpXG4gICAgICAgIHJldHVybiAxO1xuICAgIHJldHVybiBpbWFnZS5oZWlnaHQgLyBpbWFnZS53aWR0aDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbWFnZVVybChwb3N0KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCBpc0ltYWdlID0gcG9zdC5wb3N0X2hpbnQgPT09ICdpbWFnZSc7XG4gICAgaWYgKGlzSW1hZ2UpXG4gICAgICAgIHJldHVybiBwb3N0LnVybDtcbiAgICByZXR1cm4gKF9iID0gKF9hID0gZ2V0UHJldmlldyhwb3N0KSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVybCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogJyc7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJldmlldyhwb3N0KSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgY29uc3QgaXNJbWFnZSA9IHBvc3QucG9zdF9oaW50ID09PSAnaW1hZ2UnO1xuICAgIGlmIChpc0dhbGxlcnkocG9zdCkpXG4gICAgICAgIHJldHVybiBnZXRHYWxsZXJ5SW1hZ2UocG9zdCk7XG4gICAgaWYgKGlzSW1hZ2UpXG4gICAgICAgIHJldHVybiAoX2EgPSBwb3N0LnByZXZpZXcpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbWFnZXNbMF0uc291cmNlO1xuICAgIGNvbnN0IHByZXZpZXdzID0gKF9iID0gcG9zdC5wcmV2aWV3KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaW1hZ2VzWzBdLnJlc29sdXRpb25zO1xuICAgIGlmICghcHJldmlld3MpXG4gICAgICAgIHJldHVybjtcbiAgICByZXR1cm4gKF9jID0gcG9zdC5wcmV2aWV3KSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuaW1hZ2VzWzBdLnNvdXJjZTtcbiAgICAvKiBjb25zdCByZXNvbHV0aW9uID0gaXNMYXJnZVxuICAgICAgPyBwcmV2aWV3c1syXSA/PyBwcmV2aWV3c1sxXSA/PyBwcmV2aWV3c1swXVxuICAgICAgOiBwcmV2aWV3c1sxXSA/PyBwcmV2aWV3c1swXTtcbiAgICByZXR1cm4gcmVzb2x1dGlvbjsgKi9cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0dhbGxlcnkocG9zdCkge1xuICAgIHJldHVybiAhIXBvc3QuZ2FsbGVyeV9kYXRhO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzVmlkZW8ocG9zdCkge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gKF9hID0gcG9zdC5wb3N0X2hpbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbmNsdWRlcygndmlkZW8nKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRHYWxsZXJ5SW1hZ2UocG9zdCkge1xuICAgIGNvbnN0IGZpcnN0SW1hZ2UgPSBwb3N0LmdhbGxlcnlfZGF0YS5pdGVtc1swXTtcbiAgICBjb25zdCBtZXRhZGF0YSA9IHBvc3QubWVkaWFfbWV0YWRhdGFbZmlyc3RJbWFnZS5tZWRpYV9pZF07XG4gICAgaWYgKCFtZXRhZGF0YSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGxldCB0aHVtYiA9IG1ldGFkYXRhLnAuZmluZCgoaW5mbykgPT4gaW5mby54ID4gMzAwKTtcbiAgICBpZiAoIXRodW1iKVxuICAgICAgICB0aHVtYiA9IG1ldGFkYXRhLnM7XG4gICAgaWYgKCF0aHVtYilcbiAgICAgICAgcmV0dXJuO1xuICAgIHJldHVybiB7XG4gICAgICAgIHVybDogdGh1bWIudSxcbiAgICAgICAgd2lkdGg6IHRodW1iLngsXG4gICAgICAgIGhlaWdodDogdGh1bWIueSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGh0bWxEZWNvZGUoaW5wdXQpIHtcbiAgICB2YXIgZG9jID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhpbnB1dCwgJ3RleHQvaHRtbCcpO1xuICAgIHJldHVybiBkb2MuZG9jdW1lbnRFbGVtZW50LnRleHRDb250ZW50O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpcnN0TWFya2Rvd25FbGVtKGlucHV0KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkaXYuaW5uZXJIVE1MID0gaW5wdXQ7XG4gICAgY29uc3QgZmlyc3RDaGlsZCA9IChfYSA9IGRpdi5xdWVyeVNlbGVjdG9yKCcubWQnKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIGlmIChmaXJzdENoaWxkKSB7XG4gICAgICAgIHJldHVybiAoX2IgPSBmaXJzdENoaWxkLnRleHRDb250ZW50KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgcmV0dXJuO1xufVxuIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgTGl0RWxlbWVudCwgaHRtbCwgY3VzdG9tRWxlbWVudCwgcHJvcGVydHksIGNzcyB9IGZyb20gJ2xpdC1lbGVtZW50JztcbmltcG9ydCB7IHVuc2FmZUhUTUwgfSBmcm9tICdsaXQtaHRtbC9kaXJlY3RpdmVzL3Vuc2FmZS1odG1sJztcbmltcG9ydCB7IGNsYXNzTWFwIH0gZnJvbSAnbGl0LWh0bWwvZGlyZWN0aXZlcy9jbGFzcy1tYXAnO1xuaW1wb3J0IHsgZ2V0UHJldmlldywgaHRtbERlY29kZSB9IGZyb20gJy4vaGVscGVycyc7XG5sZXQgU3VicmVkZGl0VmlldyA9IGNsYXNzIFN1YnJlZGRpdFZpZXcgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgaWYgKHRoaXMuc3VicmVkZGl0KSB7XG4gICAgICAgICAgICB0aGlzLm1ha2VRdWVyeSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBwcmV2LCBjdXJyKSB7XG4gICAgICAgIGlmIChuYW1lID09PSAnc3VicmVkZGl0Jykge1xuICAgICAgICAgICAgaWYgKHByZXYgIT09IGN1cnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN1YnJlZGRpdCA9IGN1cnI7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWtlUXVlcnkoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZldGNoQWJvdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBtYWtlUXVlcnkoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy5kYXRhID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoIXRoaXMuc3VicmVkZGl0KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vd3d3LnJlZGRpdC5jb20vci8ke3RoaXMuc3VicmVkZGl0fS5qc29uYCwge1xuICAgICAgICAgICAgbW9kZTogJ2NvcnMnLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlc3AuanNvbigpO1xuICAgICAgICB0aGlzLmRhdGEgPSBib2R5LmRhdGE7XG4gICAgICAgIGNvbnNvbGUubG9nKChfYSA9IHRoaXMuZGF0YSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNoaWxkcmVuLm1hcCgoYykgPT4gYy5kYXRhLnRpdGxlKSk7XG4gICAgfVxuICAgIGFzeW5jIGZldGNoQWJvdXQoKSB7XG4gICAgICAgIHRoaXMuYWJvdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICghdGhpcy5zdWJyZWRkaXQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly93d3cucmVkZGl0LmNvbS9yLyR7dGhpcy5zdWJyZWRkaXR9L2Fib3V0Lmpzb25gLCB7XG4gICAgICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVzcC5qc29uKCk7XG4gICAgICAgIHRoaXMuYWJvdXQgPSBib2R5LmRhdGE7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgc3R5bGVzKCkge1xuICAgICAgICByZXR1cm4gY3NzIGBcbiAgICAgIC5wb3N0cyB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgICAgICBjb2xvcjogYmxhY2s7XG4gICAgICB9XG5cbiAgICAgIC5wb3N0IHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICAgICAgY29sb3I6IGluaGVyaXQ7XG4gICAgICB9XG5cbiAgICAgIC5wb3N0LXRvcCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgICAgIHBhZGRpbmc6IDEycHggMTZweCAwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zci1pY29uIHtcbiAgICAgICAgd2lkdGg6IDMycHg7XG4gICAgICAgIGhlaWdodDogMzJweDtcbiAgICAgICAgZmxleDogbm9uZTtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiA0cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDUwcHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgICAgIH1cbiAgICAgIC5uby1pY29uIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogYmx1ZXZpb2xldDtcbiAgICAgIH1cbiAgICAgIC5zciB7XG4gICAgICAgIGZsZXg6IGF1dG87XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDFlbTtcbiAgICAgIH1cbiAgICAgIC5zciAuYXV0aG9yIHtcbiAgICAgICAgY29sb3I6IGdyZXk7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDE7XG4gICAgICB9XG4gICAgICAuam9pbiB7XG4gICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICBjb2xvcjogYmxhY2s7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDUwcHg7XG4gICAgICAgIGJvcmRlcjogMS41cHggc29saWQgYmxhY2s7XG4gICAgICAgIGZsZXg6IG5vbmU7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICBmb250LXNpemU6IDE3cHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxZW07XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgdGV4dC1pbmRlbnQ6IC0zcHg7XG4gICAgICAgIHdpZHRoOiAyMHB4O1xuICAgICAgICBoZWlnaHQ6IDIwcHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cblxuICAgICAgLnBvc3QtdGl0bGUge1xuICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgIH1cblxuICAgICAgLm1lZGlhIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgfVxuXG4gICAgICAuc2VsZnRleHQge1xuICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XG4gICAgICB9XG5cbiAgICAgIC5wb3N0LWJvdHRvbSB7XG4gICAgICAgIHBhZGRpbmc6IDEycHggMTJweCAxNnB4O1xuICAgICAgfVxuXG4gICAgICAucG9zdC1ib3R0b20gaW1nIHtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICB3aWR0aDogMzA1cHg7XG4gICAgICB9XG5cbiAgICAgIHZpZGVvIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICB9XG4gICAgYDtcbiAgICB9XG4gICAgb25Nb3VzZU92ZXIocG9zdElkKSB7XG4gICAgICAgIGNvbnN0IHZpZGVvRWxlbSA9IHRoaXMucmVuZGVyUm9vdC5xdWVyeVNlbGVjdG9yKGB2aWRlbyMke3Bvc3RJZH1gKTtcbiAgICAgICAgaWYgKHZpZGVvRWxlbSkge1xuICAgICAgICAgICAgdmlkZW9FbGVtLnBsYXkoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbk1vdXNlT3V0KHBvc3RJZCkge1xuICAgICAgICBjb25zdCB2aWRlb0VsZW0gPSB0aGlzLnJlbmRlclJvb3QucXVlcnlTZWxlY3RvcihgdmlkZW8jJHtwb3N0SWR9YCk7XG4gICAgICAgIGlmICh2aWRlb0VsZW0pIHtcbiAgICAgICAgICAgIHZpZGVvRWxlbS5wYXVzZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoIXRoaXMuZGF0YSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBpY29uVXJsID0gKChfYSA9IHRoaXMuYWJvdXQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pY29uX2ltZykgfHwgJ2h0dHBzOi8vd3d3LnJlZGRpdHN0YXRpYy5jb20vaWNvbl9wbGFuZXRfMngucG5nJztcbiAgICAgICAgcmV0dXJuIGh0bWwgYDxkaXYgY2xhc3M9XCJwb3N0c1wiPlxuICAgICAgJHt0aGlzLmRhdGEuY2hpbGRyZW5cbiAgICAgICAgICAgIC5maWx0ZXIoKGMpID0+ICFjLmRhdGEuc3RpY2tpZWQpXG4gICAgICAgICAgICAubWFwKChjKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgY29uc3QgcG9zdCA9IGMuZGF0YTtcbiAgICAgICAgICAgIGNvbnN0IGltZ1VybCA9IGdldFByZXZpZXcocG9zdCk7XG4gICAgICAgICAgICByZXR1cm4gaHRtbCBgPGFcbiAgICAgICAgICAgIGNsYXNzPVwicG9zdFwiXG4gICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgICAgICAgaHJlZj1cImh0dHBzOi8vcmVkZGl0LmNvbS8ke3Bvc3QuaWR9XCJcbiAgICAgICAgICAgIEBtb3VzZW92ZXI9JHsoKSA9PiB0aGlzLm9uTW91c2VPdmVyKHBvc3QuaWQpfVxuICAgICAgICAgICAgQG1vdXNlb3V0PSR7KCkgPT4gdGhpcy5vbk1vdXNlT3V0KHBvc3QuaWQpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwb3N0LXRvcFwiPlxuICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgY2xhc3M9JHtjbGFzc01hcCh7XG4gICAgICAgICAgICAgICAgJ3NyLWljb24nOiB0cnVlLFxuICAgICAgICAgICAgICAgICduby1pY29uJzogISgoX2EgPSB0aGlzLmFib3V0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaWNvbl9pbWcpLFxuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgc3JjPVwiJHtpY29uVXJsfVwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzclwiPlxuICAgICAgICAgICAgICAgIHIvJHtwb3N0LnN1YnJlZGRpdH08YnIgLz48c3BhbiBjbGFzcz1cImF1dGhvclwiXG4gICAgICAgICAgICAgICAgICA+dS8ke3Bvc3QuYXV0aG9yfTwvc3BhblxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJqb2luXCIgdGl0bGU9XCJqb2luIHIvJHtwb3N0LnN1YnJlZGRpdH1cIj4rPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwb3N0LXRpdGxlXCI+XG4gICAgICAgICAgICAgICR7dW5zYWZlSFRNTChwb3N0LnRpdGxlKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgJHtwb3N0LnNlbGZ0ZXh0X2h0bWxcbiAgICAgICAgICAgICAgICA/IGh0bWwgYDxkaXYgY2xhc3M9XCJzZWxmdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgJHt1bnNhZmVIVE1MKGh0bWxEZWNvZGUocG9zdC5zZWxmdGV4dF9odG1sKSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+YFxuICAgICAgICAgICAgICAgIDogJyd9XG4gICAgICAgICAgICAke3Bvc3QucG9zdF9oaW50ID09PSAnaG9zdGVkOnZpZGVvJ1xuICAgICAgICAgICAgICAgID8gaHRtbCBgPHZpZGVvXG4gICAgICAgICAgICAgICAgICBpZD0ke3Bvc3QuaWR9XG4gICAgICAgICAgICAgICAgICBzcmM9JHsoKF9iID0gcG9zdC5tZWRpYSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnJlZGRpdF92aWRlby5mYWxsYmFja191cmwpIHx8ICcnfVxuICAgICAgICAgICAgICAgICAgbXV0ZWRcbiAgICAgICAgICAgICAgICA+PC92aWRlbz5gXG4gICAgICAgICAgICAgICAgOiBpbWdVcmxcbiAgICAgICAgICAgICAgICAgICAgPyB1bnNhZmVIVE1MKGA8aW1nIGNsYXNzPVwibWVkaWFcIiBzcmM9JHtpbWdVcmwudXJsfSAvPmApXG4gICAgICAgICAgICAgICAgICAgIDogJyd9XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicG9zdC1ib3R0b21cIj5cbiAgICAgICAgICAgICAgPGltZyBzcmM9XCJmYWtlLXBvc3QtbWV0YS5wbmdcIiAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9hPmA7XG4gICAgICAgIH0pfVxuICAgIDwvZGl2PmA7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5KHsgYXR0cmlidXRlOiB0cnVlLCB0eXBlOiBTdHJpbmcgfSlcbl0sIFN1YnJlZGRpdFZpZXcucHJvdG90eXBlLCBcInN1YnJlZGRpdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkoeyBhdHRyaWJ1dGU6IHRydWUsIHR5cGU6IE9iamVjdCB9KVxuXSwgU3VicmVkZGl0Vmlldy5wcm90b3R5cGUsIFwiZGF0YVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkoeyBhdHRyaWJ1dGU6IHRydWUsIHR5cGU6IE9iamVjdCB9KVxuXSwgU3VicmVkZGl0Vmlldy5wcm90b3R5cGUsIFwiYWJvdXRcIiwgdm9pZCAwKTtcblN1YnJlZGRpdFZpZXcgPSBfX2RlY29yYXRlKFtcbiAgICBjdXN0b21FbGVtZW50KCdzdWJyZWRkaXQtdmlldycpXG5dLCBTdWJyZWRkaXRWaWV3KTtcbmV4cG9ydCB7IFN1YnJlZGRpdFZpZXcgfTtcbiIsIi8qKlxuICogQ29waWVkIGFuZCBtb2RpZmllZCBmcm9tOlxuICogaHR0cHM6Ly9naXRodWIuY29tL2NsYW1weS1qcy9jbGFtcHkvYmxvYi9tYXN0ZXIvc3JjL2NsYW1weS50c1xuICovXG5leHBvcnQgY2xhc3MgQ2xhbXBPcHRpb25zIHtcbiAgICBjb25zdHJ1Y3RvcihjbGFtcCwgdHJ1bmNhdGlvbkNoYXIsIHRydW5jYXRpb25IVE1MLCBzcGxpdE9uQ2hhcnMpIHtcbiAgICAgICAgdGhpcy5jbGFtcCA9IGNsYW1wIHx8ICdhdXRvJztcbiAgICAgICAgdGhpcy50cnVuY2F0aW9uQ2hhciA9IHRydW5jYXRpb25DaGFyIHx8ICfigKYnO1xuICAgICAgICB0aGlzLnRydW5jYXRpb25IVE1MID0gdHJ1bmNhdGlvbkhUTUw7XG4gICAgICAgIHRoaXMuc3BsaXRPbkNoYXJzID0gc3BsaXRPbkNoYXJzIHx8IFsnLicsICctJywgJ+KAkycsICfigJQnLCAnICddO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDbGFtcFJlc3BvbnNlIHtcbiAgICBjb25zdHJ1Y3RvcihvcmlnaW5hbCwgY2xhbXBlZCkge1xuICAgICAgICB0aGlzLm9yaWdpbmFsID0gb3JpZ2luYWw7XG4gICAgICAgIHRoaXMuY2xhbXBlZCA9IGNsYW1wZWQ7XG4gICAgfVxufVxuLyoqXG4gKiBDbGFtcHMgKGllLiBjdXRzIG9mZikgYW4gSFRNTCBlbGVtZW50J3MgY29udGVudCBieSBhZGRpbmcgZWxsaXBzaXMgdG8gaXQgaWYgdGhlIGNvbnRlbnQgaW5zaWRlIGlzIHRvbyBsb25nLlxuICpcbiAqIEBleHBvcnRcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgVGhlIEhUTUxFbGVtZW50IHRoYXQgc2hvdWxkIGJlIGNsYW1wZWQuXG4gKiBAcGFyYW0ge0NsYW1wT3B0aW9uc30gW29wdGlvbnNdIFRoZSBDbGFtcCBvcHRpb25zXG4gKiBAcmV0dXJucyB7Q2xhbXBSZXNwb25zZX0gVGhlIENsYW1wIHJlc3BvbnNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGFtcChlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgY29uc3Qgd2luID0gd2luZG93O1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgY2xhbXA6ICdhdXRvJyxcbiAgICAgICAgICAgIHRydW5jYXRpb25DaGFyOiAn4oCmJyxcbiAgICAgICAgICAgIHNwbGl0T25DaGFyczogWycuJywgJy0nLCAn4oCTJywgJ+KAlCcsICcgJ10sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IG9wdCA9IHtcbiAgICAgICAgY2xhbXA6IG9wdGlvbnMuY2xhbXAgfHwgJ2F1dG8nLFxuICAgICAgICBzcGxpdE9uQ2hhcnM6IG9wdGlvbnMuc3BsaXRPbkNoYXJzIHx8IFsnLicsICctJywgJ+KAkycsICfigJQnLCAnICddLFxuICAgICAgICB0cnVuY2F0aW9uQ2hhcjogb3B0aW9ucy50cnVuY2F0aW9uQ2hhciB8fCAn4oCmJyxcbiAgICAgICAgdHJ1bmNhdGlvbkhUTUw6IG9wdGlvbnMudHJ1bmNhdGlvbkhUTUwsXG4gICAgfTtcbiAgICBsZXQgc3BsaXRPbkNoYXJzID0gb3B0LnNwbGl0T25DaGFycy5zbGljZSgwKTtcbiAgICBsZXQgc3BsaXRDaGFyID0gc3BsaXRPbkNoYXJzWzBdO1xuICAgIGxldCBjaHVua3M7XG4gICAgbGV0IGxhc3RDaHVuaztcbiAgICBjb25zdCBzdHkgPSBlbGVtZW50LnN0eWxlO1xuICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IGVsZW1lbnQuaW5uZXJIVE1MO1xuICAgIGxldCBjbGFtcFZhbHVlID0gb3B0LmNsYW1wO1xuICAgIGNvbnN0IGlzQ1NTVmFsdWUgPSBjbGFtcFZhbHVlLmluZGV4T2YgJiZcbiAgICAgICAgKGNsYW1wVmFsdWUuaW5kZXhPZigncHgnKSA+IC0xIHx8IGNsYW1wVmFsdWUuaW5kZXhPZignZW0nKSA+IC0xKTtcbiAgICBsZXQgdHJ1bmNhdGlvbkhUTUxDb250YWluZXI7XG4gICAgaWYgKG9wdC50cnVuY2F0aW9uSFRNTCkge1xuICAgICAgICB0cnVuY2F0aW9uSFRNTENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgdHJ1bmNhdGlvbkhUTUxDb250YWluZXIuaW5uZXJIVE1MID0gb3B0LnRydW5jYXRpb25IVE1MO1xuICAgIH1cbiAgICAvLyBVVElMSVRZIEZVTkNUSU9OUyBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBjdXJyZW50IHN0eWxlIGZvciBhbiBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW0gVGhlIGVsZW1lbnQgdG8gY29tcHV0ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCBUaGUgc3R5bGUgcHJvcGVydHkuXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb21wdXRlU3R5bGUoZWxlbSwgcHJvcCkge1xuICAgICAgICByZXR1cm4gd2luLmdldENvbXB1dGVkU3R5bGUoZWxlbSkuZ2V0UHJvcGVydHlWYWx1ZShwcm9wKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWF4aW11bSBudW1iZXIgb2YgbGluZXMgb2YgdGV4dCB0aGF0IHNob3VsZCBiZSByZW5kZXJlZCBiYXNlZFxuICAgICAqIG9uIHRoZSBjdXJyZW50IGhlaWdodCBvZiB0aGUgZWxlbWVudCBhbmQgdGhlIGxpbmUtaGVpZ2h0IG9mIHRoZSB0ZXh0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldE1heExpbmVzKGhlaWdodCkge1xuICAgICAgICBjb25zdCBhdmFpbEhlaWdodCA9IGhlaWdodCB8fCBlbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgICAgY29uc3QgbGluZUhlaWdodCA9IGdldExpbmVIZWlnaHQoZWxlbWVudCk7XG4gICAgICAgIHJldHVybiBNYXRoLm1heChNYXRoLmZsb29yKGF2YWlsSGVpZ2h0IC8gbGluZUhlaWdodCksIDApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYXhpbXVtIGhlaWdodCBhIGdpdmVuIGVsZW1lbnQgc2hvdWxkIGhhdmUgYmFzZWQgb24gdGhlIGxpbmUtXG4gICAgICogaGVpZ2h0IG9mIHRoZSB0ZXh0IGFuZCB0aGUgZ2l2ZW4gY2xhbXAgdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0TWF4SGVpZ2h0KGNsbXApIHtcbiAgICAgICAgY29uc3QgbGluZUhlaWdodCA9IGdldExpbmVIZWlnaHQoZWxlbWVudCk7XG4gICAgICAgIHJldHVybiBsaW5lSGVpZ2h0ICogY2xtcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbGluZS1oZWlnaHQgb2YgYW4gZWxlbWVudCBhcyBhbiBpbnRlZ2VyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldExpbmVIZWlnaHQoZWxlbSkge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmxpbmVIZWlnaHQpXG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5saW5lSGVpZ2h0O1xuICAgICAgICBsZXQgbGggPSBjb21wdXRlU3R5bGUoZWxlbSwgJ2xpbmUtaGVpZ2h0Jyk7XG4gICAgICAgIGlmIChsaCA9PT0gJ25vcm1hbCcpIHtcbiAgICAgICAgICAgIC8vIE5vcm1hbCBsaW5lIGhlaWdodHMgdmFyeSBmcm9tIGJyb3dzZXIgdG8gYnJvd3Nlci4gVGhlIHNwZWMgcmVjb21tZW5kc1xuICAgICAgICAgICAgLy8gYSB2YWx1ZSBiZXR3ZWVuIDEuMCBhbmQgMS4yIG9mIHRoZSBmb250IHNpemUuIFVzaW5nIDEuMSB0byBzcGxpdCB0aGUgZGlmZi5cbiAgICAgICAgICAgIGxoID1cbiAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KHBhcnNlRmxvYXQoY29tcHV0ZVN0eWxlKGVsZW0sICdmb250LXNpemUnKSkudG9GaXhlZCgwKSkgKlxuICAgICAgICAgICAgICAgICAgICAxLjE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQocGFyc2VGbG9hdChsaCkudG9GaXhlZCgwKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGhlaWdodCBvZiBhbiBlbGVtZW50IGFzIGFuIGludGVnZXIgKG1heCBvZiBzY3JvbGwvb2Zmc2V0L2NsaWVudCkuXG4gICAgICogTm90ZTogaW5saW5lIGVsZW1lbnRzIHJldHVybiAwIGZvciBzY3JvbGxIZWlnaHQgYW5kIGNsaWVudEhlaWdodFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEVsZW1IZWlnaHQoZWxlbSkge1xuICAgICAgICAvLyBUaGUgJy0gNCcgaXMgYSBoYWNrIHRvIGRlYWwgd2l0aCB0aGUgZWxlbWVudCBoZWlnaHQgd2hlbiB0aGUgYnJvd3Nlcihlc3BlY2lhbGx5IElFKSB6b29tIGxldmVsIGlzIG5vdCAxMDAlLlxuICAgICAgICAvLyBJdCBhbHNvIGRvZXNuJ3QgaW1wYWN0IGNsYW1waW5nIHdoZW4gdGhlIGJyb3dzZXIgem9vbSBsZXZlbCBpcyAxMDAlLlxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoZWxlbS5zY3JvbGxIZWlnaHQsIGVsZW0uY2xpZW50SGVpZ2h0KSAtIDQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYW4gZWxlbWVudCdzIGxhc3QgY2hpbGQuIFRoYXQgbWF5IGJlIGFub3RoZXIgbm9kZSBvciBhIG5vZGUncyBjb250ZW50cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRMYXN0Q2hpbGQoZWxlbSkge1xuICAgICAgICBpZiAoIWVsZW0ubGFzdENoaWxkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ3VycmVudCBlbGVtZW50IGhhcyBjaGlsZHJlbiwgbmVlZCB0byBnbyBkZWVwZXIgYW5kIGdldCBsYXN0IGNoaWxkIGFzIGEgdGV4dCBub2RlXG4gICAgICAgIGlmIChlbGVtLmxhc3RDaGlsZC5jaGlsZHJlbiAmJiBlbGVtLmxhc3RDaGlsZC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0TGFzdENoaWxkKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGVsZW0uY2hpbGRyZW4pLnBvcCgpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBhYnNvbHV0ZSBsYXN0IGNoaWxkLCBhIHRleHQgbm9kZSwgYnV0IHNvbWV0aGluZydzIHdyb25nIHdpdGggaXQuIFJlbW92ZSBpdCBhbmQga2VlcCB0cnlpbmdcbiAgICAgICAgZWxzZSBpZiAoIWVsZW0ubGFzdENoaWxkIHx8XG4gICAgICAgICAgICAhZWxlbS5sYXN0Q2hpbGQubm9kZVZhbHVlIHx8XG4gICAgICAgICAgICBlbGVtLmxhc3RDaGlsZC5ub2RlVmFsdWUgPT09ICcnIHx8XG4gICAgICAgICAgICBlbGVtLmxhc3RDaGlsZC5ub2RlVmFsdWUgPT09IG9wdC50cnVuY2F0aW9uQ2hhcikge1xuICAgICAgICAgICAgaWYgKCFlbGVtLmxhc3RDaGlsZC5ub2RlVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3Igdm9pZC9lbXB0eSBlbGVtZW50IChzdWNoIGFzIDxicj4gdGFnKSBvciBpZiBpdCdzIHRoZSBlbGxpcHNpcyBhbmQgcmVtb3ZlIGl0LlxuICAgICAgICAgICAgICAgIGlmICgoZWxlbS5sYXN0Q2hpbGQuZmlyc3RDaGlsZCA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgICAgICBlbGVtLmxhc3RDaGlsZC5maXJzdENoaWxkLm5vZGVWYWx1ZSA9PT0gb3B0LnRydW5jYXRpb25DaGFyKSAmJlxuICAgICAgICAgICAgICAgICAgICBlbGVtLmxhc3RDaGlsZC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0ubGFzdENoaWxkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbS5sYXN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgZWxlbWVudCBoYXMgbm8gbW9yZSBjaGlsZHJlbiBhbmQgcmVtb3ZlIGl0IGlmIGl0J3MgdGhlIGNhc2UuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBmb3IgaW5zdGFuY2Ugd2l0aCBsaXN0cyAoaS5lLiA8dWw+IGFuZCA8b2w+KSB3aXRoIG5vIGl0ZW1zLlxuICAgICAgICAgICAgICAgICAgICBpZiAoKCFlbGVtLmNoaWxkcmVuIHx8IGVsZW0uY2hpbGRyZW4ubGVuZ3RoID09PSAwKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0TGFzdENoaWxkKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGl0J3MgYSB0ZXh0IG5vZGVcbiAgICAgICAgICAgICAgICBpZiAoZWxlbS5sYXN0Q2hpbGQubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0ubGFzdENoaWxkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldExhc3RDaGlsZChlbGVtLmxhc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVsZW0ubGFzdENoaWxkICYmXG4gICAgICAgICAgICAgICAgZWxlbS5sYXN0Q2hpbGQucGFyZW50Tm9kZSAmJlxuICAgICAgICAgICAgICAgIGVsZW0ubGFzdENoaWxkLm5vZGVWYWx1ZSA9PT0gb3B0LnRydW5jYXRpb25DaGFyKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5sYXN0Q2hpbGQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtLmxhc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBnZXRMYXN0Q2hpbGQoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgbGFzdCBjaGlsZCB3ZSB3YW50LCByZXR1cm4gaXRcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbS5sYXN0Q2hpbGQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbHkgdGhlIGVsbGlwc2lzIHRvIHRoZSBlbGVtZW50XG4gICAgICogQHBhcmFtIGVsZW0gdGhlIGVsZW1lbnQgdG8gYXBwbHkgdGhlIGVsbGlwc2lzIG9uXG4gICAgICogQHBhcmFtIHN0ciBUaGUgc3RyaW5nIHRoYXQgd2lsbCBiZSBzZXQgdG8gdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcHBseUVsbGlwc2lzKGVsZW0sIHN0cikge1xuICAgICAgICBlbGVtLm5vZGVWYWx1ZSA9IHN0ciArIG9wdC50cnVuY2F0aW9uQ2hhcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBvbmUgY2hhcmFjdGVyIGF0IGEgdGltZSBmcm9tIHRoZSB0ZXh0IHVudGlsIGl0cyB3aWR0aCBvclxuICAgICAqIGhlaWdodCBpcyBiZW5lYXRoIHRoZSBwYXNzZWQtaW4gbWF4IHBhcmFtLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRydW5jYXRlKHRhcmdldCwgbWF4SGVpZ2h0KSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXNldHMgZ2xvYmFsIHZhcmlhYmxlcy5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgICAgICAgc3BsaXRPbkNoYXJzID0gb3B0LnNwbGl0T25DaGFycy5zbGljZSgwKTtcbiAgICAgICAgICAgIHNwbGl0Q2hhciA9IHNwbGl0T25DaGFyc1swXTtcbiAgICAgICAgICAgIGNodW5rcyA9IG51bGw7XG4gICAgICAgICAgICBsYXN0Q2h1bmsgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGFyZ2V0IHx8ICFtYXhIZWlnaHQgfHwgIXRhcmdldC5ub2RlVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRhcmdldC5ub2RlVmFsdWUudHJpbSgpLmVuZHNXaXRoKG9wdC50cnVuY2F0aW9uQ2hhcikpIHtcbiAgICAgICAgICAgIGFwcGx5RWxsaXBzaXModGFyZ2V0LCB0YXJnZXQubm9kZVZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2V0RWxlbUhlaWdodChlbGVtZW50KSA8PSBtYXhIZWlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmlubmVySFRNTDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub2RlVmFsdWUgPSB0YXJnZXQubm9kZVZhbHVlLnJlcGxhY2Uob3B0LnRydW5jYXRpb25DaGFyLCAnJyk7XG4gICAgICAgIC8vIEdyYWIgdGhlIG5leHQgY2h1bmtzXG4gICAgICAgIGlmICghY2h1bmtzKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbW9yZSBjaGFyYWN0ZXJzIHRvIHRyeSwgZ3JhYiB0aGUgbmV4dCBvbmVcbiAgICAgICAgICAgIGlmIChzcGxpdE9uQ2hhcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHNwbGl0Q2hhciA9IHNwbGl0T25DaGFycy5zaGlmdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTm8gY2hhcmFjdGVycyB0byBjaHVuayBieS4gR28gY2hhcmFjdGVyLWJ5LWNoYXJhY3RlclxuICAgICAgICAgICAgICAgIHNwbGl0Q2hhciA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2h1bmtzID0gbm9kZVZhbHVlLnNwbGl0KHNwbGl0Q2hhcik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIGNodW5rcyBsZWZ0IHRvIHJlbW92ZSwgcmVtb3ZlIHRoZSBsYXN0IG9uZSBhbmQgc2VlIGlmXG4gICAgICAgIC8vIHRoZSBub2RlVmFsdWUgZml0cy5cbiAgICAgICAgaWYgKGNodW5rcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBsYXN0Q2h1bmsgPSBjaHVua3MucG9wKCk7XG4gICAgICAgICAgICBhcHBseUVsbGlwc2lzKHRhcmdldCwgY2h1bmtzLmpvaW4oc3BsaXRDaGFyKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBObyBtb3JlIGNodW5rcyBjYW4gYmUgcmVtb3ZlZCB1c2luZyB0aGlzIGNoYXJhY3RlclxuICAgICAgICAgICAgY2h1bmtzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBJbnNlcnQgdGhlIGN1c3RvbSBIVE1MIGJlZm9yZSB0aGUgdHJ1bmNhdGlvbiBjaGFyYWN0ZXJcbiAgICAgICAgaWYgKHRydW5jYXRpb25IVE1MQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0YXJnZXQubm9kZVZhbHVlID0gdGFyZ2V0Lm5vZGVWYWx1ZS5yZXBsYWNlKG9wdC50cnVuY2F0aW9uQ2hhciwgJycpO1xuICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPVxuICAgICAgICAgICAgICAgIHRhcmdldC5ub2RlVmFsdWUgK1xuICAgICAgICAgICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgICAgICAgICB0cnVuY2F0aW9uSFRNTENvbnRhaW5lci5pbm5lckhUTUwgK1xuICAgICAgICAgICAgICAgICAgICBvcHQudHJ1bmNhdGlvbkNoYXI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2VhcmNoIHByb2R1Y2VkIHZhbGlkIGNodW5rc1xuICAgICAgICBpZiAoY2h1bmtzKSB7XG4gICAgICAgICAgICAvLyBJdCBmaXRzXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5jbGllbnRIZWlnaHQgPD0gbWF4SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlcmUncyBzdGlsbCBtb3JlIGNoYXJhY3RlcnMgdG8gdHJ5IHNwbGl0dGluZyBvbiwgbm90IHF1aXRlIGRvbmUgeWV0XG4gICAgICAgICAgICAgICAgaWYgKHNwbGl0T25DaGFycy5sZW5ndGggPj0gMCAmJiBzcGxpdENoYXIgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGFwcGx5RWxsaXBzaXModGFyZ2V0LCBjaHVua3Muam9pbihzcGxpdENoYXIpICsgc3BsaXRDaGFyICsgbGFzdENodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgY2h1bmtzID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbmlzaGVkIVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gTm8gdmFsaWQgY2h1bmtzIHByb2R1Y2VkXG4gICAgICAgICAgICAvLyBObyB2YWxpZCBjaHVua3MgZXZlbiB3aGVuIHNwbGl0dGluZyBieSBsZXR0ZXIsIHRpbWUgdG8gbW92ZVxuICAgICAgICAgICAgLy8gb24gdG8gdGhlIG5leHQgbm9kZVxuICAgICAgICAgICAgaWYgKHNwbGl0Q2hhciA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBhcHBseUVsbGlwc2lzKHRhcmdldCwgJycpO1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IGdldExhc3RDaGlsZChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICByZXNldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVuY2F0ZSh0YXJnZXQsIG1heEhlaWdodCk7XG4gICAgfVxuICAgIC8vIENPTlNUUlVDVE9SIF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19cbiAgICBpZiAoY2xhbXBWYWx1ZSA9PT0gJ2F1dG8nKSB7XG4gICAgICAgIGNsYW1wVmFsdWUgPSBnZXRNYXhMaW5lcygpLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQ1NTVmFsdWUpIHtcbiAgICAgICAgY2xhbXBWYWx1ZSA9IGdldE1heExpbmVzKHBhcnNlSW50KGNsYW1wVmFsdWUsIDEwKSkudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgbGV0IGNsYW1wZWRUZXh0O1xuICAgIGNvbnN0IGhlaWdodCA9IGdldE1heEhlaWdodChOdW1iZXIoY2xhbXBWYWx1ZSkpO1xuICAgIGlmIChoZWlnaHQgPCBnZXRFbGVtSGVpZ2h0KGVsZW1lbnQpKSB7XG4gICAgICAgIGNsYW1wZWRUZXh0ID0gdHJ1bmNhdGUoZ2V0TGFzdENoaWxkKGVsZW1lbnQpLCBoZWlnaHQpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IENsYW1wUmVzcG9uc2Uob3JpZ2luYWxUZXh0LCBjbGFtcGVkVGV4dCk7XG59XG4iLCJpbXBvcnQgeyBjc3MsIHVuc2FmZUNTUyB9IGZyb20gJ2xpdC1lbGVtZW50JztcbmltcG9ydCB7IEdSSURfR1JBTlVMQVJJVFkgfSBmcm9tICcuL3R5cGVzJztcbmV4cG9ydCBkZWZhdWx0ICgpID0+IGNzcyBgXG4gIDpob3N0IHtcbiAgICAtLXRpbGUtc2l6ZTogMTU2cHg7XG4gICAgLS1ncmFkaWVudC0xOiBsaW5lYXItZ3JhZGllbnQoOTcuNTFkZWcsICNmZjQ0MDAgLTcuMDglLCAjZmZiMzMwIDExNi41NyUpO1xuICAgIC0tZ3JhZGllbnQtMjogbGluZWFyLWdyYWRpZW50KDg5Ljk0ZGVnLCAjYzI3NGYwIDAlLCAjZjE0ZmIwIDEwMCUpO1xuICAgIC0tZ3JhZGllbnQtMzogbGluZWFyLWdyYWRpZW50KFxuICAgICAgODkuOTRkZWcsXG4gICAgICAjNTFiOWZmIDAlLFxuICAgICAgIzc3ODVmZiA1Mi42JSxcbiAgICAgICNiMjc5ZmYgNzMuOTYlLFxuICAgICAgI2ZmODFlZCAxMDAlXG4gICAgKTtcbiAgICAtLWdyYWRpZW50LTQ6IGxpbmVhci1ncmFkaWVudCg5Ny41MWRlZywgIzA0OGRlOSAtNy4wOCUsICMwZmMwZDIgMTE2LjU3JSk7XG4gICAgLS1ncmFkaWVudC01OiBsaW5lYXItZ3JhZGllbnQoNzEuNTNkZWcsICNjMzBkNDcgMjAuODklLCAjZmU0MzAxIDEyMS42MiUpO1xuICAgIC0tZ3JhZGllbnQtNjogbGluZWFyLWdyYWRpZW50KDkxLjY0ZGVnLCAjZjU0NDFmIC0xMC40OSUsICNmYzc1MTkgMTA5Ljc1JSk7XG4gICAgLS1ncmFkaWVudC03OiBsaW5lYXItZ3JhZGllbnQoOTEuNjRkZWcsICM1YjNkYzEgLTEwLjQ5JSwgI2FhNDhjMCAxMDkuNzUlKTtcbiAgICAtLWdyYWRpZW50LTg6IGxpbmVhci1ncmFkaWVudCg5MS42NGRlZywgIzMzNTNiOCAtMTAuNDklLCAjNjg1Y2ZjIDEwOS43NSUpO1xuICB9XG4gIC5ncmlkIHtcbiAgICBkaXNwbGF5OiBncmlkO1xuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjtcbiAgICBncmlkLWF1dG8tcm93czogY2FsYygodmFyKC0tdGlsZS1zaXplKSArIDE2cHgpIC8gJHtHUklEX0dSQU5VTEFSSVRZfSk7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICBwYWRkaW5nOiA4cHg7XG4gICAgLyogZ3JpZC1nYXA6IDE2cHg7ICovXG4gICAgZ3JpZC1hdXRvLWZsb3c6IGRlbnNlO1xuICB9XG5cbiAgLnBvc3QtdGlsZSB7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGJvcmRlci1yYWRpdXM6IDE2cHg7XG4gICAgbWFyZ2luOiA4cHg7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGJveC1zaGFkb3c6IDBweCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMTUpO1xuXG4gICAgZ3JpZC1yb3ctZW5kOiBzcGFuIDQ7XG4gIH1cblxuICAucG9zdC10aWxlLXRleHQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBwYWRkaW5nOiAxNnB4O1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICBsaW5lLWhlaWdodDogMTdweDtcbiAgICB0ZXh0LXNoYWRvdzogMHB4IDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjI1KTtcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICBtYXJnaW46IDA7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIHJpZ2h0OiAwO1xuICAgIGJvdHRvbTogMDtcbiAgfVxuXG4gIC5zaGltIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMjUpO1xuICB9XG5cbiAgLnBvc3QtdGV4dC1vbmx5IC5wb3N0LXRpbGUtdGV4dCB7XG4gICAgYm94LXNoYWRvdzogdW5zZXQ7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIH1cblxuICAubG9hZGVyIHtcbiAgICBncmlkLWNvbHVtbi1lbmQ6IHNwYW4gMjtcbiAgfVxuXG4gIC5wb3N0LXRpbGUtaW1hZ2Uge1xuICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiB0b3AgY2VudGVyO1xuICAgIC8qIGhlaWdodDogdmFyKC0tdGlsZS1zaXplKTsgKi9cbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgYm90dG9tOiAwO1xuICB9XG4gIC5wb3N0LXRleHQtb25seSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdmFyKC0tZ3JhZGllbnQtMSk7XG4gIH1cblxuICAucG9zdC10aWxlOm50aC1jaGlsZCg4bikucG9zdC10ZXh0LW9ubHkge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IHZhcigtLWdyYWRpZW50LTIpO1xuICB9XG4gIC5wb3N0LXRpbGU6bnRoLWNoaWxkKDhuICsgMSkucG9zdC10ZXh0LW9ubHkge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IHZhcigtLWdyYWRpZW50LTMpO1xuICB9XG4gIC5wb3N0LXRpbGU6bnRoLWNoaWxkKDhuICsgMikucG9zdC10ZXh0LW9ubHkge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IHZhcigtLWdyYWRpZW50LTQpO1xuICB9XG4gIC5wb3N0LXRpbGU6bnRoLWNoaWxkKDhuICsgMykucG9zdC10ZXh0LW9ubHkge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IHZhcigtLWdyYWRpZW50LTUpO1xuICB9XG4gIC5wb3N0LXRpbGU6bnRoLWNoaWxkKDhuICsgNCkucG9zdC10ZXh0LW9ubHkge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IHZhcigtLWdyYWRpZW50LTYpO1xuICB9XG4gIC5wb3N0LXRpbGU6bnRoLWNoaWxkKDhuICsgNSkucG9zdC10ZXh0LW9ubHkge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IHZhcigtLWdyYWRpZW50LTcpO1xuICB9XG4gIC5wb3N0LXRpbGU6bnRoLWNoaWxkKDhuICsgNikucG9zdC10ZXh0LW9ubHkge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IHZhcigtLWdyYWRpZW50LTgpO1xuICB9XG5cbiAgLmhpZGRlbiB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxuXG4gIC5zdWJyZWRkaXQge1xuICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gICAgbGluZS1oZWlnaHQ6IDEuMmVtO1xuICAgIG1hcmdpbi10b3A6IDE2cHg7XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgIGZsZXg6IG5vbmU7XG4gIH1cblxuICAucG9zdC10ZXh0LW9ubHkgLnBvc3QtdGlsZS10ZXh0IC5wb3N0LXRpbGUtdGl0bGUge1xuICAgIHRleHQtc2hhZG93OiBub25lO1xuICB9XG5cbiAgLnNwYWNlciB7XG4gICAgZmxleDogYXV0bztcbiAgfVxuXG4gIC5nYWxsZXJ5LWljb24ge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDEwcHg7XG4gICAgcmlnaHQ6IDZweDtcbiAgICB3aWR0aDogMjhweDtcbiAgICBoZWlnaHQ6IDI4cHg7XG4gIH1cbiAgLnZpZGVvLWljb24ge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDEwcHg7XG4gICAgcmlnaHQ6IDEwcHg7XG4gICAgd2lkdGg6IDIwcHg7XG4gICAgaGVpZ2h0OiAxOHB4O1xuICB9XG5cbiAgLnBvc3QtdGlsZS10aXRsZSB7XG4gICAgbWFyZ2luOiAwO1xuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgZmxleDogbm9uZTtcbiAgICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xuICB9XG5cbiAgLnBvc3QtdGlsZS1ib2R5IHtcbiAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgfVxuXG4gIC5wb3N0LXRpbGUtbGFyZ2Uge1xuICAgIGdyaWQtY29sdW1uLWVuZDogc3BhbiAyO1xuICAgIC8qIGdyaWQtcm93LWVuZDogc3BhbiAxNjsgKi9cbiAgfVxuICAke3Vuc2FmZUNTUyhyYW5nZShHUklEX0dSQU5VTEFSSVRZICogNCArIDEpXG4gICAgLm1hcCgobnVtKSA9PiBgXG4gICAgLnNwYW4ke251bX0ge1xuICAgICAgZ3JpZC1yb3ctZW5kOiBzcGFuICR7bnVtfTtcbiAgICB9XG4gIGApXG4gICAgLmpvaW4oJ1xcbicpKX1cblxuICAubWQgYSB7XG4gICAgY29sb3I6IGluaGVyaXQ7XG4gIH1cbmA7XG5mdW5jdGlvbiByYW5nZShudW0pIHtcbiAgICBjb25zdCBhcnIgPSBBcnJheShudW0pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtOyBpKyspXG4gICAgICAgIGFycltpXSA9IGk7XG4gICAgcmV0dXJuIGFycjtcbn1cbiIsImV4cG9ydCBjb25zdCBHUklEX0dSQU5VTEFSSVRZID0gNDtcbiIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IExpdEVsZW1lbnQsIGh0bWwsIGN1c3RvbUVsZW1lbnQsIHByb3BlcnR5LCBxdWVyeSB9IGZyb20gJ2xpdC1lbGVtZW50JztcbmltcG9ydCB7IHVuc2FmZUhUTUwgfSBmcm9tICdsaXQtaHRtbC9kaXJlY3RpdmVzL3Vuc2FmZS1odG1sJztcbmltcG9ydCB7IGNsYXNzTWFwIH0gZnJvbSAnbGl0LWh0bWwvZGlyZWN0aXZlcy9jbGFzcy1tYXAnO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuLi92ZW5kb3IvY2xhbXB5JztcbmltcG9ydCBleHBsb3JlU3R5bGVzIGZyb20gJy4vZXhwbG9yZS1zdHlsZXMnO1xuaW1wb3J0IHsgZmlyc3RNYXJrZG93bkVsZW0sIGh0bWxEZWNvZGUgfSBmcm9tICcuL2hlbHBlcnMnO1xubGV0IFRpbGVUZXh0ID0gY2xhc3MgVGlsZVRleHQgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5pc0ltYWdlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2hvd3NoaW0gPSB0cnVlO1xuICAgICAgICB0aGlzLnNob3d0aXRsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuc2hvd3N1YnJlZGRpdCA9IHRydWU7XG4gICAgICAgIHRoaXMuaXNDbGFtcGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgc3R5bGVzKCkge1xuICAgICAgICByZXR1cm4gZXhwbG9yZVN0eWxlcygpO1xuICAgIH1cbiAgICB1cGRhdGVkKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aGlzLnRpdGxlRWxlbSAmJiAhdGhpcy5pc0NsYW1wZWQpIHtcbiAgICAgICAgICAgIGNsYW1wKHRoaXMudGl0bGVFbGVtLCB7XG4gICAgICAgICAgICAgICAgY2xhbXA6ICgoX2EgPSB0aGlzLnBvc3QpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zZWxmdGV4dCkgPyAnMycgOiAnNScsXG4gICAgICAgICAgICAgICAgbGluZUhlaWdodDogMTcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ib2R5RWxlbSAmJiAhdGhpcy5pc0NsYW1wZWQpIHtcbiAgICAgICAgICAgIGNsYW1wKHRoaXMuYm9keUVsZW0sIHtcbiAgICAgICAgICAgICAgICBjbGFtcDogJzUnLFxuICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQ6IDE3LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmlzQ2xhbXBlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMucG9zdClcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlclRleHQodGhpcy5wb3N0LCB0aGlzLmlzSW1hZ2UpO1xuICAgIH1cbiAgICBfcmVuZGVyVGV4dChwb3N0LCBpc0ltYWdlID0gZmFsc2UpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIGNvbnN0IHRleHQgPSAoX2MgPSBmaXJzdE1hcmtkb3duRWxlbSgoX2IgPSBodG1sRGVjb2RlKChfYSA9IHBvc3Quc2VsZnRleHRfaHRtbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycpKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAnJykpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6ICcnO1xuICAgICAgICByZXR1cm4gaHRtbCBgPGRpdlxuICAgICAgY2xhc3M9JHtjbGFzc01hcCh7XG4gICAgICAgICAgICAncG9zdC10aWxlLXRleHQnOiB0cnVlLFxuICAgICAgICAgICAgc2hpbTogaXNJbWFnZSAmJiB0aGlzLnNob3dzaGltLFxuICAgICAgICB9KX1cbiAgICA+XG4gICAgICA8aDNcbiAgICAgICAgY2xhc3M9JHtjbGFzc01hcCh7XG4gICAgICAgICAgICAncG9zdC10aWxlLXRpdGxlJzogdHJ1ZSxcbiAgICAgICAgICAgIGhpZGRlbjogaXNJbWFnZSAmJiAhdGhpcy5zaG93dGl0bGUsXG4gICAgICAgIH0pfVxuICAgICAgICB0aXRsZT0ke3Bvc3QudGl0bGV9XG4gICAgICA+XG4gICAgICAgICR7aHRtbERlY29kZShwb3N0LnRpdGxlKX1cbiAgICAgIDwvaDM+XG4gICAgICAkeyh0ZXh0ID09PSBudWxsIHx8IHRleHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRleHQubGVuZ3RoKSA/IGh0bWwgYDxkaXZcbiAgICAgICAgICAgIGNsYXNzPSR7Y2xhc3NNYXAoe1xuICAgICAgICAgICAgJ3Bvc3QtdGlsZS1ib2R5JzogdHJ1ZSxcbiAgICAgICAgICAgIGhpZGRlbjogaXNJbWFnZSAmJiAhdGhpcy5zaG93dGl0bGUsXG4gICAgICAgIH0pfVxuICAgICAgICAgID5cbiAgICAgICAgICAgICR7dW5zYWZlSFRNTCh0ZXh0KX1cbiAgICAgICAgICA8L2Rpdj5gXG4gICAgICAgICAgICA6ICcnfVxuICAgICAgPGRpdiBjbGFzcz1cInNwYWNlclwiPjwvZGl2PlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzcz0ke2NsYXNzTWFwKHtcbiAgICAgICAgICAgIHN1YnJlZGRpdDogdHJ1ZSxcbiAgICAgICAgICAgIGhpZGRlbjogaXNJbWFnZSAmJiAhdGhpcy5zaG93c3VicmVkZGl0LFxuICAgICAgICB9KX1cbiAgICAgID5cbiAgICAgICAgci8ke3Bvc3Quc3VicmVkZGl0fVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+YDtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkoeyBhdHRyaWJ1dGU6IHRydWUsIHR5cGU6IE9iamVjdCB9KVxuXSwgVGlsZVRleHQucHJvdG90eXBlLCBcInBvc3RcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5KHsgYXR0cmlidXRlOiB0cnVlLCB0eXBlOiBCb29sZWFuIH0pXG5dLCBUaWxlVGV4dC5wcm90b3R5cGUsIFwiaXNJbWFnZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcXVlcnkoJy5wb3N0LXRpbGUtdGl0bGUnKVxuXSwgVGlsZVRleHQucHJvdG90eXBlLCBcInRpdGxlRWxlbVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcXVlcnkoJy5wb3N0LXRpbGUtYm9keScpXG5dLCBUaWxlVGV4dC5wcm90b3R5cGUsIFwiYm9keUVsZW1cIiwgdm9pZCAwKTtcblRpbGVUZXh0ID0gX19kZWNvcmF0ZShbXG4gICAgY3VzdG9tRWxlbWVudCgndGlsZS10ZXh0Jylcbl0sIFRpbGVUZXh0KTtcbmV4cG9ydCB7IFRpbGVUZXh0IH07XG4iLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBMaXRFbGVtZW50LCBodG1sLCBjdXN0b21FbGVtZW50LCBwcm9wZXJ0eSwgcXVlcnkgfSBmcm9tICdsaXQtZWxlbWVudCc7XG5pbXBvcnQgeyB1bnNhZmVIVE1MIH0gZnJvbSAnbGl0LWh0bWwvZGlyZWN0aXZlcy91bnNhZmUtaHRtbCc7XG5pbXBvcnQgeyBjbGFzc01hcCB9IGZyb20gJ2xpdC1odG1sL2RpcmVjdGl2ZXMvY2xhc3MtbWFwJztcbmltcG9ydCB7IEdSSURfR1JBTlVMQVJJVFkgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCAnLi9zdWJyZWRkaXQtdmlldyc7XG5pbXBvcnQgJy4vdGlsZS10ZXh0JztcbmltcG9ydCBleHBsb3JlU3R5bGVzIGZyb20gJy4vZXhwbG9yZS1zdHlsZXMnO1xuaW1wb3J0IHsgZ2V0QXNwZWN0UmF0aW8sIGdldEltYWdlVXJsLCBpc0dhbGxlcnksIGlzVmlkZW8gfSBmcm9tICcuL2hlbHBlcnMnO1xuY29uc3QgVE9QSUNTID0ge1xuICAgIGdhbWluZzogJ2dhbWluZytoYWxvK1BTNCtycGcraW9zZ2FtaW5nK2dhbWluZ3N1Z2dlc3Rpb25zK2NvbXB1dGVycysnICtcbiAgICAgICAgJ1Nob3VsZElidXl0aGlzZ2FtZStNZWNoYW5pY2FsS2V5Ym9hcmRzK01vbml0b3JzK2hhcmR3YXJlc3dhcCtPcFRpY0dhbWluZysnICtcbiAgICAgICAgJ0RvdEEyK3BjbWFzdGVycmFjZStHaXJsR2FtZXJzK2dhbWVjb2xsZWN0aW5nK0luZGllR2FtaW5nK0ZhbGxvdXQrR2FtZXMrJyArXG4gICAgICAgICduaW50ZW5kbytTdWdnZXN0QUxhcHRvcCtTdGVhbStDb21wZXRpdGl2ZW92ZXJ3YXRjaCt3b3crZnVubnknLFxuICAgIG11c2ljOiAnTXVzaWMrVmFwb3J3YXZlK0d1aXRhcitNdXNpY0VkK1dlQXJlVGhlTXVzaWNNYWtlcnMraW5kaWVoZWFkcytNZXRhbCsnICtcbiAgICAgICAgJ0xldHNUYWxrTXVzaWMrRGVlcEludG9Zb3VUdWJlK211c2ljdGhlb3J5K01ldGFsY29yZStDYXN1YWxDb252ZXJzYXRpb24rJyArXG4gICAgICAgICdMaXN0ZW5pbmdIZWFkcytBc2tSZWRkaXQrd29haGR1ZGUrY29tcG9zZXIrcG9wcHVua2VycythbmltZSsnICtcbiAgICAgICAgJ1RoaXNJc091ck11c2ljK3VucG9wdWxhcm9waW5pb24rQWR2aWNlQW5pbWFscytCQUJZTUVUQUwrZ2FtaW5nK0VETSt0ZWNobm9sb2d5XCInLFxuICAgIHNwb3J0czogJ3Nwb3J0cytzb2NjZXIrdG9kYXlpbGVhcm5lZCtzdGFyY3JhZnQrYmFzZWJhbGwrZXNwb3J0cytyZWRkZXZpbHMrQXNrUmVkZGl0KycgK1xuICAgICAgICAnbmZsK0NGQituYmEraG9ja2V5K2xlYWd1ZW9mbGVnZW5kcytBQnJhVGhhdEZpdHMrZnVubnkrZm9ybXVsYTErTU1BKycgK1xuICAgICAgICAnUGF0cmlvdHMrZ2FtaW5nK2NvcmRjdXR0ZXJzK2RvZ2Vjb2luK2dyYW50dXJpc21vK1Nob3dlcnRob3VnaHRzK3VucG9wdWxhcm9waW5pb24rTUxTJyxcbiAgICBiZWF1dHk6ICdiZWF1dHkrQXNpYW5CZWF1dHkrT2xkU2Nob29sQ29vbCtmdW5ueStNVUFvbnRoZUNoZWFwK21ha2V1cGV4Y2hhbmdlKycgK1xuICAgICAgICAnS29yZWFuQmVhdXR5K3BpY3MrUG9yc2NoZStSYW5kb21BY3Rzb2ZNYWtldXArTWFrZXVwQWRkaWN0aW9uK2Rpc25leSsnICtcbiAgICAgICAgJ0JlYXV0eUFkZGljdGlvbitCZWF1dHlCb3hlcytBc2tXb21lbitzdWNjdWxlbnRzK0JlYXV0eUd1cnVDaGF0dGVyKycgK1xuICAgICAgICAnYmVhdXR5dGFsa3BoK2hvdXNlcGxhbnRzK2F3dytTaGlueVBva2Vtb24rY2F0cytnYXJkZW5pbmcrRnJlZUthcm1hNFUrZ2FtaW5nJyxcbn07XG5sZXQgRXhwbG9yZVBhZ2UgPSBjbGFzcyBFeHBsb3JlUGFnZSBleHRlbmRzIExpdEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zaG93dGl0bGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zaG93c3VicmVkZGl0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2hvd3NoaW0gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sYXJnZUthcm1hVGhyZXNob2xkID0gMjAwMDA7XG4gICAgICAgIHRoaXMubGFyZ2VDb21tZW50VGhyZXNob2xkID0gMTAwO1xuICAgICAgICB0aGlzLmxvYWRlclJlZ2lzdGVyZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wb3N0cyA9IFtdO1xuICAgIH1cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5tYWtlUXVlcnkoKTtcbiAgICB9XG4gICAgdXBkYXRlZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9ic2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHsgZW50cmllcyB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWVudHJpZXNbMF0uaXNJbnRlcnNlY3RpbmcpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgbG9hZCBtb3JlICR7dGhpcy5hZnRlcklkfWApO1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRlciAmJiAoKF9hID0gdGhpcy5vYnNlcnZlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVub2JzZXJ2ZSh0aGlzLl9sb2FkZXIpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGVuZGluZylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWtlUXVlcnkoKTtcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICByb290OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyksXG4gICAgICAgICAgICAgICAgcm9vdE1hcmdpbjogJzEwMHB4JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9sb2FkZXIgJiYgdGhpcy5hZnRlcklkKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9hZGVyICYmICgoX2EgPSB0aGlzLm9ic2VydmVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub2JzZXJ2ZSh0aGlzLl9sb2FkZXIpKTtcbiAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgc3R5bGVzKCkge1xuICAgICAgICByZXR1cm4gZXhwbG9yZVN0eWxlcygpO1xuICAgIH1cbiAgICBvblRpbGVDbGljayhzdWJyZWRkaXQpIHtcbiAgICAgICAgdGhpcy5zdWJyZWRkaXQgPSBzdWJyZWRkaXQ7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCd0b3BpYycsICcnKTtcbiAgICB9XG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZCwgY3VycmVudCkge1xuICAgICAgICBjb25zb2xlLmxvZyhhcmd1bWVudHMpO1xuICAgICAgICBpZiAobmFtZSA9PT0gJ3RvcGljJyAmJiBvbGQgIT09IGN1cnJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMudG9waWMgPSBjdXJyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMudG9waWMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc3RzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5hZnRlcklkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHRoaXMuc3VicmVkZGl0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHRoaXMubWFrZVF1ZXJ5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWUuaW5jbHVkZXMoJ3Nob3cnKSkge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgdGhpc1tuYW1lXSA9IGN1cnJlbnQgPT09ICd0cnVlJztcbiAgICAgICAgICAgIHRoaXMuc2hvd3NoaW0gPSB0aGlzLnNob3dzdWJyZWRkaXQgfHwgdGhpcy5zaG93dGl0bGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgbWFrZVF1ZXJ5KCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgaWYgKCF0aGlzLnRvcGljKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLmRhdGEgPSB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMudG9waWMpO1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSB0cnVlO1xuICAgICAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vd3d3LnJlZGRpdC5jb20vci8ke1RPUElDU1t0aGlzLnRvcGljXX0uanNvbj9hZnRlcj0keyhfYSA9IHRoaXMuYWZ0ZXJJZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJyd9YCwge1xuICAgICAgICAgICAgbW9kZTogJ2NvcnMnLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlc3AuanNvbigpO1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kYXRhID0gYm9keS5kYXRhO1xuICAgICAgICBjb25zdCBwb3N0cyA9IChfYyA9IChfYiA9IHRoaXMuZGF0YSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNoaWxkcmVuLm1hcCgoYykgPT4gYy5kYXRhKSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogW107XG4gICAgICAgIGNvbnNvbGUubG9nKHBvc3RzKTtcbiAgICAgICAgdGhpcy5wb3N0cyA9IHRoaXMucG9zdHMuY29uY2F0KHBvc3RzLmZpbHRlcigocG9zdCkgPT4gcG9zdC5wb3N0X2hpbnQgIT09ICdsaW5rJykpO1xuICAgICAgICB0aGlzLmFmdGVySWQgPSBib2R5LmRhdGEuYWZ0ZXI7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuc3VicmVkZGl0KSB7XG4gICAgICAgICAgICByZXR1cm4gaHRtbCBgPHN1YnJlZGRpdC12aWV3XG4gICAgICAgIHN1YnJlZGRpdD0ke3RoaXMuc3VicmVkZGl0fVxuICAgICAgPjwvc3VicmVkZGl0LXZpZXc+YDtcbiAgICAgICAgfVxuICAgICAgICAvL2lmICghdGhpcy5wb3N0cy5sZW5ndGgpIHJldHVybiBodG1sYDxkaXYgY2xhc3M9XCJncmlkXCI+PC9kaXY+YDtcbiAgICAgICAgcmV0dXJuIGh0bWwgYFxuICAgICAgPGRpdiBjbGFzcz1cImdyaWRcIj5cbiAgICAgICAgJHt0aGlzLl9yZW5kZXJUaWxlcygpfVxuICAgICAgICAke3RoaXMucG9zdHMubGVuZ3RoID09PSAwID8gJycgOiB0aGlzLl9yZW5kZXJTcGFjZXJzKCl9XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICAgIH1cbiAgICBfcmVuZGVyVGlsZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc3RzLm1hcCgocG9zdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW1nVXJsID0gZ2V0SW1hZ2VVcmwocG9zdCk7XG4gICAgICAgICAgICBjb25zdCBpc01lZGlhID0gISFpbWdVcmw7XG4gICAgICAgICAgICBpZiAoaXNNZWRpYSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyTWVkaWFUaWxlKHBvc3QpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlclRleHRUaWxlKHBvc3QpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3JlbmRlclNwYWNlcnMoKSB7XG4gICAgICAgIHJldHVybiBodG1sIGA8ZGl2IGNsYXNzPVwicG9zdC10aWxlIHBvc3QtdGV4dC1vbmx5IHNwYW4zXCI+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwicG9zdC10aWxlIHBvc3QtdGV4dC1vbmx5IHNwYW4yXCI+PC9kaXY+XG4gICAgICAke0FycmF5KDQpXG4gICAgICAgICAgICAuZmlsbCgxKVxuICAgICAgICAgICAgLm1hcCgoKSA9PiBodG1sIGA8ZGl2IGNsYXNzPVwicG9zdC10aWxlIHBvc3QtdGV4dC1vbmx5IHNwYW4xXCI+PC9kaXY+YCl9XG4gICAgICA8ZGl2IGNsYXNzPVwibG9hZGVyXCI+PC9kaXY+YDtcbiAgICB9XG4gICAgX3JlbmRlck1lZGlhVGlsZShwb3N0KSB7XG4gICAgICAgIC8vY29uc3QgaXNMYXJnZSA9IHBvc3QudGl0bGUubGVuZ3RoID4gOTA7XG4gICAgICAgIGNvbnN0IGlzTGFyZ2UgPSBwb3N0LnVwcyA+IHRoaXMubGFyZ2VLYXJtYVRocmVzaG9sZCB8fCBwb3N0Lm51bV9jb21tZW50cyAvIHBvc3QudXBzID4gMC4xO1xuICAgICAgICBjb25zdCBpbWdVcmwgPSBnZXRJbWFnZVVybChwb3N0KTtcbiAgICAgICAgY29uc3QgaW1nU3R5bGVzID0ge1xuICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBgdXJsKCcke2ltZ1VybH0nKWAsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJhdGlvID0gZ2V0QXNwZWN0UmF0aW8ocG9zdCk7XG4gICAgICAgIGNvbnN0IHJvd1NwYW4gPSBNYXRoLnJvdW5kKHJhdGlvICogR1JJRF9HUkFOVUxBUklUWSkgKiAoaXNMYXJnZSA/IDIgOiAxKTtcbiAgICAgICAgY29uc3Qgc3BhbkNsYXNzID0gYHNwYW4ke2NsYW1wKHJvd1NwYW4sIE1hdGgucm91bmQoR1JJRF9HUkFOVUxBUklUWSAvIDMpLCBHUklEX0dSQU5VTEFSSVRZICogMiAqIChpc0xhcmdlID8gMiA6IDEpKX1gO1xuICAgICAgICByZXR1cm4gaHRtbCBgPGRpdlxuICAgICAgQGNsaWNrPSR7KCkgPT4gdGhpcy5vblRpbGVDbGljayhwb3N0LnN1YnJlZGRpdCl9XG4gICAgICBjbGFzcz0ke2NsYXNzTWFwKHtcbiAgICAgICAgICAgICdwb3N0LXRpbGUnOiB0cnVlLFxuICAgICAgICAgICAgW3NwYW5DbGFzc106IHRydWUsXG4gICAgICAgICAgICAncG9zdC10aWxlLWxhcmdlJzogaXNMYXJnZSxcbiAgICAgICAgfSl9XG4gICAgPlxuICAgICAgJHtpbWdVcmxcbiAgICAgICAgICAgID8gdW5zYWZlSFRNTChgPGRpdiBjbGFzcz1cInBvc3QtdGlsZS1pbWFnZVwiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogJHtpbWdTdHlsZXMuYmFja2dyb3VuZEltYWdlfVwiIC8+YClcbiAgICAgICAgICAgIDogJyd9XG4gICAgICAke3RoaXMuc2hvd3NoaW1cbiAgICAgICAgICAgID8gaHRtbCBgPHRpbGUtdGV4dCAucG9zdD0ke3Bvc3R9IGlzSW1hZ2U+PC90aWxlLXRleHQ+YFxuICAgICAgICAgICAgOiAnJ31cbiAgICAgICR7aXNHYWxsZXJ5KHBvc3QpXG4gICAgICAgICAgICA/IGh0bWwgYDxpbWcgY2xhc3M9XCJnYWxsZXJ5LWljb25cIiBzcmM9XCJnYWxsZXJ5LnBuZ1wiIC8+YFxuICAgICAgICAgICAgOiAnJ31cbiAgICAgICR7aXNWaWRlbyhwb3N0KSA/IGh0bWwgYDxpbWcgY2xhc3M9XCJ2aWRlby1pY29uXCIgc3JjPVwidmlkZW8ucG5nXCIgLz5gIDogJyd9XG4gICAgPC9kaXY+YDtcbiAgICB9XG4gICAgX3JlbmRlclRleHRUaWxlKHBvc3QpIHtcbiAgICAgICAgY29uc3QgaXNMYXJnZSA9IHBvc3QudXBzID4gdGhpcy5sYXJnZUthcm1hVGhyZXNob2xkIHx8IHBvc3QudGl0bGUubGVuZ3RoID4gMTAwO1xuICAgICAgICByZXR1cm4gaHRtbCBgPGRpdlxuICAgICAgQGNsaWNrPSR7KCkgPT4gdGhpcy5vblRpbGVDbGljayhwb3N0LnN1YnJlZGRpdCl9XG4gICAgICBjbGFzcz0ke2NsYXNzTWFwKHtcbiAgICAgICAgICAgICdwb3N0LXRpbGUnOiB0cnVlLFxuICAgICAgICAgICAgc3BhbjY6ICEhcG9zdC5zZWxmdGV4dCxcbiAgICAgICAgICAgIHNwYW40OiAhcG9zdC5zZWxmdGV4dCxcbiAgICAgICAgICAgICdwb3N0LXRpbGUtbGFyZ2UnOiBpc0xhcmdlLFxuICAgICAgICAgICAgJ3Bvc3QtdGV4dC1vbmx5JzogdHJ1ZSxcbiAgICAgICAgfSl9XG4gICAgPlxuICAgICAgPHRpbGUtdGV4dCAucG9zdD0ke3Bvc3R9IC5pc2ltYWdlPSR7ZmFsc2V9PjwvdGlsZS10ZXh0PlxuICAgIDwvZGl2PmA7XG4gICAgfVxuICAgIF9yZW5kZXJUZXh0KHBvc3QsIGlzSW1hZ2UgPSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gaHRtbCBgPHRpbGUtdGV4dCAucG9zdD0ke3Bvc3R9IC5pc2ltYWdlPSR7aXNJbWFnZX0gLz5gO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogdHJ1ZSwgdHlwZTogU3RyaW5nIH0pXG5dLCBFeHBsb3JlUGFnZS5wcm90b3R5cGUsIFwidG9waWNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5KHsgYXR0cmlidXRlOiB0cnVlLCB0eXBlOiBTdHJpbmcgfSlcbl0sIEV4cGxvcmVQYWdlLnByb3RvdHlwZSwgXCJzdWJyZWRkaXRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5KHsgYXR0cmlidXRlOiB0cnVlLCB0eXBlOiBPYmplY3QgfSlcbl0sIEV4cGxvcmVQYWdlLnByb3RvdHlwZSwgXCJkYXRhXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9KVxuXSwgRXhwbG9yZVBhZ2UucHJvdG90eXBlLCBcInNob3d0aXRsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkoeyBhdHRyaWJ1dGU6IHRydWUsIHR5cGU6IEJvb2xlYW4gfSlcbl0sIEV4cGxvcmVQYWdlLnByb3RvdHlwZSwgXCJzaG93c3VicmVkZGl0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9KVxuXSwgRXhwbG9yZVBhZ2UucHJvdG90eXBlLCBcInNob3dzaGltXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBxdWVyeSgnLmxvYWRlcicpXG5dLCBFeHBsb3JlUGFnZS5wcm90b3R5cGUsIFwiX2xvYWRlclwiLCB2b2lkIDApO1xuRXhwbG9yZVBhZ2UgPSBfX2RlY29yYXRlKFtcbiAgICBjdXN0b21FbGVtZW50KCdleHBsb3JlLXBhZ2UnKVxuXSwgRXhwbG9yZVBhZ2UpO1xuZXhwb3J0IHsgRXhwbG9yZVBhZ2UgfTtcbmZ1bmN0aW9uIGNsYW1wKHZhbCwgbWluLCBtYXgpIHtcbiAgICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodmFsLCBtaW4pLCBtYXgpO1xufVxuIiwiaW1wb3J0ICcuL2NvbXBvbmVudHMvZXhwbG9yZS1wYWdlJztcbmltcG9ydCAnLi9jb21wb25lbnRzL3N1YnJlZGRpdC12aWV3JztcbmFzeW5jIGZ1bmN0aW9uIG1haW4oKSB7XG4gICAgY29uc3QgZXhwbG9yZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2V4cGxvcmUtcGFnZScpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbi5waWxsJykuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvcGljID0gYnV0dG9uLmlubmVySFRNTC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coeyB0b3BpYyB9KTtcbiAgICAgICAgICAgIGV4cGxvcmUuc2V0QXR0cmlidXRlKCd0b3BpYycsIHRvcGljKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQuY2hlY2tib3gnKS5mb3JFYWNoKChlbGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gZWxlbTtcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChpbnB1dC5pZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3d0aXRsZSc6IHtcbiAgICAgICAgICAgICAgICAgICAgZXhwbG9yZS5zZXRBdHRyaWJ1dGUoJ3Nob3d0aXRsZScsIGlucHV0LmNoZWNrZWQgKyAnJyk7XG4gICAgICAgICAgICAgICAgICAgIGV4cGxvcmUuc2V0QXR0cmlidXRlKCdzaG93c3VicmVkZGl0JywgaW5wdXQuY2hlY2tlZCArICcnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5tYWluKCk7XG4iXSwibmFtZXMiOlsiaXNDRVBvbHlmaWxsIiwid2luZG93IiwiY3VzdG9tRWxlbWVudHMiLCJ1bmRlZmluZWQiLCJwb2x5ZmlsbFdyYXBGbHVzaENhbGxiYWNrIiwicmVtb3ZlTm9kZXMiLCJjb250YWluZXIiLCJzdGFydCIsImVuZCIsIm4iLCJuZXh0U2libGluZyIsInJlbW92ZUNoaWxkIiwibWFya2VyIiwiU3RyaW5nIiwiTWF0aCIsInJhbmRvbSIsInNsaWNlIiwibm9kZU1hcmtlciIsIm1hcmtlclJlZ2V4IiwiUmVnRXhwIiwiVGVtcGxhdGUiLCJbb2JqZWN0IE9iamVjdF0iLCJyZXN1bHQiLCJlbGVtZW50IiwidGhpcyIsInBhcnRzIiwibm9kZXNUb1JlbW92ZSIsInN0YWNrIiwid2Fsa2VyIiwiZG9jdW1lbnQiLCJjcmVhdGVUcmVlV2Fsa2VyIiwiY29udGVudCIsImxhc3RQYXJ0SW5kZXgiLCJpbmRleCIsInBhcnRJbmRleCIsInN0cmluZ3MiLCJ2YWx1ZXMiLCJsZW5ndGgiLCJub2RlIiwibmV4dE5vZGUiLCJub2RlVHlwZSIsImhhc0F0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVzIiwiY291bnQiLCJpIiwiZW5kc1dpdGgiLCJuYW1lIiwic3RyaW5nRm9yUGFydCIsImxhc3RBdHRyaWJ1dGVOYW1lUmVnZXgiLCJleGVjIiwiYXR0cmlidXRlTG9va3VwTmFtZSIsInRvTG93ZXJDYXNlIiwiYXR0cmlidXRlVmFsdWUiLCJnZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzdGF0aWNzIiwic3BsaXQiLCJwdXNoIiwidHlwZSIsInRhZ05hbWUiLCJjdXJyZW50Tm9kZSIsImRhdGEiLCJpbmRleE9mIiwicGFyZW50IiwicGFyZW50Tm9kZSIsImxhc3RJbmRleCIsImluc2VydCIsInMiLCJjcmVhdGVNYXJrZXIiLCJtYXRjaCIsImNyZWF0ZVRleHROb2RlIiwiaW5zZXJ0QmVmb3JlIiwicHJldmlvdXNTaWJsaW5nIiwicG9wIiwic3RyIiwic3VmZml4IiwiaXNUZW1wbGF0ZVBhcnRBY3RpdmUiLCJwYXJ0IiwiY3JlYXRlQ29tbWVudCIsInJlbW92ZU5vZGVzRnJvbVRlbXBsYXRlIiwidGVtcGxhdGUiLCJuZXh0QWN0aXZlSW5kZXhJblRlbXBsYXRlUGFydHMiLCJub2RlSW5kZXgiLCJyZW1vdmVDb3VudCIsIm5vZGVzVG9SZW1vdmVJblRlbXBsYXRlIiwiY3VycmVudFJlbW92aW5nTm9kZSIsImhhcyIsImZvckVhY2giLCJjb3VudE5vZGVzIiwic3RhcnRJbmRleCIsImRpcmVjdGl2ZXMiLCJXZWFrTWFwIiwiZGlyZWN0aXZlIiwiZiIsImFyZ3MiLCJkIiwic2V0IiwiaXNEaXJlY3RpdmUiLCJvIiwibm9DaGFuZ2UiLCJub3RoaW5nIiwiVGVtcGxhdGVJbnN0YW5jZSIsInByb2Nlc3NvciIsIm9wdGlvbnMiLCJfX3BhcnRzIiwic2V0VmFsdWUiLCJjb21taXQiLCJmcmFnbWVudCIsImNsb25lTm9kZSIsImltcG9ydE5vZGUiLCJub2RlTmFtZSIsImhhbmRsZVRleHRFeHByZXNzaW9uIiwiaW5zZXJ0QWZ0ZXJOb2RlIiwiaGFuZGxlQXR0cmlidXRlRXhwcmVzc2lvbnMiLCJhZG9wdE5vZGUiLCJ1cGdyYWRlIiwiY29tbWVudE1hcmtlciIsIlRlbXBsYXRlUmVzdWx0IiwibCIsImh0bWwiLCJpc0NvbW1lbnRCaW5kaW5nIiwiY29tbWVudE9wZW4iLCJsYXN0SW5kZXhPZiIsImF0dHJpYnV0ZU1hdGNoIiwic3Vic3RyIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsImdldEhUTUwiLCJpc1ByaW1pdGl2ZSIsInZhbHVlIiwiaXNJdGVyYWJsZSIsIkFycmF5IiwiaXNBcnJheSIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiQXR0cmlidXRlQ29tbWl0dGVyIiwiZGlydHkiLCJfY3JlYXRlUGFydCIsIkF0dHJpYnV0ZVBhcnQiLCJ0ZXh0IiwidiIsInQiLCJzZXRBdHRyaWJ1dGUiLCJfZ2V0VmFsdWUiLCJjb21taXR0ZXIiLCJOb2RlUGFydCIsIl9fcGVuZGluZ1ZhbHVlIiwic3RhcnROb2RlIiwiYXBwZW5kQ2hpbGQiLCJlbmROb2RlIiwicmVmIiwiX19pbnNlcnQiLCJfX2NvbW1pdFRleHQiLCJfX2NvbW1pdFRlbXBsYXRlUmVzdWx0IiwiTm9kZSIsIl9fY29tbWl0Tm9kZSIsIl9fY29tbWl0SXRlcmFibGUiLCJjbGVhciIsInZhbHVlQXNTdHJpbmciLCJ0ZW1wbGF0ZUZhY3RvcnkiLCJ1cGRhdGUiLCJpbnN0YW5jZSIsIl9jbG9uZSIsIml0ZW1QYXJ0cyIsIml0ZW1QYXJ0IiwiaXRlbSIsImFwcGVuZEludG9QYXJ0IiwiaW5zZXJ0QWZ0ZXJQYXJ0IiwiQm9vbGVhbkF0dHJpYnV0ZVBhcnQiLCJFcnJvciIsIlByb3BlcnR5Q29tbWl0dGVyIiwic3VwZXIiLCJzaW5nbGUiLCJQcm9wZXJ0eVBhcnQiLCJldmVudE9wdGlvbnNTdXBwb3J0ZWQiLCJjYXB0dXJlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfZSIsIkV2ZW50UGFydCIsImV2ZW50TmFtZSIsImV2ZW50Q29udGV4dCIsIl9fYm91bmRIYW5kbGVFdmVudCIsImUiLCJoYW5kbGVFdmVudCIsIm5ld0xpc3RlbmVyIiwib2xkTGlzdGVuZXIiLCJzaG91bGRSZW1vdmVMaXN0ZW5lciIsIm9uY2UiLCJwYXNzaXZlIiwic2hvdWxkQWRkTGlzdGVuZXIiLCJfX29wdGlvbnMiLCJnZXRPcHRpb25zIiwiZXZlbnQiLCJjYWxsIiwidGVtcGxhdGVDYWNoZSIsInRlbXBsYXRlQ2FjaGVzIiwiZ2V0Iiwic3RyaW5nc0FycmF5Iiwia2V5U3RyaW5nIiwiTWFwIiwia2V5Iiwiam9pbiIsImdldFRlbXBsYXRlRWxlbWVudCIsImRlZmF1bHRUZW1wbGF0ZVByb2Nlc3NvciIsInByZWZpeCIsImdldFRlbXBsYXRlQ2FjaGVLZXkiLCJzY29wZU5hbWUiLCJjb21wYXRpYmxlU2hhZHlDU1NWZXJzaW9uIiwiU2hhZHlDU1MiLCJwcmVwYXJlVGVtcGxhdGVEb20iLCJjb25zb2xlIiwid2FybiIsInNoYWR5VGVtcGxhdGVGYWN0b3J5IiwiY2FjaGVLZXkiLCJURU1QTEFURV9UWVBFUyIsInNoYWR5UmVuZGVyU2V0IiwiU2V0IiwicHJlcGFyZVRlbXBsYXRlU3R5bGVzIiwicmVuZGVyZWRET00iLCJhZGQiLCJ0ZW1wbGF0ZUVsZW1lbnQiLCJzdHlsZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29uZGVuc2VkU3R5bGUiLCJzdHlsZSIsInRleHRDb250ZW50IiwidGVtcGxhdGVzIiwiZnJvbSIsInJlbW92ZVN0eWxlc0Zyb21MaXRUZW1wbGF0ZXMiLCJyZWZOb2RlIiwiaW5zZXJ0Q291bnQiLCJ3YWxrZXJJbmRleCIsImluc2VydE5vZGVJbnRvVGVtcGxhdGUiLCJmaXJzdENoaWxkIiwicXVlcnlTZWxlY3RvciIsIm5hdGl2ZVNoYWRvdyIsInJlbW92ZXMiLCJKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5IiwicHJvcCIsIl9vYmoiLCJkZWZhdWx0Q29udmVydGVyIiwiQm9vbGVhbiIsIk9iamVjdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJOdW1iZXIiLCJwYXJzZSIsIm5vdEVxdWFsIiwib2xkIiwiZGVmYXVsdFByb3BlcnR5RGVjbGFyYXRpb24iLCJhdHRyaWJ1dGUiLCJjb252ZXJ0ZXIiLCJyZWZsZWN0IiwiaGFzQ2hhbmdlZCIsIlVwZGF0aW5nRWxlbWVudCIsIkhUTUxFbGVtZW50IiwiX3VwZGF0ZVN0YXRlIiwiX2luc3RhbmNlUHJvcGVydGllcyIsIl91cGRhdGVQcm9taXNlIiwiUHJvbWlzZSIsInJlcyIsIl9lbmFibGVVcGRhdGluZ1Jlc29sdmVyIiwiX2NoYW5nZWRQcm9wZXJ0aWVzIiwiX3JlZmxlY3RpbmdQcm9wZXJ0aWVzIiwiaW5pdGlhbGl6ZSIsIm9ic2VydmVkQXR0cmlidXRlcyIsImZpbmFsaXplIiwiX2NsYXNzUHJvcGVydGllcyIsInAiLCJhdHRyIiwiX2F0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eSIsIl9hdHRyaWJ1dGVUb1Byb3BlcnR5TWFwIiwiaGFzT3duUHJvcGVydHkiLCJzdXBlclByb3BlcnRpZXMiLCJnZXRQcm90b3R5cGVPZiIsImsiLCJfZW5zdXJlQ2xhc3NQcm9wZXJ0aWVzIiwibm9BY2Nlc3NvciIsInByb3RvdHlwZSIsImRlc2NyaXB0b3IiLCJnZXRQcm9wZXJ0eURlc2NyaXB0b3IiLCJkZWZpbmVQcm9wZXJ0eSIsIl9vcHRpb25zIiwib2xkVmFsdWUiLCJfcmVxdWVzdFVwZGF0ZSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJzdXBlckN0b3IiLCJwcm9wcyIsInByb3BlcnRpZXMiLCJwcm9wS2V5cyIsImdldE93blByb3BlcnR5TmFtZXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJjcmVhdGVQcm9wZXJ0eSIsImZyb21BdHRyaWJ1dGUiLCJ0b0F0dHJpYnV0ZSIsIl9zYXZlSW5zdGFuY2VQcm9wZXJ0aWVzIiwiY29uc3RydWN0b3IiLCJfdiIsImVuYWJsZVVwZGF0aW5nIiwiX2F0dHJpYnV0ZVRvUHJvcGVydHkiLCJjdG9yIiwiYXR0clZhbHVlIiwiX3Byb3BlcnR5VmFsdWVUb0F0dHJpYnV0ZSIsInByb3BOYW1lIiwiZ2V0UHJvcGVydHlPcHRpb25zIiwiX3Byb3BlcnR5VmFsdWVGcm9tQXR0cmlidXRlIiwic2hvdWxkUmVxdWVzdFVwZGF0ZSIsIl92YWx1ZUhhc0NoYW5nZWQiLCJfaGFzUmVxdWVzdGVkVXBkYXRlIiwiX2VucXVldWVVcGRhdGUiLCJ1cGRhdGVDb21wbGV0ZSIsInBlcmZvcm1VcGRhdGUiLCJoYXNVcGRhdGVkIiwiX2FwcGx5SW5zdGFuY2VQcm9wZXJ0aWVzIiwic2hvdWxkVXBkYXRlIiwiY2hhbmdlZFByb3BlcnRpZXMiLCJfbWFya1VwZGF0ZWQiLCJmaXJzdFVwZGF0ZWQiLCJ1cGRhdGVkIiwiX2dldFVwZGF0ZUNvbXBsZXRlIiwic2l6ZSIsIl9wcm9wZXJ0eVRvQXR0cmlidXRlIiwiY3VzdG9tRWxlbWVudCIsImNsYXNzT3JEZXNjcmlwdG9yIiwiY2xhenoiLCJkZWZpbmUiLCJsZWdhY3lDdXN0b21FbGVtZW50Iiwia2luZCIsImVsZW1lbnRzIiwic3RhbmRhcmRDdXN0b21FbGVtZW50Iiwic3RhbmRhcmRQcm9wZXJ0eSIsImFzc2lnbiIsInBsYWNlbWVudCIsImluaXRpYWxpemVyIiwicHJvcGVydHkiLCJwcm90b09yRGVzY3JpcHRvciIsInByb3RvIiwibGVnYWN5UHJvcGVydHkiLCJxdWVyeSIsInNlbGVjdG9yIiwicmVuZGVyUm9vdCIsImxlZ2FjeVF1ZXJ5Iiwic3RhbmRhcmRRdWVyeSIsInN1cHBvcnRzQWRvcHRpbmdTdHlsZVNoZWV0cyIsIkRvY3VtZW50IiwiQ1NTU3R5bGVTaGVldCIsImNvbnN0cnVjdGlvblRva2VuIiwiQ1NTUmVzdWx0IiwiY3NzVGV4dCIsInNhZmVUb2tlbiIsInN0eWxlU2hlZXQiLCJfc3R5bGVTaGVldCIsInJlcGxhY2VTeW5jIiwiY3NzIiwicmVkdWNlIiwiYWNjIiwiaWR4IiwidGV4dEZyb21DU1NSZXN1bHQiLCJyZW5kZXJOb3RJbXBsZW1lbnRlZCIsIkxpdEVsZW1lbnQiLCJ1c2VyU3R5bGVzIiwiZ2V0U3R5bGVzIiwiX3N0eWxlcyIsImFkZFN0eWxlcyIsInJlZHVjZVJpZ2h0IiwidW5zaGlmdCIsIl9nZXRVbmlxdWVTdHlsZXMiLCJjcmVhdGVSZW5kZXJSb290IiwiU2hhZG93Um9vdCIsImFkb3B0U3R5bGVzIiwiYXR0YWNoU2hhZG93IiwibW9kZSIsImFkb3B0ZWRTdHlsZVNoZWV0cyIsIm1hcCIsIl9uZWVkc1NoaW1BZG9wdGVkU3R5bGVTaGVldHMiLCJTY29waW5nU2hpbSIsInByZXBhcmVBZG9wdGVkQ3NzVGV4dCIsImxvY2FsTmFtZSIsImNvbm5lY3RlZENhbGxiYWNrIiwic3R5bGVFbGVtZW50IiwidGVtcGxhdGVSZXN1bHQiLCJyZW5kZXIiLCJoYXNSZW5kZXJlZCIsIm5lZWRzU2NvcGluZyIsImhvc3QiLCJmaXJzdFNjb3BlUmVuZGVyIiwicmVuZGVyQ29udGFpbmVyIiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImFwcGVuZEludG8iLCJsaXRSZW5kZXIiLCJkZWxldGUiLCJwcmV2aW91c1ZhbHVlcyIsInVuc2FmZUhUTUwiLCJwcmV2aW91c1ZhbHVlIiwiQ2xhc3NMaXN0IiwiY2xhc3NlcyIsImNoYW5nZWQiLCJjbGFzc0xpc3QiLCJjbHMiLCJjbGFzc1N0cmluZyIsInByZXZpb3VzQ2xhc3Nlc0NhY2hlIiwiY2xhc3NNYXAiLCJjbGFzc0luZm8iLCJwcmV2aW91c0NsYXNzZXMiLCJyZW1vdmUiLCJnZXRJbWFnZVVybCIsInBvc3QiLCJfYSIsIl9iIiwicG9zdF9oaW50IiwidXJsIiwiZ2V0UHJldmlldyIsIl9jIiwiaXNJbWFnZSIsImlzR2FsbGVyeSIsImZpcnN0SW1hZ2UiLCJnYWxsZXJ5X2RhdGEiLCJpdGVtcyIsIm1ldGFkYXRhIiwibWVkaWFfbWV0YWRhdGEiLCJtZWRpYV9pZCIsInRodW1iIiwiZmluZCIsImluZm8iLCJ4IiwidSIsIndpZHRoIiwiaGVpZ2h0IiwieSIsImdldEdhbGxlcnlJbWFnZSIsInByZXZpZXciLCJpbWFnZXMiLCJzb3VyY2UiLCJyZXNvbHV0aW9ucyIsImh0bWxEZWNvZGUiLCJpbnB1dCIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsImRvY3VtZW50RWxlbWVudCIsIl9fZGVjb3JhdGUiLCJkZWNvcmF0b3JzIiwidGFyZ2V0IiwiZGVzYyIsImMiLCJhcmd1bWVudHMiLCJyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiU3VicmVkZGl0VmlldyIsInN1YnJlZGRpdCIsIm1ha2VRdWVyeSIsInByZXYiLCJjdXJyIiwiZmV0Y2hBYm91dCIsInJlc3AiLCJmZXRjaCIsImJvZHkiLCJqc29uIiwibG9nIiwiY2hpbGRyZW4iLCJ0aXRsZSIsImFib3V0IiwicG9zdElkIiwidmlkZW9FbGVtIiwicGxheSIsInBhdXNlIiwiaWNvblVybCIsImljb25faW1nIiwiZmlsdGVyIiwic3RpY2tpZWQiLCJpbWdVcmwiLCJpZCIsIm9uTW91c2VPdmVyIiwib25Nb3VzZU91dCIsInNyLWljb24iLCJuby1pY29uIiwiYXV0aG9yIiwic2VsZnRleHRfaHRtbCIsIm1lZGlhIiwicmVkZGl0X3ZpZGVvIiwiZmFsbGJhY2tfdXJsIiwiQ2xhbXBSZXNwb25zZSIsIm9yaWdpbmFsIiwiY2xhbXBlZCIsImNsYW1wIiwid2luIiwidHJ1bmNhdGlvbkNoYXIiLCJzcGxpdE9uQ2hhcnMiLCJvcHQiLCJ0cnVuY2F0aW9uSFRNTCIsImNodW5rcyIsImxhc3RDaHVuayIsInNwbGl0Q2hhciIsIm9yaWdpbmFsVGV4dCIsImNsYW1wVmFsdWUiLCJpc0NTU1ZhbHVlIiwidHJ1bmNhdGlvbkhUTUxDb250YWluZXIiLCJjbGFtcGVkVGV4dCIsImNvbXB1dGVTdHlsZSIsImVsZW0iLCJnZXRDb21wdXRlZFN0eWxlIiwiZ2V0UHJvcGVydHlWYWx1ZSIsImdldE1heExpbmVzIiwiYXZhaWxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJsaW5lSGVpZ2h0IiwiZ2V0TGluZUhlaWdodCIsIm1heCIsImZsb29yIiwibGgiLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsImdldEVsZW1IZWlnaHQiLCJzY3JvbGxIZWlnaHQiLCJnZXRMYXN0Q2hpbGQiLCJsYXN0Q2hpbGQiLCJub2RlVmFsdWUiLCJhcHBseUVsbGlwc2lzIiwidG9TdHJpbmciLCJwYXJzZUludCIsImNsbXAiLCJ0cnVuY2F0ZSIsIm1heEhlaWdodCIsInRyaW0iLCJyZXBsYWNlIiwic2hpZnQiLCJudW0iLCJhcnIiLCJyYW5nZSIsIkdSSURfR1JBTlVMQVJJVFkiLCJUaWxlVGV4dCIsInNob3dzaGltIiwic2hvd3RpdGxlIiwic2hvd3N1YnJlZGRpdCIsImlzQ2xhbXBlZCIsImV4cGxvcmVTdHlsZXMiLCJ0aXRsZUVsZW0iLCJzZWxmdGV4dCIsImJvZHlFbGVtIiwiX3JlbmRlclRleHQiLCJkaXYiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImZpcnN0TWFya2Rvd25FbGVtIiwicG9zdC10aWxlLXRleHQiLCJzaGltIiwicG9zdC10aWxlLXRpdGxlIiwiaGlkZGVuIiwicG9zdC10aWxlLWJvZHkiLCJUT1BJQ1MiLCJnYW1pbmciLCJtdXNpYyIsInNwb3J0cyIsImJlYXV0eSIsIkV4cGxvcmVQYWdlIiwicGVuZGluZyIsImxhcmdlS2FybWFUaHJlc2hvbGQiLCJsYXJnZUNvbW1lbnRUaHJlc2hvbGQiLCJsb2FkZXJSZWdpc3RlcmVkIiwicG9zdHMiLCJvYnNlcnZlciIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiZW50cmllcyIsImlzSW50ZXJzZWN0aW5nIiwiYWZ0ZXJJZCIsIl9sb2FkZXIiLCJ1bm9ic2VydmUiLCJyb290Iiwicm9vdE1hcmdpbiIsInNldFRpbWVvdXQiLCJvYnNlcnZlIiwiY3VycmVudCIsInRvcGljIiwiaW5jbHVkZXMiLCJjb25jYXQiLCJhZnRlciIsIl9yZW5kZXJUaWxlcyIsIl9yZW5kZXJTcGFjZXJzIiwiX3JlbmRlck1lZGlhVGlsZSIsIl9yZW5kZXJUZXh0VGlsZSIsImZpbGwiLCJpc0xhcmdlIiwidXBzIiwibnVtX2NvbW1lbnRzIiwiaW1nU3R5bGVzIiwicmF0aW8iLCJpbWFnZSIsImdldEFzcGVjdFJhdGlvIiwicm93U3BhbiIsInJvdW5kIiwic3BhbkNsYXNzIiwidmFsIiwibWluIiwib25UaWxlQ2xpY2siLCJwb3N0LXRpbGUiLCJwb3N0LXRpbGUtbGFyZ2UiLCJpc1ZpZGVvIiwic3BhbjYiLCJzcGFuNCIsInBvc3QtdGV4dC1vbmx5IiwiYXN5bmMiLCJleHBsb3JlIiwiYnV0dG9uIiwiY2hlY2tlZCIsIm1haW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFnQk8sTUFBTUEsRUFBaUMsb0JBQVhDLFFBQ04sTUFBekJBLE9BQU9DLHFCQUVIQyxJQURKRixPQUFPQyxlQUFlRSwwQkFrQmJDLEVBQWMsQ0FBQ0MsRUFBV0MsRUFBT0MsRUFBTSxRQUNoRCxLQUFPRCxJQUFVQyxHQUFLLENBQ2xCLE1BQU1DLEVBQUlGLEVBQU1HLFlBQ2hCSixFQUFVSyxZQUFZSixHQUN0QkEsRUFBUUUsSUN2QkhHLEVBQVMsU0FBU0MsT0FBT0MsS0FBS0MsVUFBVUMsTUFBTSxPQUs5Q0MsRUFBYSxVQUFPTCxVQUNwQk0sRUFBYyxJQUFJQyxPQUFPLEdBQUdQLEtBQVVLLEtBUW5ELE1BQWFHLEVBQ1RDLFlBQVlDLEVBQVFDLEdBQ2hCQyxLQUFLQyxNQUFRLEdBQ2JELEtBQUtELFFBQVVBLEVBQ2YsTUFBTUcsRUFBZ0IsR0FDaEJDLEVBQVEsR0FFUkMsRUFBU0MsU0FBU0MsaUJBQWlCUCxFQUFRUSxRQUFTLElBQWtELE1BQU0sR0FJbEgsSUFBSUMsRUFBZ0IsRUFDaEJDLEdBQVMsRUFDVEMsRUFBWSxFQUNoQixNQUFNQyxRQUFFQSxFQUFTQyxRQUFRQyxPQUFFQSxJQUFhZixFQUN4QyxLQUFPWSxFQUFZRyxHQUFRLENBQ3ZCLE1BQU1DLEVBQU9WLEVBQU9XLFdBQ3BCLEdBQWEsT0FBVEQsR0FTSixHQURBTCxJQUNzQixJQUFsQkssRUFBS0UsU0FBd0MsQ0FDN0MsR0FBSUYsRUFBS0csZ0JBQWlCLENBQ3RCLE1BQU1DLEVBQWFKLEVBQUtJLFlBQ2xCTCxP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
