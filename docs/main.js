/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const t="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,i=(t,i,e=null)=>{for(;i!==e;){const e=i.nextSibling;t.removeChild(i),i=e}},e=`{{lit-${String(Math.random()).slice(2)}}}`,s=`\x3c!--${e}--\x3e`,n=new RegExp(`${e}|${s}`);class o{constructor(t,i){this.parts=[],this.element=i;const s=[],o=[],a=document.createTreeWalker(i.content,133,null,!1);let c=0,d=-1,u=0;const{strings:p,values:{length:f}}=t;for(;u<f;){const t=a.nextNode();if(null!==t){if(d++,1===t.nodeType){if(t.hasAttributes()){const i=t.attributes,{length:e}=i;let s=0;for(let t=0;t<e;t++)r(i[t].name,"$lit$")&&s++;for(;s-- >0;){const i=p[u],e=l.exec(i)[2],s=e.toLowerCase()+"$lit$",o=t.getAttribute(s);t.removeAttribute(s);const r=o.split(n);this.parts.push({type:"attribute",index:d,name:e,strings:r}),u+=r.length-1}}"TEMPLATE"===t.tagName&&(o.push(t),a.currentNode=t.content)}else if(3===t.nodeType){const i=t.data;if(i.indexOf(e)>=0){const e=t.parentNode,o=i.split(n),a=o.length-1;for(let i=0;i<a;i++){let s,n=o[i];if(""===n)s=h();else{const t=l.exec(n);null!==t&&r(t[2],"$lit$")&&(n=n.slice(0,t.index)+t[1]+t[2].slice(0,-"$lit$".length)+t[3]),s=document.createTextNode(n)}e.insertBefore(s,t),this.parts.push({type:"node",index:++d})}""===o[a]?(e.insertBefore(h(),t),s.push(t)):t.data=o[a],u+=a}}else if(8===t.nodeType)if(t.data===e){const i=t.parentNode;null!==t.previousSibling&&d!==c||(d++,i.insertBefore(h(),t)),c=d,this.parts.push({type:"node",index:d}),null===t.nextSibling?t.data="":(s.push(t),d--),u++}else{let i=-1;for(;-1!==(i=t.data.indexOf(e,i+1));)this.parts.push({type:"node",index:-1}),u++}}else a.currentNode=o.pop()}for(const t of s)t.parentNode.removeChild(t)}}const r=(t,i)=>{const e=t.length-i.length;return e>=0&&t.slice(e)===i},a=t=>-1!==t.index,h=()=>document.createComment(""),l=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function c(t,i){const{element:{content:e},parts:s}=t,n=document.createTreeWalker(e,133,null,!1);let o=u(s),r=s[o],a=-1,h=0;const l=[];let c=null;for(;n.nextNode();){a++;const t=n.currentNode;for(t.previousSibling===c&&(c=null),i.has(t)&&(l.push(t),null===c&&(c=t)),null!==c&&h++;void 0!==r&&r.index===a;)r.index=null!==c?-1:r.index-h,o=u(s,o),r=s[o]}l.forEach(t=>t.parentNode.removeChild(t))}const d=t=>{let i=11===t.nodeType?0:1;const e=document.createTreeWalker(t,133,null,!1);for(;e.nextNode();)i++;return i},u=(t,i=-1)=>{for(let e=i+1;e<t.length;e++){const i=t[e];if(a(i))return e}return-1};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const p=new WeakMap,f=t=>(...i)=>{const e=t(...i);return p.set(e,!0),e},g=t=>"function"==typeof t&&p.has(t),v={},m={};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class w{constructor(t,i,e){this.t=[],this.template=t,this.processor=i,this.options=e}update(t){let i=0;for(const e of this.t)void 0!==e&&e.setValue(t[i]),i++;for(const t of this.t)void 0!==t&&t.commit()}_clone(){const i=t?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],s=this.template.parts,n=document.createTreeWalker(i,133,null,!1);let o,r=0,h=0,l=n.nextNode();for(;r<s.length;)if(o=s[r],a(o)){for(;h<o.index;)h++,"TEMPLATE"===l.nodeName&&(e.push(l),n.currentNode=l.content),null===(l=n.nextNode())&&(n.currentNode=e.pop(),l=n.nextNode());if("node"===o.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(l.previousSibling),this.t.push(t)}else this.t.push(...this.processor.handleAttributeExpressions(l,o.name,o.strings,this.options));r++}else this.t.push(void 0),r++;return t&&(document.adoptNode(i),customElements.upgrade(i)),i}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const b=` ${e} `;class y{constructor(t,i,e,s){this.strings=t,this.values=i,this.type=e,this.processor=s}getHTML(){const t=this.strings.length-1;let i="",n=!1;for(let o=0;o<t;o++){const t=this.strings[o],r=t.lastIndexOf("\x3c!--");n=(r>-1||n)&&-1===t.indexOf("--\x3e",r+1);const a=l.exec(t);i+=null===a?t+(n?b:s):t.substr(0,a.index)+a[1]+a[2]+"$lit$"+a[3]+e}return i+=this.strings[t],i}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const x=t=>null===t||!("object"==typeof t||"function"==typeof t),$=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);class k{constructor(t,i,e){this.dirty=!0,this.element=t,this.name=i,this.strings=e,this.parts=[];for(let t=0;t<e.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new S(this)}_getValue(){const t=this.strings,i=t.length-1;let e="";for(let s=0;s<i;s++){e+=t[s];const i=this.parts[s];if(void 0!==i){const t=i.value;if(x(t)||!$(t))e+="string"==typeof t?t:String(t);else for(const i of t)e+="string"==typeof i?i:String(i)}}return e+=t[i],e}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class S{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===v||x(t)&&t===this.value||(this.value=t,g(t)||(this.committer.dirty=!0))}commit(){for(;g(this.value);){const t=this.value;this.value=v,t(this)}this.value!==v&&this.committer.commit()}}class M{constructor(t){this.value=void 0,this.i=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(h()),this.endNode=t.appendChild(h())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.o(this.startNode=h()),t.o(this.endNode=h())}insertAfterPart(t){t.o(this.startNode=h()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.i=t}commit(){if(null===this.startNode.parentNode)return;for(;g(this.i);){const t=this.i;this.i=v,t(this)}const t=this.i;t!==v&&(x(t)?t!==this.value&&this.h(t):t instanceof y?this.l(t):t instanceof Node?this.g(t):$(t)?this.v(t):t===m?(this.value=m,this.clear()):this.h(t))}o(t){this.endNode.parentNode.insertBefore(t,this.endNode)}g(t){this.value!==t&&(this.clear(),this.o(t),this.value=t)}h(t){const i=this.startNode.nextSibling,e="string"==typeof(t=null==t?"":t)?t:String(t);i===this.endNode.previousSibling&&3===i.nodeType?i.data=e:this.g(document.createTextNode(e)),this.value=t}l(t){const i=this.options.templateFactory(t);if(this.value instanceof w&&this.value.template===i)this.value.update(t.values);else{const e=new w(i,t.processor,this.options),s=e._clone();e.update(t.values),this.g(s),this.value=e}}v(t){Array.isArray(this.value)||(this.value=[],this.clear());const i=this.value;let e,s=0;for(const n of t)e=i[s],void 0===e&&(e=new M(this.options),i.push(e),0===s?e.appendIntoPart(this):e.insertAfterPart(i[s-1])),e.setValue(n),e.commit(),s++;s<i.length&&(i.length=s,this.clear(e&&e.endNode))}clear(t=this.startNode){i(this.startNode.parentNode,t.nextSibling,this.endNode)}}class _{constructor(t,i,e){if(this.value=void 0,this.i=void 0,2!==e.length||""!==e[0]||""!==e[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=i,this.strings=e}setValue(t){this.i=t}commit(){for(;g(this.i);){const t=this.i;this.i=v,t(this)}if(this.i===v)return;const t=!!this.i;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.i=v}}class A extends k{constructor(t,i,e){super(t,i,e),this.single=2===e.length&&""===e[0]&&""===e[1]}_createPart(){return new C(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class C extends S{}let O=!1;(()=>{try{const t={get capture(){return O=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class T{constructor(t,i,e){this.value=void 0,this.i=void 0,this.element=t,this.eventName=i,this.eventContext=e,this.m=t=>this.handleEvent(t)}setValue(t){this.i=t}commit(){for(;g(this.i);){const t=this.i;this.i=v,t(this)}if(this.i===v)return;const t=this.i,i=this.value,e=null==t||null!=i&&(t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive),s=null!=t&&(null==i||e);e&&this.element.removeEventListener(this.eventName,this.m,this.$),s&&(this.$=j(t),this.element.addEventListener(this.eventName,this.m,this.$)),this.value=t,this.i=v}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const j=t=>t&&(O?{capture:t.capture,passive:t.passive,once:t.once}:t.capture)
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */;function P(t){let i=E.get(t.type);void 0===i&&(i={stringsArray:new WeakMap,keyString:new Map},E.set(t.type,i));let s=i.stringsArray.get(t.strings);if(void 0!==s)return s;const n=t.strings.join(e);return s=i.keyString.get(n),void 0===s&&(s=new o(t,t.getTemplateElement()),i.keyString.set(n,s)),i.stringsArray.set(t.strings,s),s}const E=new Map,B=new WeakMap;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const z=new
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class{handleAttributeExpressions(t,i,e,s){const n=i[0];if("."===n){return new A(t,i.slice(1),e).parts}return"@"===n?[new T(t,i.slice(1),s.eventContext)]:"?"===n?[new _(t,i.slice(1),e)]:new k(t,i,e).parts}handleTextExpression(t){return new M(t)}};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");const U=(t,...i)=>new y(t,i,"html",z)
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */,F=(t,i)=>`${t}--${i}`;let I=!0;void 0===window.ShadyCSS?I=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),I=!1);const L=t=>i=>{const s=F(i.type,t);let n=E.get(s);void 0===n&&(n={stringsArray:new WeakMap,keyString:new Map},E.set(s,n));let r=n.stringsArray.get(i.strings);if(void 0!==r)return r;const a=i.strings.join(e);if(r=n.keyString.get(a),void 0===r){const e=i.getTemplateElement();I&&window.ShadyCSS.prepareTemplateDom(e,t),r=new o(i,e),n.keyString.set(a,r)}return n.stringsArray.set(i.strings,r),r},N=["html","svg"],V=new Set,R=(t,i,e)=>{V.add(t);const s=e?e.element:document.createElement("template"),n=i.querySelectorAll("style"),{length:o}=n;if(0===o)return void window.ShadyCSS.prepareTemplateStyles(s,t);const r=document.createElement("style");for(let t=0;t<o;t++){const i=n[t];i.parentNode.removeChild(i),r.textContent+=i.textContent}(t=>{N.forEach(i=>{const e=E.get(F(i,t));void 0!==e&&e.keyString.forEach(t=>{const{element:{content:i}}=t,e=new Set;Array.from(i.querySelectorAll("style")).forEach(t=>{e.add(t)}),c(t,e)})})})(t);const a=s.content;e?function(t,i,e=null){const{element:{content:s},parts:n}=t;if(null==e)return void s.appendChild(i);const o=document.createTreeWalker(s,133,null,!1);let r=u(n),a=0,h=-1;for(;o.nextNode();){for(h++,o.currentNode===e&&(a=d(i),e.parentNode.insertBefore(i,e));-1!==r&&n[r].index===h;){if(a>0){for(;-1!==r;)n[r].index+=a,r=u(n,r);return}r=u(n,r)}}}(e,r,a.firstChild):a.insertBefore(r,a.firstChild),window.ShadyCSS.prepareTemplateStyles(s,t);const h=a.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==h)i.insertBefore(h.cloneNode(!0),i.firstChild);else if(e){a.insertBefore(r,a.firstChild);const t=new Set;t.add(r),c(e,t)}};window.JSCompiler_renameProperty=(t,i)=>t;const W={toAttribute(t,i){switch(i){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,i){switch(i){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},G=(t,i)=>i!==t&&(i==i||t==t),q={attribute:!0,type:String,converter:W,reflect:!1,hasChanged:G};class D extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=new Promise(t=>this._enableUpdatingResolver=t),this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach((i,e)=>{const s=this._attributeNameForProperty(e,i);void 0!==s&&(this._attributeToPropertyMap.set(s,e),t.push(s))}),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach((t,i)=>this._classProperties.set(i,t))}}static createProperty(t,i=q){if(this._ensureClassProperties(),this._classProperties.set(t,i),i.noAccessor||this.prototype.hasOwnProperty(t))return;const e="symbol"==typeof t?Symbol():`__${t}`,s=this.getPropertyDescriptor(t,e,i);void 0!==s&&Object.defineProperty(this.prototype,t,s)}static getPropertyDescriptor(t,i,e){return{get(){return this[i]},set(e){const s=this[t];this[i]=e,this._requestUpdate(t,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||q}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty("finalized")||t.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const t=this.properties,i=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const e of i)this.createProperty(e,t[e])}}static _attributeNameForProperty(t,i){const e=i.attribute;return!1===e?void 0:"string"==typeof e?e:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,i,e=G){return e(t,i)}static _propertyValueFromAttribute(t,i){const e=i.type,s=i.converter||W,n="function"==typeof s?s:s.fromAttribute;return n?n(t,e):t}static _propertyValueToAttribute(t,i){if(void 0===i.reflect)return;const e=i.type,s=i.converter;return(s&&s.toAttribute||W.toAttribute)(t,e)}initialize(){this._saveInstanceProperties(),this._requestUpdate()}_saveInstanceProperties(){this.constructor._classProperties.forEach((t,i)=>{if(this.hasOwnProperty(i)){const t=this[i];delete this[i],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(i,t)}})}_applyInstanceProperties(){this._instanceProperties.forEach((t,i)=>this[i]=t),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,i,e){i!==e&&this._attributeToProperty(t,e)}_propertyToAttribute(t,i,e=q){const s=this.constructor,n=s._attributeNameForProperty(t,e);if(void 0!==n){const t=s._propertyValueToAttribute(i,e);if(void 0===t)return;this._updateState=8|this._updateState,null==t?this.removeAttribute(n):this.setAttribute(n,t),this._updateState=-9&this._updateState}}_attributeToProperty(t,i){if(8&this._updateState)return;const e=this.constructor,s=e._attributeToPropertyMap.get(t);if(void 0!==s){const t=e.getPropertyOptions(s);this._updateState=16|this._updateState,this[s]=e._propertyValueFromAttribute(i,t),this._updateState=-17&this._updateState}}_requestUpdate(t,i){let e=!0;if(void 0!==t){const s=this.constructor,n=s.getPropertyOptions(t);s._valueHasChanged(this[t],i,n.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,i),!0!==n.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,n))):e=!1}!this._hasRequestedUpdate&&e&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,i){return this._requestUpdate(t,i),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(t){}const t=this.performUpdate();return null!=t&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){this._instanceProperties&&this._applyInstanceProperties();let t=!1;const i=this._changedProperties;try{t=this.shouldUpdate(i),t?this.update(i):this._markUpdated()}catch(i){throw t=!1,this._markUpdated(),i}t&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(i)),this.updated(i))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((t,i)=>this._propertyToAttribute(i,this[i],t)),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}D.finalized=!0;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const H=t=>i=>"function"==typeof i?((t,i)=>(window.customElements.define(t,i),i))(t,i):((t,i)=>{const{kind:e,elements:s}=i;return{kind:e,elements:s,finisher(i){window.customElements.define(t,i)}}})(t,i),J=(t,i)=>"method"===i.kind&&i.descriptor&&!("value"in i.descriptor)?Object.assign(Object.assign({},i),{finisher(e){e.createProperty(i.key,t)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof i.initializer&&(this[i.key]=i.initializer.call(this))},finisher(e){e.createProperty(i.key,t)}};function K(t){return(i,e)=>void 0!==e?((t,i,e)=>{i.constructor.createProperty(e,t)})(t,i,e):J(t,i)}function Q(t){return(i,e)=>{const s={get(){return this.renderRoot.querySelector(t)},enumerable:!0,configurable:!0};return void 0!==e?Y(s,i,e):X(s,i)}}const Y=(t,i,e)=>{Object.defineProperty(i,e,t)},X=(t,i)=>({kind:"method",placement:"prototype",key:i.key,descriptor:t})
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/,Z="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,tt=Symbol();class it{constructor(t,i){if(i!==tt)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return void 0===this._styleSheet&&(Z?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const et=(t,...i)=>{const e=i.reduce((i,e,s)=>i+(t=>{if(t instanceof it)return t.cssText;if("number"==typeof t)return t;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${t}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(e)+t[s+1],t[0]);return new it(e,tt)};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litElementVersions||(window.litElementVersions=[])).push("2.3.1");const st={};class nt extends D{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(void 0===t)this._styles=[];else if(Array.isArray(t)){const i=(t,e)=>t.reduceRight((t,e)=>Array.isArray(e)?i(e,t):(t.add(e),t),e),e=i(t,new Set),s=[];e.forEach(t=>s.unshift(t)),this._styles=s}else this._styles=[t]}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const t=this.constructor._styles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?Z?this.renderRoot.adoptedStyleSheets=t.map(t=>t.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(t=>t.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(t){const i=this.render();super.update(t),i!==st&&this.constructor.render(i,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(t=>{const i=document.createElement("style");i.textContent=t.cssText,this.renderRoot.appendChild(i)}))}render(){return st}}nt.finalized=!0,nt.render=(t,e,s)=>{if(!s||"object"!=typeof s||!s.scopeName)throw new Error("The `scopeName` option is required.");const n=s.scopeName,o=B.has(e),r=I&&11===e.nodeType&&!!e.host,a=r&&!V.has(n),h=a?document.createDocumentFragment():e;if(((t,e,s)=>{let n=B.get(e);void 0===n&&(i(e,e.firstChild),B.set(e,n=new M(Object.assign({templateFactory:P},s))),n.appendInto(e)),n.setValue(t),n.commit()})(t,h,Object.assign({templateFactory:L(n)},s)),a){const t=B.get(h);B.delete(h);const s=t.value instanceof w?t.value.template:void 0;R(n,h,s),i(e,e.firstChild),e.appendChild(h),B.set(e,t)}!o&&r&&window.ShadyCSS.styleElement(e.host)};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const ot=new WeakMap,rt=f(t=>i=>{if(!(i instanceof M))throw new Error("unsafeHTML can only be used in text bindings");const e=ot.get(i);if(void 0!==e&&x(t)&&t===e.value&&i.value===e.fragment)return;const s=document.createElement("template");s.innerHTML=t;const n=document.importNode(s.content,!0);i.setValue(n),ot.set(i,{value:t,fragment:n})});
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class at{constructor(t){this.classes=new Set,this.changed=!1,this.element=t;const i=(t.getAttribute("class")||"").split(/\s+/);for(const t of i)this.classes.add(t)}add(t){this.classes.add(t),this.changed=!0}remove(t){this.classes.delete(t),this.changed=!0}commit(){if(this.changed){let t="";this.classes.forEach(i=>t+=i+" "),this.element.setAttribute("class",t)}}}const ht=new WeakMap,lt=f(t=>i=>{if(!(i instanceof S)||i instanceof C||"class"!==i.committer.name||i.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");const{committer:e}=i,{element:s}=e;let n=ht.get(i);void 0===n&&(s.setAttribute("class",e.strings.join(" ")),ht.set(i,n=new Set));const o=s.classList||new at(s);n.forEach(i=>{i in t||(o.remove(i),n.delete(i))});for(const i in t){const e=t[i];e!=n.has(i)&&(e?(o.add(i),n.add(i)):(o.remove(i),n.delete(i)))}"function"==typeof o.commit&&o.commit()});function ct(t){var i,e;return"image"===t.post_hint?t.url:null!==(e=null===(i=dt(t))||void 0===i?void 0:i.url)&&void 0!==e?e:""}function dt(t){var i,e,s;const n="image"===t.post_hint;return function(t){return!!t.gallery_data}(t)?function(t){const i=t.gallery_data.items[0],e=t.media_metadata[i.media_id];if(!e)return;let s=e.p.find(t=>t.x>300);s||(s=e.s);if(!s)return;return{url:s.u,width:s.x,height:s.y}}(t):n?null===(i=t.preview)||void 0===i?void 0:i.images[0].source:(null===(e=t.preview)||void 0===e?void 0:e.images[0].resolutions)?null===(s=t.preview)||void 0===s?void 0:s.images[0].source:void 0}function ut(t){return(new DOMParser).parseFromString(t,"text/html").documentElement.textContent}function pt(t){var i;const e=document.createElement("div");e.innerHTML=t;const s=null===(i=e.querySelector(".md"))||void 0===i?void 0:i.firstElementChild;if(s)return s.outerHTML}var ft=function(t,i,e,s){for(var n,o=arguments.length,r=o<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r};let gt=class extends nt{constructor(){super(),this.subreddit&&this.makeQuery()}attributeChangedCallback(t,i,e){"subreddit"===t&&i!==e&&(this.subreddit=e,this.makeQuery(),this.fetchAbout())}async makeQuery(){var t;if(this.data=void 0,!this.subreddit)return;const i=await fetch(`https://www.reddit.com/r/${this.subreddit}.json`,{mode:"cors"}),e=await i.json();this.data=e.data,console.log(null===(t=this.data)||void 0===t?void 0:t.children.map(t=>t.data.title))}async fetchAbout(){if(this.about=void 0,!this.subreddit)return;const t=await fetch(`https://www.reddit.com/r/${this.subreddit}/about.json`,{mode:"cors"}),i=await t.json();this.about=i.data}static get styles(){return et`
      .posts {
        background-color: white;
        color: black;
      }

      .post {
        display: block;
        text-decoration: none;
        color: inherit;
      }

      .post-top {
        display: flex;
        flex-direction: row;
        padding: 12px 16px 0px;
      }

      .sr-icon {
        width: 32px;
        height: 32px;
        flex: none;
        margin-right: 4px;
        border-radius: 50px;
        border: 1px solid rgba(0, 0, 0, 0.2);
      }
      .no-icon {
        background-color: blueviolet;
      }
      .sr {
        flex: auto;
        font-size: 14px;
        line-height: 1em;
      }
      .sr .author {
        color: grey;
        font-size: 12px;
        line-height: 1;
      }
      .join {
        background: transparent;
        color: black;
        border-radius: 50px;
        border: 1.5px solid black;
        flex: none;
        font-weight: bold;
        font-size: 17px;
        line-height: 1em;
        text-align: center;
        text-indent: -3px;
        width: 20px;
        height: 20px;
        cursor: pointer;
      }

      .post-title {
        padding: 8px 16px;
        font-weight: bold;
        font-size: 16px;
      }

      .media {
        display: block;
        width: 100%;
      }

      .selftext {
        padding: 8px 16px;
        font-size: 14px;
        max-width: 100%;
        word-break: break-word;
      }

      .post-bottom {
        padding: 12px 12px 16px;
      }

      .post-bottom img {
        display: inline-block;
        width: 305px;
      }
    `}render(){var t;if(!this.data)return null;console.log(this.data);const i=(null===(t=this.about)||void 0===t?void 0:t.icon_img)||"https://www.redditstatic.com/icon_planet_2x.png";return U`<div class="posts">
      ${this.data.children.filter(t=>!t.data.stickied).map(t=>{var e;const s=t.data,n=ct(s);return U`<a
            class="post"
            target="_blank"
            href="https://reddit.com/${s.id}"
          >
            <div class="post-top">
              <img
                class=${lt({"sr-icon":!0,"no-icon":!(null===(e=this.about)||void 0===e?void 0:e.icon_img)})}
                src="${i}"
              />
              <div class="sr">
                r/${s.subreddit}<br /><span class="author"
                  >u/${s.author}</span
                >
              </div>
              <button class="join" title="join r/${s.subreddit}">+</button>
            </div>
            <div class="post-title">
              ${rt(s.title)}
            </div>
            ${s.selftext_html?U`<div class="selftext">
                  ${rt(ut(s.selftext_html))}
                </div>`:""}
            ${n?rt(`<img class="media" src=${n} />`):""}
            <div class="post-bottom">
              <img src="fake-post-meta.png" />
            </div>
          </a>`})}
    </div>`}};ft([K({attribute:!0,type:String})],gt.prototype,"subreddit",void 0),ft([K({attribute:!0,type:Object})],gt.prototype,"data",void 0),ft([K({attribute:!0,type:Object})],gt.prototype,"about",void 0),gt=ft([H("subreddit-view")],gt);var vt=function(t,i){this.original=t,this.clamped=i};function mt(t,i){var e=window;i||(i={clamp:"auto",truncationChar:"…",splitOnChars:[".","-","–","—"," "]});var s,n,o,r,a={clamp:i.clamp||"auto",splitOnChars:i.splitOnChars||[".","-","–","—"," "],truncationChar:i.truncationChar||"…",truncationHTML:i.truncationHTML},h=a.splitOnChars.slice(0),l=h[0],c=(t.style,t.innerHTML),d=a.clamp,u=d.indexOf&&(d.indexOf("px")>-1||d.indexOf("em")>-1);function p(t,i){return e.getComputedStyle(t).getPropertyValue(i)}function f(i){var e=i||t.clientHeight,s=g(t);return Math.max(Math.floor(e/s),0)}function g(t){var i=p(t,"line-height");return"normal"===i&&(i=1.1*parseFloat(parseFloat(p(t,"font-size")).toFixed(0))),parseFloat(parseFloat(i).toFixed(0))}function v(t){return Math.max(t.scrollHeight,t.clientHeight)-4}function m(i){if(i.lastChild)return i.lastChild.children&&i.lastChild.children.length>0?m(Array.prototype.slice.call(i.children).pop()):i.lastChild&&i.lastChild.nodeValue&&""!==i.lastChild.nodeValue&&i.lastChild.nodeValue!==a.truncationChar?i.lastChild:i.lastChild.nodeValue?i.lastChild&&i.lastChild.parentNode&&i.lastChild.nodeValue===a.truncationChar?(i.lastChild.parentNode.removeChild(i.lastChild),m(t)):i:null!==i.lastChild.firstChild&&i.lastChild.firstChild.nodeValue!==a.truncationChar||!i.lastChild.parentNode||(i.lastChild.parentNode.removeChild(i.lastChild),i.children&&0!==i.children.length||!i.parentNode)?3===i.lastChild.nodeType?i.lastChild:m(i.lastChild):(i.parentNode.removeChild(i),m(t))}function w(t,i){t.nodeValue=i+a.truncationChar}a.truncationHTML&&((o=document.createElement("span")).innerHTML=a.truncationHTML),"auto"===d?d=f().toString():u&&(d=f(parseInt(d,10)).toString());var b,y=(b=Number(d),g(t)*b);return y<v(t)&&(r=function i(e,r){if(e&&r&&e.nodeValue){if(e.nodeValue.trim().endsWith(a.truncationChar)||w(e,e.nodeValue),v(t)<=r)return t.innerHTML;var c=e.nodeValue.replace(a.truncationChar,"");if(s||(l=h.length>0?h.shift():"",s=c.split(l)),s.length>1?(n=s.pop(),w(e,s.join(l))):s=null,o&&(e.nodeValue=e.nodeValue.replace(a.truncationChar,""),t.innerHTML=e.nodeValue+" "+o.innerHTML+a.truncationChar),s){if(t.clientHeight<=r){if(!(h.length>=0&&""!==l))return t.innerHTML;w(e,s.join(l)+l+n),s=null}}else""===l&&(w(e,""),e=m(t),h=a.splitOnChars.slice(0),l=h[0],s=null,n=null);return i(e,r)}}(m(t),y)),new vt(c,r)}var wt=()=>{return et`
  :host {
    --tile-size: 156px;
    --gradient-1: linear-gradient(97.51deg, #ff4400 -7.08%, #ffb330 116.57%);
    --gradient-2: linear-gradient(89.94deg, #c274f0 0%, #f14fb0 100%);
    --gradient-3: linear-gradient(
      89.94deg,
      #51b9ff 0%,
      #7785ff 52.6%,
      #b279ff 73.96%,
      #ff81ed 100%
    );
    --gradient-4: linear-gradient(97.51deg, #048de9 -7.08%, #0fc0d2 116.57%);
    --gradient-5: linear-gradient(71.53deg, #c30d47 20.89%, #fe4301 121.62%);
    --gradient-6: linear-gradient(91.64deg, #f5441f -10.49%, #fc7519 109.75%);
    --gradient-7: linear-gradient(91.64deg, #5b3dc1 -10.49%, #aa48c0 109.75%);
    --gradient-8: linear-gradient(91.64deg, #3353b8 -10.49%, #685cfc 109.75%);
  }
  .grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-auto-rows: calc((var(--tile-size) + 16px) / ${4});
    background-color: #fff;
    padding: 8px;
    /* grid-gap: 16px; */
    grid-auto-flow: dense;
  }

  .post-tile {
    overflow: hidden;
    position: relative;
    cursor: pointer;
    border-radius: 16px;
    margin: 8px;
    color: white;
    box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.15);

    grid-row-end: span 4;
  }

  .post-tile-text {
    display: flex;
    flex-direction: column;
    padding: 16px;
    font-size: 12px;
    line-height: 17px;
    text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25);
    text-overflow: ellipsis;
    margin: 0;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }

  .shim {
    background-color: rgba(0, 0, 0, 0.25);
  }

  .post-text-only .post-tile-text {
    box-shadow: unset;
    background-color: transparent;
  }

  .loader {
    grid-column-end: span 2;
  }

  .post-tile-image {
    background-repeat: no-repeat;
    background-size: cover;
    background-position: top center;
    /* height: var(--tile-size); */
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }
  .post-text-only {
    background-image: var(--gradient-1);
  }

  .post-tile:nth-child(8n).post-text-only {
    background-image: var(--gradient-2);
  }
  .post-tile:nth-child(8n + 1).post-text-only {
    background-image: var(--gradient-3);
  }
  .post-tile:nth-child(8n + 2).post-text-only {
    background-image: var(--gradient-4);
  }
  .post-tile:nth-child(8n + 3).post-text-only {
    background-image: var(--gradient-5);
  }
  .post-tile:nth-child(8n + 4).post-text-only {
    background-image: var(--gradient-6);
  }
  .post-tile:nth-child(8n + 5).post-text-only {
    background-image: var(--gradient-7);
  }
  .post-tile:nth-child(8n + 6).post-text-only {
    background-image: var(--gradient-8);
  }

  .hidden {
    display: none;
  }

  .subreddit {
    font-weight: normal;
    line-height: 1.2em;
    margin-top: 16px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: none;
  }

  .post-text-only .post-tile-text .post-tile-title {
    text-shadow: none;
  }

  .spacer {
    flex: auto;
  }
  .post-tile-title {
    margin: 0;
    font-weight: 600;
    flex: none;
    vertical-align: bottom;
  }

  .post-tile-body {
    margin-top: 8px;
    font-weight: normal;
  }

  .post-tile-large {
    grid-column-end: span 2;
    /* grid-row-end: span 16; */
  }
  ${t=function(t){const i=Array(t);for(var e=0;e<t;e++)i[e]=e;return i}(16).map(t=>`\n    .span${t} {\n      grid-row-end: span ${t};\n    }\n  `).join("\n"),new it(String(t),tt)}

  .md a {
    color: inherit;
  }
`;var t};var bt=function(t,i,e,s){for(var n,o=arguments.length,r=o<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r};let yt=class extends nt{constructor(){super(...arguments),this.isImage=!1,this.showshim=!0,this.showtitle=!0,this.showsubreddit=!0}static get styles(){return wt()}updated(){this.titleElem&&mt(this.titleElem,{clamp:3}),this.bodyElem&&mt(this.bodyElem.firstElementChild,{clamp:5})}render(){return this.post?this._renderText(this.post,this.isImage):""}_renderText(t,i=!1){var e,s,n;const o=null!==(n=pt(null!==(s=ut(null!==(e=t.selftext_html)&&void 0!==e?e:""))&&void 0!==s?s:""))&&void 0!==n?n:"";return U`<div
      class=${lt({"post-tile-text":!0,shim:i&&this.showshim})}
    >
      <h3
        class=${lt({"post-tile-title":!0,hidden:i&&!this.showtitle})}
      >
        ${ut(t.title)}
      </h3>
      ${(null==o?void 0:o.length)?U`<div
            class=${lt({"post-tile-body":!0,hidden:i&&!this.showtitle})}
          >
            ${rt(o)}
          </div>`:""}
      <div class="spacer"></div>
      <div
        class=${lt({subreddit:!0,hidden:i&&!this.showsubreddit})}
      >
        r/${t.subreddit}
      </div>
    </div>`}};bt([K({attribute:!0,type:Object})],yt.prototype,"post",void 0),bt([K({attribute:!0,type:Boolean})],yt.prototype,"isImage",void 0),bt([Q(".post-tile-title")],yt.prototype,"titleElem",void 0),bt([Q(".post-tile-body")],yt.prototype,"bodyElem",void 0),yt=bt([H("tile-text")],yt);var xt=function(t,i,e,s){for(var n,o=arguments.length,r=o<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r};const $t={gaming:"gaming+halo+PS4+rpg+iosgaming+gamingsuggestions+computers+ShouldIbuythisgame+MechanicalKeyboards+Monitors+hardwareswap+OpTicGaming+DotA2+pcmasterrace+GirlGamers+gamecollecting+IndieGaming+Fallout+Games+nintendo+SuggestALaptop+Steam+Competitiveoverwatch+wow+funny",music:'Music+Vaporwave+Guitar+MusicEd+WeAreTheMusicMakers+indieheads+Metal+LetsTalkMusic+DeepIntoYouTube+musictheory+Metalcore+CasualConversation+ListeningHeads+AskReddit+woahdude+composer+poppunkers+anime+ThisIsOurMusic+unpopularopinion+AdviceAnimals+BABYMETAL+gaming+EDM+technology"',sports:"sports+soccer+todayilearned+starcraft+baseball+esports+reddevils+AskReddit+nfl+CFB+nba+hockey+leagueoflegends+ABraThatFits+funny+formula1+MMA+Patriots+gaming+cordcutters+dogecoin+granturismo+Showerthoughts+unpopularopinion+MLS",beauty:"beauty+AsianBeauty+OldSchoolCool+funny+MUAontheCheap+makeupexchange+KoreanBeauty+pics+Porsche+RandomActsofMakeup+MakeupAddiction+disney+BeautyAddiction+BeautyBoxes+AskWomen+succulents+BeautyGuruChatter+beautytalkph+houseplants+aww+ShinyPokemon+cats+gardening+FreeKarma4U+gaming"};let kt=class extends nt{constructor(){super(),this.pending=!1,this.showtitle=!0,this.showsubreddit=!0,this.showshim=!0,this.largeKarmaThreshold=2e4,this.largeCommentThreshold=100,this.loaderRegistered=!1,this.posts=[]}connectedCallback(){super.connectedCallback(),this.makeQuery()}updated(){this.observer||(this.observer=new IntersectionObserver(t=>{var i;console.log({entries:t}),t[0].isIntersecting&&(console.log(`load more ${this.afterId}`),this._loader&&(null===(i=this.observer)||void 0===i||i.unobserve(this._loader)),this.pending||this.makeQuery())},{root:document.querySelector("main"),rootMargin:"100px"})),this._loader&&this.afterId&&setTimeout(()=>{var t;this._loader&&(null===(t=this.observer)||void 0===t||t.observe(this._loader))},1e3)}static get styles(){return wt()}onTileClick(t){this.subreddit=t,this.setAttribute("topic","")}attributeChangedCallback(t,i,e){if(console.log(arguments),"topic"===t&&i!==e)return this.topic=e,void(this.topic&&(this.posts=[],this.afterId=void 0,this.subreddit=void 0,this.makeQuery()));t.includes("show")&&(this[t]="true"===e,this.showshim=this.showsubreddit||this.showtitle)}async makeQuery(){var t,i,e;if(!this.topic)return;if(this.pending)return;this.data=void 0,console.log(this.topic),this.pending=!0;const s=await fetch(`https://www.reddit.com/r/${$t[this.topic]}.json?after=${null!==(t=this.afterId)&&void 0!==t?t:""}`,{mode:"cors"}),n=await s.json();this.pending=!1,this.data=n.data;const o=null!==(e=null===(i=this.data)||void 0===i?void 0:i.children.map(t=>t.data))&&void 0!==e?e:[];console.log(o),this.posts=this.posts.concat(o.filter(t=>"link"!==t.post_hint)),this.afterId=n.data.after}render(){return this.subreddit?U`<subreddit-view
        subreddit=${this.subreddit}
      ></subreddit-view>`:U`
      <div class="grid">
        ${this._renderTiles()}
        ${0===this.posts.length?"":this._renderSpacers()}
      </div>
    `}_renderTiles(){return this.posts.map(t=>!!ct(t)?this._renderMediaTile(t):this._renderTextTile(t))}_renderSpacers(){return U`<div class="post-tile post-text-only span3"></div>
      <div class="post-tile post-text-only span2"></div>
      ${Array(4).fill(1).map(()=>U`<div class="post-tile post-text-only span1"></div>`)}
      <div class="loader"></div>`}_renderMediaTile(t){const i=t.ups>this.largeKarmaThreshold||t.num_comments/t.ups>.1,e=ct(t),s=`url('${e}')`,n=function(t){const i=dt(t);return i?i.height/i.width:1}(t),o=Math.round(4*n)*(i?2:1),r=`span${a=o,h=Math.round(4/3),l=8*(i?2:1),Math.min(Math.max(a,h),l)}`;var a,h,l;return U`<div
      @click=${()=>this.onTileClick(t.subreddit)}
      class=${lt({"post-tile":!0,[r]:!0,"post-tile-large":i})}
    >
      ${e?rt(`<div class="post-tile-image" style="background-image: ${s}" />`):""}
      ${this._renderText(t,!0)}
    </div>`}_renderTextTile(t){const i=t.ups>this.largeKarmaThreshold||t.title.length>100;return U`<div
      @click=${()=>this.onTileClick(t.subreddit)}
      class=${lt({"post-tile":!0,span6:!0,"post-tile-large":i,"post-text-only":!0})}
    >
      ${this._renderText(t,!1)}
    </div>`}_renderText(t,i=!1){return U`<tile-text .post=${t} isImage=${i} />`}_renderTextOld(t,i=!1){var e,s,n;const o=null!==(n=pt(null!==(s=ut(null!==(e=t.selftext_html)&&void 0!==e?e:""))&&void 0!==s?s:""))&&void 0!==n?n:"";return U`<div
      class=${lt({"post-tile-text":!0,shim:i&&this.showshim})}
    >
      <h3
        class=${lt({"post-tile-title":!0,hidden:i&&!this.showtitle})}
      >
        ${t.title}
      </h3>
      ${(null==o?void 0:o.length)?U`<div
            class=${lt({"post-tile-body":!0,hidden:i&&!this.showtitle})}
          >
            ${rt(o.slice(0,200))}
          </div>`:""}
      <div class="spacer"></div>
      <div
        class=${lt({subreddit:!0,hidden:i&&!this.showsubreddit})}
      >
        r/${t.subreddit}
      </div>
    </div>`}};xt([K({attribute:!0,type:String})],kt.prototype,"topic",void 0),xt([K({attribute:!0,type:String})],kt.prototype,"subreddit",void 0),xt([K({attribute:!0,type:Object})],kt.prototype,"data",void 0),xt([K({attribute:!0,type:Boolean})],kt.prototype,"showtitle",void 0),xt([K({attribute:!0,type:Boolean})],kt.prototype,"showsubreddit",void 0),xt([K({attribute:!0,type:Boolean})],kt.prototype,"showshim",void 0),xt([Q(".loader")],kt.prototype,"_loader",void 0),kt=xt([H("explore-page")],kt),async function(){const t=document.querySelector("explore-page");document.querySelectorAll("button.pill").forEach(i=>{i.addEventListener("click",()=>{const e=i.innerHTML.toLowerCase();console.log({topic:e}),t.setAttribute("topic",e)})}),document.querySelectorAll("input.checkbox").forEach(i=>{const e=i;e.addEventListener("change",()=>{const i=e.id||"showSubreddit";console.log(i),t.setAttribute(i,e.checked+"")})})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi9kb20uanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3RlbXBsYXRlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi9tb2RpZnktdGVtcGxhdGUuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL2RpcmVjdGl2ZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvcGFydC5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvdGVtcGxhdGUtaW5zdGFuY2UuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3RlbXBsYXRlLXJlc3VsdC5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvcGFydHMuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3RlbXBsYXRlLWZhY3RvcnkuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3JlbmRlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvZGVmYXVsdC10ZW1wbGF0ZS1wcm9jZXNzb3IuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGl0LWh0bWwuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3NoYWR5LXJlbmRlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtZWxlbWVudC9saWIvdXBkYXRpbmctZWxlbWVudC5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtZWxlbWVudC9saWIvZGVjb3JhdG9ycy5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtZWxlbWVudC9saWIvY3NzLXRhZy5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtZWxlbWVudC9saXQtZWxlbWVudC5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9kaXJlY3RpdmVzL3Vuc2FmZS1odG1sLmpzIiwiLi4vbm9kZV9tb2R1bGVzL2xpdC1odG1sL2RpcmVjdGl2ZXMvY2xhc3MtbWFwLmpzIiwiLi4vbGliL2NvbXBvbmVudHMvaGVscGVycy5qcyIsIi4uL2xpYi9jb21wb25lbnRzL3N1YnJlZGRpdC12aWV3LmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BjbGFtcHktanMvY2xhbXB5L2Rpc3QvY2xhbXB5LmVzNS5qcyIsIi4uL2xpYi9jb21wb25lbnRzL2V4cGxvcmUtc3R5bGVzLmpzIiwiLi4vbGliL2NvbXBvbmVudHMvdHlwZXMuanMiLCIuLi9saWIvY29tcG9uZW50cy90aWxlLXRleHQuanMiLCIuLi9saWIvY29tcG9uZW50cy9leHBsb3JlLXBhZ2UuanMiLCIuLi9saWIvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBUcnVlIGlmIHRoZSBjdXN0b20gZWxlbWVudHMgcG9seWZpbGwgaXMgaW4gdXNlLlxuICovXG5leHBvcnQgY29uc3QgaXNDRVBvbHlmaWxsID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB3aW5kb3cuY3VzdG9tRWxlbWVudHMgIT0gbnVsbCAmJlxuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5wb2x5ZmlsbFdyYXBGbHVzaENhbGxiYWNrICE9PVxuICAgICAgICB1bmRlZmluZWQ7XG4vKipcbiAqIFJlcGFyZW50cyBub2Rlcywgc3RhcnRpbmcgZnJvbSBgc3RhcnRgIChpbmNsdXNpdmUpIHRvIGBlbmRgIChleGNsdXNpdmUpLFxuICogaW50byBhbm90aGVyIGNvbnRhaW5lciAoY291bGQgYmUgdGhlIHNhbWUgY29udGFpbmVyKSwgYmVmb3JlIGBiZWZvcmVgLiBJZlxuICogYGJlZm9yZWAgaXMgbnVsbCwgaXQgYXBwZW5kcyB0aGUgbm9kZXMgdG8gdGhlIGNvbnRhaW5lci5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlcGFyZW50Tm9kZXMgPSAoY29udGFpbmVyLCBzdGFydCwgZW5kID0gbnVsbCwgYmVmb3JlID0gbnVsbCkgPT4ge1xuICAgIHdoaWxlIChzdGFydCAhPT0gZW5kKSB7XG4gICAgICAgIGNvbnN0IG4gPSBzdGFydC5uZXh0U2libGluZztcbiAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShzdGFydCwgYmVmb3JlKTtcbiAgICAgICAgc3RhcnQgPSBuO1xuICAgIH1cbn07XG4vKipcbiAqIFJlbW92ZXMgbm9kZXMsIHN0YXJ0aW5nIGZyb20gYHN0YXJ0YCAoaW5jbHVzaXZlKSB0byBgZW5kYCAoZXhjbHVzaXZlKSwgZnJvbVxuICogYGNvbnRhaW5lcmAuXG4gKi9cbmV4cG9ydCBjb25zdCByZW1vdmVOb2RlcyA9IChjb250YWluZXIsIHN0YXJ0LCBlbmQgPSBudWxsKSA9PiB7XG4gICAgd2hpbGUgKHN0YXJ0ICE9PSBlbmQpIHtcbiAgICAgICAgY29uc3QgbiA9IHN0YXJ0Lm5leHRTaWJsaW5nO1xuICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoc3RhcnQpO1xuICAgICAgICBzdGFydCA9IG47XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvbS5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIEFuIGV4cHJlc3Npb24gbWFya2VyIHdpdGggZW1iZWRkZWQgdW5pcXVlIGtleSB0byBhdm9pZCBjb2xsaXNpb24gd2l0aFxuICogcG9zc2libGUgdGV4dCBpbiB0ZW1wbGF0ZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBtYXJrZXIgPSBge3tsaXQtJHtTdHJpbmcoTWF0aC5yYW5kb20oKSkuc2xpY2UoMil9fX1gO1xuLyoqXG4gKiBBbiBleHByZXNzaW9uIG1hcmtlciB1c2VkIHRleHQtcG9zaXRpb25zLCBtdWx0aS1iaW5kaW5nIGF0dHJpYnV0ZXMsIGFuZFxuICogYXR0cmlidXRlcyB3aXRoIG1hcmt1cC1saWtlIHRleHQgdmFsdWVzLlxuICovXG5leHBvcnQgY29uc3Qgbm9kZU1hcmtlciA9IGA8IS0tJHttYXJrZXJ9LS0+YDtcbmV4cG9ydCBjb25zdCBtYXJrZXJSZWdleCA9IG5ldyBSZWdFeHAoYCR7bWFya2VyfXwke25vZGVNYXJrZXJ9YCk7XG4vKipcbiAqIFN1ZmZpeCBhcHBlbmRlZCB0byBhbGwgYm91bmQgYXR0cmlidXRlIG5hbWVzLlxuICovXG5leHBvcnQgY29uc3QgYm91bmRBdHRyaWJ1dGVTdWZmaXggPSAnJGxpdCQnO1xuLyoqXG4gKiBBbiB1cGRhdGFibGUgVGVtcGxhdGUgdGhhdCB0cmFja3MgdGhlIGxvY2F0aW9uIG9mIGR5bmFtaWMgcGFydHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZSB7XG4gICAgY29uc3RydWN0b3IocmVzdWx0LCBlbGVtZW50KSB7XG4gICAgICAgIHRoaXMucGFydHMgPSBbXTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgY29uc3Qgbm9kZXNUb1JlbW92ZSA9IFtdO1xuICAgICAgICBjb25zdCBzdGFjayA9IFtdO1xuICAgICAgICAvLyBFZGdlIG5lZWRzIGFsbCA0IHBhcmFtZXRlcnMgcHJlc2VudDsgSUUxMSBuZWVkcyAzcmQgcGFyYW1ldGVyIHRvIGJlIG51bGxcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihlbGVtZW50LmNvbnRlbnQsIDEzMyAvKiBOb2RlRmlsdGVyLlNIT1dfe0VMRU1FTlR8Q09NTUVOVHxURVhUfSAqLywgbnVsbCwgZmFsc2UpO1xuICAgICAgICAvLyBLZWVwcyB0cmFjayBvZiB0aGUgbGFzdCBpbmRleCBhc3NvY2lhdGVkIHdpdGggYSBwYXJ0LiBXZSB0cnkgdG8gZGVsZXRlXG4gICAgICAgIC8vIHVubmVjZXNzYXJ5IG5vZGVzLCBidXQgd2UgbmV2ZXIgd2FudCB0byBhc3NvY2lhdGUgdHdvIGRpZmZlcmVudCBwYXJ0c1xuICAgICAgICAvLyB0byB0aGUgc2FtZSBpbmRleC4gVGhleSBtdXN0IGhhdmUgYSBjb25zdGFudCBub2RlIGJldHdlZW4uXG4gICAgICAgIGxldCBsYXN0UGFydEluZGV4ID0gMDtcbiAgICAgICAgbGV0IGluZGV4ID0gLTE7XG4gICAgICAgIGxldCBwYXJ0SW5kZXggPSAwO1xuICAgICAgICBjb25zdCB7IHN0cmluZ3MsIHZhbHVlczogeyBsZW5ndGggfSB9ID0gcmVzdWx0O1xuICAgICAgICB3aGlsZSAocGFydEluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gd2Fsa2VyLm5leHROb2RlKCk7XG4gICAgICAgICAgICBpZiAobm9kZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIFdlJ3ZlIGV4aGF1c3RlZCB0aGUgY29udGVudCBpbnNpZGUgYSBuZXN0ZWQgdGVtcGxhdGUgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAvLyBCZWNhdXNlIHdlIHN0aWxsIGhhdmUgcGFydHMgKHRoZSBvdXRlciBmb3ItbG9vcCksIHdlIGtub3c6XG4gICAgICAgICAgICAgICAgLy8gLSBUaGVyZSBpcyBhIHRlbXBsYXRlIGluIHRoZSBzdGFja1xuICAgICAgICAgICAgICAgIC8vIC0gVGhlIHdhbGtlciB3aWxsIGZpbmQgYSBuZXh0Tm9kZSBvdXRzaWRlIHRoZSB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAxIC8qIE5vZGUuRUxFTUVOVF9OT0RFICovKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuaGFzQXR0cmlidXRlcygpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBub2RlLmF0dHJpYnV0ZXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBhdHRyaWJ1dGVzO1xuICAgICAgICAgICAgICAgICAgICAvLyBQZXJcbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL05hbWVkTm9kZU1hcCxcbiAgICAgICAgICAgICAgICAgICAgLy8gYXR0cmlidXRlcyBhcmUgbm90IGd1YXJhbnRlZWQgdG8gYmUgcmV0dXJuZWQgaW4gZG9jdW1lbnQgb3JkZXIuXG4gICAgICAgICAgICAgICAgICAgIC8vIEluIHBhcnRpY3VsYXIsIEVkZ2UvSUUgY2FuIHJldHVybiB0aGVtIG91dCBvZiBvcmRlciwgc28gd2UgY2Fubm90XG4gICAgICAgICAgICAgICAgICAgIC8vIGFzc3VtZSBhIGNvcnJlc3BvbmRlbmNlIGJldHdlZW4gcGFydCBpbmRleCBhbmQgYXR0cmlidXRlIGluZGV4LlxuICAgICAgICAgICAgICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kc1dpdGgoYXR0cmlidXRlc1tpXS5uYW1lLCBib3VuZEF0dHJpYnV0ZVN1ZmZpeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChjb3VudC0tID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSB0ZW1wbGF0ZSBsaXRlcmFsIHNlY3Rpb24gbGVhZGluZyB1cCB0byB0aGUgZmlyc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4cHJlc3Npb24gaW4gdGhpcyBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmluZ0ZvclBhcnQgPSBzdHJpbmdzW3BhcnRJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGxhc3RBdHRyaWJ1dGVOYW1lUmVnZXguZXhlYyhzdHJpbmdGb3JQYXJ0KVsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIGNvcnJlc3BvbmRpbmcgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBbGwgYm91bmQgYXR0cmlidXRlcyBoYXZlIGhhZCBhIHN1ZmZpeCBhZGRlZCBpblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGVtcGxhdGVSZXN1bHQjZ2V0SFRNTCB0byBvcHQgb3V0IG9mIHNwZWNpYWwgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGluZy4gVG8gbG9vayB1cCB0aGUgYXR0cmlidXRlIHZhbHVlIHdlIGFsc28gbmVlZCB0byBhZGRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBzdWZmaXguXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVMb29rdXBOYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpICsgYm91bmRBdHRyaWJ1dGVTdWZmaXg7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVWYWx1ZSA9IG5vZGUuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZUxvb2t1cE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlTG9va3VwTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGF0aWNzID0gYXR0cmlidXRlVmFsdWUuc3BsaXQobWFya2VyUmVnZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJ0cy5wdXNoKHsgdHlwZTogJ2F0dHJpYnV0ZScsIGluZGV4LCBuYW1lLCBzdHJpbmdzOiBzdGF0aWNzIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFydEluZGV4ICs9IHN0YXRpY3MubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm9kZS50YWdOYW1lID09PSAnVEVNUExBVEUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IG5vZGUuY29udGVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09PSAzIC8qIE5vZGUuVEVYVF9OT0RFICovKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5vZGUuZGF0YTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5pbmRleE9mKG1hcmtlcikgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmluZ3MgPSBkYXRhLnNwbGl0KG1hcmtlclJlZ2V4KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdEluZGV4ID0gc3RyaW5ncy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIG5ldyB0ZXh0IG5vZGUgZm9yIGVhY2ggbGl0ZXJhbCBzZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZXNlIG5vZGVzIGFyZSBhbHNvIHVzZWQgYXMgdGhlIG1hcmtlcnMgZm9yIG5vZGUgcGFydHNcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsYXN0SW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluc2VydDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzID0gc3RyaW5nc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydCA9IGNyZWF0ZU1hcmtlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBsYXN0QXR0cmlidXRlTmFtZVJlZ2V4LmV4ZWMocyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoICE9PSBudWxsICYmIGVuZHNXaXRoKG1hdGNoWzJdLCBib3VuZEF0dHJpYnV0ZVN1ZmZpeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHMuc2xpY2UoMCwgbWF0Y2guaW5kZXgpICsgbWF0Y2hbMV0gK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hbMl0uc2xpY2UoMCwgLWJvdW5kQXR0cmlidXRlU3VmZml4Lmxlbmd0aCkgKyBtYXRjaFszXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGluc2VydCwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnRzLnB1c2goeyB0eXBlOiAnbm9kZScsIGluZGV4OiArK2luZGV4IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlJ3Mgbm8gdGV4dCwgd2UgbXVzdCBpbnNlcnQgYSBjb21tZW50IHRvIG1hcmsgb3VyIHBsYWNlLlxuICAgICAgICAgICAgICAgICAgICAvLyBFbHNlLCB3ZSBjYW4gdHJ1c3QgaXQgd2lsbCBzdGljayBhcm91bmQgYWZ0ZXIgY2xvbmluZy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmluZ3NbbGFzdEluZGV4XSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoY3JlYXRlTWFya2VyKCksIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXNUb1JlbW92ZS5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5kYXRhID0gc3RyaW5nc1tsYXN0SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBwYXJ0IGZvciBlYWNoIG1hdGNoIGZvdW5kXG4gICAgICAgICAgICAgICAgICAgIHBhcnRJbmRleCArPSBsYXN0SW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PT0gOCAvKiBOb2RlLkNPTU1FTlRfTk9ERSAqLykge1xuICAgICAgICAgICAgICAgIGlmIChub2RlLmRhdGEgPT09IG1hcmtlcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCBhIG5ldyBtYXJrZXIgbm9kZSB0byBiZSB0aGUgc3RhcnROb2RlIG9mIHRoZSBQYXJ0IGlmIGFueSBvZlxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZm9sbG93aW5nIGFyZSB0cnVlOlxuICAgICAgICAgICAgICAgICAgICAvLyAgKiBXZSBkb24ndCBoYXZlIGEgcHJldmlvdXNTaWJsaW5nXG4gICAgICAgICAgICAgICAgICAgIC8vICAqIFRoZSBwcmV2aW91c1NpYmxpbmcgaXMgYWxyZWFkeSB0aGUgc3RhcnQgb2YgYSBwcmV2aW91cyBwYXJ0XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLnByZXZpb3VzU2libGluZyA9PT0gbnVsbCB8fCBpbmRleCA9PT0gbGFzdFBhcnRJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoY3JlYXRlTWFya2VyKCksIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxhc3RQYXJ0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJ0cy5wdXNoKHsgdHlwZTogJ25vZGUnLCBpbmRleCB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhIG5leHRTaWJsaW5nLCBrZWVwIHRoaXMgbm9kZSBzbyB3ZSBoYXZlIGFuIGVuZC5cbiAgICAgICAgICAgICAgICAgICAgLy8gRWxzZSwgd2UgY2FuIHJlbW92ZSBpdCB0byBzYXZlIGZ1dHVyZSBjb3N0cy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUubmV4dFNpYmxpbmcgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuZGF0YSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXNUb1JlbW92ZS5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgtLTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwYXJ0SW5kZXgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICgoaSA9IG5vZGUuZGF0YS5pbmRleE9mKG1hcmtlciwgaSArIDEpKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbW1lbnQgbm9kZSBoYXMgYSBiaW5kaW5nIG1hcmtlciBpbnNpZGUsIG1ha2UgYW4gaW5hY3RpdmUgcGFydFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGJpbmRpbmcgd29uJ3Qgd29yaywgYnV0IHN1YnNlcXVlbnQgYmluZGluZ3Mgd2lsbFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyAoanVzdGluZmFnbmFuaSk6IGNvbnNpZGVyIHdoZXRoZXIgaXQncyBldmVuIHdvcnRoIGl0IHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIGJpbmRpbmdzIGluIGNvbW1lbnRzIHdvcmtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFydHMucHVzaCh7IHR5cGU6ICdub2RlJywgaW5kZXg6IC0xIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFydEluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVtb3ZlIHRleHQgYmluZGluZyBub2RlcyBhZnRlciB0aGUgd2FsayB0byBub3QgZGlzdHVyYiB0aGUgVHJlZVdhbGtlclxuICAgICAgICBmb3IgKGNvbnN0IG4gb2Ygbm9kZXNUb1JlbW92ZSkge1xuICAgICAgICAgICAgbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pO1xuICAgICAgICB9XG4gICAgfVxufVxuY29uc3QgZW5kc1dpdGggPSAoc3RyLCBzdWZmaXgpID0+IHtcbiAgICBjb25zdCBpbmRleCA9IHN0ci5sZW5ndGggLSBzdWZmaXgubGVuZ3RoO1xuICAgIHJldHVybiBpbmRleCA+PSAwICYmIHN0ci5zbGljZShpbmRleCkgPT09IHN1ZmZpeDtcbn07XG5leHBvcnQgY29uc3QgaXNUZW1wbGF0ZVBhcnRBY3RpdmUgPSAocGFydCkgPT4gcGFydC5pbmRleCAhPT0gLTE7XG4vLyBBbGxvd3MgYGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJycpYCB0byBiZSByZW5hbWVkIGZvciBhXG4vLyBzbWFsbCBtYW51YWwgc2l6ZS1zYXZpbmdzLlxuZXhwb3J0IGNvbnN0IGNyZWF0ZU1hcmtlciA9ICgpID0+IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJycpO1xuLyoqXG4gKiBUaGlzIHJlZ2V4IGV4dHJhY3RzIHRoZSBhdHRyaWJ1dGUgbmFtZSBwcmVjZWRpbmcgYW4gYXR0cmlidXRlLXBvc2l0aW9uXG4gKiBleHByZXNzaW9uLiBJdCBkb2VzIHRoaXMgYnkgbWF0Y2hpbmcgdGhlIHN5bnRheCBhbGxvd2VkIGZvciBhdHRyaWJ1dGVzXG4gKiBhZ2FpbnN0IHRoZSBzdHJpbmcgbGl0ZXJhbCBkaXJlY3RseSBwcmVjZWRpbmcgdGhlIGV4cHJlc3Npb24sIGFzc3VtaW5nIHRoYXRcbiAqIHRoZSBleHByZXNzaW9uIGlzIGluIGFuIGF0dHJpYnV0ZS12YWx1ZSBwb3NpdGlvbi5cbiAqXG4gKiBTZWUgYXR0cmlidXRlcyBpbiB0aGUgSFRNTCBzcGVjOlxuICogaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L3N5bnRheC5odG1sI2VsZW1lbnRzLWF0dHJpYnV0ZXNcbiAqXG4gKiBcIiBcXHgwOVxceDBhXFx4MGNcXHgwZFwiIGFyZSBIVE1MIHNwYWNlIGNoYXJhY3RlcnM6XG4gKiBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvaW5mcmFzdHJ1Y3R1cmUuaHRtbCNzcGFjZS1jaGFyYWN0ZXJzXG4gKlxuICogXCJcXDAtXFx4MUZcXHg3Ri1cXHg5RlwiIGFyZSBVbmljb2RlIGNvbnRyb2wgY2hhcmFjdGVycywgd2hpY2ggaW5jbHVkZXMgZXZlcnlcbiAqIHNwYWNlIGNoYXJhY3RlciBleGNlcHQgXCIgXCIuXG4gKlxuICogU28gYW4gYXR0cmlidXRlIGlzOlxuICogICogVGhlIG5hbWU6IGFueSBjaGFyYWN0ZXIgZXhjZXB0IGEgY29udHJvbCBjaGFyYWN0ZXIsIHNwYWNlIGNoYXJhY3RlciwgKCcpLFxuICogICAgKFwiKSwgXCI+XCIsIFwiPVwiLCBvciBcIi9cIlxuICogICogRm9sbG93ZWQgYnkgemVybyBvciBtb3JlIHNwYWNlIGNoYXJhY3RlcnNcbiAqICAqIEZvbGxvd2VkIGJ5IFwiPVwiXG4gKiAgKiBGb2xsb3dlZCBieSB6ZXJvIG9yIG1vcmUgc3BhY2UgY2hhcmFjdGVyc1xuICogICogRm9sbG93ZWQgYnk6XG4gKiAgICAqIEFueSBjaGFyYWN0ZXIgZXhjZXB0IHNwYWNlLCAoJyksIChcIiksIFwiPFwiLCBcIj5cIiwgXCI9XCIsIChgKSwgb3JcbiAqICAgICogKFwiKSB0aGVuIGFueSBub24tKFwiKSwgb3JcbiAqICAgICogKCcpIHRoZW4gYW55IG5vbi0oJylcbiAqL1xuZXhwb3J0IGNvbnN0IGxhc3RBdHRyaWJ1dGVOYW1lUmVnZXggPSBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4vKFsgXFx4MDlcXHgwYVxceDBjXFx4MGRdKShbXlxcMC1cXHgxRlxceDdGLVxceDlGIFwiJz49L10rKShbIFxceDA5XFx4MGFcXHgwY1xceDBkXSo9WyBcXHgwOVxceDBhXFx4MGNcXHgwZF0qKD86W14gXFx4MDlcXHgwYVxceDBjXFx4MGRcIidgPD49XSp8XCJbXlwiXSp8J1teJ10qKSkkLztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRlbXBsYXRlLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICogQG1vZHVsZSBzaGFkeS1yZW5kZXJcbiAqL1xuaW1wb3J0IHsgaXNUZW1wbGF0ZVBhcnRBY3RpdmUgfSBmcm9tICcuL3RlbXBsYXRlLmpzJztcbmNvbnN0IHdhbGtlck5vZGVGaWx0ZXIgPSAxMzMgLyogTm9kZUZpbHRlci5TSE9XX3tFTEVNRU5UfENPTU1FTlR8VEVYVH0gKi87XG4vKipcbiAqIFJlbW92ZXMgdGhlIGxpc3Qgb2Ygbm9kZXMgZnJvbSBhIFRlbXBsYXRlIHNhZmVseS4gSW4gYWRkaXRpb24gdG8gcmVtb3ZpbmdcbiAqIG5vZGVzIGZyb20gdGhlIFRlbXBsYXRlLCB0aGUgVGVtcGxhdGUgcGFydCBpbmRpY2VzIGFyZSB1cGRhdGVkIHRvIG1hdGNoXG4gKiB0aGUgbXV0YXRlZCBUZW1wbGF0ZSBET00uXG4gKlxuICogQXMgdGhlIHRlbXBsYXRlIGlzIHdhbGtlZCB0aGUgcmVtb3ZhbCBzdGF0ZSBpcyB0cmFja2VkIGFuZFxuICogcGFydCBpbmRpY2VzIGFyZSBhZGp1c3RlZCBhcyBuZWVkZWQuXG4gKlxuICogZGl2XG4gKiAgIGRpdiMxIChyZW1vdmUpIDwtLSBzdGFydCByZW1vdmluZyAocmVtb3Zpbmcgbm9kZSBpcyBkaXYjMSlcbiAqICAgICBkaXZcbiAqICAgICAgIGRpdiMyIChyZW1vdmUpICA8LS0gY29udGludWUgcmVtb3ZpbmcgKHJlbW92aW5nIG5vZGUgaXMgc3RpbGwgZGl2IzEpXG4gKiAgICAgICAgIGRpdlxuICogZGl2IDwtLSBzdG9wIHJlbW92aW5nIHNpbmNlIHByZXZpb3VzIHNpYmxpbmcgaXMgdGhlIHJlbW92aW5nIG5vZGUgKGRpdiMxLFxuICogcmVtb3ZlZCA0IG5vZGVzKVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlTm9kZXNGcm9tVGVtcGxhdGUodGVtcGxhdGUsIG5vZGVzVG9SZW1vdmUpIHtcbiAgICBjb25zdCB7IGVsZW1lbnQ6IHsgY29udGVudCB9LCBwYXJ0cyB9ID0gdGVtcGxhdGU7XG4gICAgY29uc3Qgd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihjb250ZW50LCB3YWxrZXJOb2RlRmlsdGVyLCBudWxsLCBmYWxzZSk7XG4gICAgbGV0IHBhcnRJbmRleCA9IG5leHRBY3RpdmVJbmRleEluVGVtcGxhdGVQYXJ0cyhwYXJ0cyk7XG4gICAgbGV0IHBhcnQgPSBwYXJ0c1twYXJ0SW5kZXhdO1xuICAgIGxldCBub2RlSW5kZXggPSAtMTtcbiAgICBsZXQgcmVtb3ZlQ291bnQgPSAwO1xuICAgIGNvbnN0IG5vZGVzVG9SZW1vdmVJblRlbXBsYXRlID0gW107XG4gICAgbGV0IGN1cnJlbnRSZW1vdmluZ05vZGUgPSBudWxsO1xuICAgIHdoaWxlICh3YWxrZXIubmV4dE5vZGUoKSkge1xuICAgICAgICBub2RlSW5kZXgrKztcbiAgICAgICAgY29uc3Qgbm9kZSA9IHdhbGtlci5jdXJyZW50Tm9kZTtcbiAgICAgICAgLy8gRW5kIHJlbW92YWwgaWYgc3RlcHBlZCBwYXN0IHRoZSByZW1vdmluZyBub2RlXG4gICAgICAgIGlmIChub2RlLnByZXZpb3VzU2libGluZyA9PT0gY3VycmVudFJlbW92aW5nTm9kZSkge1xuICAgICAgICAgICAgY3VycmVudFJlbW92aW5nTm9kZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQSBub2RlIHRvIHJlbW92ZSB3YXMgZm91bmQgaW4gdGhlIHRlbXBsYXRlXG4gICAgICAgIGlmIChub2Rlc1RvUmVtb3ZlLmhhcyhub2RlKSkge1xuICAgICAgICAgICAgbm9kZXNUb1JlbW92ZUluVGVtcGxhdGUucHVzaChub2RlKTtcbiAgICAgICAgICAgIC8vIFRyYWNrIG5vZGUgd2UncmUgcmVtb3ZpbmdcbiAgICAgICAgICAgIGlmIChjdXJyZW50UmVtb3ZpbmdOb2RlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFJlbW92aW5nTm9kZSA9IG5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hlbiByZW1vdmluZywgaW5jcmVtZW50IGNvdW50IGJ5IHdoaWNoIHRvIGFkanVzdCBzdWJzZXF1ZW50IHBhcnQgaW5kaWNlc1xuICAgICAgICBpZiAoY3VycmVudFJlbW92aW5nTm9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmVtb3ZlQ291bnQrKztcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAocGFydCAhPT0gdW5kZWZpbmVkICYmIHBhcnQuaW5kZXggPT09IG5vZGVJbmRleCkge1xuICAgICAgICAgICAgLy8gSWYgcGFydCBpcyBpbiBhIHJlbW92ZWQgbm9kZSBkZWFjdGl2YXRlIGl0IGJ5IHNldHRpbmcgaW5kZXggdG8gLTEgb3JcbiAgICAgICAgICAgIC8vIGFkanVzdCB0aGUgaW5kZXggYXMgbmVlZGVkLlxuICAgICAgICAgICAgcGFydC5pbmRleCA9IGN1cnJlbnRSZW1vdmluZ05vZGUgIT09IG51bGwgPyAtMSA6IHBhcnQuaW5kZXggLSByZW1vdmVDb3VudDtcbiAgICAgICAgICAgIC8vIGdvIHRvIHRoZSBuZXh0IGFjdGl2ZSBwYXJ0LlxuICAgICAgICAgICAgcGFydEluZGV4ID0gbmV4dEFjdGl2ZUluZGV4SW5UZW1wbGF0ZVBhcnRzKHBhcnRzLCBwYXJ0SW5kZXgpO1xuICAgICAgICAgICAgcGFydCA9IHBhcnRzW3BhcnRJbmRleF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgbm9kZXNUb1JlbW92ZUluVGVtcGxhdGUuZm9yRWFjaCgobikgPT4gbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pKTtcbn1cbmNvbnN0IGNvdW50Tm9kZXMgPSAobm9kZSkgPT4ge1xuICAgIGxldCBjb3VudCA9IChub2RlLm5vZGVUeXBlID09PSAxMSAvKiBOb2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUgKi8pID8gMCA6IDE7XG4gICAgY29uc3Qgd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihub2RlLCB3YWxrZXJOb2RlRmlsdGVyLCBudWxsLCBmYWxzZSk7XG4gICAgd2hpbGUgKHdhbGtlci5uZXh0Tm9kZSgpKSB7XG4gICAgICAgIGNvdW50Kys7XG4gICAgfVxuICAgIHJldHVybiBjb3VudDtcbn07XG5jb25zdCBuZXh0QWN0aXZlSW5kZXhJblRlbXBsYXRlUGFydHMgPSAocGFydHMsIHN0YXJ0SW5kZXggPSAtMSkgPT4ge1xuICAgIGZvciAobGV0IGkgPSBzdGFydEluZGV4ICsgMTsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHBhcnQgPSBwYXJ0c1tpXTtcbiAgICAgICAgaWYgKGlzVGVtcGxhdGVQYXJ0QWN0aXZlKHBhcnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG59O1xuLyoqXG4gKiBJbnNlcnRzIHRoZSBnaXZlbiBub2RlIGludG8gdGhlIFRlbXBsYXRlLCBvcHRpb25hbGx5IGJlZm9yZSB0aGUgZ2l2ZW5cbiAqIHJlZk5vZGUuIEluIGFkZGl0aW9uIHRvIGluc2VydGluZyB0aGUgbm9kZSBpbnRvIHRoZSBUZW1wbGF0ZSwgdGhlIFRlbXBsYXRlXG4gKiBwYXJ0IGluZGljZXMgYXJlIHVwZGF0ZWQgdG8gbWF0Y2ggdGhlIG11dGF0ZWQgVGVtcGxhdGUgRE9NLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zZXJ0Tm9kZUludG9UZW1wbGF0ZSh0ZW1wbGF0ZSwgbm9kZSwgcmVmTm9kZSA9IG51bGwpIHtcbiAgICBjb25zdCB7IGVsZW1lbnQ6IHsgY29udGVudCB9LCBwYXJ0cyB9ID0gdGVtcGxhdGU7XG4gICAgLy8gSWYgdGhlcmUncyBubyByZWZOb2RlLCB0aGVuIHB1dCBub2RlIGF0IGVuZCBvZiB0ZW1wbGF0ZS5cbiAgICAvLyBObyBwYXJ0IGluZGljZXMgbmVlZCB0byBiZSBzaGlmdGVkIGluIHRoaXMgY2FzZS5cbiAgICBpZiAocmVmTm9kZSA9PT0gbnVsbCB8fCByZWZOb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB3YWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKGNvbnRlbnQsIHdhbGtlck5vZGVGaWx0ZXIsIG51bGwsIGZhbHNlKTtcbiAgICBsZXQgcGFydEluZGV4ID0gbmV4dEFjdGl2ZUluZGV4SW5UZW1wbGF0ZVBhcnRzKHBhcnRzKTtcbiAgICBsZXQgaW5zZXJ0Q291bnQgPSAwO1xuICAgIGxldCB3YWxrZXJJbmRleCA9IC0xO1xuICAgIHdoaWxlICh3YWxrZXIubmV4dE5vZGUoKSkge1xuICAgICAgICB3YWxrZXJJbmRleCsrO1xuICAgICAgICBjb25zdCB3YWxrZXJOb2RlID0gd2Fsa2VyLmN1cnJlbnROb2RlO1xuICAgICAgICBpZiAod2Fsa2VyTm9kZSA9PT0gcmVmTm9kZSkge1xuICAgICAgICAgICAgaW5zZXJ0Q291bnQgPSBjb3VudE5vZGVzKG5vZGUpO1xuICAgICAgICAgICAgcmVmTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCByZWZOb2RlKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAocGFydEluZGV4ICE9PSAtMSAmJiBwYXJ0c1twYXJ0SW5kZXhdLmluZGV4ID09PSB3YWxrZXJJbmRleCkge1xuICAgICAgICAgICAgLy8gSWYgd2UndmUgaW5zZXJ0ZWQgdGhlIG5vZGUsIHNpbXBseSBhZGp1c3QgYWxsIHN1YnNlcXVlbnQgcGFydHNcbiAgICAgICAgICAgIGlmIChpbnNlcnRDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAocGFydEluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJ0c1twYXJ0SW5kZXhdLmluZGV4ICs9IGluc2VydENvdW50O1xuICAgICAgICAgICAgICAgICAgICBwYXJ0SW5kZXggPSBuZXh0QWN0aXZlSW5kZXhJblRlbXBsYXRlUGFydHMocGFydHMsIHBhcnRJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnRJbmRleCA9IG5leHRBY3RpdmVJbmRleEluVGVtcGxhdGVQYXJ0cyhwYXJ0cywgcGFydEluZGV4KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vZGlmeS10ZW1wbGF0ZS5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG5jb25zdCBkaXJlY3RpdmVzID0gbmV3IFdlYWtNYXAoKTtcbi8qKlxuICogQnJhbmRzIGEgZnVuY3Rpb24gYXMgYSBkaXJlY3RpdmUgZmFjdG9yeSBmdW5jdGlvbiBzbyB0aGF0IGxpdC1odG1sIHdpbGwgY2FsbFxuICogdGhlIGZ1bmN0aW9uIGR1cmluZyB0ZW1wbGF0ZSByZW5kZXJpbmcsIHJhdGhlciB0aGFuIHBhc3NpbmcgYXMgYSB2YWx1ZS5cbiAqXG4gKiBBIF9kaXJlY3RpdmVfIGlzIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIFBhcnQgYXMgYW4gYXJndW1lbnQuIEl0IGhhcyB0aGVcbiAqIHNpZ25hdHVyZTogYChwYXJ0OiBQYXJ0KSA9PiB2b2lkYC5cbiAqXG4gKiBBIGRpcmVjdGl2ZSBfZmFjdG9yeV8gaXMgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGFyZ3VtZW50cyBmb3IgZGF0YSBhbmRcbiAqIGNvbmZpZ3VyYXRpb24gYW5kIHJldHVybnMgYSBkaXJlY3RpdmUuIFVzZXJzIG9mIGRpcmVjdGl2ZSB1c3VhbGx5IHJlZmVyIHRvXG4gKiB0aGUgZGlyZWN0aXZlIGZhY3RvcnkgYXMgdGhlIGRpcmVjdGl2ZS4gRm9yIGV4YW1wbGUsIFwiVGhlIHJlcGVhdCBkaXJlY3RpdmVcIi5cbiAqXG4gKiBVc3VhbGx5IGEgdGVtcGxhdGUgYXV0aG9yIHdpbGwgaW52b2tlIGEgZGlyZWN0aXZlIGZhY3RvcnkgaW4gdGhlaXIgdGVtcGxhdGVcbiAqIHdpdGggcmVsZXZhbnQgYXJndW1lbnRzLCB3aGljaCB3aWxsIHRoZW4gcmV0dXJuIGEgZGlyZWN0aXZlIGZ1bmN0aW9uLlxuICpcbiAqIEhlcmUncyBhbiBleGFtcGxlIG9mIHVzaW5nIHRoZSBgcmVwZWF0KClgIGRpcmVjdGl2ZSBmYWN0b3J5IHRoYXQgdGFrZXMgYW5cbiAqIGFycmF5IGFuZCBhIGZ1bmN0aW9uIHRvIHJlbmRlciBhbiBpdGVtOlxuICpcbiAqIGBgYGpzXG4gKiBodG1sYDx1bD48JHtyZXBlYXQoaXRlbXMsIChpdGVtKSA9PiBodG1sYDxsaT4ke2l0ZW19PC9saT5gKX08L3VsPmBcbiAqIGBgYFxuICpcbiAqIFdoZW4gYHJlcGVhdGAgaXMgaW52b2tlZCwgaXQgcmV0dXJucyBhIGRpcmVjdGl2ZSBmdW5jdGlvbiB0aGF0IGNsb3NlcyBvdmVyXG4gKiBgaXRlbXNgIGFuZCB0aGUgdGVtcGxhdGUgZnVuY3Rpb24uIFdoZW4gdGhlIG91dGVyIHRlbXBsYXRlIGlzIHJlbmRlcmVkLCB0aGVcbiAqIHJldHVybiBkaXJlY3RpdmUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggdGhlIFBhcnQgZm9yIHRoZSBleHByZXNzaW9uLlxuICogYHJlcGVhdGAgdGhlbiBwZXJmb3JtcyBpdCdzIGN1c3RvbSBsb2dpYyB0byByZW5kZXIgbXVsdGlwbGUgaXRlbXMuXG4gKlxuICogQHBhcmFtIGYgVGhlIGRpcmVjdGl2ZSBmYWN0b3J5IGZ1bmN0aW9uLiBNdXN0IGJlIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFcbiAqIGZ1bmN0aW9uIG9mIHRoZSBzaWduYXR1cmUgYChwYXJ0OiBQYXJ0KSA9PiB2b2lkYC4gVGhlIHJldHVybmVkIGZ1bmN0aW9uIHdpbGxcbiAqIGJlIGNhbGxlZCB3aXRoIHRoZSBwYXJ0IG9iamVjdC5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGltcG9ydCB7ZGlyZWN0aXZlLCBodG1sfSBmcm9tICdsaXQtaHRtbCc7XG4gKlxuICogY29uc3QgaW1tdXRhYmxlID0gZGlyZWN0aXZlKCh2KSA9PiAocGFydCkgPT4ge1xuICogICBpZiAocGFydC52YWx1ZSAhPT0gdikge1xuICogICAgIHBhcnQuc2V0VmFsdWUodilcbiAqICAgfVxuICogfSk7XG4gKi9cbmV4cG9ydCBjb25zdCBkaXJlY3RpdmUgPSAoZikgPT4gKCguLi5hcmdzKSA9PiB7XG4gICAgY29uc3QgZCA9IGYoLi4uYXJncyk7XG4gICAgZGlyZWN0aXZlcy5zZXQoZCwgdHJ1ZSk7XG4gICAgcmV0dXJuIGQ7XG59KTtcbmV4cG9ydCBjb25zdCBpc0RpcmVjdGl2ZSA9IChvKSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBvID09PSAnZnVuY3Rpb24nICYmIGRpcmVjdGl2ZXMuaGFzKG8pO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpcmVjdGl2ZS5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIEEgc2VudGluZWwgdmFsdWUgdGhhdCBzaWduYWxzIHRoYXQgYSB2YWx1ZSB3YXMgaGFuZGxlZCBieSBhIGRpcmVjdGl2ZSBhbmRcbiAqIHNob3VsZCBub3QgYmUgd3JpdHRlbiB0byB0aGUgRE9NLlxuICovXG5leHBvcnQgY29uc3Qgbm9DaGFuZ2UgPSB7fTtcbi8qKlxuICogQSBzZW50aW5lbCB2YWx1ZSB0aGF0IHNpZ25hbHMgYSBOb2RlUGFydCB0byBmdWxseSBjbGVhciBpdHMgY29udGVudC5cbiAqL1xuZXhwb3J0IGNvbnN0IG5vdGhpbmcgPSB7fTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnQuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBAbW9kdWxlIGxpdC1odG1sXG4gKi9cbmltcG9ydCB7IGlzQ0VQb2x5ZmlsbCB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IGlzVGVtcGxhdGVQYXJ0QWN0aXZlIH0gZnJvbSAnLi90ZW1wbGF0ZS5qcyc7XG4vKipcbiAqIEFuIGluc3RhbmNlIG9mIGEgYFRlbXBsYXRlYCB0aGF0IGNhbiBiZSBhdHRhY2hlZCB0byB0aGUgRE9NIGFuZCB1cGRhdGVkXG4gKiB3aXRoIG5ldyB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZUluc3RhbmNlIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZSwgcHJvY2Vzc29yLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX19wYXJ0cyA9IFtdO1xuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgIHRoaXMucHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIH1cbiAgICB1cGRhdGUodmFsdWVzKSB7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHRoaXMuX19wYXJ0cykge1xuICAgICAgICAgICAgaWYgKHBhcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHBhcnQuc2V0VmFsdWUodmFsdWVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgdGhpcy5fX3BhcnRzKSB7XG4gICAgICAgICAgICBpZiAocGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcGFydC5jb21taXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBfY2xvbmUoKSB7XG4gICAgICAgIC8vIFRoZXJlIGFyZSBhIG51bWJlciBvZiBzdGVwcyBpbiB0aGUgbGlmZWN5Y2xlIG9mIGEgdGVtcGxhdGUgaW5zdGFuY2Unc1xuICAgICAgICAvLyBET00gZnJhZ21lbnQ6XG4gICAgICAgIC8vICAxLiBDbG9uZSAtIGNyZWF0ZSB0aGUgaW5zdGFuY2UgZnJhZ21lbnRcbiAgICAgICAgLy8gIDIuIEFkb3B0IC0gYWRvcHQgaW50byB0aGUgbWFpbiBkb2N1bWVudFxuICAgICAgICAvLyAgMy4gUHJvY2VzcyAtIGZpbmQgcGFydCBtYXJrZXJzIGFuZCBjcmVhdGUgcGFydHNcbiAgICAgICAgLy8gIDQuIFVwZ3JhZGUgLSB1cGdyYWRlIGN1c3RvbSBlbGVtZW50c1xuICAgICAgICAvLyAgNS4gVXBkYXRlIC0gc2V0IG5vZGUsIGF0dHJpYnV0ZSwgcHJvcGVydHksIGV0Yy4sIHZhbHVlc1xuICAgICAgICAvLyAgNi4gQ29ubmVjdCAtIGNvbm5lY3QgdG8gdGhlIGRvY3VtZW50LiBPcHRpb25hbCBhbmQgb3V0c2lkZSBvZiB0aGlzXG4gICAgICAgIC8vICAgICBtZXRob2QuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFdlIGhhdmUgYSBmZXcgY29uc3RyYWludHMgb24gdGhlIG9yZGVyaW5nIG9mIHRoZXNlIHN0ZXBzOlxuICAgICAgICAvLyAgKiBXZSBuZWVkIHRvIHVwZ3JhZGUgYmVmb3JlIHVwZGF0aW5nLCBzbyB0aGF0IHByb3BlcnR5IHZhbHVlcyB3aWxsIHBhc3NcbiAgICAgICAgLy8gICAgdGhyb3VnaCBhbnkgcHJvcGVydHkgc2V0dGVycy5cbiAgICAgICAgLy8gICogV2Ugd291bGQgbGlrZSB0byBwcm9jZXNzIGJlZm9yZSB1cGdyYWRpbmcgc28gdGhhdCB3ZSdyZSBzdXJlIHRoYXQgdGhlXG4gICAgICAgIC8vICAgIGNsb25lZCBmcmFnbWVudCBpcyBpbmVydCBhbmQgbm90IGRpc3R1cmJlZCBieSBzZWxmLW1vZGlmeWluZyBET00uXG4gICAgICAgIC8vICAqIFdlIHdhbnQgY3VzdG9tIGVsZW1lbnRzIHRvIHVwZ3JhZGUgZXZlbiBpbiBkaXNjb25uZWN0ZWQgZnJhZ21lbnRzLlxuICAgICAgICAvL1xuICAgICAgICAvLyBHaXZlbiB0aGVzZSBjb25zdHJhaW50cywgd2l0aCBmdWxsIGN1c3RvbSBlbGVtZW50cyBzdXBwb3J0IHdlIHdvdWxkXG4gICAgICAgIC8vIHByZWZlciB0aGUgb3JkZXI6IENsb25lLCBQcm9jZXNzLCBBZG9wdCwgVXBncmFkZSwgVXBkYXRlLCBDb25uZWN0XG4gICAgICAgIC8vXG4gICAgICAgIC8vIEJ1dCBTYWZhcmkgZG9lcyBub3QgaW1wbGVtZW50IEN1c3RvbUVsZW1lbnRSZWdpc3RyeSN1cGdyYWRlLCBzbyB3ZVxuICAgICAgICAvLyBjYW4gbm90IGltcGxlbWVudCB0aGF0IG9yZGVyIGFuZCBzdGlsbCBoYXZlIHVwZ3JhZGUtYmVmb3JlLXVwZGF0ZSBhbmRcbiAgICAgICAgLy8gdXBncmFkZSBkaXNjb25uZWN0ZWQgZnJhZ21lbnRzLiBTbyB3ZSBpbnN0ZWFkIHNhY3JpZmljZSB0aGVcbiAgICAgICAgLy8gcHJvY2Vzcy1iZWZvcmUtdXBncmFkZSBjb25zdHJhaW50LCBzaW5jZSBpbiBDdXN0b20gRWxlbWVudHMgdjEgZWxlbWVudHNcbiAgICAgICAgLy8gbXVzdCBub3QgbW9kaWZ5IHRoZWlyIGxpZ2h0IERPTSBpbiB0aGUgY29uc3RydWN0b3IuIFdlIHN0aWxsIGhhdmUgaXNzdWVzXG4gICAgICAgIC8vIHdoZW4gY28tZXhpc3Rpbmcgd2l0aCBDRXYwIGVsZW1lbnRzIGxpa2UgUG9seW1lciAxLCBhbmQgd2l0aCBwb2x5ZmlsbHNcbiAgICAgICAgLy8gdGhhdCBkb24ndCBzdHJpY3RseSBhZGhlcmUgdG8gdGhlIG5vLW1vZGlmaWNhdGlvbiBydWxlIGJlY2F1c2Ugc2hhZG93XG4gICAgICAgIC8vIERPTSwgd2hpY2ggbWF5IGJlIGNyZWF0ZWQgaW4gdGhlIGNvbnN0cnVjdG9yLCBpcyBlbXVsYXRlZCBieSBiZWluZyBwbGFjZWRcbiAgICAgICAgLy8gaW4gdGhlIGxpZ2h0IERPTS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gVGhlIHJlc3VsdGluZyBvcmRlciBpcyBvbiBuYXRpdmUgaXM6IENsb25lLCBBZG9wdCwgVXBncmFkZSwgUHJvY2VzcyxcbiAgICAgICAgLy8gVXBkYXRlLCBDb25uZWN0LiBkb2N1bWVudC5pbXBvcnROb2RlKCkgcGVyZm9ybXMgQ2xvbmUsIEFkb3B0LCBhbmQgVXBncmFkZVxuICAgICAgICAvLyBpbiBvbmUgc3RlcC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gVGhlIEN1c3RvbSBFbGVtZW50cyB2MSBwb2x5ZmlsbCBzdXBwb3J0cyB1cGdyYWRlKCksIHNvIHRoZSBvcmRlciB3aGVuXG4gICAgICAgIC8vIHBvbHlmaWxsZWQgaXMgdGhlIG1vcmUgaWRlYWw6IENsb25lLCBQcm9jZXNzLCBBZG9wdCwgVXBncmFkZSwgVXBkYXRlLFxuICAgICAgICAvLyBDb25uZWN0LlxuICAgICAgICBjb25zdCBmcmFnbWVudCA9IGlzQ0VQb2x5ZmlsbCA/XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlLmVsZW1lbnQuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkgOlxuICAgICAgICAgICAgZG9jdW1lbnQuaW1wb3J0Tm9kZSh0aGlzLnRlbXBsYXRlLmVsZW1lbnQuY29udGVudCwgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IHN0YWNrID0gW107XG4gICAgICAgIGNvbnN0IHBhcnRzID0gdGhpcy50ZW1wbGF0ZS5wYXJ0cztcbiAgICAgICAgLy8gRWRnZSBuZWVkcyBhbGwgNCBwYXJhbWV0ZXJzIHByZXNlbnQ7IElFMTEgbmVlZHMgM3JkIHBhcmFtZXRlciB0byBiZSBudWxsXG4gICAgICAgIGNvbnN0IHdhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIoZnJhZ21lbnQsIDEzMyAvKiBOb2RlRmlsdGVyLlNIT1dfe0VMRU1FTlR8Q09NTUVOVHxURVhUfSAqLywgbnVsbCwgZmFsc2UpO1xuICAgICAgICBsZXQgcGFydEluZGV4ID0gMDtcbiAgICAgICAgbGV0IG5vZGVJbmRleCA9IDA7XG4gICAgICAgIGxldCBwYXJ0O1xuICAgICAgICBsZXQgbm9kZSA9IHdhbGtlci5uZXh0Tm9kZSgpO1xuICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBub2RlcyBhbmQgcGFydHMgb2YgYSB0ZW1wbGF0ZVxuICAgICAgICB3aGlsZSAocGFydEluZGV4IDwgcGFydHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBwYXJ0ID0gcGFydHNbcGFydEluZGV4XTtcbiAgICAgICAgICAgIGlmICghaXNUZW1wbGF0ZVBhcnRBY3RpdmUocGFydCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fcGFydHMucHVzaCh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIHBhcnRJbmRleCsrO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUHJvZ3Jlc3MgdGhlIHRyZWUgd2Fsa2VyIHVudGlsIHdlIGZpbmQgb3VyIG5leHQgcGFydCdzIG5vZGUuXG4gICAgICAgICAgICAvLyBOb3RlIHRoYXQgbXVsdGlwbGUgcGFydHMgbWF5IHNoYXJlIHRoZSBzYW1lIG5vZGUgKGF0dHJpYnV0ZSBwYXJ0c1xuICAgICAgICAgICAgLy8gb24gYSBzaW5nbGUgZWxlbWVudCksIHNvIHRoaXMgbG9vcCBtYXkgbm90IHJ1biBhdCBhbGwuXG4gICAgICAgICAgICB3aGlsZSAobm9kZUluZGV4IDwgcGFydC5pbmRleCkge1xuICAgICAgICAgICAgICAgIG5vZGVJbmRleCsrO1xuICAgICAgICAgICAgICAgIGlmIChub2RlLm5vZGVOYW1lID09PSAnVEVNUExBVEUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IG5vZGUuY29udGVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChub2RlID0gd2Fsa2VyLm5leHROb2RlKCkpID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlJ3ZlIGV4aGF1c3RlZCB0aGUgY29udGVudCBpbnNpZGUgYSBuZXN0ZWQgdGVtcGxhdGUgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAgICAgLy8gQmVjYXVzZSB3ZSBzdGlsbCBoYXZlIHBhcnRzICh0aGUgb3V0ZXIgZm9yLWxvb3ApLCB3ZSBrbm93OlxuICAgICAgICAgICAgICAgICAgICAvLyAtIFRoZXJlIGlzIGEgdGVtcGxhdGUgaW4gdGhlIHN0YWNrXG4gICAgICAgICAgICAgICAgICAgIC8vIC0gVGhlIHdhbGtlciB3aWxsIGZpbmQgYSBuZXh0Tm9kZSBvdXRzaWRlIHRoZSB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IHdhbGtlci5uZXh0Tm9kZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdlJ3ZlIGFycml2ZWQgYXQgb3VyIHBhcnQncyBub2RlLlxuICAgICAgICAgICAgaWYgKHBhcnQudHlwZSA9PT0gJ25vZGUnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFydCA9IHRoaXMucHJvY2Vzc29yLmhhbmRsZVRleHRFeHByZXNzaW9uKHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcGFydC5pbnNlcnRBZnRlck5vZGUobm9kZS5wcmV2aW91c1NpYmxpbmcpO1xuICAgICAgICAgICAgICAgIHRoaXMuX19wYXJ0cy5wdXNoKHBhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX3BhcnRzLnB1c2goLi4udGhpcy5wcm9jZXNzb3IuaGFuZGxlQXR0cmlidXRlRXhwcmVzc2lvbnMobm9kZSwgcGFydC5uYW1lLCBwYXJ0LnN0cmluZ3MsIHRoaXMub3B0aW9ucykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFydEluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQ0VQb2x5ZmlsbCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRvcHROb2RlKGZyYWdtZW50KTtcbiAgICAgICAgICAgIGN1c3RvbUVsZW1lbnRzLnVwZ3JhZGUoZnJhZ21lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmcmFnbWVudDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10ZW1wbGF0ZS1pbnN0YW5jZS5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIEBtb2R1bGUgbGl0LWh0bWxcbiAqL1xuaW1wb3J0IHsgcmVwYXJlbnROb2RlcyB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IGJvdW5kQXR0cmlidXRlU3VmZml4LCBsYXN0QXR0cmlidXRlTmFtZVJlZ2V4LCBtYXJrZXIsIG5vZGVNYXJrZXIgfSBmcm9tICcuL3RlbXBsYXRlLmpzJztcbmNvbnN0IGNvbW1lbnRNYXJrZXIgPSBgICR7bWFya2VyfSBgO1xuLyoqXG4gKiBUaGUgcmV0dXJuIHR5cGUgb2YgYGh0bWxgLCB3aGljaCBob2xkcyBhIFRlbXBsYXRlIGFuZCB0aGUgdmFsdWVzIGZyb21cbiAqIGludGVycG9sYXRlZCBleHByZXNzaW9ucy5cbiAqL1xuZXhwb3J0IGNsYXNzIFRlbXBsYXRlUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3RvcihzdHJpbmdzLCB2YWx1ZXMsIHR5cGUsIHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLnN0cmluZ3MgPSBzdHJpbmdzO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlcztcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5wcm9jZXNzb3IgPSBwcm9jZXNzb3I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgb2YgSFRNTCB1c2VkIHRvIGNyZWF0ZSBhIGA8dGVtcGxhdGU+YCBlbGVtZW50LlxuICAgICAqL1xuICAgIGdldEhUTUwoKSB7XG4gICAgICAgIGNvbnN0IGwgPSB0aGlzLnN0cmluZ3MubGVuZ3RoIC0gMTtcbiAgICAgICAgbGV0IGh0bWwgPSAnJztcbiAgICAgICAgbGV0IGlzQ29tbWVudEJpbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLnN0cmluZ3NbaV07XG4gICAgICAgICAgICAvLyBGb3IgZWFjaCBiaW5kaW5nIHdlIHdhbnQgdG8gZGV0ZXJtaW5lIHRoZSBraW5kIG9mIG1hcmtlciB0byBpbnNlcnRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIHRlbXBsYXRlIHNvdXJjZSBiZWZvcmUgaXQncyBwYXJzZWQgYnkgdGhlIGJyb3dzZXIncyBIVE1MXG4gICAgICAgICAgICAvLyBwYXJzZXIuIFRoZSBtYXJrZXIgdHlwZSBpcyBiYXNlZCBvbiB3aGV0aGVyIHRoZSBleHByZXNzaW9uIGlzIGluIGFuXG4gICAgICAgICAgICAvLyBhdHRyaWJ1dGUsIHRleHQsIG9yIGNvbW1lbnQgcG9zaXRpb24uXG4gICAgICAgICAgICAvLyAgICogRm9yIG5vZGUtcG9zaXRpb24gYmluZGluZ3Mgd2UgaW5zZXJ0IGEgY29tbWVudCB3aXRoIHRoZSBtYXJrZXJcbiAgICAgICAgICAgIC8vICAgICBzZW50aW5lbCBhcyBpdHMgdGV4dCBjb250ZW50LCBsaWtlIDwhLS17e2xpdC1ndWlkfX0tLT4uXG4gICAgICAgICAgICAvLyAgICogRm9yIGF0dHJpYnV0ZSBiaW5kaW5ncyB3ZSBpbnNlcnQganVzdCB0aGUgbWFya2VyIHNlbnRpbmVsIGZvciB0aGVcbiAgICAgICAgICAgIC8vICAgICBmaXJzdCBiaW5kaW5nLCBzbyB0aGF0IHdlIHN1cHBvcnQgdW5xdW90ZWQgYXR0cmlidXRlIGJpbmRpbmdzLlxuICAgICAgICAgICAgLy8gICAgIFN1YnNlcXVlbnQgYmluZGluZ3MgY2FuIHVzZSBhIGNvbW1lbnQgbWFya2VyIGJlY2F1c2UgbXVsdGktYmluZGluZ1xuICAgICAgICAgICAgLy8gICAgIGF0dHJpYnV0ZXMgbXVzdCBiZSBxdW90ZWQuXG4gICAgICAgICAgICAvLyAgICogRm9yIGNvbW1lbnQgYmluZGluZ3Mgd2UgaW5zZXJ0IGp1c3QgdGhlIG1hcmtlciBzZW50aW5lbCBzbyB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gICAgIGNsb3NlIHRoZSBjb21tZW50LlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgY29kZSBzY2FucyB0aGUgdGVtcGxhdGUgc291cmNlLCBidXQgaXMgKm5vdCogYW4gSFRNTFxuICAgICAgICAgICAgLy8gcGFyc2VyLiBXZSBkb24ndCBuZWVkIHRvIHRyYWNrIHRoZSB0cmVlIHN0cnVjdHVyZSBvZiB0aGUgSFRNTCwgb25seVxuICAgICAgICAgICAgLy8gd2hldGhlciBhIGJpbmRpbmcgaXMgaW5zaWRlIGEgY29tbWVudCwgYW5kIGlmIG5vdCwgaWYgaXQgYXBwZWFycyB0byBiZVxuICAgICAgICAgICAgLy8gdGhlIGZpcnN0IGJpbmRpbmcgaW4gYW4gYXR0cmlidXRlLlxuICAgICAgICAgICAgY29uc3QgY29tbWVudE9wZW4gPSBzLmxhc3RJbmRleE9mKCc8IS0tJyk7XG4gICAgICAgICAgICAvLyBXZSdyZSBpbiBjb21tZW50IHBvc2l0aW9uIGlmIHdlIGhhdmUgYSBjb21tZW50IG9wZW4gd2l0aCBubyBmb2xsb3dpbmdcbiAgICAgICAgICAgIC8vIGNvbW1lbnQgY2xvc2UuIEJlY2F1c2UgPC0tIGNhbiBhcHBlYXIgaW4gYW4gYXR0cmlidXRlIHZhbHVlIHRoZXJlIGNhblxuICAgICAgICAgICAgLy8gYmUgZmFsc2UgcG9zaXRpdmVzLlxuICAgICAgICAgICAgaXNDb21tZW50QmluZGluZyA9IChjb21tZW50T3BlbiA+IC0xIHx8IGlzQ29tbWVudEJpbmRpbmcpICYmXG4gICAgICAgICAgICAgICAgcy5pbmRleE9mKCctLT4nLCBjb21tZW50T3BlbiArIDEpID09PSAtMTtcbiAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB3ZSBoYXZlIGFuIGF0dHJpYnV0ZS1saWtlIHNlcXVlbmNlIHByZWNlZGluZyB0aGVcbiAgICAgICAgICAgIC8vIGV4cHJlc3Npb24uIFRoaXMgY2FuIG1hdGNoIFwibmFtZT12YWx1ZVwiIGxpa2Ugc3RydWN0dXJlcyBpbiB0ZXh0LFxuICAgICAgICAgICAgLy8gY29tbWVudHMsIGFuZCBhdHRyaWJ1dGUgdmFsdWVzLCBzbyB0aGVyZSBjYW4gYmUgZmFsc2UtcG9zaXRpdmVzLlxuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlTWF0Y2ggPSBsYXN0QXR0cmlidXRlTmFtZVJlZ2V4LmV4ZWMocyk7XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlTWF0Y2ggPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSdyZSBvbmx5IGluIHRoaXMgYnJhbmNoIGlmIHdlIGRvbid0IGhhdmUgYSBhdHRyaWJ1dGUtbGlrZVxuICAgICAgICAgICAgICAgIC8vIHByZWNlZGluZyBzZXF1ZW5jZS4gRm9yIGNvbW1lbnRzLCB0aGlzIGd1YXJkcyBhZ2FpbnN0IHVudXN1YWxcbiAgICAgICAgICAgICAgICAvLyBhdHRyaWJ1dGUgdmFsdWVzIGxpa2UgPGRpdiBmb289XCI8IS0tJHsnYmFyJ31cIj4uIENhc2VzIGxpa2VcbiAgICAgICAgICAgICAgICAvLyA8IS0tIGZvbz0keydiYXInfS0tPiBhcmUgaGFuZGxlZCBjb3JyZWN0bHkgaW4gdGhlIGF0dHJpYnV0ZSBicmFuY2hcbiAgICAgICAgICAgICAgICAvLyBiZWxvdy5cbiAgICAgICAgICAgICAgICBodG1sICs9IHMgKyAoaXNDb21tZW50QmluZGluZyA/IGNvbW1lbnRNYXJrZXIgOiBub2RlTWFya2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEZvciBhdHRyaWJ1dGVzIHdlIHVzZSBqdXN0IGEgbWFya2VyIHNlbnRpbmVsLCBhbmQgYWxzbyBhcHBlbmQgYVxuICAgICAgICAgICAgICAgIC8vICRsaXQkIHN1ZmZpeCB0byB0aGUgbmFtZSB0byBvcHQtb3V0IG9mIGF0dHJpYnV0ZS1zcGVjaWZpYyBwYXJzaW5nXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBJRSBhbmQgRWRnZSBkbyBmb3Igc3R5bGUgYW5kIGNlcnRhaW4gU1ZHIGF0dHJpYnV0ZXMuXG4gICAgICAgICAgICAgICAgaHRtbCArPSBzLnN1YnN0cigwLCBhdHRyaWJ1dGVNYXRjaC5pbmRleCkgKyBhdHRyaWJ1dGVNYXRjaFsxXSArXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZU1hdGNoWzJdICsgYm91bmRBdHRyaWJ1dGVTdWZmaXggKyBhdHRyaWJ1dGVNYXRjaFszXSArXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBodG1sICs9IHRoaXMuc3RyaW5nc1tsXTtcbiAgICAgICAgcmV0dXJuIGh0bWw7XG4gICAgfVxuICAgIGdldFRlbXBsYXRlRWxlbWVudCgpIHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuICAgICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSB0aGlzLmdldEhUTUwoKTtcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlO1xuICAgIH1cbn1cbi8qKlxuICogQSBUZW1wbGF0ZVJlc3VsdCBmb3IgU1ZHIGZyYWdtZW50cy5cbiAqXG4gKiBUaGlzIGNsYXNzIHdyYXBzIEhUTUwgaW4gYW4gYDxzdmc+YCB0YWcgaW4gb3JkZXIgdG8gcGFyc2UgaXRzIGNvbnRlbnRzIGluIHRoZVxuICogU1ZHIG5hbWVzcGFjZSwgdGhlbiBtb2RpZmllcyB0aGUgdGVtcGxhdGUgdG8gcmVtb3ZlIHRoZSBgPHN2Zz5gIHRhZyBzbyB0aGF0XG4gKiBjbG9uZXMgb25seSBjb250YWluZXIgdGhlIG9yaWdpbmFsIGZyYWdtZW50LlxuICovXG5leHBvcnQgY2xhc3MgU1ZHVGVtcGxhdGVSZXN1bHQgZXh0ZW5kcyBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgZ2V0SFRNTCgpIHtcbiAgICAgICAgcmV0dXJuIGA8c3ZnPiR7c3VwZXIuZ2V0SFRNTCgpfTwvc3ZnPmA7XG4gICAgfVxuICAgIGdldFRlbXBsYXRlRWxlbWVudCgpIHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBzdXBlci5nZXRUZW1wbGF0ZUVsZW1lbnQoKTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IHRlbXBsYXRlLmNvbnRlbnQ7XG4gICAgICAgIGNvbnN0IHN2Z0VsZW1lbnQgPSBjb250ZW50LmZpcnN0Q2hpbGQ7XG4gICAgICAgIGNvbnRlbnQucmVtb3ZlQ2hpbGQoc3ZnRWxlbWVudCk7XG4gICAgICAgIHJlcGFyZW50Tm9kZXMoY29udGVudCwgc3ZnRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRlbXBsYXRlLXJlc3VsdC5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIEBtb2R1bGUgbGl0LWh0bWxcbiAqL1xuaW1wb3J0IHsgaXNEaXJlY3RpdmUgfSBmcm9tICcuL2RpcmVjdGl2ZS5qcyc7XG5pbXBvcnQgeyByZW1vdmVOb2RlcyB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IG5vQ2hhbmdlLCBub3RoaW5nIH0gZnJvbSAnLi9wYXJ0LmpzJztcbmltcG9ydCB7IFRlbXBsYXRlSW5zdGFuY2UgfSBmcm9tICcuL3RlbXBsYXRlLWluc3RhbmNlLmpzJztcbmltcG9ydCB7IFRlbXBsYXRlUmVzdWx0IH0gZnJvbSAnLi90ZW1wbGF0ZS1yZXN1bHQuanMnO1xuaW1wb3J0IHsgY3JlYXRlTWFya2VyIH0gZnJvbSAnLi90ZW1wbGF0ZS5qcyc7XG5leHBvcnQgY29uc3QgaXNQcmltaXRpdmUgPSAodmFsdWUpID0+IHtcbiAgICByZXR1cm4gKHZhbHVlID09PSBudWxsIHx8XG4gICAgICAgICEodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpKTtcbn07XG5leHBvcnQgY29uc3QgaXNJdGVyYWJsZSA9ICh2YWx1ZSkgPT4ge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSB8fFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAhISh2YWx1ZSAmJiB2YWx1ZVtTeW1ib2wuaXRlcmF0b3JdKTtcbn07XG4vKipcbiAqIFdyaXRlcyBhdHRyaWJ1dGUgdmFsdWVzIHRvIHRoZSBET00gZm9yIGEgZ3JvdXAgb2YgQXR0cmlidXRlUGFydHMgYm91bmQgdG8gYVxuICogc2luZ2xlIGF0dHJpYnV0ZS4gVGhlIHZhbHVlIGlzIG9ubHkgc2V0IG9uY2UgZXZlbiBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgcGFydHNcbiAqIGZvciBhbiBhdHRyaWJ1dGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBBdHRyaWJ1dGVDb21taXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIG5hbWUsIHN0cmluZ3MpIHtcbiAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuc3RyaW5ncyA9IHN0cmluZ3M7XG4gICAgICAgIHRoaXMucGFydHMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmdzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5wYXJ0c1tpXSA9IHRoaXMuX2NyZWF0ZVBhcnQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2luZ2xlIHBhcnQuIE92ZXJyaWRlIHRoaXMgdG8gY3JlYXRlIGEgZGlmZmVybnQgdHlwZSBvZiBwYXJ0LlxuICAgICAqL1xuICAgIF9jcmVhdGVQYXJ0KCkge1xuICAgICAgICByZXR1cm4gbmV3IEF0dHJpYnV0ZVBhcnQodGhpcyk7XG4gICAgfVxuICAgIF9nZXRWYWx1ZSgpIHtcbiAgICAgICAgY29uc3Qgc3RyaW5ncyA9IHRoaXMuc3RyaW5ncztcbiAgICAgICAgY29uc3QgbCA9IHN0cmluZ3MubGVuZ3RoIC0gMTtcbiAgICAgICAgbGV0IHRleHQgPSAnJztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHRleHQgKz0gc3RyaW5nc1tpXTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnQgPSB0aGlzLnBhcnRzW2ldO1xuICAgICAgICAgICAgaWYgKHBhcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHYgPSBwYXJ0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChpc1ByaW1pdGl2ZSh2KSB8fCAhaXNJdGVyYWJsZSh2KSkge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IHR5cGVvZiB2ID09PSAnc3RyaW5nJyA/IHYgOiBTdHJpbmcodik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygdikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSB0eXBlb2YgdCA9PT0gJ3N0cmluZycgPyB0IDogU3RyaW5nKHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRleHQgKz0gc3RyaW5nc1tsXTtcbiAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfVxuICAgIGNvbW1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlydHkpIHtcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUodGhpcy5uYW1lLCB0aGlzLl9nZXRWYWx1ZSgpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQSBQYXJ0IHRoYXQgY29udHJvbHMgYWxsIG9yIHBhcnQgb2YgYW4gYXR0cmlidXRlIHZhbHVlLlxuICovXG5leHBvcnQgY2xhc3MgQXR0cmlidXRlUGFydCB7XG4gICAgY29uc3RydWN0b3IoY29tbWl0dGVyKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuY29tbWl0dGVyID0gY29tbWl0dGVyO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgIT09IG5vQ2hhbmdlICYmICghaXNQcmltaXRpdmUodmFsdWUpIHx8IHZhbHVlICE9PSB0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgLy8gSWYgdGhlIHZhbHVlIGlzIGEgbm90IGEgZGlyZWN0aXZlLCBkaXJ0eSB0aGUgY29tbWl0dGVyIHNvIHRoYXQgaXQnbGxcbiAgICAgICAgICAgIC8vIGNhbGwgc2V0QXR0cmlidXRlLiBJZiB0aGUgdmFsdWUgaXMgYSBkaXJlY3RpdmUsIGl0J2xsIGRpcnR5IHRoZVxuICAgICAgICAgICAgLy8gY29tbWl0dGVyIGlmIGl0IGNhbGxzIHNldFZhbHVlKCkuXG4gICAgICAgICAgICBpZiAoIWlzRGlyZWN0aXZlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWl0dGVyLmRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21taXQoKSB7XG4gICAgICAgIHdoaWxlIChpc0RpcmVjdGl2ZSh0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0aXZlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBub0NoYW5nZTtcbiAgICAgICAgICAgIGRpcmVjdGl2ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gbm9DaGFuZ2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbW1pdHRlci5jb21taXQoKTtcbiAgICB9XG59XG4vKipcbiAqIEEgUGFydCB0aGF0IGNvbnRyb2xzIGEgbG9jYXRpb24gd2l0aGluIGEgTm9kZSB0cmVlLiBMaWtlIGEgUmFuZ2UsIE5vZGVQYXJ0XG4gKiBoYXMgc3RhcnQgYW5kIGVuZCBsb2NhdGlvbnMgYW5kIGNhbiBzZXQgYW5kIHVwZGF0ZSB0aGUgTm9kZXMgYmV0d2VlbiB0aG9zZVxuICogbG9jYXRpb25zLlxuICpcbiAqIE5vZGVQYXJ0cyBzdXBwb3J0IHNldmVyYWwgdmFsdWUgdHlwZXM6IHByaW1pdGl2ZXMsIE5vZGVzLCBUZW1wbGF0ZVJlc3VsdHMsXG4gKiBhcyB3ZWxsIGFzIGFycmF5cyBhbmQgaXRlcmFibGVzIG9mIHRob3NlIHR5cGVzLlxuICovXG5leHBvcnQgY2xhc3MgTm9kZVBhcnQge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwZW5kcyB0aGlzIHBhcnQgaW50byBhIGNvbnRhaW5lci5cbiAgICAgKlxuICAgICAqIFRoaXMgcGFydCBtdXN0IGJlIGVtcHR5LCBhcyBpdHMgY29udGVudHMgYXJlIG5vdCBhdXRvbWF0aWNhbGx5IG1vdmVkLlxuICAgICAqL1xuICAgIGFwcGVuZEludG8oY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuc3RhcnROb2RlID0gY29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZU1hcmtlcigpKTtcbiAgICAgICAgdGhpcy5lbmROb2RlID0gY29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZU1hcmtlcigpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5zZXJ0cyB0aGlzIHBhcnQgYWZ0ZXIgdGhlIGByZWZgIG5vZGUgKGJldHdlZW4gYHJlZmAgYW5kIGByZWZgJ3MgbmV4dFxuICAgICAqIHNpYmxpbmcpLiBCb3RoIGByZWZgIGFuZCBpdHMgbmV4dCBzaWJsaW5nIG11c3QgYmUgc3RhdGljLCB1bmNoYW5naW5nIG5vZGVzXG4gICAgICogc3VjaCBhcyB0aG9zZSB0aGF0IGFwcGVhciBpbiBhIGxpdGVyYWwgc2VjdGlvbiBvZiBhIHRlbXBsYXRlLlxuICAgICAqXG4gICAgICogVGhpcyBwYXJ0IG11c3QgYmUgZW1wdHksIGFzIGl0cyBjb250ZW50cyBhcmUgbm90IGF1dG9tYXRpY2FsbHkgbW92ZWQuXG4gICAgICovXG4gICAgaW5zZXJ0QWZ0ZXJOb2RlKHJlZikge1xuICAgICAgICB0aGlzLnN0YXJ0Tm9kZSA9IHJlZjtcbiAgICAgICAgdGhpcy5lbmROb2RlID0gcmVmLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBlbmRzIHRoaXMgcGFydCBpbnRvIGEgcGFyZW50IHBhcnQuXG4gICAgICpcbiAgICAgKiBUaGlzIHBhcnQgbXVzdCBiZSBlbXB0eSwgYXMgaXRzIGNvbnRlbnRzIGFyZSBub3QgYXV0b21hdGljYWxseSBtb3ZlZC5cbiAgICAgKi9cbiAgICBhcHBlbmRJbnRvUGFydChwYXJ0KSB7XG4gICAgICAgIHBhcnQuX19pbnNlcnQodGhpcy5zdGFydE5vZGUgPSBjcmVhdGVNYXJrZXIoKSk7XG4gICAgICAgIHBhcnQuX19pbnNlcnQodGhpcy5lbmROb2RlID0gY3JlYXRlTWFya2VyKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnNlcnRzIHRoaXMgcGFydCBhZnRlciB0aGUgYHJlZmAgcGFydC5cbiAgICAgKlxuICAgICAqIFRoaXMgcGFydCBtdXN0IGJlIGVtcHR5LCBhcyBpdHMgY29udGVudHMgYXJlIG5vdCBhdXRvbWF0aWNhbGx5IG1vdmVkLlxuICAgICAqL1xuICAgIGluc2VydEFmdGVyUGFydChyZWYpIHtcbiAgICAgICAgcmVmLl9faW5zZXJ0KHRoaXMuc3RhcnROb2RlID0gY3JlYXRlTWFya2VyKCkpO1xuICAgICAgICB0aGlzLmVuZE5vZGUgPSByZWYuZW5kTm9kZTtcbiAgICAgICAgcmVmLmVuZE5vZGUgPSB0aGlzLnN0YXJ0Tm9kZTtcbiAgICB9XG4gICAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBjb21taXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0Tm9kZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGlzRGlyZWN0aXZlKHRoaXMuX19wZW5kaW5nVmFsdWUpKSB7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3RpdmUgPSB0aGlzLl9fcGVuZGluZ1ZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IG5vQ2hhbmdlO1xuICAgICAgICAgICAgZGlyZWN0aXZlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5fX3BlbmRpbmdWYWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlID09PSBub0NoYW5nZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1ByaW1pdGl2ZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX19jb21taXRUZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFRlbXBsYXRlUmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLl9fY29tbWl0VGVtcGxhdGVSZXN1bHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgTm9kZSkge1xuICAgICAgICAgICAgdGhpcy5fX2NvbW1pdE5vZGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzSXRlcmFibGUodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLl9fY29tbWl0SXRlcmFibGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSBub3RoaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gbm90aGluZztcbiAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrLCB3aWxsIHJlbmRlciB0aGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uXG4gICAgICAgICAgICB0aGlzLl9fY29tbWl0VGV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX19pbnNlcnQobm9kZSkge1xuICAgICAgICB0aGlzLmVuZE5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgdGhpcy5lbmROb2RlKTtcbiAgICB9XG4gICAgX19jb21taXROb2RlKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5fX2luc2VydCh2YWx1ZSk7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgX19jb21taXRUZXh0KHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZS5uZXh0U2libGluZztcbiAgICAgICAgdmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbiAgICAgICAgLy8gSWYgYHZhbHVlYCBpc24ndCBhbHJlYWR5IGEgc3RyaW5nLCB3ZSBleHBsaWNpdGx5IGNvbnZlcnQgaXQgaGVyZSBpbiBjYXNlXG4gICAgICAgIC8vIGl0IGNhbid0IGJlIGltcGxpY2l0bHkgY29udmVydGVkIC0gaS5lLiBpdCdzIGEgc3ltYm9sLlxuICAgICAgICBjb25zdCB2YWx1ZUFzU3RyaW5nID0gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgaWYgKG5vZGUgPT09IHRoaXMuZW5kTm9kZS5wcmV2aW91c1NpYmxpbmcgJiZcbiAgICAgICAgICAgIG5vZGUubm9kZVR5cGUgPT09IDMgLyogTm9kZS5URVhUX05PREUgKi8pIHtcbiAgICAgICAgICAgIC8vIElmIHdlIG9ubHkgaGF2ZSBhIHNpbmdsZSB0ZXh0IG5vZGUgYmV0d2VlbiB0aGUgbWFya2Vycywgd2UgY2FuIGp1c3RcbiAgICAgICAgICAgIC8vIHNldCBpdHMgdmFsdWUsIHJhdGhlciB0aGFuIHJlcGxhY2luZyBpdC5cbiAgICAgICAgICAgIC8vIFRPRE8oanVzdGluZmFnbmFuaSk6IENhbiB3ZSBqdXN0IGNoZWNrIGlmIHRoaXMudmFsdWUgaXMgcHJpbWl0aXZlP1xuICAgICAgICAgICAgbm9kZS5kYXRhID0gdmFsdWVBc1N0cmluZztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX19jb21taXROb2RlKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHZhbHVlQXNTdHJpbmcpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIF9fY29tbWl0VGVtcGxhdGVSZXN1bHQodmFsdWUpIHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLm9wdGlvbnMudGVtcGxhdGVGYWN0b3J5KHZhbHVlKTtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgaW5zdGFuY2VvZiBUZW1wbGF0ZUluc3RhbmNlICYmXG4gICAgICAgICAgICB0aGlzLnZhbHVlLnRlbXBsYXRlID09PSB0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZS51cGRhdGUodmFsdWUudmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBwcm9wYWdhdGUgdGhlIHRlbXBsYXRlIHByb2Nlc3NvciBmcm9tIHRoZSBUZW1wbGF0ZVJlc3VsdFxuICAgICAgICAgICAgLy8gc28gdGhhdCB3ZSB1c2UgaXRzIHN5bnRheCBleHRlbnNpb24sIGV0Yy4gVGhlIHRlbXBsYXRlIGZhY3RvcnkgY29tZXNcbiAgICAgICAgICAgIC8vIGZyb20gdGhlIHJlbmRlciBmdW5jdGlvbiBvcHRpb25zIHNvIHRoYXQgaXQgY2FuIGNvbnRyb2wgdGVtcGxhdGVcbiAgICAgICAgICAgIC8vIGNhY2hpbmcgYW5kIHByZXByb2Nlc3NpbmcuXG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IG5ldyBUZW1wbGF0ZUluc3RhbmNlKHRlbXBsYXRlLCB2YWx1ZS5wcm9jZXNzb3IsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBmcmFnbWVudCA9IGluc3RhbmNlLl9jbG9uZSgpO1xuICAgICAgICAgICAgaW5zdGFuY2UudXBkYXRlKHZhbHVlLnZhbHVlcyk7XG4gICAgICAgICAgICB0aGlzLl9fY29tbWl0Tm9kZShmcmFnbWVudCk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gaW5zdGFuY2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX19jb21taXRJdGVyYWJsZSh2YWx1ZSkge1xuICAgICAgICAvLyBGb3IgYW4gSXRlcmFibGUsIHdlIGNyZWF0ZSBhIG5ldyBJbnN0YW5jZVBhcnQgcGVyIGl0ZW0sIHRoZW4gc2V0IGl0c1xuICAgICAgICAvLyB2YWx1ZSB0byB0aGUgaXRlbS4gVGhpcyBpcyBhIGxpdHRsZSBiaXQgb2Ygb3ZlcmhlYWQgZm9yIGV2ZXJ5IGl0ZW0gaW5cbiAgICAgICAgLy8gYW4gSXRlcmFibGUsIGJ1dCBpdCBsZXRzIHVzIHJlY3Vyc2UgZWFzaWx5IGFuZCBlZmZpY2llbnRseSB1cGRhdGUgQXJyYXlzXG4gICAgICAgIC8vIG9mIFRlbXBsYXRlUmVzdWx0cyB0aGF0IHdpbGwgYmUgY29tbW9ubHkgcmV0dXJuZWQgZnJvbSBleHByZXNzaW9ucyBsaWtlOlxuICAgICAgICAvLyBhcnJheS5tYXAoKGkpID0+IGh0bWxgJHtpfWApLCBieSByZXVzaW5nIGV4aXN0aW5nIFRlbXBsYXRlSW5zdGFuY2VzLlxuICAgICAgICAvLyBJZiBfdmFsdWUgaXMgYW4gYXJyYXksIHRoZW4gdGhlIHByZXZpb3VzIHJlbmRlciB3YXMgb2YgYW5cbiAgICAgICAgLy8gaXRlcmFibGUgYW5kIF92YWx1ZSB3aWxsIGNvbnRhaW4gdGhlIE5vZGVQYXJ0cyBmcm9tIHRoZSBwcmV2aW91c1xuICAgICAgICAvLyByZW5kZXIuIElmIF92YWx1ZSBpcyBub3QgYW4gYXJyYXksIGNsZWFyIHRoaXMgcGFydCBhbmQgbWFrZSBhIG5ld1xuICAgICAgICAvLyBhcnJheSBmb3IgTm9kZVBhcnRzLlxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBMZXRzIHVzIGtlZXAgdHJhY2sgb2YgaG93IG1hbnkgaXRlbXMgd2Ugc3RhbXBlZCBzbyB3ZSBjYW4gY2xlYXIgbGVmdG92ZXJcbiAgICAgICAgLy8gaXRlbXMgZnJvbSBhIHByZXZpb3VzIHJlbmRlclxuICAgICAgICBjb25zdCBpdGVtUGFydHMgPSB0aGlzLnZhbHVlO1xuICAgICAgICBsZXQgcGFydEluZGV4ID0gMDtcbiAgICAgICAgbGV0IGl0ZW1QYXJ0O1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdmFsdWUpIHtcbiAgICAgICAgICAgIC8vIFRyeSB0byByZXVzZSBhbiBleGlzdGluZyBwYXJ0XG4gICAgICAgICAgICBpdGVtUGFydCA9IGl0ZW1QYXJ0c1twYXJ0SW5kZXhdO1xuICAgICAgICAgICAgLy8gSWYgbm8gZXhpc3RpbmcgcGFydCwgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICAgICAgaWYgKGl0ZW1QYXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpdGVtUGFydCA9IG5ldyBOb2RlUGFydCh0aGlzLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGl0ZW1QYXJ0cy5wdXNoKGl0ZW1QYXJ0KTtcbiAgICAgICAgICAgICAgICBpZiAocGFydEluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1QYXJ0LmFwcGVuZEludG9QYXJ0KHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbVBhcnQuaW5zZXJ0QWZ0ZXJQYXJ0KGl0ZW1QYXJ0c1twYXJ0SW5kZXggLSAxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbVBhcnQuc2V0VmFsdWUoaXRlbSk7XG4gICAgICAgICAgICBpdGVtUGFydC5jb21taXQoKTtcbiAgICAgICAgICAgIHBhcnRJbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJ0SW5kZXggPCBpdGVtUGFydHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBUcnVuY2F0ZSB0aGUgcGFydHMgYXJyYXkgc28gX3ZhbHVlIHJlZmxlY3RzIHRoZSBjdXJyZW50IHN0YXRlXG4gICAgICAgICAgICBpdGVtUGFydHMubGVuZ3RoID0gcGFydEluZGV4O1xuICAgICAgICAgICAgdGhpcy5jbGVhcihpdGVtUGFydCAmJiBpdGVtUGFydC5lbmROb2RlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbGVhcihzdGFydE5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSkge1xuICAgICAgICByZW1vdmVOb2Rlcyh0aGlzLnN0YXJ0Tm9kZS5wYXJlbnROb2RlLCBzdGFydE5vZGUubmV4dFNpYmxpbmcsIHRoaXMuZW5kTm9kZSk7XG4gICAgfVxufVxuLyoqXG4gKiBJbXBsZW1lbnRzIGEgYm9vbGVhbiBhdHRyaWJ1dGUsIHJvdWdobHkgYXMgZGVmaW5lZCBpbiB0aGUgSFRNTFxuICogc3BlY2lmaWNhdGlvbi5cbiAqXG4gKiBJZiB0aGUgdmFsdWUgaXMgdHJ1dGh5LCB0aGVuIHRoZSBhdHRyaWJ1dGUgaXMgcHJlc2VudCB3aXRoIGEgdmFsdWUgb2ZcbiAqICcnLiBJZiB0aGUgdmFsdWUgaXMgZmFsc2V5LCB0aGUgYXR0cmlidXRlIGlzIHJlbW92ZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBCb29sZWFuQXR0cmlidXRlUGFydCB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgbmFtZSwgc3RyaW5ncykge1xuICAgICAgICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoc3RyaW5ncy5sZW5ndGggIT09IDIgfHwgc3RyaW5nc1swXSAhPT0gJycgfHwgc3RyaW5nc1sxXSAhPT0gJycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQm9vbGVhbiBhdHRyaWJ1dGVzIGNhbiBvbmx5IGNvbnRhaW4gYSBzaW5nbGUgZXhwcmVzc2lvbicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuc3RyaW5ncyA9IHN0cmluZ3M7XG4gICAgfVxuICAgIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgY29tbWl0KCkge1xuICAgICAgICB3aGlsZSAoaXNEaXJlY3RpdmUodGhpcy5fX3BlbmRpbmdWYWx1ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGl2ZSA9IHRoaXMuX19wZW5kaW5nVmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gbm9DaGFuZ2U7XG4gICAgICAgICAgICBkaXJlY3RpdmUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX19wZW5kaW5nVmFsdWUgPT09IG5vQ2hhbmdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWUgPSAhIXRoaXMuX19wZW5kaW5nVmFsdWU7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSh0aGlzLm5hbWUsICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUodGhpcy5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gbm9DaGFuZ2U7XG4gICAgfVxufVxuLyoqXG4gKiBTZXRzIGF0dHJpYnV0ZSB2YWx1ZXMgZm9yIFByb3BlcnR5UGFydHMsIHNvIHRoYXQgdGhlIHZhbHVlIGlzIG9ubHkgc2V0IG9uY2VcbiAqIGV2ZW4gaWYgdGhlcmUgYXJlIG11bHRpcGxlIHBhcnRzIGZvciBhIHByb3BlcnR5LlxuICpcbiAqIElmIGFuIGV4cHJlc3Npb24gY29udHJvbHMgdGhlIHdob2xlIHByb3BlcnR5IHZhbHVlLCB0aGVuIHRoZSB2YWx1ZSBpcyBzaW1wbHlcbiAqIGFzc2lnbmVkIHRvIHRoZSBwcm9wZXJ0eSB1bmRlciBjb250cm9sLiBJZiB0aGVyZSBhcmUgc3RyaW5nIGxpdGVyYWxzIG9yXG4gKiBtdWx0aXBsZSBleHByZXNzaW9ucywgdGhlbiB0aGUgc3RyaW5ncyBhcmUgZXhwcmVzc2lvbnMgYXJlIGludGVycG9sYXRlZCBpbnRvXG4gKiBhIHN0cmluZyBmaXJzdC5cbiAqL1xuZXhwb3J0IGNsYXNzIFByb3BlcnR5Q29tbWl0dGVyIGV4dGVuZHMgQXR0cmlidXRlQ29tbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBuYW1lLCBzdHJpbmdzKSB7XG4gICAgICAgIHN1cGVyKGVsZW1lbnQsIG5hbWUsIHN0cmluZ3MpO1xuICAgICAgICB0aGlzLnNpbmdsZSA9XG4gICAgICAgICAgICAoc3RyaW5ncy5sZW5ndGggPT09IDIgJiYgc3RyaW5nc1swXSA9PT0gJycgJiYgc3RyaW5nc1sxXSA9PT0gJycpO1xuICAgIH1cbiAgICBfY3JlYXRlUGFydCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9wZXJ0eVBhcnQodGhpcyk7XG4gICAgfVxuICAgIF9nZXRWYWx1ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2luZ2xlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJ0c1swXS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwZXIuX2dldFZhbHVlKCk7XG4gICAgfVxuICAgIGNvbW1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlydHkpIHtcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRbdGhpcy5uYW1lXSA9IHRoaXMuX2dldFZhbHVlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUHJvcGVydHlQYXJ0IGV4dGVuZHMgQXR0cmlidXRlUGFydCB7XG59XG4vLyBEZXRlY3QgZXZlbnQgbGlzdGVuZXIgb3B0aW9ucyBzdXBwb3J0LiBJZiB0aGUgYGNhcHR1cmVgIHByb3BlcnR5IGlzIHJlYWRcbi8vIGZyb20gdGhlIG9wdGlvbnMgb2JqZWN0LCB0aGVuIG9wdGlvbnMgYXJlIHN1cHBvcnRlZC4gSWYgbm90LCB0aGVuIHRoZSB0aGlyZFxuLy8gYXJndW1lbnQgdG8gYWRkL3JlbW92ZUV2ZW50TGlzdGVuZXIgaXMgaW50ZXJwcmV0ZWQgYXMgdGhlIGJvb2xlYW4gY2FwdHVyZVxuLy8gdmFsdWUgc28gd2Ugc2hvdWxkIG9ubHkgcGFzcyB0aGUgYGNhcHR1cmVgIHByb3BlcnR5LlxubGV0IGV2ZW50T3B0aW9uc1N1cHBvcnRlZCA9IGZhbHNlO1xuLy8gV3JhcCBpbnRvIGFuIElJRkUgYmVjYXVzZSBNUyBFZGdlIDw9IHY0MSBkb2VzIG5vdCBzdXBwb3J0IGhhdmluZyB0cnkvY2F0Y2hcbi8vIGJsb2NrcyByaWdodCBpbnRvIHRoZSBib2R5IG9mIGEgbW9kdWxlXG4oKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBnZXQgY2FwdHVyZSgpIHtcbiAgICAgICAgICAgICAgICBldmVudE9wdGlvbnNTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBvcHRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBvcHRpb25zLCBvcHRpb25zKTtcbiAgICB9XG4gICAgY2F0Y2ggKF9lKSB7XG4gICAgICAgIC8vIGV2ZW50IG9wdGlvbnMgbm90IHN1cHBvcnRlZFxuICAgIH1cbn0pKCk7XG5leHBvcnQgY2xhc3MgRXZlbnRQYXJ0IHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBldmVudE5hbWUsIGV2ZW50Q29udGV4dCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLmV2ZW50TmFtZSA9IGV2ZW50TmFtZTtcbiAgICAgICAgdGhpcy5ldmVudENvbnRleHQgPSBldmVudENvbnRleHQ7XG4gICAgICAgIHRoaXMuX19ib3VuZEhhbmRsZUV2ZW50ID0gKGUpID0+IHRoaXMuaGFuZGxlRXZlbnQoZSk7XG4gICAgfVxuICAgIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgY29tbWl0KCkge1xuICAgICAgICB3aGlsZSAoaXNEaXJlY3RpdmUodGhpcy5fX3BlbmRpbmdWYWx1ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGl2ZSA9IHRoaXMuX19wZW5kaW5nVmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gbm9DaGFuZ2U7XG4gICAgICAgICAgICBkaXJlY3RpdmUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX19wZW5kaW5nVmFsdWUgPT09IG5vQ2hhbmdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3TGlzdGVuZXIgPSB0aGlzLl9fcGVuZGluZ1ZhbHVlO1xuICAgICAgICBjb25zdCBvbGRMaXN0ZW5lciA9IHRoaXMudmFsdWU7XG4gICAgICAgIGNvbnN0IHNob3VsZFJlbW92ZUxpc3RlbmVyID0gbmV3TGlzdGVuZXIgPT0gbnVsbCB8fFxuICAgICAgICAgICAgb2xkTGlzdGVuZXIgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIChuZXdMaXN0ZW5lci5jYXB0dXJlICE9PSBvbGRMaXN0ZW5lci5jYXB0dXJlIHx8XG4gICAgICAgICAgICAgICAgICAgIG5ld0xpc3RlbmVyLm9uY2UgIT09IG9sZExpc3RlbmVyLm9uY2UgfHxcbiAgICAgICAgICAgICAgICAgICAgbmV3TGlzdGVuZXIucGFzc2l2ZSAhPT0gb2xkTGlzdGVuZXIucGFzc2l2ZSk7XG4gICAgICAgIGNvbnN0IHNob3VsZEFkZExpc3RlbmVyID0gbmV3TGlzdGVuZXIgIT0gbnVsbCAmJiAob2xkTGlzdGVuZXIgPT0gbnVsbCB8fCBzaG91bGRSZW1vdmVMaXN0ZW5lcik7XG4gICAgICAgIGlmIChzaG91bGRSZW1vdmVMaXN0ZW5lcikge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5ldmVudE5hbWUsIHRoaXMuX19ib3VuZEhhbmRsZUV2ZW50LCB0aGlzLl9fb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3VsZEFkZExpc3RlbmVyKSB7XG4gICAgICAgICAgICB0aGlzLl9fb3B0aW9ucyA9IGdldE9wdGlvbnMobmV3TGlzdGVuZXIpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodGhpcy5ldmVudE5hbWUsIHRoaXMuX19ib3VuZEhhbmRsZUV2ZW50LCB0aGlzLl9fb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWx1ZSA9IG5ld0xpc3RlbmVyO1xuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gbm9DaGFuZ2U7XG4gICAgfVxuICAgIGhhbmRsZUV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy52YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy52YWx1ZS5jYWxsKHRoaXMuZXZlbnRDb250ZXh0IHx8IHRoaXMuZWxlbWVudCwgZXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52YWx1ZS5oYW5kbGVFdmVudChldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBXZSBjb3B5IG9wdGlvbnMgYmVjYXVzZSBvZiB0aGUgaW5jb25zaXN0ZW50IGJlaGF2aW9yIG9mIGJyb3dzZXJzIHdoZW4gcmVhZGluZ1xuLy8gdGhlIHRoaXJkIGFyZ3VtZW50IG9mIGFkZC9yZW1vdmVFdmVudExpc3RlbmVyLiBJRTExIGRvZXNuJ3Qgc3VwcG9ydCBvcHRpb25zXG4vLyBhdCBhbGwuIENocm9tZSA0MSBvbmx5IHJlYWRzIGBjYXB0dXJlYCBpZiB0aGUgYXJndW1lbnQgaXMgYW4gb2JqZWN0LlxuY29uc3QgZ2V0T3B0aW9ucyA9IChvKSA9PiBvICYmXG4gICAgKGV2ZW50T3B0aW9uc1N1cHBvcnRlZCA/XG4gICAgICAgIHsgY2FwdHVyZTogby5jYXB0dXJlLCBwYXNzaXZlOiBvLnBhc3NpdmUsIG9uY2U6IG8ub25jZSB9IDpcbiAgICAgICAgby5jYXB0dXJlKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnRzLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbmltcG9ydCB7IG1hcmtlciwgVGVtcGxhdGUgfSBmcm9tICcuL3RlbXBsYXRlLmpzJztcbi8qKlxuICogVGhlIGRlZmF1bHQgVGVtcGxhdGVGYWN0b3J5IHdoaWNoIGNhY2hlcyBUZW1wbGF0ZXMga2V5ZWQgb25cbiAqIHJlc3VsdC50eXBlIGFuZCByZXN1bHQuc3RyaW5ncy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRlbXBsYXRlRmFjdG9yeShyZXN1bHQpIHtcbiAgICBsZXQgdGVtcGxhdGVDYWNoZSA9IHRlbXBsYXRlQ2FjaGVzLmdldChyZXN1bHQudHlwZSk7XG4gICAgaWYgKHRlbXBsYXRlQ2FjaGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0ZW1wbGF0ZUNhY2hlID0ge1xuICAgICAgICAgICAgc3RyaW5nc0FycmF5OiBuZXcgV2Vha01hcCgpLFxuICAgICAgICAgICAga2V5U3RyaW5nOiBuZXcgTWFwKClcbiAgICAgICAgfTtcbiAgICAgICAgdGVtcGxhdGVDYWNoZXMuc2V0KHJlc3VsdC50eXBlLCB0ZW1wbGF0ZUNhY2hlKTtcbiAgICB9XG4gICAgbGV0IHRlbXBsYXRlID0gdGVtcGxhdGVDYWNoZS5zdHJpbmdzQXJyYXkuZ2V0KHJlc3VsdC5zdHJpbmdzKTtcbiAgICBpZiAodGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGVtcGxhdGU7XG4gICAgfVxuICAgIC8vIElmIHRoZSBUZW1wbGF0ZVN0cmluZ3NBcnJheSBpcyBuZXcsIGdlbmVyYXRlIGEga2V5IGZyb20gdGhlIHN0cmluZ3NcbiAgICAvLyBUaGlzIGtleSBpcyBzaGFyZWQgYmV0d2VlbiBhbGwgdGVtcGxhdGVzIHdpdGggaWRlbnRpY2FsIGNvbnRlbnRcbiAgICBjb25zdCBrZXkgPSByZXN1bHQuc3RyaW5ncy5qb2luKG1hcmtlcik7XG4gICAgLy8gQ2hlY2sgaWYgd2UgYWxyZWFkeSBoYXZlIGEgVGVtcGxhdGUgZm9yIHRoaXMga2V5XG4gICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZUNhY2hlLmtleVN0cmluZy5nZXQoa2V5KTtcbiAgICBpZiAodGVtcGxhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBJZiB3ZSBoYXZlIG5vdCBzZWVuIHRoaXMga2V5IGJlZm9yZSwgY3JlYXRlIGEgbmV3IFRlbXBsYXRlXG4gICAgICAgIHRlbXBsYXRlID0gbmV3IFRlbXBsYXRlKHJlc3VsdCwgcmVzdWx0LmdldFRlbXBsYXRlRWxlbWVudCgpKTtcbiAgICAgICAgLy8gQ2FjaGUgdGhlIFRlbXBsYXRlIGZvciB0aGlzIGtleVxuICAgICAgICB0ZW1wbGF0ZUNhY2hlLmtleVN0cmluZy5zZXQoa2V5LCB0ZW1wbGF0ZSk7XG4gICAgfVxuICAgIC8vIENhY2hlIGFsbCBmdXR1cmUgcXVlcmllcyBmb3IgdGhpcyBUZW1wbGF0ZVN0cmluZ3NBcnJheVxuICAgIHRlbXBsYXRlQ2FjaGUuc3RyaW5nc0FycmF5LnNldChyZXN1bHQuc3RyaW5ncywgdGVtcGxhdGUpO1xuICAgIHJldHVybiB0ZW1wbGF0ZTtcbn1cbmV4cG9ydCBjb25zdCB0ZW1wbGF0ZUNhY2hlcyA9IG5ldyBNYXAoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRlbXBsYXRlLWZhY3RvcnkuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBAbW9kdWxlIGxpdC1odG1sXG4gKi9cbmltcG9ydCB7IHJlbW92ZU5vZGVzIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgTm9kZVBhcnQgfSBmcm9tICcuL3BhcnRzLmpzJztcbmltcG9ydCB7IHRlbXBsYXRlRmFjdG9yeSB9IGZyb20gJy4vdGVtcGxhdGUtZmFjdG9yeS5qcyc7XG5leHBvcnQgY29uc3QgcGFydHMgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBSZW5kZXJzIGEgdGVtcGxhdGUgcmVzdWx0IG9yIG90aGVyIHZhbHVlIHRvIGEgY29udGFpbmVyLlxuICpcbiAqIFRvIHVwZGF0ZSBhIGNvbnRhaW5lciB3aXRoIG5ldyB2YWx1ZXMsIHJlZXZhbHVhdGUgdGhlIHRlbXBsYXRlIGxpdGVyYWwgYW5kXG4gKiBjYWxsIGByZW5kZXJgIHdpdGggdGhlIG5ldyByZXN1bHQuXG4gKlxuICogQHBhcmFtIHJlc3VsdCBBbnkgdmFsdWUgcmVuZGVyYWJsZSBieSBOb2RlUGFydCAtIHR5cGljYWxseSBhIFRlbXBsYXRlUmVzdWx0XG4gKiAgICAgY3JlYXRlZCBieSBldmFsdWF0aW5nIGEgdGVtcGxhdGUgdGFnIGxpa2UgYGh0bWxgIG9yIGBzdmdgLlxuICogQHBhcmFtIGNvbnRhaW5lciBBIERPTSBwYXJlbnQgdG8gcmVuZGVyIHRvLiBUaGUgZW50aXJlIGNvbnRlbnRzIGFyZSBlaXRoZXJcbiAqICAgICByZXBsYWNlZCwgb3IgZWZmaWNpZW50bHkgdXBkYXRlZCBpZiB0aGUgc2FtZSByZXN1bHQgdHlwZSB3YXMgcHJldmlvdXNcbiAqICAgICByZW5kZXJlZCB0aGVyZS5cbiAqIEBwYXJhbSBvcHRpb25zIFJlbmRlck9wdGlvbnMgZm9yIHRoZSBlbnRpcmUgcmVuZGVyIHRyZWUgcmVuZGVyZWQgdG8gdGhpc1xuICogICAgIGNvbnRhaW5lci4gUmVuZGVyIG9wdGlvbnMgbXVzdCAqbm90KiBjaGFuZ2UgYmV0d2VlbiByZW5kZXJzIHRvIHRoZSBzYW1lXG4gKiAgICAgY29udGFpbmVyLCBhcyB0aG9zZSBjaGFuZ2VzIHdpbGwgbm90IGVmZmVjdCBwcmV2aW91c2x5IHJlbmRlcmVkIERPTS5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlbmRlciA9IChyZXN1bHQsIGNvbnRhaW5lciwgb3B0aW9ucykgPT4ge1xuICAgIGxldCBwYXJ0ID0gcGFydHMuZ2V0KGNvbnRhaW5lcik7XG4gICAgaWYgKHBhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZW1vdmVOb2Rlcyhjb250YWluZXIsIGNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgICAgcGFydHMuc2V0KGNvbnRhaW5lciwgcGFydCA9IG5ldyBOb2RlUGFydChPYmplY3QuYXNzaWduKHsgdGVtcGxhdGVGYWN0b3J5IH0sIG9wdGlvbnMpKSk7XG4gICAgICAgIHBhcnQuYXBwZW5kSW50byhjb250YWluZXIpO1xuICAgIH1cbiAgICBwYXJ0LnNldFZhbHVlKHJlc3VsdCk7XG4gICAgcGFydC5jb21taXQoKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZW5kZXIuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuaW1wb3J0IHsgQXR0cmlidXRlQ29tbWl0dGVyLCBCb29sZWFuQXR0cmlidXRlUGFydCwgRXZlbnRQYXJ0LCBOb2RlUGFydCwgUHJvcGVydHlDb21taXR0ZXIgfSBmcm9tICcuL3BhcnRzLmpzJztcbi8qKlxuICogQ3JlYXRlcyBQYXJ0cyB3aGVuIGEgdGVtcGxhdGUgaXMgaW5zdGFudGlhdGVkLlxuICovXG5leHBvcnQgY2xhc3MgRGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgcGFydHMgZm9yIGFuIGF0dHJpYnV0ZS1wb3NpdGlvbiBiaW5kaW5nLCBnaXZlbiB0aGUgZXZlbnQsIGF0dHJpYnV0ZVxuICAgICAqIG5hbWUsIGFuZCBzdHJpbmcgbGl0ZXJhbHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCBjb250YWluaW5nIHRoZSBiaW5kaW5nXG4gICAgICogQHBhcmFtIG5hbWUgIFRoZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSBzdHJpbmdzIFRoZSBzdHJpbmcgbGl0ZXJhbHMuIFRoZXJlIGFyZSBhbHdheXMgYXQgbGVhc3QgdHdvIHN0cmluZ3MsXG4gICAgICogICBldmVudCBmb3IgZnVsbHktY29udHJvbGxlZCBiaW5kaW5ncyB3aXRoIGEgc2luZ2xlIGV4cHJlc3Npb24uXG4gICAgICovXG4gICAgaGFuZGxlQXR0cmlidXRlRXhwcmVzc2lvbnMoZWxlbWVudCwgbmFtZSwgc3RyaW5ncywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBwcmVmaXggPSBuYW1lWzBdO1xuICAgICAgICBpZiAocHJlZml4ID09PSAnLicpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1pdHRlciA9IG5ldyBQcm9wZXJ0eUNvbW1pdHRlcihlbGVtZW50LCBuYW1lLnNsaWNlKDEpLCBzdHJpbmdzKTtcbiAgICAgICAgICAgIHJldHVybiBjb21taXR0ZXIucGFydHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZWZpeCA9PT0gJ0AnKSB7XG4gICAgICAgICAgICByZXR1cm4gW25ldyBFdmVudFBhcnQoZWxlbWVudCwgbmFtZS5zbGljZSgxKSwgb3B0aW9ucy5ldmVudENvbnRleHQpXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJlZml4ID09PSAnPycpIHtcbiAgICAgICAgICAgIHJldHVybiBbbmV3IEJvb2xlYW5BdHRyaWJ1dGVQYXJ0KGVsZW1lbnQsIG5hbWUuc2xpY2UoMSksIHN0cmluZ3MpXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21taXR0ZXIgPSBuZXcgQXR0cmlidXRlQ29tbWl0dGVyKGVsZW1lbnQsIG5hbWUsIHN0cmluZ3MpO1xuICAgICAgICByZXR1cm4gY29tbWl0dGVyLnBhcnRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgcGFydHMgZm9yIGEgdGV4dC1wb3NpdGlvbiBiaW5kaW5nLlxuICAgICAqIEBwYXJhbSB0ZW1wbGF0ZUZhY3RvcnlcbiAgICAgKi9cbiAgICBoYW5kbGVUZXh0RXhwcmVzc2lvbihvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgTm9kZVBhcnQob3B0aW9ucyk7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IGRlZmF1bHRUZW1wbGF0ZVByb2Nlc3NvciA9IG5ldyBEZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3IoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHQtdGVtcGxhdGUtcHJvY2Vzc29yLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICpcbiAqIE1haW4gbGl0LWh0bWwgbW9kdWxlLlxuICpcbiAqIE1haW4gZXhwb3J0czpcbiAqXG4gKiAtICBbW2h0bWxdXVxuICogLSAgW1tzdmddXVxuICogLSAgW1tyZW5kZXJdXVxuICpcbiAqIEBtb2R1bGUgbGl0LWh0bWxcbiAqIEBwcmVmZXJyZWRcbiAqL1xuLyoqXG4gKiBEbyBub3QgcmVtb3ZlIHRoaXMgY29tbWVudDsgaXQga2VlcHMgdHlwZWRvYyBmcm9tIG1pc3BsYWNpbmcgdGhlIG1vZHVsZVxuICogZG9jcy5cbiAqL1xuaW1wb3J0IHsgZGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yIH0gZnJvbSAnLi9saWIvZGVmYXVsdC10ZW1wbGF0ZS1wcm9jZXNzb3IuanMnO1xuaW1wb3J0IHsgU1ZHVGVtcGxhdGVSZXN1bHQsIFRlbXBsYXRlUmVzdWx0IH0gZnJvbSAnLi9saWIvdGVtcGxhdGUtcmVzdWx0LmpzJztcbmV4cG9ydCB7IERlZmF1bHRUZW1wbGF0ZVByb2Nlc3NvciwgZGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yIH0gZnJvbSAnLi9saWIvZGVmYXVsdC10ZW1wbGF0ZS1wcm9jZXNzb3IuanMnO1xuZXhwb3J0IHsgZGlyZWN0aXZlLCBpc0RpcmVjdGl2ZSB9IGZyb20gJy4vbGliL2RpcmVjdGl2ZS5qcyc7XG4vLyBUT0RPKGp1c3RpbmZhZ25hbmkpOiByZW1vdmUgbGluZSB3aGVuIHdlIGdldCBOb2RlUGFydCBtb3ZpbmcgbWV0aG9kc1xuZXhwb3J0IHsgcmVtb3ZlTm9kZXMsIHJlcGFyZW50Tm9kZXMgfSBmcm9tICcuL2xpYi9kb20uanMnO1xuZXhwb3J0IHsgbm9DaGFuZ2UsIG5vdGhpbmcgfSBmcm9tICcuL2xpYi9wYXJ0LmpzJztcbmV4cG9ydCB7IEF0dHJpYnV0ZUNvbW1pdHRlciwgQXR0cmlidXRlUGFydCwgQm9vbGVhbkF0dHJpYnV0ZVBhcnQsIEV2ZW50UGFydCwgaXNJdGVyYWJsZSwgaXNQcmltaXRpdmUsIE5vZGVQYXJ0LCBQcm9wZXJ0eUNvbW1pdHRlciwgUHJvcGVydHlQYXJ0IH0gZnJvbSAnLi9saWIvcGFydHMuanMnO1xuZXhwb3J0IHsgcGFydHMsIHJlbmRlciB9IGZyb20gJy4vbGliL3JlbmRlci5qcyc7XG5leHBvcnQgeyB0ZW1wbGF0ZUNhY2hlcywgdGVtcGxhdGVGYWN0b3J5IH0gZnJvbSAnLi9saWIvdGVtcGxhdGUtZmFjdG9yeS5qcyc7XG5leHBvcnQgeyBUZW1wbGF0ZUluc3RhbmNlIH0gZnJvbSAnLi9saWIvdGVtcGxhdGUtaW5zdGFuY2UuanMnO1xuZXhwb3J0IHsgU1ZHVGVtcGxhdGVSZXN1bHQsIFRlbXBsYXRlUmVzdWx0IH0gZnJvbSAnLi9saWIvdGVtcGxhdGUtcmVzdWx0LmpzJztcbmV4cG9ydCB7IGNyZWF0ZU1hcmtlciwgaXNUZW1wbGF0ZVBhcnRBY3RpdmUsIFRlbXBsYXRlIH0gZnJvbSAnLi9saWIvdGVtcGxhdGUuanMnO1xuLy8gSU1QT1JUQU5UOiBkbyBub3QgY2hhbmdlIHRoZSBwcm9wZXJ0eSBuYW1lIG9yIHRoZSBhc3NpZ25tZW50IGV4cHJlc3Npb24uXG4vLyBUaGlzIGxpbmUgd2lsbCBiZSB1c2VkIGluIHJlZ2V4ZXMgdG8gc2VhcmNoIGZvciBsaXQtaHRtbCB1c2FnZS5cbi8vIFRPRE8oanVzdGluZmFnbmFuaSk6IGluamVjdCB2ZXJzaW9uIG51bWJlciBhdCBidWlsZCB0aW1lXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAod2luZG93WydsaXRIdG1sVmVyc2lvbnMnXSB8fCAod2luZG93WydsaXRIdG1sVmVyc2lvbnMnXSA9IFtdKSkucHVzaCgnMS4yLjEnKTtcbn1cbi8qKlxuICogSW50ZXJwcmV0cyBhIHRlbXBsYXRlIGxpdGVyYWwgYXMgYW4gSFRNTCB0ZW1wbGF0ZSB0aGF0IGNhbiBlZmZpY2llbnRseVxuICogcmVuZGVyIHRvIGFuZCB1cGRhdGUgYSBjb250YWluZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBodG1sID0gKHN0cmluZ3MsIC4uLnZhbHVlcykgPT4gbmV3IFRlbXBsYXRlUmVzdWx0KHN0cmluZ3MsIHZhbHVlcywgJ2h0bWwnLCBkZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3IpO1xuLyoqXG4gKiBJbnRlcnByZXRzIGEgdGVtcGxhdGUgbGl0ZXJhbCBhcyBhbiBTVkcgdGVtcGxhdGUgdGhhdCBjYW4gZWZmaWNpZW50bHlcbiAqIHJlbmRlciB0byBhbmQgdXBkYXRlIGEgY29udGFpbmVyLlxuICovXG5leHBvcnQgY29uc3Qgc3ZnID0gKHN0cmluZ3MsIC4uLnZhbHVlcykgPT4gbmV3IFNWR1RlbXBsYXRlUmVzdWx0KHN0cmluZ3MsIHZhbHVlcywgJ3N2ZycsIGRlZmF1bHRUZW1wbGF0ZVByb2Nlc3Nvcik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXQtaHRtbC5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIE1vZHVsZSB0byBhZGQgc2hhZHkgRE9NL3NoYWR5IENTUyBwb2x5ZmlsbCBzdXBwb3J0IHRvIGxpdC1odG1sIHRlbXBsYXRlXG4gKiByZW5kZXJpbmcuIFNlZSB0aGUgW1tyZW5kZXJdXSBtZXRob2QgZm9yIGRldGFpbHMuXG4gKlxuICogQG1vZHVsZSBzaGFkeS1yZW5kZXJcbiAqIEBwcmVmZXJyZWRcbiAqL1xuLyoqXG4gKiBEbyBub3QgcmVtb3ZlIHRoaXMgY29tbWVudDsgaXQga2VlcHMgdHlwZWRvYyBmcm9tIG1pc3BsYWNpbmcgdGhlIG1vZHVsZVxuICogZG9jcy5cbiAqL1xuaW1wb3J0IHsgcmVtb3ZlTm9kZXMgfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQgeyBpbnNlcnROb2RlSW50b1RlbXBsYXRlLCByZW1vdmVOb2Rlc0Zyb21UZW1wbGF0ZSB9IGZyb20gJy4vbW9kaWZ5LXRlbXBsYXRlLmpzJztcbmltcG9ydCB7IHBhcnRzLCByZW5kZXIgYXMgbGl0UmVuZGVyIH0gZnJvbSAnLi9yZW5kZXIuanMnO1xuaW1wb3J0IHsgdGVtcGxhdGVDYWNoZXMgfSBmcm9tICcuL3RlbXBsYXRlLWZhY3RvcnkuanMnO1xuaW1wb3J0IHsgVGVtcGxhdGVJbnN0YW5jZSB9IGZyb20gJy4vdGVtcGxhdGUtaW5zdGFuY2UuanMnO1xuaW1wb3J0IHsgbWFya2VyLCBUZW1wbGF0ZSB9IGZyb20gJy4vdGVtcGxhdGUuanMnO1xuZXhwb3J0IHsgaHRtbCwgc3ZnLCBUZW1wbGF0ZVJlc3VsdCB9IGZyb20gJy4uL2xpdC1odG1sLmpzJztcbi8vIEdldCBhIGtleSB0byBsb29rdXAgaW4gYHRlbXBsYXRlQ2FjaGVzYC5cbmNvbnN0IGdldFRlbXBsYXRlQ2FjaGVLZXkgPSAodHlwZSwgc2NvcGVOYW1lKSA9PiBgJHt0eXBlfS0tJHtzY29wZU5hbWV9YDtcbmxldCBjb21wYXRpYmxlU2hhZHlDU1NWZXJzaW9uID0gdHJ1ZTtcbmlmICh0eXBlb2Ygd2luZG93LlNoYWR5Q1NTID09PSAndW5kZWZpbmVkJykge1xuICAgIGNvbXBhdGlibGVTaGFkeUNTU1ZlcnNpb24gPSBmYWxzZTtcbn1cbmVsc2UgaWYgKHR5cGVvZiB3aW5kb3cuU2hhZHlDU1MucHJlcGFyZVRlbXBsYXRlRG9tID09PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnNvbGUud2FybihgSW5jb21wYXRpYmxlIFNoYWR5Q1NTIHZlcnNpb24gZGV0ZWN0ZWQuIGAgK1xuICAgICAgICBgUGxlYXNlIHVwZGF0ZSB0byBhdCBsZWFzdCBAd2ViY29tcG9uZW50cy93ZWJjb21wb25lbnRzanNAMi4wLjIgYW5kIGAgK1xuICAgICAgICBgQHdlYmNvbXBvbmVudHMvc2hhZHljc3NAMS4zLjEuYCk7XG4gICAgY29tcGF0aWJsZVNoYWR5Q1NTVmVyc2lvbiA9IGZhbHNlO1xufVxuLyoqXG4gKiBUZW1wbGF0ZSBmYWN0b3J5IHdoaWNoIHNjb3BlcyB0ZW1wbGF0ZSBET00gdXNpbmcgU2hhZHlDU1MuXG4gKiBAcGFyYW0gc2NvcGVOYW1lIHtzdHJpbmd9XG4gKi9cbmNvbnN0IHNoYWR5VGVtcGxhdGVGYWN0b3J5ID0gKHNjb3BlTmFtZSkgPT4gKHJlc3VsdCkgPT4ge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gZ2V0VGVtcGxhdGVDYWNoZUtleShyZXN1bHQudHlwZSwgc2NvcGVOYW1lKTtcbiAgICBsZXQgdGVtcGxhdGVDYWNoZSA9IHRlbXBsYXRlQ2FjaGVzLmdldChjYWNoZUtleSk7XG4gICAgaWYgKHRlbXBsYXRlQ2FjaGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0ZW1wbGF0ZUNhY2hlID0ge1xuICAgICAgICAgICAgc3RyaW5nc0FycmF5OiBuZXcgV2Vha01hcCgpLFxuICAgICAgICAgICAga2V5U3RyaW5nOiBuZXcgTWFwKClcbiAgICAgICAgfTtcbiAgICAgICAgdGVtcGxhdGVDYWNoZXMuc2V0KGNhY2hlS2V5LCB0ZW1wbGF0ZUNhY2hlKTtcbiAgICB9XG4gICAgbGV0IHRlbXBsYXRlID0gdGVtcGxhdGVDYWNoZS5zdHJpbmdzQXJyYXkuZ2V0KHJlc3VsdC5zdHJpbmdzKTtcbiAgICBpZiAodGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGVtcGxhdGU7XG4gICAgfVxuICAgIGNvbnN0IGtleSA9IHJlc3VsdC5zdHJpbmdzLmpvaW4obWFya2VyKTtcbiAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ2FjaGUua2V5U3RyaW5nLmdldChrZXkpO1xuICAgIGlmICh0ZW1wbGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSByZXN1bHQuZ2V0VGVtcGxhdGVFbGVtZW50KCk7XG4gICAgICAgIGlmIChjb21wYXRpYmxlU2hhZHlDU1NWZXJzaW9uKSB7XG4gICAgICAgICAgICB3aW5kb3cuU2hhZHlDU1MucHJlcGFyZVRlbXBsYXRlRG9tKGVsZW1lbnQsIHNjb3BlTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGVtcGxhdGUgPSBuZXcgVGVtcGxhdGUocmVzdWx0LCBlbGVtZW50KTtcbiAgICAgICAgdGVtcGxhdGVDYWNoZS5rZXlTdHJpbmcuc2V0KGtleSwgdGVtcGxhdGUpO1xuICAgIH1cbiAgICB0ZW1wbGF0ZUNhY2hlLnN0cmluZ3NBcnJheS5zZXQocmVzdWx0LnN0cmluZ3MsIHRlbXBsYXRlKTtcbiAgICByZXR1cm4gdGVtcGxhdGU7XG59O1xuY29uc3QgVEVNUExBVEVfVFlQRVMgPSBbJ2h0bWwnLCAnc3ZnJ107XG4vKipcbiAqIFJlbW92ZXMgYWxsIHN0eWxlIGVsZW1lbnRzIGZyb20gVGVtcGxhdGVzIGZvciB0aGUgZ2l2ZW4gc2NvcGVOYW1lLlxuICovXG5jb25zdCByZW1vdmVTdHlsZXNGcm9tTGl0VGVtcGxhdGVzID0gKHNjb3BlTmFtZSkgPT4ge1xuICAgIFRFTVBMQVRFX1RZUEVTLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGVzID0gdGVtcGxhdGVDYWNoZXMuZ2V0KGdldFRlbXBsYXRlQ2FjaGVLZXkodHlwZSwgc2NvcGVOYW1lKSk7XG4gICAgICAgIGlmICh0ZW1wbGF0ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGVtcGxhdGVzLmtleVN0cmluZy5mb3JFYWNoKCh0ZW1wbGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZWxlbWVudDogeyBjb250ZW50IH0gfSA9IHRlbXBsYXRlO1xuICAgICAgICAgICAgICAgIC8vIElFIDExIGRvZXNuJ3Qgc3VwcG9ydCB0aGUgaXRlcmFibGUgcGFyYW0gU2V0IGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVzID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgICAgIEFycmF5LmZyb20oY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdzdHlsZScpKS5mb3JFYWNoKChzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlcy5hZGQocyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmVtb3ZlTm9kZXNGcm9tVGVtcGxhdGUodGVtcGxhdGUsIHN0eWxlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbmNvbnN0IHNoYWR5UmVuZGVyU2V0ID0gbmV3IFNldCgpO1xuLyoqXG4gKiBGb3IgdGhlIGdpdmVuIHNjb3BlIG5hbWUsIGVuc3VyZXMgdGhhdCBTaGFkeUNTUyBzdHlsZSBzY29waW5nIGlzIHBlcmZvcm1lZC5cbiAqIFRoaXMgaXMgZG9uZSBqdXN0IG9uY2UgcGVyIHNjb3BlIG5hbWUgc28gdGhlIGZyYWdtZW50IGFuZCB0ZW1wbGF0ZSBjYW5ub3RcbiAqIGJlIG1vZGlmaWVkLlxuICogKDEpIGV4dHJhY3RzIHN0eWxlcyBmcm9tIHRoZSByZW5kZXJlZCBmcmFnbWVudCBhbmQgaGFuZHMgdGhlbSB0byBTaGFkeUNTU1xuICogdG8gYmUgc2NvcGVkIGFuZCBhcHBlbmRlZCB0byB0aGUgZG9jdW1lbnRcbiAqICgyKSByZW1vdmVzIHN0eWxlIGVsZW1lbnRzIGZyb20gYWxsIGxpdC1odG1sIFRlbXBsYXRlcyBmb3IgdGhpcyBzY29wZSBuYW1lLlxuICpcbiAqIE5vdGUsIDxzdHlsZT4gZWxlbWVudHMgY2FuIG9ubHkgYmUgcGxhY2VkIGludG8gdGVtcGxhdGVzIGZvciB0aGVcbiAqIGluaXRpYWwgcmVuZGVyaW5nIG9mIHRoZSBzY29wZS4gSWYgPHN0eWxlPiBlbGVtZW50cyBhcmUgaW5jbHVkZWQgaW4gdGVtcGxhdGVzXG4gKiBkeW5hbWljYWxseSByZW5kZXJlZCB0byB0aGUgc2NvcGUgKGFmdGVyIHRoZSBmaXJzdCBzY29wZSByZW5kZXIpLCB0aGV5IHdpbGxcbiAqIG5vdCBiZSBzY29wZWQgYW5kIHRoZSA8c3R5bGU+IHdpbGwgYmUgbGVmdCBpbiB0aGUgdGVtcGxhdGUgYW5kIHJlbmRlcmVkXG4gKiBvdXRwdXQuXG4gKi9cbmNvbnN0IHByZXBhcmVUZW1wbGF0ZVN0eWxlcyA9IChzY29wZU5hbWUsIHJlbmRlcmVkRE9NLCB0ZW1wbGF0ZSkgPT4ge1xuICAgIHNoYWR5UmVuZGVyU2V0LmFkZChzY29wZU5hbWUpO1xuICAgIC8vIElmIGByZW5kZXJlZERPTWAgaXMgc3RhbXBlZCBmcm9tIGEgVGVtcGxhdGUsIHRoZW4gd2UgbmVlZCB0byBlZGl0IHRoYXRcbiAgICAvLyBUZW1wbGF0ZSdzIHVuZGVybHlpbmcgdGVtcGxhdGUgZWxlbWVudC4gT3RoZXJ3aXNlLCB3ZSBjcmVhdGUgb25lIGhlcmVcbiAgICAvLyB0byBnaXZlIHRvIFNoYWR5Q1NTLCB3aGljaCBzdGlsbCByZXF1aXJlcyBvbmUgd2hpbGUgc2NvcGluZy5cbiAgICBjb25zdCB0ZW1wbGF0ZUVsZW1lbnQgPSAhIXRlbXBsYXRlID8gdGVtcGxhdGUuZWxlbWVudCA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgLy8gTW92ZSBzdHlsZXMgb3V0IG9mIHJlbmRlcmVkIERPTSBhbmQgc3RvcmUuXG4gICAgY29uc3Qgc3R5bGVzID0gcmVuZGVyZWRET00ucXVlcnlTZWxlY3RvckFsbCgnc3R5bGUnKTtcbiAgICBjb25zdCB7IGxlbmd0aCB9ID0gc3R5bGVzO1xuICAgIC8vIElmIHRoZXJlIGFyZSBubyBzdHlsZXMsIHNraXAgdW5uZWNlc3Nhcnkgd29ya1xuICAgIGlmIChsZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gRW5zdXJlIHByZXBhcmVUZW1wbGF0ZVN0eWxlcyBpcyBjYWxsZWQgdG8gc3VwcG9ydCBhZGRpbmdcbiAgICAgICAgLy8gc3R5bGVzIHZpYSBgcHJlcGFyZUFkb3B0ZWRDc3NUZXh0YCBzaW5jZSB0aGF0IHJlcXVpcmVzIHRoYXRcbiAgICAgICAgLy8gYHByZXBhcmVUZW1wbGF0ZVN0eWxlc2AgaXMgY2FsbGVkLlxuICAgICAgICAvL1xuICAgICAgICAvLyBTaGFkeUNTUyB3aWxsIG9ubHkgdXBkYXRlIHN0eWxlcyBjb250YWluaW5nIEBhcHBseSBpbiB0aGUgdGVtcGxhdGVcbiAgICAgICAgLy8gZ2l2ZW4gdG8gYHByZXBhcmVUZW1wbGF0ZVN0eWxlc2AuIElmIG5vIGxpdCBUZW1wbGF0ZSB3YXMgZ2l2ZW4sXG4gICAgICAgIC8vIFNoYWR5Q1NTIHdpbGwgbm90IGJlIGFibGUgdG8gdXBkYXRlIHVzZXMgb2YgQGFwcGx5IGluIGFueSByZWxldmFudFxuICAgICAgICAvLyB0ZW1wbGF0ZS4gSG93ZXZlciwgdGhpcyBpcyBub3QgYSBwcm9ibGVtIGJlY2F1c2Ugd2Ugb25seSBjcmVhdGUgdGhlXG4gICAgICAgIC8vIHRlbXBsYXRlIGZvciB0aGUgcHVycG9zZSBvZiBzdXBwb3J0aW5nIGBwcmVwYXJlQWRvcHRlZENzc1RleHRgLFxuICAgICAgICAvLyB3aGljaCBkb2Vzbid0IHN1cHBvcnQgQGFwcGx5IGF0IGFsbC5cbiAgICAgICAgd2luZG93LlNoYWR5Q1NTLnByZXBhcmVUZW1wbGF0ZVN0eWxlcyh0ZW1wbGF0ZUVsZW1lbnQsIHNjb3BlTmFtZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29uZGVuc2VkU3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIC8vIENvbGxlY3Qgc3R5bGVzIGludG8gYSBzaW5nbGUgc3R5bGUuIFRoaXMgaGVscHMgdXMgbWFrZSBzdXJlIFNoYWR5Q1NTXG4gICAgLy8gbWFuaXB1bGF0aW9ucyB3aWxsIG5vdCBwcmV2ZW50IHVzIGZyb20gYmVpbmcgYWJsZSB0byBmaXggdXAgdGVtcGxhdGVcbiAgICAvLyBwYXJ0IGluZGljZXMuXG4gICAgLy8gTk9URTogY29sbGVjdGluZyBzdHlsZXMgaXMgaW5lZmZpY2llbnQgZm9yIGJyb3dzZXJzIGJ1dCBTaGFkeUNTU1xuICAgIC8vIGN1cnJlbnRseSBkb2VzIHRoaXMgYW55d2F5LiBXaGVuIGl0IGRvZXMgbm90LCB0aGlzIHNob3VsZCBiZSBjaGFuZ2VkLlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBzdHlsZXNbaV07XG4gICAgICAgIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xuICAgICAgICBjb25kZW5zZWRTdHlsZS50ZXh0Q29udGVudCArPSBzdHlsZS50ZXh0Q29udGVudDtcbiAgICB9XG4gICAgLy8gUmVtb3ZlIHN0eWxlcyBmcm9tIG5lc3RlZCB0ZW1wbGF0ZXMgaW4gdGhpcyBzY29wZS5cbiAgICByZW1vdmVTdHlsZXNGcm9tTGl0VGVtcGxhdGVzKHNjb3BlTmFtZSk7XG4gICAgLy8gQW5kIHRoZW4gcHV0IHRoZSBjb25kZW5zZWQgc3R5bGUgaW50byB0aGUgXCJyb290XCIgdGVtcGxhdGUgcGFzc2VkIGluIGFzXG4gICAgLy8gYHRlbXBsYXRlYC5cbiAgICBjb25zdCBjb250ZW50ID0gdGVtcGxhdGVFbGVtZW50LmNvbnRlbnQ7XG4gICAgaWYgKCEhdGVtcGxhdGUpIHtcbiAgICAgICAgaW5zZXJ0Tm9kZUludG9UZW1wbGF0ZSh0ZW1wbGF0ZSwgY29uZGVuc2VkU3R5bGUsIGNvbnRlbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb250ZW50Lmluc2VydEJlZm9yZShjb25kZW5zZWRTdHlsZSwgY29udGVudC5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgLy8gTm90ZSwgaXQncyBpbXBvcnRhbnQgdGhhdCBTaGFkeUNTUyBnZXRzIHRoZSB0ZW1wbGF0ZSB0aGF0IGBsaXQtaHRtbGBcbiAgICAvLyB3aWxsIGFjdHVhbGx5IHJlbmRlciBzbyB0aGF0IGl0IGNhbiB1cGRhdGUgdGhlIHN0eWxlIGluc2lkZSB3aGVuXG4gICAgLy8gbmVlZGVkIChlLmcuIEBhcHBseSBuYXRpdmUgU2hhZG93IERPTSBjYXNlKS5cbiAgICB3aW5kb3cuU2hhZHlDU1MucHJlcGFyZVRlbXBsYXRlU3R5bGVzKHRlbXBsYXRlRWxlbWVudCwgc2NvcGVOYW1lKTtcbiAgICBjb25zdCBzdHlsZSA9IGNvbnRlbnQucXVlcnlTZWxlY3Rvcignc3R5bGUnKTtcbiAgICBpZiAod2luZG93LlNoYWR5Q1NTLm5hdGl2ZVNoYWRvdyAmJiBzdHlsZSAhPT0gbnVsbCkge1xuICAgICAgICAvLyBXaGVuIGluIG5hdGl2ZSBTaGFkb3cgRE9NLCBlbnN1cmUgdGhlIHN0eWxlIGNyZWF0ZWQgYnkgU2hhZHlDU1MgaXNcbiAgICAgICAgLy8gaW5jbHVkZWQgaW4gaW5pdGlhbGx5IHJlbmRlcmVkIG91dHB1dCAoYHJlbmRlcmVkRE9NYCkuXG4gICAgICAgIHJlbmRlcmVkRE9NLmluc2VydEJlZm9yZShzdHlsZS5jbG9uZU5vZGUodHJ1ZSksIHJlbmRlcmVkRE9NLmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICBlbHNlIGlmICghIXRlbXBsYXRlKSB7XG4gICAgICAgIC8vIFdoZW4gbm8gc3R5bGUgaXMgbGVmdCBpbiB0aGUgdGVtcGxhdGUsIHBhcnRzIHdpbGwgYmUgYnJva2VuIGFzIGFcbiAgICAgICAgLy8gcmVzdWx0LiBUbyBmaXggdGhpcywgd2UgcHV0IGJhY2sgdGhlIHN0eWxlIG5vZGUgU2hhZHlDU1MgcmVtb3ZlZFxuICAgICAgICAvLyBhbmQgdGhlbiB0ZWxsIGxpdCB0byByZW1vdmUgdGhhdCBub2RlIGZyb20gdGhlIHRlbXBsYXRlLlxuICAgICAgICAvLyBUaGVyZSBjYW4gYmUgbm8gc3R5bGUgaW4gdGhlIHRlbXBsYXRlIGluIDIgY2FzZXMgKDEpIHdoZW4gU2hhZHkgRE9NXG4gICAgICAgIC8vIGlzIGluIHVzZSwgU2hhZHlDU1MgcmVtb3ZlcyBhbGwgc3R5bGVzLCAoMikgd2hlbiBuYXRpdmUgU2hhZG93IERPTVxuICAgICAgICAvLyBpcyBpbiB1c2UgU2hhZHlDU1MgcmVtb3ZlcyB0aGUgc3R5bGUgaWYgaXQgY29udGFpbnMgbm8gY29udGVudC5cbiAgICAgICAgLy8gTk9URSwgU2hhZHlDU1MgY3JlYXRlcyBpdHMgb3duIHN0eWxlIHNvIHdlIGNhbiBzYWZlbHkgYWRkL3JlbW92ZVxuICAgICAgICAvLyBgY29uZGVuc2VkU3R5bGVgIGhlcmUuXG4gICAgICAgIGNvbnRlbnQuaW5zZXJ0QmVmb3JlKGNvbmRlbnNlZFN0eWxlLCBjb250ZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICBjb25zdCByZW1vdmVzID0gbmV3IFNldCgpO1xuICAgICAgICByZW1vdmVzLmFkZChjb25kZW5zZWRTdHlsZSk7XG4gICAgICAgIHJlbW92ZU5vZGVzRnJvbVRlbXBsYXRlKHRlbXBsYXRlLCByZW1vdmVzKTtcbiAgICB9XG59O1xuLyoqXG4gKiBFeHRlbnNpb24gdG8gdGhlIHN0YW5kYXJkIGByZW5kZXJgIG1ldGhvZCB3aGljaCBzdXBwb3J0cyByZW5kZXJpbmdcbiAqIHRvIFNoYWRvd1Jvb3RzIHdoZW4gdGhlIFNoYWR5RE9NIChodHRwczovL2dpdGh1Yi5jb20vd2ViY29tcG9uZW50cy9zaGFkeWRvbSlcbiAqIGFuZCBTaGFkeUNTUyAoaHR0cHM6Ly9naXRodWIuY29tL3dlYmNvbXBvbmVudHMvc2hhZHljc3MpIHBvbHlmaWxscyBhcmUgdXNlZFxuICogb3Igd2hlbiB0aGUgd2ViY29tcG9uZW50c2pzXG4gKiAoaHR0cHM6Ly9naXRodWIuY29tL3dlYmNvbXBvbmVudHMvd2ViY29tcG9uZW50c2pzKSBwb2x5ZmlsbCBpcyB1c2VkLlxuICpcbiAqIEFkZHMgYSBgc2NvcGVOYW1lYCBvcHRpb24gd2hpY2ggaXMgdXNlZCB0byBzY29wZSBlbGVtZW50IERPTSBhbmQgc3R5bGVzaGVldHNcbiAqIHdoZW4gbmF0aXZlIFNoYWRvd0RPTSBpcyB1bmF2YWlsYWJsZS4gVGhlIGBzY29wZU5hbWVgIHdpbGwgYmUgYWRkZWQgdG9cbiAqIHRoZSBjbGFzcyBhdHRyaWJ1dGUgb2YgYWxsIHJlbmRlcmVkIERPTS4gSW4gYWRkaXRpb24sIGFueSBzdHlsZSBlbGVtZW50cyB3aWxsXG4gKiBiZSBhdXRvbWF0aWNhbGx5IHJlLXdyaXR0ZW4gd2l0aCB0aGlzIGBzY29wZU5hbWVgIHNlbGVjdG9yIGFuZCBtb3ZlZCBvdXRcbiAqIG9mIHRoZSByZW5kZXJlZCBET00gYW5kIGludG8gdGhlIGRvY3VtZW50IGA8aGVhZD5gLlxuICpcbiAqIEl0IGlzIGNvbW1vbiB0byB1c2UgdGhpcyByZW5kZXIgbWV0aG9kIGluIGNvbmp1bmN0aW9uIHdpdGggYSBjdXN0b20gZWxlbWVudFxuICogd2hpY2ggcmVuZGVycyBhIHNoYWRvd1Jvb3QuIFdoZW4gdGhpcyBpcyBkb25lLCB0eXBpY2FsbHkgdGhlIGVsZW1lbnQnc1xuICogYGxvY2FsTmFtZWAgc2hvdWxkIGJlIHVzZWQgYXMgdGhlIGBzY29wZU5hbWVgLlxuICpcbiAqIEluIGFkZGl0aW9uIHRvIERPTSBzY29waW5nLCBTaGFkeUNTUyBhbHNvIHN1cHBvcnRzIGEgYmFzaWMgc2hpbSBmb3IgY3NzXG4gKiBjdXN0b20gcHJvcGVydGllcyAobmVlZGVkIG9ubHkgb24gb2xkZXIgYnJvd3NlcnMgbGlrZSBJRTExKSBhbmQgYSBzaGltIGZvclxuICogYSBkZXByZWNhdGVkIGZlYXR1cmUgY2FsbGVkIGBAYXBwbHlgIHRoYXQgc3VwcG9ydHMgYXBwbHlpbmcgYSBzZXQgb2YgY3NzXG4gKiBjdXN0b20gcHJvcGVydGllcyB0byBhIGdpdmVuIGxvY2F0aW9uLlxuICpcbiAqIFVzYWdlIGNvbnNpZGVyYXRpb25zOlxuICpcbiAqICogUGFydCB2YWx1ZXMgaW4gYDxzdHlsZT5gIGVsZW1lbnRzIGFyZSBvbmx5IGFwcGxpZWQgdGhlIGZpcnN0IHRpbWUgYSBnaXZlblxuICogYHNjb3BlTmFtZWAgcmVuZGVycy4gU3Vic2VxdWVudCBjaGFuZ2VzIHRvIHBhcnRzIGluIHN0eWxlIGVsZW1lbnRzIHdpbGwgaGF2ZVxuICogbm8gZWZmZWN0LiBCZWNhdXNlIG9mIHRoaXMsIHBhcnRzIGluIHN0eWxlIGVsZW1lbnRzIHNob3VsZCBvbmx5IGJlIHVzZWQgZm9yXG4gKiB2YWx1ZXMgdGhhdCB3aWxsIG5ldmVyIGNoYW5nZSwgZm9yIGV4YW1wbGUgcGFydHMgdGhhdCBzZXQgc2NvcGUtd2lkZSB0aGVtZVxuICogdmFsdWVzIG9yIHBhcnRzIHdoaWNoIHJlbmRlciBzaGFyZWQgc3R5bGUgZWxlbWVudHMuXG4gKlxuICogKiBOb3RlLCBkdWUgdG8gYSBsaW1pdGF0aW9uIG9mIHRoZSBTaGFkeURPTSBwb2x5ZmlsbCwgcmVuZGVyaW5nIGluIGFcbiAqIGN1c3RvbSBlbGVtZW50J3MgYGNvbnN0cnVjdG9yYCBpcyBub3Qgc3VwcG9ydGVkLiBJbnN0ZWFkIHJlbmRlcmluZyBzaG91bGRcbiAqIGVpdGhlciBkb25lIGFzeW5jaHJvbm91c2x5LCBmb3IgZXhhbXBsZSBhdCBtaWNyb3Rhc2sgdGltaW5nIChmb3IgZXhhbXBsZVxuICogYFByb21pc2UucmVzb2x2ZSgpYCksIG9yIGJlIGRlZmVycmVkIHVudGlsIHRoZSBmaXJzdCB0aW1lIHRoZSBlbGVtZW50J3NcbiAqIGBjb25uZWN0ZWRDYWxsYmFja2AgcnVucy5cbiAqXG4gKiBVc2FnZSBjb25zaWRlcmF0aW9ucyB3aGVuIHVzaW5nIHNoaW1tZWQgY3VzdG9tIHByb3BlcnRpZXMgb3IgYEBhcHBseWA6XG4gKlxuICogKiBXaGVuZXZlciBhbnkgZHluYW1pYyBjaGFuZ2VzIGFyZSBtYWRlIHdoaWNoIGFmZmVjdFxuICogY3NzIGN1c3RvbSBwcm9wZXJ0aWVzLCBgU2hhZHlDU1Muc3R5bGVFbGVtZW50KGVsZW1lbnQpYCBtdXN0IGJlIGNhbGxlZFxuICogdG8gdXBkYXRlIHRoZSBlbGVtZW50LiBUaGVyZSBhcmUgdHdvIGNhc2VzIHdoZW4gdGhpcyBpcyBuZWVkZWQ6XG4gKiAoMSkgdGhlIGVsZW1lbnQgaXMgY29ubmVjdGVkIHRvIGEgbmV3IHBhcmVudCwgKDIpIGEgY2xhc3MgaXMgYWRkZWQgdG8gdGhlXG4gKiBlbGVtZW50IHRoYXQgY2F1c2VzIGl0IHRvIG1hdGNoIGRpZmZlcmVudCBjdXN0b20gcHJvcGVydGllcy5cbiAqIFRvIGFkZHJlc3MgdGhlIGZpcnN0IGNhc2Ugd2hlbiByZW5kZXJpbmcgYSBjdXN0b20gZWxlbWVudCwgYHN0eWxlRWxlbWVudGBcbiAqIHNob3VsZCBiZSBjYWxsZWQgaW4gdGhlIGVsZW1lbnQncyBgY29ubmVjdGVkQ2FsbGJhY2tgLlxuICpcbiAqICogU2hpbW1lZCBjdXN0b20gcHJvcGVydGllcyBtYXkgb25seSBiZSBkZWZpbmVkIGVpdGhlciBmb3IgYW4gZW50aXJlXG4gKiBzaGFkb3dSb290IChmb3IgZXhhbXBsZSwgaW4gYSBgOmhvc3RgIHJ1bGUpIG9yIHZpYSBhIHJ1bGUgdGhhdCBkaXJlY3RseVxuICogbWF0Y2hlcyBhbiBlbGVtZW50IHdpdGggYSBzaGFkb3dSb290LiBJbiBvdGhlciB3b3JkcywgaW5zdGVhZCBvZiBmbG93aW5nIGZyb21cbiAqIHBhcmVudCB0byBjaGlsZCBhcyBkbyBuYXRpdmUgY3NzIGN1c3RvbSBwcm9wZXJ0aWVzLCBzaGltbWVkIGN1c3RvbSBwcm9wZXJ0aWVzXG4gKiBmbG93IG9ubHkgZnJvbSBzaGFkb3dSb290cyB0byBuZXN0ZWQgc2hhZG93Um9vdHMuXG4gKlxuICogKiBXaGVuIHVzaW5nIGBAYXBwbHlgIG1peGluZyBjc3Mgc2hvcnRoYW5kIHByb3BlcnR5IG5hbWVzIHdpdGhcbiAqIG5vbi1zaG9ydGhhbmQgbmFtZXMgKGZvciBleGFtcGxlIGBib3JkZXJgIGFuZCBgYm9yZGVyLXdpZHRoYCkgaXMgbm90XG4gKiBzdXBwb3J0ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCByZW5kZXIgPSAocmVzdWx0LCBjb250YWluZXIsIG9wdGlvbnMpID0+IHtcbiAgICBpZiAoIW9wdGlvbnMgfHwgdHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnIHx8ICFvcHRpb25zLnNjb3BlTmFtZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBgc2NvcGVOYW1lYCBvcHRpb24gaXMgcmVxdWlyZWQuJyk7XG4gICAgfVxuICAgIGNvbnN0IHNjb3BlTmFtZSA9IG9wdGlvbnMuc2NvcGVOYW1lO1xuICAgIGNvbnN0IGhhc1JlbmRlcmVkID0gcGFydHMuaGFzKGNvbnRhaW5lcik7XG4gICAgY29uc3QgbmVlZHNTY29waW5nID0gY29tcGF0aWJsZVNoYWR5Q1NTVmVyc2lvbiAmJlxuICAgICAgICBjb250YWluZXIubm9kZVR5cGUgPT09IDExIC8qIE5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERSAqLyAmJlxuICAgICAgICAhIWNvbnRhaW5lci5ob3N0O1xuICAgIC8vIEhhbmRsZSBmaXJzdCByZW5kZXIgdG8gYSBzY29wZSBzcGVjaWFsbHkuLi5cbiAgICBjb25zdCBmaXJzdFNjb3BlUmVuZGVyID0gbmVlZHNTY29waW5nICYmICFzaGFkeVJlbmRlclNldC5oYXMoc2NvcGVOYW1lKTtcbiAgICAvLyBPbiBmaXJzdCBzY29wZSByZW5kZXIsIHJlbmRlciBpbnRvIGEgZnJhZ21lbnQ7IHRoaXMgY2Fubm90IGJlIGEgc2luZ2xlXG4gICAgLy8gZnJhZ21lbnQgdGhhdCBpcyByZXVzZWQgc2luY2UgbmVzdGVkIHJlbmRlcnMgY2FuIG9jY3VyIHN5bmNocm9ub3VzbHkuXG4gICAgY29uc3QgcmVuZGVyQ29udGFpbmVyID0gZmlyc3RTY29wZVJlbmRlciA/IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSA6IGNvbnRhaW5lcjtcbiAgICBsaXRSZW5kZXIocmVzdWx0LCByZW5kZXJDb250YWluZXIsIE9iamVjdC5hc3NpZ24oeyB0ZW1wbGF0ZUZhY3Rvcnk6IHNoYWR5VGVtcGxhdGVGYWN0b3J5KHNjb3BlTmFtZSkgfSwgb3B0aW9ucykpO1xuICAgIC8vIFdoZW4gcGVyZm9ybWluZyBmaXJzdCBzY29wZSByZW5kZXIsXG4gICAgLy8gKDEpIFdlJ3ZlIHJlbmRlcmVkIGludG8gYSBmcmFnbWVudCBzbyB0aGF0IHRoZXJlJ3MgYSBjaGFuY2UgdG9cbiAgICAvLyBgcHJlcGFyZVRlbXBsYXRlU3R5bGVzYCBiZWZvcmUgc3ViLWVsZW1lbnRzIGhpdCB0aGUgRE9NXG4gICAgLy8gKHdoaWNoIG1pZ2h0IGNhdXNlIHRoZW0gdG8gcmVuZGVyIGJhc2VkIG9uIGEgY29tbW9uIHBhdHRlcm4gb2ZcbiAgICAvLyByZW5kZXJpbmcgaW4gYSBjdXN0b20gZWxlbWVudCdzIGBjb25uZWN0ZWRDYWxsYmFja2ApO1xuICAgIC8vICgyKSBTY29wZSB0aGUgdGVtcGxhdGUgd2l0aCBTaGFkeUNTUyBvbmUgdGltZSBvbmx5IGZvciB0aGlzIHNjb3BlLlxuICAgIC8vICgzKSBSZW5kZXIgdGhlIGZyYWdtZW50IGludG8gdGhlIGNvbnRhaW5lciBhbmQgbWFrZSBzdXJlIHRoZVxuICAgIC8vIGNvbnRhaW5lciBrbm93cyBpdHMgYHBhcnRgIGlzIHRoZSBvbmUgd2UganVzdCByZW5kZXJlZC4gVGhpcyBlbnN1cmVzXG4gICAgLy8gRE9NIHdpbGwgYmUgcmUtdXNlZCBvbiBzdWJzZXF1ZW50IHJlbmRlcnMuXG4gICAgaWYgKGZpcnN0U2NvcGVSZW5kZXIpIHtcbiAgICAgICAgY29uc3QgcGFydCA9IHBhcnRzLmdldChyZW5kZXJDb250YWluZXIpO1xuICAgICAgICBwYXJ0cy5kZWxldGUocmVuZGVyQ29udGFpbmVyKTtcbiAgICAgICAgLy8gU2hhZHlDU1MgbWlnaHQgaGF2ZSBzdHlsZSBzaGVldHMgKGUuZy4gZnJvbSBgcHJlcGFyZUFkb3B0ZWRDc3NUZXh0YClcbiAgICAgICAgLy8gdGhhdCBzaG91bGQgYXBwbHkgdG8gYHJlbmRlckNvbnRhaW5lcmAgZXZlbiBpZiB0aGUgcmVuZGVyZWQgdmFsdWUgaXNcbiAgICAgICAgLy8gbm90IGEgVGVtcGxhdGVJbnN0YW5jZS4gSG93ZXZlciwgaXQgd2lsbCBvbmx5IGluc2VydCBzY29wZWQgc3R5bGVzXG4gICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50IGlmIGBwcmVwYXJlVGVtcGxhdGVTdHlsZXNgIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkXG4gICAgICAgIC8vIGZvciB0aGUgZ2l2ZW4gc2NvcGUgbmFtZS5cbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBwYXJ0LnZhbHVlIGluc3RhbmNlb2YgVGVtcGxhdGVJbnN0YW5jZSA/XG4gICAgICAgICAgICBwYXJ0LnZhbHVlLnRlbXBsYXRlIDpcbiAgICAgICAgICAgIHVuZGVmaW5lZDtcbiAgICAgICAgcHJlcGFyZVRlbXBsYXRlU3R5bGVzKHNjb3BlTmFtZSwgcmVuZGVyQ29udGFpbmVyLCB0ZW1wbGF0ZSk7XG4gICAgICAgIHJlbW92ZU5vZGVzKGNvbnRhaW5lciwgY29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmVuZGVyQ29udGFpbmVyKTtcbiAgICAgICAgcGFydHMuc2V0KGNvbnRhaW5lciwgcGFydCk7XG4gICAgfVxuICAgIC8vIEFmdGVyIGVsZW1lbnRzIGhhdmUgaGl0IHRoZSBET00sIHVwZGF0ZSBzdHlsaW5nIGlmIHRoaXMgaXMgdGhlXG4gICAgLy8gaW5pdGlhbCByZW5kZXIgdG8gdGhpcyBjb250YWluZXIuXG4gICAgLy8gVGhpcyBpcyBuZWVkZWQgd2hlbmV2ZXIgZHluYW1pYyBjaGFuZ2VzIGFyZSBtYWRlIHNvIGl0IHdvdWxkIGJlXG4gICAgLy8gc2FmZXN0IHRvIGRvIGV2ZXJ5IHJlbmRlcjsgaG93ZXZlciwgdGhpcyB3b3VsZCByZWdyZXNzIHBlcmZvcm1hbmNlXG4gICAgLy8gc28gd2UgbGVhdmUgaXQgdXAgdG8gdGhlIHVzZXIgdG8gY2FsbCBgU2hhZHlDU1Muc3R5bGVFbGVtZW50YFxuICAgIC8vIGZvciBkeW5hbWljIGNoYW5nZXMuXG4gICAgaWYgKCFoYXNSZW5kZXJlZCAmJiBuZWVkc1Njb3BpbmcpIHtcbiAgICAgICAgd2luZG93LlNoYWR5Q1NTLnN0eWxlRWxlbWVudChjb250YWluZXIuaG9zdCk7XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoYWR5LXJlbmRlci5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG52YXIgX2E7XG4vKipcbiAqIFdoZW4gdXNpbmcgQ2xvc3VyZSBDb21waWxlciwgSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eShwcm9wZXJ0eSwgb2JqZWN0KSBpc1xuICogcmVwbGFjZWQgYXQgY29tcGlsZSB0aW1lIGJ5IHRoZSBtdW5nZWQgbmFtZSBmb3Igb2JqZWN0W3Byb3BlcnR5XS4gV2UgY2Fubm90XG4gKiBhbGlhcyB0aGlzIGZ1bmN0aW9uLCBzbyB3ZSBoYXZlIHRvIHVzZSBhIHNtYWxsIHNoaW0gdGhhdCBoYXMgdGhlIHNhbWVcbiAqIGJlaGF2aW9yIHdoZW4gbm90IGNvbXBpbGluZy5cbiAqL1xud2luZG93LkpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkgPVxuICAgIChwcm9wLCBfb2JqKSA9PiBwcm9wO1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRDb252ZXJ0ZXIgPSB7XG4gICAgdG9BdHRyaWJ1dGUodmFsdWUsIHR5cGUpIHtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIEJvb2xlYW46XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlID8gJycgOiBudWxsO1xuICAgICAgICAgICAgY2FzZSBPYmplY3Q6XG4gICAgICAgICAgICBjYXNlIEFycmF5OlxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSB2YWx1ZSBpcyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAgcGFzcyB0aGlzIHRocm91Z2hcbiAgICAgICAgICAgICAgICAvLyB0byBhbGxvdyByZW1vdmluZy9ubyBjaGFuZ2UgYmVoYXZpb3IuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlID09IG51bGwgPyB2YWx1ZSA6IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBmcm9tQXR0cmlidXRlKHZhbHVlLCB0eXBlKSB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBCb29sZWFuOlxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSAhPT0gbnVsbDtcbiAgICAgICAgICAgIGNhc2UgTnVtYmVyOlxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbCA/IG51bGwgOiBOdW1iZXIodmFsdWUpO1xuICAgICAgICAgICAgY2FzZSBPYmplY3Q6XG4gICAgICAgICAgICBjYXNlIEFycmF5OlxuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxufTtcbi8qKlxuICogQ2hhbmdlIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgZGlmZmVyZW50IGZyb20gYG9sZFZhbHVlYC5cbiAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgYXMgdGhlIGRlZmF1bHQgZm9yIGEgcHJvcGVydHkncyBgaGFzQ2hhbmdlZGAgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBjb25zdCBub3RFcXVhbCA9ICh2YWx1ZSwgb2xkKSA9PiB7XG4gICAgLy8gVGhpcyBlbnN1cmVzIChvbGQ9PU5hTiwgdmFsdWU9PU5hTikgYWx3YXlzIHJldHVybnMgZmFsc2VcbiAgICByZXR1cm4gb2xkICE9PSB2YWx1ZSAmJiAob2xkID09PSBvbGQgfHwgdmFsdWUgPT09IHZhbHVlKTtcbn07XG5jb25zdCBkZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvbiA9IHtcbiAgICBhdHRyaWJ1dGU6IHRydWUsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNvbnZlcnRlcjogZGVmYXVsdENvbnZlcnRlcixcbiAgICByZWZsZWN0OiBmYWxzZSxcbiAgICBoYXNDaGFuZ2VkOiBub3RFcXVhbFxufTtcbmNvbnN0IFNUQVRFX0hBU19VUERBVEVEID0gMTtcbmNvbnN0IFNUQVRFX1VQREFURV9SRVFVRVNURUQgPSAxIDw8IDI7XG5jb25zdCBTVEFURV9JU19SRUZMRUNUSU5HX1RPX0FUVFJJQlVURSA9IDEgPDwgMztcbmNvbnN0IFNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fUFJPUEVSVFkgPSAxIDw8IDQ7XG4vKipcbiAqIFRoZSBDbG9zdXJlIEpTIENvbXBpbGVyIGRvZXNuJ3QgY3VycmVudGx5IGhhdmUgZ29vZCBzdXBwb3J0IGZvciBzdGF0aWNcbiAqIHByb3BlcnR5IHNlbWFudGljcyB3aGVyZSBcInRoaXNcIiBpcyBkeW5hbWljIChlLmcuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtY29tcGlsZXIvaXNzdWVzLzMxNzcgYW5kIG90aGVycykgc28gd2UgdXNlXG4gKiB0aGlzIGhhY2sgdG8gYnlwYXNzIGFueSByZXdyaXRpbmcgYnkgdGhlIGNvbXBpbGVyLlxuICovXG5jb25zdCBmaW5hbGl6ZWQgPSAnZmluYWxpemVkJztcbi8qKlxuICogQmFzZSBlbGVtZW50IGNsYXNzIHdoaWNoIG1hbmFnZXMgZWxlbWVudCBwcm9wZXJ0aWVzIGFuZCBhdHRyaWJ1dGVzLiBXaGVuXG4gKiBwcm9wZXJ0aWVzIGNoYW5nZSwgdGhlIGB1cGRhdGVgIG1ldGhvZCBpcyBhc3luY2hyb25vdXNseSBjYWxsZWQuIFRoaXMgbWV0aG9kXG4gKiBzaG91bGQgYmUgc3VwcGxpZWQgYnkgc3ViY2xhc3NlcnMgdG8gcmVuZGVyIHVwZGF0ZXMgYXMgZGVzaXJlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIFVwZGF0aW5nRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUgPSAwO1xuICAgICAgICB0aGlzLl9pbnN0YW5jZVByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8vIEluaXRpYWxpemUgdG8gYW4gdW5yZXNvbHZlZCBQcm9taXNlIHNvIHdlIGNhbiBtYWtlIHN1cmUgdGhlIGVsZW1lbnQgaGFzXG4gICAgICAgIC8vIGNvbm5lY3RlZCBiZWZvcmUgZmlyc3QgdXBkYXRlLlxuICAgICAgICB0aGlzLl91cGRhdGVQcm9taXNlID0gbmV3IFByb21pc2UoKHJlcykgPT4gdGhpcy5fZW5hYmxlVXBkYXRpbmdSZXNvbHZlciA9IHJlcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXAgd2l0aCBrZXlzIGZvciBhbnkgcHJvcGVydGllcyB0aGF0IGhhdmUgY2hhbmdlZCBzaW5jZSB0aGUgbGFzdFxuICAgICAgICAgKiB1cGRhdGUgY3ljbGUgd2l0aCBwcmV2aW91cyB2YWx1ZXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9jaGFuZ2VkUHJvcGVydGllcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcCB3aXRoIGtleXMgb2YgcHJvcGVydGllcyB0aGF0IHNob3VsZCBiZSByZWZsZWN0ZWQgd2hlbiB1cGRhdGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fcmVmbGVjdGluZ1Byb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBhdHRyaWJ1dGVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHJlZ2lzdGVyZWQgcHJvcGVydGllcy5cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgICAgICAvLyBub3RlOiBwaWdneSBiYWNraW5nIG9uIHRoaXMgdG8gZW5zdXJlIHdlJ3JlIGZpbmFsaXplZC5cbiAgICAgICAgdGhpcy5maW5hbGl6ZSgpO1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gW107XG4gICAgICAgIC8vIFVzZSBmb3JFYWNoIHNvIHRoaXMgd29ya3MgZXZlbiBpZiBmb3Ivb2YgbG9vcHMgYXJlIGNvbXBpbGVkIHRvIGZvciBsb29wc1xuICAgICAgICAvLyBleHBlY3RpbmcgYXJyYXlzXG4gICAgICAgIHRoaXMuX2NsYXNzUHJvcGVydGllcy5mb3JFYWNoKCh2LCBwKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhdHRyID0gdGhpcy5fYXR0cmlidXRlTmFtZUZvclByb3BlcnR5KHAsIHYpO1xuICAgICAgICAgICAgaWYgKGF0dHIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2F0dHJpYnV0ZVRvUHJvcGVydHlNYXAuc2V0KGF0dHIsIHApO1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMucHVzaChhdHRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIHRoZSBwcml2YXRlIGBfY2xhc3NQcm9wZXJ0aWVzYCBwcm9wZXJ0eSBtZXRhZGF0YSBpcyBjcmVhdGVkLlxuICAgICAqIEluIGFkZGl0aW9uIHRvIGBmaW5hbGl6ZWAgdGhpcyBpcyBhbHNvIGNhbGxlZCBpbiBgY3JlYXRlUHJvcGVydHlgIHRvXG4gICAgICogZW5zdXJlIHRoZSBgQHByb3BlcnR5YCBkZWNvcmF0b3IgY2FuIGFkZCBwcm9wZXJ0eSBtZXRhZGF0YS5cbiAgICAgKi9cbiAgICAvKiogQG5vY29sbGFwc2UgKi9cbiAgICBzdGF0aWMgX2Vuc3VyZUNsYXNzUHJvcGVydGllcygpIHtcbiAgICAgICAgLy8gZW5zdXJlIHByaXZhdGUgc3RvcmFnZSBmb3IgcHJvcGVydHkgZGVjbGFyYXRpb25zLlxuICAgICAgICBpZiAoIXRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnX2NsYXNzUHJvcGVydGllcycsIHRoaXMpKSkge1xuICAgICAgICAgICAgdGhpcy5fY2xhc3NQcm9wZXJ0aWVzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgLy8gTk9URTogV29ya2Fyb3VuZCBJRTExIG5vdCBzdXBwb3J0aW5nIE1hcCBjb25zdHJ1Y3RvciBhcmd1bWVudC5cbiAgICAgICAgICAgIGNvbnN0IHN1cGVyUHJvcGVydGllcyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5fY2xhc3NQcm9wZXJ0aWVzO1xuICAgICAgICAgICAgaWYgKHN1cGVyUHJvcGVydGllcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3VwZXJQcm9wZXJ0aWVzLmZvckVhY2goKHYsIGspID0+IHRoaXMuX2NsYXNzUHJvcGVydGllcy5zZXQoaywgdikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBwcm9wZXJ0eSBhY2Nlc3NvciBvbiB0aGUgZWxlbWVudCBwcm90b3R5cGUgaWYgb25lIGRvZXMgbm90IGV4aXN0XG4gICAgICogYW5kIHN0b3JlcyBhIFByb3BlcnR5RGVjbGFyYXRpb24gZm9yIHRoZSBwcm9wZXJ0eSB3aXRoIHRoZSBnaXZlbiBvcHRpb25zLlxuICAgICAqIFRoZSBwcm9wZXJ0eSBzZXR0ZXIgY2FsbHMgdGhlIHByb3BlcnR5J3MgYGhhc0NoYW5nZWRgIHByb3BlcnR5IG9wdGlvblxuICAgICAqIG9yIHVzZXMgYSBzdHJpY3QgaWRlbnRpdHkgY2hlY2sgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgb3Igbm90IHRvIHJlcXVlc3RcbiAgICAgKiBhbiB1cGRhdGUuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBtYXkgYmUgb3ZlcnJpZGRlbiB0byBjdXN0b21pemUgcHJvcGVydGllczsgaG93ZXZlcixcbiAgICAgKiB3aGVuIGRvaW5nIHNvLCBpdCdzIGltcG9ydGFudCB0byBjYWxsIGBzdXBlci5jcmVhdGVQcm9wZXJ0eWAgdG8gZW5zdXJlXG4gICAgICogdGhlIHByb3BlcnR5IGlzIHNldHVwIGNvcnJlY3RseS4gVGhpcyBtZXRob2QgY2FsbHNcbiAgICAgKiBgZ2V0UHJvcGVydHlEZXNjcmlwdG9yYCBpbnRlcm5hbGx5IHRvIGdldCBhIGRlc2NyaXB0b3IgdG8gaW5zdGFsbC5cbiAgICAgKiBUbyBjdXN0b21pemUgd2hhdCBwcm9wZXJ0aWVzIGRvIHdoZW4gdGhleSBhcmUgZ2V0IG9yIHNldCwgb3ZlcnJpZGVcbiAgICAgKiBgZ2V0UHJvcGVydHlEZXNjcmlwdG9yYC4gVG8gY3VzdG9taXplIHRoZSBvcHRpb25zIGZvciBhIHByb3BlcnR5LFxuICAgICAqIGltcGxlbWVudCBgY3JlYXRlUHJvcGVydHlgIGxpa2UgdGhpczpcbiAgICAgKlxuICAgICAqIHN0YXRpYyBjcmVhdGVQcm9wZXJ0eShuYW1lLCBvcHRpb25zKSB7XG4gICAgICogICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihvcHRpb25zLCB7bXlPcHRpb246IHRydWV9KTtcbiAgICAgKiAgIHN1cGVyLmNyZWF0ZVByb3BlcnR5KG5hbWUsIG9wdGlvbnMpO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZVByb3BlcnR5KG5hbWUsIG9wdGlvbnMgPSBkZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvbikge1xuICAgICAgICAvLyBOb3RlLCBzaW5jZSB0aGlzIGNhbiBiZSBjYWxsZWQgYnkgdGhlIGBAcHJvcGVydHlgIGRlY29yYXRvciB3aGljaFxuICAgICAgICAvLyBpcyBjYWxsZWQgYmVmb3JlIGBmaW5hbGl6ZWAsIHdlIGVuc3VyZSBzdG9yYWdlIGV4aXN0cyBmb3IgcHJvcGVydHlcbiAgICAgICAgLy8gbWV0YWRhdGEuXG4gICAgICAgIHRoaXMuX2Vuc3VyZUNsYXNzUHJvcGVydGllcygpO1xuICAgICAgICB0aGlzLl9jbGFzc1Byb3BlcnRpZXMuc2V0KG5hbWUsIG9wdGlvbnMpO1xuICAgICAgICAvLyBEbyBub3QgZ2VuZXJhdGUgYW4gYWNjZXNzb3IgaWYgdGhlIHByb3RvdHlwZSBhbHJlYWR5IGhhcyBvbmUsIHNpbmNlXG4gICAgICAgIC8vIGl0IHdvdWxkIGJlIGxvc3Qgb3RoZXJ3aXNlIGFuZCB0aGF0IHdvdWxkIG5ldmVyIGJlIHRoZSB1c2VyJ3MgaW50ZW50aW9uO1xuICAgICAgICAvLyBJbnN0ZWFkLCB3ZSBleHBlY3QgdXNlcnMgdG8gY2FsbCBgcmVxdWVzdFVwZGF0ZWAgdGhlbXNlbHZlcyBmcm9tXG4gICAgICAgIC8vIHVzZXItZGVmaW5lZCBhY2Nlc3NvcnMuIE5vdGUgdGhhdCBpZiB0aGUgc3VwZXIgaGFzIGFuIGFjY2Vzc29yIHdlIHdpbGxcbiAgICAgICAgLy8gc3RpbGwgb3ZlcndyaXRlIGl0XG4gICAgICAgIGlmIChvcHRpb25zLm5vQWNjZXNzb3IgfHwgdGhpcy5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXkgPSB0eXBlb2YgbmFtZSA9PT0gJ3N5bWJvbCcgPyBTeW1ib2woKSA6IGBfXyR7bmFtZX1gO1xuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gdGhpcy5nZXRQcm9wZXJ0eURlc2NyaXB0b3IobmFtZSwga2V5LCBvcHRpb25zKTtcbiAgICAgICAgaWYgKGRlc2NyaXB0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMucHJvdG90eXBlLCBuYW1lLCBkZXNjcmlwdG9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcHJvcGVydHkgZGVzY3JpcHRvciB0byBiZSBkZWZpbmVkIG9uIHRoZSBnaXZlbiBuYW1lZCBwcm9wZXJ0eS5cbiAgICAgKiBJZiBubyBkZXNjcmlwdG9yIGlzIHJldHVybmVkLCB0aGUgcHJvcGVydHkgd2lsbCBub3QgYmVjb21lIGFuIGFjY2Vzc29yLlxuICAgICAqIEZvciBleGFtcGxlLFxuICAgICAqXG4gICAgICogICBjbGFzcyBNeUVsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgICAgKiAgICAgc3RhdGljIGdldFByb3BlcnR5RGVzY3JpcHRvcihuYW1lLCBrZXksIG9wdGlvbnMpIHtcbiAgICAgKiAgICAgICBjb25zdCBkZWZhdWx0RGVzY3JpcHRvciA9XG4gICAgICogICAgICAgICAgIHN1cGVyLmdldFByb3BlcnR5RGVzY3JpcHRvcihuYW1lLCBrZXksIG9wdGlvbnMpO1xuICAgICAqICAgICAgIGNvbnN0IHNldHRlciA9IGRlZmF1bHREZXNjcmlwdG9yLnNldDtcbiAgICAgKiAgICAgICByZXR1cm4ge1xuICAgICAqICAgICAgICAgZ2V0OiBkZWZhdWx0RGVzY3JpcHRvci5nZXQsXG4gICAgICogICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgKiAgICAgICAgICAgc2V0dGVyLmNhbGwodGhpcywgdmFsdWUpO1xuICAgICAqICAgICAgICAgICAvLyBjdXN0b20gYWN0aW9uLlxuICAgICAqICAgICAgICAgfSxcbiAgICAgKiAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgKiAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgIH1cbiAgICAgKiAgIH1cbiAgICAgKlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGdldFByb3BlcnR5RGVzY3JpcHRvcihuYW1lLCBrZXksIF9vcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55IG5vIHN5bWJvbCBpbiBpbmRleFxuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW2tleV07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzW25hbWVdO1xuICAgICAgICAgICAgICAgIHRoaXNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RVcGRhdGUobmFtZSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcHJvcGVydHkgb3B0aW9ucyBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgICAqIFRoZXNlIG9wdGlvbnMgYXJlIGRlZmluZWQgd2l0aCBhIFByb3BlcnR5RGVjbGFyYXRpb24gdmlhIHRoZSBgcHJvcGVydGllc2BcbiAgICAgKiBvYmplY3Qgb3IgdGhlIGBAcHJvcGVydHlgIGRlY29yYXRvciBhbmQgYXJlIHJlZ2lzdGVyZWQgaW5cbiAgICAgKiBgY3JlYXRlUHJvcGVydHkoLi4uKWAuXG4gICAgICpcbiAgICAgKiBOb3RlLCB0aGlzIG1ldGhvZCBzaG91bGQgYmUgY29uc2lkZXJlZCBcImZpbmFsXCIgYW5kIG5vdCBvdmVycmlkZGVuLiBUb1xuICAgICAqIGN1c3RvbWl6ZSB0aGUgb3B0aW9ucyBmb3IgYSBnaXZlbiBwcm9wZXJ0eSwgb3ZlcnJpZGUgYGNyZWF0ZVByb3BlcnR5YC5cbiAgICAgKlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICogQGZpbmFsXG4gICAgICovXG4gICAgc3RhdGljIGdldFByb3BlcnR5T3B0aW9ucyhuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jbGFzc1Byb3BlcnRpZXMgJiYgdGhpcy5fY2xhc3NQcm9wZXJ0aWVzLmdldChuYW1lKSB8fFxuICAgICAgICAgICAgZGVmYXVsdFByb3BlcnR5RGVjbGFyYXRpb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgcHJvcGVydHkgYWNjZXNzb3JzIGZvciByZWdpc3RlcmVkIHByb3BlcnRpZXMgYW5kIGVuc3VyZXNcbiAgICAgKiBhbnkgc3VwZXJjbGFzc2VzIGFyZSBhbHNvIGZpbmFsaXplZC5cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBmaW5hbGl6ZSgpIHtcbiAgICAgICAgLy8gZmluYWxpemUgYW55IHN1cGVyY2xhc3Nlc1xuICAgICAgICBjb25zdCBzdXBlckN0b3IgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcyk7XG4gICAgICAgIGlmICghc3VwZXJDdG9yLmhhc093blByb3BlcnR5KGZpbmFsaXplZCkpIHtcbiAgICAgICAgICAgIHN1cGVyQ3Rvci5maW5hbGl6ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNbZmluYWxpemVkXSA9IHRydWU7XG4gICAgICAgIHRoaXMuX2Vuc3VyZUNsYXNzUHJvcGVydGllcygpO1xuICAgICAgICAvLyBpbml0aWFsaXplIE1hcCBwb3B1bGF0ZWQgaW4gb2JzZXJ2ZWRBdHRyaWJ1dGVzXG4gICAgICAgIHRoaXMuX2F0dHJpYnV0ZVRvUHJvcGVydHlNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIG1ha2UgYW55IHByb3BlcnRpZXNcbiAgICAgICAgLy8gTm90ZSwgb25seSBwcm9jZXNzIFwib3duXCIgcHJvcGVydGllcyBzaW5jZSB0aGlzIGVsZW1lbnQgd2lsbCBpbmhlcml0XG4gICAgICAgIC8vIGFueSBwcm9wZXJ0aWVzIGRlZmluZWQgb24gdGhlIHN1cGVyQ2xhc3MsIGFuZCBmaW5hbGl6YXRpb24gZW5zdXJlc1xuICAgICAgICAvLyB0aGUgZW50aXJlIHByb3RvdHlwZSBjaGFpbiBpcyBmaW5hbGl6ZWQuXG4gICAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ3Byb3BlcnRpZXMnLCB0aGlzKSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wZXJ0aWVzO1xuICAgICAgICAgICAgLy8gc3VwcG9ydCBzeW1ib2xzIGluIHByb3BlcnRpZXMgKElFMTEgZG9lcyBub3Qgc3VwcG9ydCB0aGlzKVxuICAgICAgICAgICAgY29uc3QgcHJvcEtleXMgPSBbXG4gICAgICAgICAgICAgICAgLi4uT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocHJvcHMpLFxuICAgICAgICAgICAgICAgIC4uLih0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gJ2Z1bmN0aW9uJykgP1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHByb3BzKSA6XG4gICAgICAgICAgICAgICAgICAgIFtdXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgLy8gVGhpcyBmb3Ivb2YgaXMgb2sgYmVjYXVzZSBwcm9wS2V5cyBpcyBhbiBhcnJheVxuICAgICAgICAgICAgZm9yIChjb25zdCBwIG9mIHByb3BLZXlzKSB7XG4gICAgICAgICAgICAgICAgLy8gbm90ZSwgdXNlIG9mIGBhbnlgIGlzIGR1ZSB0byBUeXBlU3JpcHQgbGFjayBvZiBzdXBwb3J0IGZvciBzeW1ib2wgaW5cbiAgICAgICAgICAgICAgICAvLyBpbmRleCB0eXBlc1xuICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnkgbm8gc3ltYm9sIGluIGluZGV4XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVQcm9wZXJ0eShwLCBwcm9wc1twXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcHJvcGVydHkgbmFtZSBmb3IgdGhlIGdpdmVuIGF0dHJpYnV0ZSBgbmFtZWAuXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX2F0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eShuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IG9wdGlvbnMuYXR0cmlidXRlO1xuICAgICAgICByZXR1cm4gYXR0cmlidXRlID09PSBmYWxzZSA/XG4gICAgICAgICAgICB1bmRlZmluZWQgOlxuICAgICAgICAgICAgKHR5cGVvZiBhdHRyaWJ1dGUgPT09ICdzdHJpbmcnID9cbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGUgOlxuICAgICAgICAgICAgICAgICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycgPyBuYW1lLnRvTG93ZXJDYXNlKCkgOiB1bmRlZmluZWQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGEgcHJvcGVydHkgc2hvdWxkIHJlcXVlc3QgYW4gdXBkYXRlLlxuICAgICAqIENhbGxlZCB3aGVuIGEgcHJvcGVydHkgdmFsdWUgaXMgc2V0IGFuZCB1c2VzIHRoZSBgaGFzQ2hhbmdlZGBcbiAgICAgKiBvcHRpb24gZm9yIHRoZSBwcm9wZXJ0eSBpZiBwcmVzZW50IG9yIGEgc3RyaWN0IGlkZW50aXR5IGNoZWNrLlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF92YWx1ZUhhc0NoYW5nZWQodmFsdWUsIG9sZCwgaGFzQ2hhbmdlZCA9IG5vdEVxdWFsKSB7XG4gICAgICAgIHJldHVybiBoYXNDaGFuZ2VkKHZhbHVlLCBvbGQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBmb3IgdGhlIGdpdmVuIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICAgKiBDYWxsZWQgdmlhIHRoZSBgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrYCBhbmQgdXNlcyB0aGUgcHJvcGVydHknc1xuICAgICAqIGBjb252ZXJ0ZXJgIG9yIGBjb252ZXJ0ZXIuZnJvbUF0dHJpYnV0ZWAgcHJvcGVydHkgb3B0aW9uLlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9wcm9wZXJ0eVZhbHVlRnJvbUF0dHJpYnV0ZSh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB0eXBlID0gb3B0aW9ucy50eXBlO1xuICAgICAgICBjb25zdCBjb252ZXJ0ZXIgPSBvcHRpb25zLmNvbnZlcnRlciB8fCBkZWZhdWx0Q29udmVydGVyO1xuICAgICAgICBjb25zdCBmcm9tQXR0cmlidXRlID0gKHR5cGVvZiBjb252ZXJ0ZXIgPT09ICdmdW5jdGlvbicgPyBjb252ZXJ0ZXIgOiBjb252ZXJ0ZXIuZnJvbUF0dHJpYnV0ZSk7XG4gICAgICAgIHJldHVybiBmcm9tQXR0cmlidXRlID8gZnJvbUF0dHJpYnV0ZSh2YWx1ZSwgdHlwZSkgOiB2YWx1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYXR0cmlidXRlIHZhbHVlIGZvciB0aGUgZ2l2ZW4gcHJvcGVydHkgdmFsdWUuIElmIHRoaXNcbiAgICAgKiByZXR1cm5zIHVuZGVmaW5lZCwgdGhlIHByb3BlcnR5IHdpbGwgKm5vdCogYmUgcmVmbGVjdGVkIHRvIGFuIGF0dHJpYnV0ZS5cbiAgICAgKiBJZiB0aGlzIHJldHVybnMgbnVsbCwgdGhlIGF0dHJpYnV0ZSB3aWxsIGJlIHJlbW92ZWQsIG90aGVyd2lzZSB0aGVcbiAgICAgKiBhdHRyaWJ1dGUgd2lsbCBiZSBzZXQgdG8gdGhlIHZhbHVlLlxuICAgICAqIFRoaXMgdXNlcyB0aGUgcHJvcGVydHkncyBgcmVmbGVjdGAgYW5kIGB0eXBlLnRvQXR0cmlidXRlYCBwcm9wZXJ0eSBvcHRpb25zLlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9wcm9wZXJ0eVZhbHVlVG9BdHRyaWJ1dGUodmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMucmVmbGVjdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHlwZSA9IG9wdGlvbnMudHlwZTtcbiAgICAgICAgY29uc3QgY29udmVydGVyID0gb3B0aW9ucy5jb252ZXJ0ZXI7XG4gICAgICAgIGNvbnN0IHRvQXR0cmlidXRlID0gY29udmVydGVyICYmIGNvbnZlcnRlci50b0F0dHJpYnV0ZSB8fFxuICAgICAgICAgICAgZGVmYXVsdENvbnZlcnRlci50b0F0dHJpYnV0ZTtcbiAgICAgICAgcmV0dXJuIHRvQXR0cmlidXRlKHZhbHVlLCB0eXBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgZWxlbWVudCBpbml0aWFsaXphdGlvbi4gQnkgZGVmYXVsdCBjYXB0dXJlcyBhbnkgcHJlLXNldCB2YWx1ZXMgZm9yXG4gICAgICogcmVnaXN0ZXJlZCBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIGluaXRpYWxpemUoKSB7XG4gICAgICAgIHRoaXMuX3NhdmVJbnN0YW5jZVByb3BlcnRpZXMoKTtcbiAgICAgICAgLy8gZW5zdXJlcyBmaXJzdCB1cGRhdGUgd2lsbCBiZSBjYXVnaHQgYnkgYW4gZWFybHkgYWNjZXNzIG9mXG4gICAgICAgIC8vIGB1cGRhdGVDb21wbGV0ZWBcbiAgICAgICAgdGhpcy5fcmVxdWVzdFVwZGF0ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaXhlcyBhbnkgcHJvcGVydGllcyBzZXQgb24gdGhlIGluc3RhbmNlIGJlZm9yZSB1cGdyYWRlIHRpbWUuXG4gICAgICogT3RoZXJ3aXNlIHRoZXNlIHdvdWxkIHNoYWRvdyB0aGUgYWNjZXNzb3IgYW5kIGJyZWFrIHRoZXNlIHByb3BlcnRpZXMuXG4gICAgICogVGhlIHByb3BlcnRpZXMgYXJlIHN0b3JlZCBpbiBhIE1hcCB3aGljaCBpcyBwbGF5ZWQgYmFjayBhZnRlciB0aGVcbiAgICAgKiBjb25zdHJ1Y3RvciBydW5zLiBOb3RlLCBvbiB2ZXJ5IG9sZCB2ZXJzaW9ucyBvZiBTYWZhcmkgKDw9OSkgb3IgQ2hyb21lXG4gICAgICogKDw9NDEpLCBwcm9wZXJ0aWVzIGNyZWF0ZWQgZm9yIG5hdGl2ZSBwbGF0Zm9ybSBwcm9wZXJ0aWVzIGxpa2UgKGBpZGAgb3JcbiAgICAgKiBgbmFtZWApIG1heSBub3QgaGF2ZSBkZWZhdWx0IHZhbHVlcyBzZXQgaW4gdGhlIGVsZW1lbnQgY29uc3RydWN0b3IuIE9uXG4gICAgICogdGhlc2UgYnJvd3NlcnMgbmF0aXZlIHByb3BlcnRpZXMgYXBwZWFyIG9uIGluc3RhbmNlcyBhbmQgdGhlcmVmb3JlIHRoZWlyXG4gICAgICogZGVmYXVsdCB2YWx1ZSB3aWxsIG92ZXJ3cml0ZSBhbnkgZWxlbWVudCBkZWZhdWx0IChlLmcuIGlmIHRoZSBlbGVtZW50IHNldHNcbiAgICAgKiB0aGlzLmlkID0gJ2lkJyBpbiB0aGUgY29uc3RydWN0b3IsIHRoZSAnaWQnIHdpbGwgYmVjb21lICcnIHNpbmNlIHRoaXMgaXNcbiAgICAgKiB0aGUgbmF0aXZlIHBsYXRmb3JtIGRlZmF1bHQpLlxuICAgICAqL1xuICAgIF9zYXZlSW5zdGFuY2VQcm9wZXJ0aWVzKCkge1xuICAgICAgICAvLyBVc2UgZm9yRWFjaCBzbyB0aGlzIHdvcmtzIGV2ZW4gaWYgZm9yL29mIGxvb3BzIGFyZSBjb21waWxlZCB0byBmb3IgbG9vcHNcbiAgICAgICAgLy8gZXhwZWN0aW5nIGFycmF5c1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yXG4gICAgICAgICAgICAuX2NsYXNzUHJvcGVydGllcy5mb3JFYWNoKChfdiwgcCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkocCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXNbcF07XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXNbcF07XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pbnN0YW5jZVByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2VQcm9wZXJ0aWVzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZVByb3BlcnRpZXMuc2V0KHAsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgcHJldmlvdXNseSBzYXZlZCBpbnN0YW5jZSBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIF9hcHBseUluc3RhbmNlUHJvcGVydGllcygpIHtcbiAgICAgICAgLy8gVXNlIGZvckVhY2ggc28gdGhpcyB3b3JrcyBldmVuIGlmIGZvci9vZiBsb29wcyBhcmUgY29tcGlsZWQgdG8gZm9yIGxvb3BzXG4gICAgICAgIC8vIGV4cGVjdGluZyBhcnJheXNcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueVxuICAgICAgICB0aGlzLl9pbnN0YW5jZVByb3BlcnRpZXMuZm9yRWFjaCgodiwgcCkgPT4gdGhpc1twXSA9IHYpO1xuICAgICAgICB0aGlzLl9pbnN0YW5jZVByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICAvLyBFbnN1cmUgZmlyc3QgY29ubmVjdGlvbiBjb21wbGV0ZXMgYW4gdXBkYXRlLiBVcGRhdGVzIGNhbm5vdCBjb21wbGV0ZVxuICAgICAgICAvLyBiZWZvcmUgY29ubmVjdGlvbi5cbiAgICAgICAgdGhpcy5lbmFibGVVcGRhdGluZygpO1xuICAgIH1cbiAgICBlbmFibGVVcGRhdGluZygpIHtcbiAgICAgICAgaWYgKHRoaXMuX2VuYWJsZVVwZGF0aW5nUmVzb2x2ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5fZW5hYmxlVXBkYXRpbmdSZXNvbHZlcigpO1xuICAgICAgICAgICAgdGhpcy5fZW5hYmxlVXBkYXRpbmdSZXNvbHZlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbGxvd3MgZm9yIGBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpYCBpbiBleHRlbnNpb25zIHdoaWxlXG4gICAgICogcmVzZXJ2aW5nIHRoZSBwb3NzaWJpbGl0eSBvZiBtYWtpbmcgbm9uLWJyZWFraW5nIGZlYXR1cmUgYWRkaXRpb25zXG4gICAgICogd2hlbiBkaXNjb25uZWN0aW5nIGF0IHNvbWUgcG9pbnQgaW4gdGhlIGZ1dHVyZS5cbiAgICAgKi9cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3luY2hyb25pemVzIHByb3BlcnR5IHZhbHVlcyB3aGVuIGF0dHJpYnV0ZXMgY2hhbmdlLlxuICAgICAqL1xuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGQsIHZhbHVlKSB7XG4gICAgICAgIGlmIChvbGQgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9hdHRyaWJ1dGVUb1Byb3BlcnR5KG5hbWUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfcHJvcGVydHlUb0F0dHJpYnV0ZShuYW1lLCB2YWx1ZSwgb3B0aW9ucyA9IGRlZmF1bHRQcm9wZXJ0eURlY2xhcmF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICBjb25zdCBhdHRyID0gY3Rvci5fYXR0cmlidXRlTmFtZUZvclByb3BlcnR5KG5hbWUsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoYXR0ciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBhdHRyVmFsdWUgPSBjdG9yLl9wcm9wZXJ0eVZhbHVlVG9BdHRyaWJ1dGUodmFsdWUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgLy8gYW4gdW5kZWZpbmVkIHZhbHVlIGRvZXMgbm90IGNoYW5nZSB0aGUgYXR0cmlidXRlLlxuICAgICAgICAgICAgaWYgKGF0dHJWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVHJhY2sgaWYgdGhlIHByb3BlcnR5IGlzIGJlaW5nIHJlZmxlY3RlZCB0byBhdm9pZFxuICAgICAgICAgICAgLy8gc2V0dGluZyB0aGUgcHJvcGVydHkgYWdhaW4gdmlhIGBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tgLiBOb3RlOlxuICAgICAgICAgICAgLy8gMS4gdGhpcyB0YWtlcyBhZHZhbnRhZ2Ugb2YgdGhlIGZhY3QgdGhhdCB0aGUgY2FsbGJhY2sgaXMgc3luY2hyb25vdXMuXG4gICAgICAgICAgICAvLyAyLiB3aWxsIGJlaGF2ZSBpbmNvcnJlY3RseSBpZiBtdWx0aXBsZSBhdHRyaWJ1dGVzIGFyZSBpbiB0aGUgcmVhY3Rpb25cbiAgICAgICAgICAgIC8vIHN0YWNrIGF0IHRpbWUgb2YgY2FsbGluZy4gSG93ZXZlciwgc2luY2Ugd2UgcHJvY2VzcyBhdHRyaWJ1dGVzXG4gICAgICAgICAgICAvLyBpbiBgdXBkYXRlYCB0aGlzIHNob3VsZCBub3QgYmUgcG9zc2libGUgKG9yIGFuIGV4dHJlbWUgY29ybmVyIGNhc2VcbiAgICAgICAgICAgIC8vIHRoYXQgd2UnZCBsaWtlIHRvIGRpc2NvdmVyKS5cbiAgICAgICAgICAgIC8vIG1hcmsgc3RhdGUgcmVmbGVjdGluZ1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUgPSB0aGlzLl91cGRhdGVTdGF0ZSB8IFNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fQVRUUklCVVRFO1xuICAgICAgICAgICAgaWYgKGF0dHJWYWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbWFyayBzdGF0ZSBub3QgcmVmbGVjdGluZ1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUgPSB0aGlzLl91cGRhdGVTdGF0ZSAmIH5TVEFURV9JU19SRUZMRUNUSU5HX1RPX0FUVFJJQlVURTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfYXR0cmlidXRlVG9Qcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICAvLyBVc2UgdHJhY2tpbmcgaW5mbyB0byBhdm9pZCBkZXNlcmlhbGl6aW5nIGF0dHJpYnV0ZSB2YWx1ZSBpZiBpdCB3YXNcbiAgICAgICAgLy8ganVzdCBzZXQgZnJvbSBhIHByb3BlcnR5IHNldHRlci5cbiAgICAgICAgaWYgKHRoaXMuX3VwZGF0ZVN0YXRlICYgU1RBVEVfSVNfUkVGTEVDVElOR19UT19BVFRSSUJVVEUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgLy8gTm90ZSwgaGludCB0aGlzIGFzIGFuIGBBdHRyaWJ1dGVNYXBgIHNvIGNsb3N1cmUgY2xlYXJseSB1bmRlcnN0YW5kc1xuICAgICAgICAvLyB0aGUgdHlwZTsgaXQgaGFzIGlzc3VlcyB3aXRoIHRyYWNraW5nIHR5cGVzIHRocm91Z2ggc3RhdGljc1xuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tdW5uZWNlc3NhcnktdHlwZS1hc3NlcnRpb25cbiAgICAgICAgY29uc3QgcHJvcE5hbWUgPSBjdG9yLl9hdHRyaWJ1dGVUb1Byb3BlcnR5TWFwLmdldChuYW1lKTtcbiAgICAgICAgaWYgKHByb3BOYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBjdG9yLmdldFByb3BlcnR5T3B0aW9ucyhwcm9wTmFtZSk7XG4gICAgICAgICAgICAvLyBtYXJrIHN0YXRlIHJlZmxlY3RpbmdcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gdGhpcy5fdXBkYXRlU3RhdGUgfCBTVEFURV9JU19SRUZMRUNUSU5HX1RPX1BST1BFUlRZO1xuICAgICAgICAgICAgdGhpc1twcm9wTmFtZV0gPVxuICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnlcbiAgICAgICAgICAgICAgICBjdG9yLl9wcm9wZXJ0eVZhbHVlRnJvbUF0dHJpYnV0ZSh2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAvLyBtYXJrIHN0YXRlIG5vdCByZWZsZWN0aW5nXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlICYgflNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fUFJPUEVSVFk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBwcml2YXRlIHZlcnNpb24gb2YgYHJlcXVlc3RVcGRhdGVgIGRvZXMgbm90IGFjY2VzcyBvciByZXR1cm4gdGhlXG4gICAgICogYHVwZGF0ZUNvbXBsZXRlYCBwcm9taXNlLiBUaGlzIHByb21pc2UgY2FuIGJlIG92ZXJyaWRkZW4gYW5kIGlzIHRoZXJlZm9yZVxuICAgICAqIG5vdCBmcmVlIHRvIGFjY2Vzcy5cbiAgICAgKi9cbiAgICBfcmVxdWVzdFVwZGF0ZShuYW1lLCBvbGRWYWx1ZSkge1xuICAgICAgICBsZXQgc2hvdWxkUmVxdWVzdFVwZGF0ZSA9IHRydWU7XG4gICAgICAgIC8vIElmIHdlIGhhdmUgYSBwcm9wZXJ0eSBrZXksIHBlcmZvcm0gcHJvcGVydHkgdXBkYXRlIHN0ZXBzLlxuICAgICAgICBpZiAobmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBjdG9yLmdldFByb3BlcnR5T3B0aW9ucyhuYW1lKTtcbiAgICAgICAgICAgIGlmIChjdG9yLl92YWx1ZUhhc0NoYW5nZWQodGhpc1tuYW1lXSwgb2xkVmFsdWUsIG9wdGlvbnMuaGFzQ2hhbmdlZCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2NoYW5nZWRQcm9wZXJ0aWVzLmhhcyhuYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jaGFuZ2VkUHJvcGVydGllcy5zZXQobmFtZSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBBZGQgdG8gcmVmbGVjdGluZyBwcm9wZXJ0aWVzIHNldC5cbiAgICAgICAgICAgICAgICAvLyBOb3RlLCBpdCdzIGltcG9ydGFudCB0aGF0IGV2ZXJ5IGNoYW5nZSBoYXMgYSBjaGFuY2UgdG8gYWRkIHRoZVxuICAgICAgICAgICAgICAgIC8vIHByb3BlcnR5IHRvIGBfcmVmbGVjdGluZ1Byb3BlcnRpZXNgLiBUaGlzIGVuc3VyZXMgc2V0dGluZ1xuICAgICAgICAgICAgICAgIC8vIGF0dHJpYnV0ZSArIHByb3BlcnR5IHJlZmxlY3RzIGNvcnJlY3RseS5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yZWZsZWN0ID09PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgICAgICEodGhpcy5fdXBkYXRlU3RhdGUgJiBTVEFURV9JU19SRUZMRUNUSU5HX1RPX1BST1BFUlRZKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVmbGVjdGluZ1Byb3BlcnRpZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVmbGVjdGluZ1Byb3BlcnRpZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVmbGVjdGluZ1Byb3BlcnRpZXMuc2V0KG5hbWUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFib3J0IHRoZSByZXF1ZXN0IGlmIHRoZSBwcm9wZXJ0eSBzaG91bGQgbm90IGJlIGNvbnNpZGVyZWQgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICBzaG91bGRSZXF1ZXN0VXBkYXRlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9oYXNSZXF1ZXN0ZWRVcGRhdGUgJiYgc2hvdWxkUmVxdWVzdFVwZGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUHJvbWlzZSA9IHRoaXMuX2VucXVldWVVcGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXF1ZXN0cyBhbiB1cGRhdGUgd2hpY2ggaXMgcHJvY2Vzc2VkIGFzeW5jaHJvbm91c2x5LiBUaGlzIHNob3VsZFxuICAgICAqIGJlIGNhbGxlZCB3aGVuIGFuIGVsZW1lbnQgc2hvdWxkIHVwZGF0ZSBiYXNlZCBvbiBzb21lIHN0YXRlIG5vdCB0cmlnZ2VyZWRcbiAgICAgKiBieSBzZXR0aW5nIGEgcHJvcGVydHkuIEluIHRoaXMgY2FzZSwgcGFzcyBubyBhcmd1bWVudHMuIEl0IHNob3VsZCBhbHNvIGJlXG4gICAgICogY2FsbGVkIHdoZW4gbWFudWFsbHkgaW1wbGVtZW50aW5nIGEgcHJvcGVydHkgc2V0dGVyLiBJbiB0aGlzIGNhc2UsIHBhc3MgdGhlXG4gICAgICogcHJvcGVydHkgYG5hbWVgIGFuZCBgb2xkVmFsdWVgIHRvIGVuc3VyZSB0aGF0IGFueSBjb25maWd1cmVkIHByb3BlcnR5XG4gICAgICogb3B0aW9ucyBhcmUgaG9ub3JlZC4gUmV0dXJucyB0aGUgYHVwZGF0ZUNvbXBsZXRlYCBQcm9taXNlIHdoaWNoIGlzIHJlc29sdmVkXG4gICAgICogd2hlbiB0aGUgdXBkYXRlIGNvbXBsZXRlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIHtQcm9wZXJ0eUtleX0gKG9wdGlvbmFsKSBuYW1lIG9mIHJlcXVlc3RpbmcgcHJvcGVydHlcbiAgICAgKiBAcGFyYW0gb2xkVmFsdWUge2FueX0gKG9wdGlvbmFsKSBvbGQgdmFsdWUgb2YgcmVxdWVzdGluZyBwcm9wZXJ0eVxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBBIFByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSB1cGRhdGUgY29tcGxldGVzLlxuICAgICAqL1xuICAgIHJlcXVlc3RVcGRhdGUobmFtZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgdGhpcy5fcmVxdWVzdFVwZGF0ZShuYW1lLCBvbGRWYWx1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUNvbXBsZXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHVwIHRoZSBlbGVtZW50IHRvIGFzeW5jaHJvbm91c2x5IHVwZGF0ZS5cbiAgICAgKi9cbiAgICBhc3luYyBfZW5xdWV1ZVVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUgPSB0aGlzLl91cGRhdGVTdGF0ZSB8IFNUQVRFX1VQREFURV9SRVFVRVNURUQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBFbnN1cmUgYW55IHByZXZpb3VzIHVwZGF0ZSBoYXMgcmVzb2x2ZWQgYmVmb3JlIHVwZGF0aW5nLlxuICAgICAgICAgICAgLy8gVGhpcyBgYXdhaXRgIGFsc28gZW5zdXJlcyB0aGF0IHByb3BlcnR5IGNoYW5nZXMgYXJlIGJhdGNoZWQuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl91cGRhdGVQcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBJZ25vcmUgYW55IHByZXZpb3VzIGVycm9ycy4gV2Ugb25seSBjYXJlIHRoYXQgdGhlIHByZXZpb3VzIGN5Y2xlIGlzXG4gICAgICAgICAgICAvLyBkb25lLiBBbnkgZXJyb3Igc2hvdWxkIGhhdmUgYmVlbiBoYW5kbGVkIGluIHRoZSBwcmV2aW91cyB1cGRhdGUuXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5wZXJmb3JtVXBkYXRlKCk7XG4gICAgICAgIC8vIElmIGBwZXJmb3JtVXBkYXRlYCByZXR1cm5zIGEgUHJvbWlzZSwgd2UgYXdhaXQgaXQuIFRoaXMgaXMgZG9uZSB0b1xuICAgICAgICAvLyBlbmFibGUgY29vcmRpbmF0aW5nIHVwZGF0ZXMgd2l0aCBhIHNjaGVkdWxlci4gTm90ZSwgdGhlIHJlc3VsdCBpc1xuICAgICAgICAvLyBjaGVja2VkIHRvIGF2b2lkIGRlbGF5aW5nIGFuIGFkZGl0aW9uYWwgbWljcm90YXNrIHVubGVzcyB3ZSBuZWVkIHRvLlxuICAgICAgICBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGF3YWl0IHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIXRoaXMuX2hhc1JlcXVlc3RlZFVwZGF0ZTtcbiAgICB9XG4gICAgZ2V0IF9oYXNSZXF1ZXN0ZWRVcGRhdGUoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5fdXBkYXRlU3RhdGUgJiBTVEFURV9VUERBVEVfUkVRVUVTVEVEKTtcbiAgICB9XG4gICAgZ2V0IGhhc1VwZGF0ZWQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5fdXBkYXRlU3RhdGUgJiBTVEFURV9IQVNfVVBEQVRFRCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGFuIGVsZW1lbnQgdXBkYXRlLiBOb3RlLCBpZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGR1cmluZyB0aGVcbiAgICAgKiB1cGRhdGUsIGBmaXJzdFVwZGF0ZWRgIGFuZCBgdXBkYXRlZGAgd2lsbCBub3QgYmUgY2FsbGVkLlxuICAgICAqXG4gICAgICogWW91IGNhbiBvdmVycmlkZSB0aGlzIG1ldGhvZCB0byBjaGFuZ2UgdGhlIHRpbWluZyBvZiB1cGRhdGVzLiBJZiB0aGlzXG4gICAgICogbWV0aG9kIGlzIG92ZXJyaWRkZW4sIGBzdXBlci5wZXJmb3JtVXBkYXRlKClgIG11c3QgYmUgY2FsbGVkLlxuICAgICAqXG4gICAgICogRm9yIGluc3RhbmNlLCB0byBzY2hlZHVsZSB1cGRhdGVzIHRvIG9jY3VyIGp1c3QgYmVmb3JlIHRoZSBuZXh0IGZyYW1lOlxuICAgICAqXG4gICAgICogYGBgXG4gICAgICogcHJvdGVjdGVkIGFzeW5jIHBlcmZvcm1VcGRhdGUoKTogUHJvbWlzZTx1bmtub3duPiB7XG4gICAgICogICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHJlc29sdmUoKSkpO1xuICAgICAqICAgc3VwZXIucGVyZm9ybVVwZGF0ZSgpO1xuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBwZXJmb3JtVXBkYXRlKCkge1xuICAgICAgICAvLyBNaXhpbiBpbnN0YW5jZSBwcm9wZXJ0aWVzIG9uY2UsIGlmIHRoZXkgZXhpc3QuXG4gICAgICAgIGlmICh0aGlzLl9pbnN0YW5jZVByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHRoaXMuX2FwcGx5SW5zdGFuY2VQcm9wZXJ0aWVzKCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNob3VsZFVwZGF0ZSA9IGZhbHNlO1xuICAgICAgICBjb25zdCBjaGFuZ2VkUHJvcGVydGllcyA9IHRoaXMuX2NoYW5nZWRQcm9wZXJ0aWVzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2hvdWxkVXBkYXRlID0gdGhpcy5zaG91bGRVcGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgICAgICAgICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX21hcmtVcGRhdGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIFByZXZlbnQgYGZpcnN0VXBkYXRlZGAgYW5kIGB1cGRhdGVkYCBmcm9tIHJ1bm5pbmcgd2hlbiB0aGVyZSdzIGFuXG4gICAgICAgICAgICAvLyB1cGRhdGUgZXhjZXB0aW9uLlxuICAgICAgICAgICAgc2hvdWxkVXBkYXRlID0gZmFsc2U7XG4gICAgICAgICAgICAvLyBFbnN1cmUgZWxlbWVudCBjYW4gYWNjZXB0IGFkZGl0aW9uYWwgdXBkYXRlcyBhZnRlciBhbiBleGNlcHRpb24uXG4gICAgICAgICAgICB0aGlzLl9tYXJrVXBkYXRlZCgpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvdWxkVXBkYXRlKSB7XG4gICAgICAgICAgICBpZiAoISh0aGlzLl91cGRhdGVTdGF0ZSAmIFNUQVRFX0hBU19VUERBVEVEKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gdGhpcy5fdXBkYXRlU3RhdGUgfCBTVEFURV9IQVNfVVBEQVRFRDtcbiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9tYXJrVXBkYXRlZCgpIHtcbiAgICAgICAgdGhpcy5fY2hhbmdlZFByb3BlcnRpZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gdGhpcy5fdXBkYXRlU3RhdGUgJiB+U1RBVEVfVVBEQVRFX1JFUVVFU1RFRDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBlbGVtZW50IGhhcyBjb21wbGV0ZWQgdXBkYXRpbmcuXG4gICAgICogVGhlIFByb21pc2UgdmFsdWUgaXMgYSBib29sZWFuIHRoYXQgaXMgYHRydWVgIGlmIHRoZSBlbGVtZW50IGNvbXBsZXRlZCB0aGVcbiAgICAgKiB1cGRhdGUgd2l0aG91dCB0cmlnZ2VyaW5nIGFub3RoZXIgdXBkYXRlLiBUaGUgUHJvbWlzZSByZXN1bHQgaXMgYGZhbHNlYCBpZlxuICAgICAqIGEgcHJvcGVydHkgd2FzIHNldCBpbnNpZGUgYHVwZGF0ZWQoKWAuIElmIHRoZSBQcm9taXNlIGlzIHJlamVjdGVkLCBhblxuICAgICAqIGV4Y2VwdGlvbiB3YXMgdGhyb3duIGR1cmluZyB0aGUgdXBkYXRlLlxuICAgICAqXG4gICAgICogVG8gYXdhaXQgYWRkaXRpb25hbCBhc3luY2hyb25vdXMgd29yaywgb3ZlcnJpZGUgdGhlIGBfZ2V0VXBkYXRlQ29tcGxldGVgXG4gICAgICogbWV0aG9kLiBGb3IgZXhhbXBsZSwgaXQgaXMgc29tZXRpbWVzIHVzZWZ1bCB0byBhd2FpdCBhIHJlbmRlcmVkIGVsZW1lbnRcbiAgICAgKiBiZWZvcmUgZnVsZmlsbGluZyB0aGlzIFByb21pc2UuIFRvIGRvIHRoaXMsIGZpcnN0IGF3YWl0XG4gICAgICogYHN1cGVyLl9nZXRVcGRhdGVDb21wbGV0ZSgpYCwgdGhlbiBhbnkgc3Vic2VxdWVudCBzdGF0ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgUHJvbWlzZSByZXR1cm5zIGEgYm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiB0aGVcbiAgICAgKiB1cGRhdGUgcmVzb2x2ZWQgd2l0aG91dCB0cmlnZ2VyaW5nIGFub3RoZXIgdXBkYXRlLlxuICAgICAqL1xuICAgIGdldCB1cGRhdGVDb21wbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldFVwZGF0ZUNvbXBsZXRlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlIHBvaW50IGZvciB0aGUgYHVwZGF0ZUNvbXBsZXRlYCBwcm9taXNlLlxuICAgICAqXG4gICAgICogSXQgaXMgbm90IHNhZmUgdG8gb3ZlcnJpZGUgdGhlIGB1cGRhdGVDb21wbGV0ZWAgZ2V0dGVyIGRpcmVjdGx5IGR1ZSB0byBhXG4gICAgICogbGltaXRhdGlvbiBpbiBUeXBlU2NyaXB0IHdoaWNoIG1lYW5zIGl0IGlzIG5vdCBwb3NzaWJsZSB0byBjYWxsIGFcbiAgICAgKiBzdXBlcmNsYXNzIGdldHRlciAoZS5nLiBgc3VwZXIudXBkYXRlQ29tcGxldGUudGhlbiguLi4pYCkgd2hlbiB0aGUgdGFyZ2V0XG4gICAgICogbGFuZ3VhZ2UgaXMgRVM1IChodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzMzOCkuXG4gICAgICogVGhpcyBtZXRob2Qgc2hvdWxkIGJlIG92ZXJyaWRkZW4gaW5zdGVhZC4gRm9yIGV4YW1wbGU6XG4gICAgICpcbiAgICAgKiAgIGNsYXNzIE15RWxlbWVudCBleHRlbmRzIExpdEVsZW1lbnQge1xuICAgICAqICAgICBhc3luYyBfZ2V0VXBkYXRlQ29tcGxldGUoKSB7XG4gICAgICogICAgICAgYXdhaXQgc3VwZXIuX2dldFVwZGF0ZUNvbXBsZXRlKCk7XG4gICAgICogICAgICAgYXdhaXQgdGhpcy5fbXlDaGlsZC51cGRhdGVDb21wbGV0ZTtcbiAgICAgKiAgICAgfVxuICAgICAqICAgfVxuICAgICAqL1xuICAgIF9nZXRVcGRhdGVDb21wbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VwZGF0ZVByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnRyb2xzIHdoZXRoZXIgb3Igbm90IGB1cGRhdGVgIHNob3VsZCBiZSBjYWxsZWQgd2hlbiB0aGUgZWxlbWVudCByZXF1ZXN0c1xuICAgICAqIGFuIHVwZGF0ZS4gQnkgZGVmYXVsdCwgdGhpcyBtZXRob2QgYWx3YXlzIHJldHVybnMgYHRydWVgLCBidXQgdGhpcyBjYW4gYmVcbiAgICAgKiBjdXN0b21pemVkIHRvIGNvbnRyb2wgd2hlbiB0byB1cGRhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gX2NoYW5nZWRQcm9wZXJ0aWVzIE1hcCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgd2l0aCBvbGQgdmFsdWVzXG4gICAgICovXG4gICAgc2hvdWxkVXBkYXRlKF9jaGFuZ2VkUHJvcGVydGllcykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgZWxlbWVudC4gVGhpcyBtZXRob2QgcmVmbGVjdHMgcHJvcGVydHkgdmFsdWVzIHRvIGF0dHJpYnV0ZXMuXG4gICAgICogSXQgY2FuIGJlIG92ZXJyaWRkZW4gdG8gcmVuZGVyIGFuZCBrZWVwIHVwZGF0ZWQgZWxlbWVudCBET00uXG4gICAgICogU2V0dGluZyBwcm9wZXJ0aWVzIGluc2lkZSB0aGlzIG1ldGhvZCB3aWxsICpub3QqIHRyaWdnZXJcbiAgICAgKiBhbm90aGVyIHVwZGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICAgKi9cbiAgICB1cGRhdGUoX2NoYW5nZWRQcm9wZXJ0aWVzKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZWZsZWN0aW5nUHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLl9yZWZsZWN0aW5nUHJvcGVydGllcy5zaXplID4gMCkge1xuICAgICAgICAgICAgLy8gVXNlIGZvckVhY2ggc28gdGhpcyB3b3JrcyBldmVuIGlmIGZvci9vZiBsb29wcyBhcmUgY29tcGlsZWQgdG8gZm9yXG4gICAgICAgICAgICAvLyBsb29wcyBleHBlY3RpbmcgYXJyYXlzXG4gICAgICAgICAgICB0aGlzLl9yZWZsZWN0aW5nUHJvcGVydGllcy5mb3JFYWNoKCh2LCBrKSA9PiB0aGlzLl9wcm9wZXJ0eVRvQXR0cmlidXRlKGssIHRoaXNba10sIHYpKTtcbiAgICAgICAgICAgIHRoaXMuX3JlZmxlY3RpbmdQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21hcmtVcGRhdGVkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludm9rZWQgd2hlbmV2ZXIgdGhlIGVsZW1lbnQgaXMgdXBkYXRlZC4gSW1wbGVtZW50IHRvIHBlcmZvcm1cbiAgICAgKiBwb3N0LXVwZGF0aW5nIHRhc2tzIHZpYSBET00gQVBJcywgZm9yIGV4YW1wbGUsIGZvY3VzaW5nIGFuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBTZXR0aW5nIHByb3BlcnRpZXMgaW5zaWRlIHRoaXMgbWV0aG9kIHdpbGwgdHJpZ2dlciB0aGUgZWxlbWVudCB0byB1cGRhdGVcbiAgICAgKiBhZ2FpbiBhZnRlciB0aGlzIHVwZGF0ZSBjeWNsZSBjb21wbGV0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gX2NoYW5nZWRQcm9wZXJ0aWVzIE1hcCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgd2l0aCBvbGQgdmFsdWVzXG4gICAgICovXG4gICAgdXBkYXRlZChfY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52b2tlZCB3aGVuIHRoZSBlbGVtZW50IGlzIGZpcnN0IHVwZGF0ZWQuIEltcGxlbWVudCB0byBwZXJmb3JtIG9uZSB0aW1lXG4gICAgICogd29yayBvbiB0aGUgZWxlbWVudCBhZnRlciB1cGRhdGUuXG4gICAgICpcbiAgICAgKiBTZXR0aW5nIHByb3BlcnRpZXMgaW5zaWRlIHRoaXMgbWV0aG9kIHdpbGwgdHJpZ2dlciB0aGUgZWxlbWVudCB0byB1cGRhdGVcbiAgICAgKiBhZ2FpbiBhZnRlciB0aGlzIHVwZGF0ZSBjeWNsZSBjb21wbGV0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gX2NoYW5nZWRQcm9wZXJ0aWVzIE1hcCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgd2l0aCBvbGQgdmFsdWVzXG4gICAgICovXG4gICAgZmlyc3RVcGRhdGVkKF9jaGFuZ2VkUHJvcGVydGllcykge1xuICAgIH1cbn1cbl9hID0gZmluYWxpemVkO1xuLyoqXG4gKiBNYXJrcyBjbGFzcyBhcyBoYXZpbmcgZmluaXNoZWQgY3JlYXRpbmcgcHJvcGVydGllcy5cbiAqL1xuVXBkYXRpbmdFbGVtZW50W19hXSA9IHRydWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGRhdGluZy1lbGVtZW50LmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbmNvbnN0IGxlZ2FjeUN1c3RvbUVsZW1lbnQgPSAodGFnTmFtZSwgY2xhenopID0+IHtcbiAgICB3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKHRhZ05hbWUsIGNsYXp6KTtcbiAgICAvLyBDYXN0IGFzIGFueSBiZWNhdXNlIFRTIGRvZXNuJ3QgcmVjb2duaXplIHRoZSByZXR1cm4gdHlwZSBhcyBiZWluZyBhXG4gICAgLy8gc3VidHlwZSBvZiB0aGUgZGVjb3JhdGVkIGNsYXNzIHdoZW4gY2xhenogaXMgdHlwZWQgYXNcbiAgICAvLyBgQ29uc3RydWN0b3I8SFRNTEVsZW1lbnQ+YCBmb3Igc29tZSByZWFzb24uXG4gICAgLy8gYENvbnN0cnVjdG9yPEhUTUxFbGVtZW50PmAgaXMgaGVscGZ1bCB0byBtYWtlIHN1cmUgdGhlIGRlY29yYXRvciBpc1xuICAgIC8vIGFwcGxpZWQgdG8gZWxlbWVudHMgaG93ZXZlci5cbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XG4gICAgcmV0dXJuIGNsYXp6O1xufTtcbmNvbnN0IHN0YW5kYXJkQ3VzdG9tRWxlbWVudCA9ICh0YWdOYW1lLCBkZXNjcmlwdG9yKSA9PiB7XG4gICAgY29uc3QgeyBraW5kLCBlbGVtZW50cyB9ID0gZGVzY3JpcHRvcjtcbiAgICByZXR1cm4ge1xuICAgICAgICBraW5kLFxuICAgICAgICBlbGVtZW50cyxcbiAgICAgICAgLy8gVGhpcyBjYWxsYmFjayBpcyBjYWxsZWQgb25jZSB0aGUgY2xhc3MgaXMgb3RoZXJ3aXNlIGZ1bGx5IGRlZmluZWRcbiAgICAgICAgZmluaXNoZXIoY2xhenopIHtcbiAgICAgICAgICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUodGFnTmFtZSwgY2xhenopO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vKipcbiAqIENsYXNzIGRlY29yYXRvciBmYWN0b3J5IHRoYXQgZGVmaW5lcyB0aGUgZGVjb3JhdGVkIGNsYXNzIGFzIGEgY3VzdG9tIGVsZW1lbnQuXG4gKlxuICogYGBgXG4gKiBAY3VzdG9tRWxlbWVudCgnbXktZWxlbWVudCcpXG4gKiBjbGFzcyBNeUVsZW1lbnQge1xuICogICByZW5kZXIoKSB7XG4gKiAgICAgcmV0dXJuIGh0bWxgYDtcbiAqICAgfVxuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIHRhZ05hbWUgVGhlIG5hbWUgb2YgdGhlIGN1c3RvbSBlbGVtZW50IHRvIGRlZmluZS5cbiAqL1xuZXhwb3J0IGNvbnN0IGN1c3RvbUVsZW1lbnQgPSAodGFnTmFtZSkgPT4gKGNsYXNzT3JEZXNjcmlwdG9yKSA9PiAodHlwZW9mIGNsYXNzT3JEZXNjcmlwdG9yID09PSAnZnVuY3Rpb24nKSA/XG4gICAgbGVnYWN5Q3VzdG9tRWxlbWVudCh0YWdOYW1lLCBjbGFzc09yRGVzY3JpcHRvcikgOlxuICAgIHN0YW5kYXJkQ3VzdG9tRWxlbWVudCh0YWdOYW1lLCBjbGFzc09yRGVzY3JpcHRvcik7XG5jb25zdCBzdGFuZGFyZFByb3BlcnR5ID0gKG9wdGlvbnMsIGVsZW1lbnQpID0+IHtcbiAgICAvLyBXaGVuIGRlY29yYXRpbmcgYW4gYWNjZXNzb3IsIHBhc3MgaXQgdGhyb3VnaCBhbmQgYWRkIHByb3BlcnR5IG1ldGFkYXRhLlxuICAgIC8vIE5vdGUsIHRoZSBgaGFzT3duUHJvcGVydHlgIGNoZWNrIGluIGBjcmVhdGVQcm9wZXJ0eWAgZW5zdXJlcyB3ZSBkb24ndFxuICAgIC8vIHN0b21wIG92ZXIgdGhlIHVzZXIncyBhY2Nlc3Nvci5cbiAgICBpZiAoZWxlbWVudC5raW5kID09PSAnbWV0aG9kJyAmJiBlbGVtZW50LmRlc2NyaXB0b3IgJiZcbiAgICAgICAgISgndmFsdWUnIGluIGVsZW1lbnQuZGVzY3JpcHRvcikpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZWxlbWVudCksIHsgZmluaXNoZXIoY2xhenopIHtcbiAgICAgICAgICAgICAgICBjbGF6ei5jcmVhdGVQcm9wZXJ0eShlbGVtZW50LmtleSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9IH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gY3JlYXRlUHJvcGVydHkoKSB0YWtlcyBjYXJlIG9mIGRlZmluaW5nIHRoZSBwcm9wZXJ0eSwgYnV0IHdlIHN0aWxsXG4gICAgICAgIC8vIG11c3QgcmV0dXJuIHNvbWUga2luZCBvZiBkZXNjcmlwdG9yLCBzbyByZXR1cm4gYSBkZXNjcmlwdG9yIGZvciBhblxuICAgICAgICAvLyB1bnVzZWQgcHJvdG90eXBlIGZpZWxkLiBUaGUgZmluaXNoZXIgY2FsbHMgY3JlYXRlUHJvcGVydHkoKS5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6ICdmaWVsZCcsXG4gICAgICAgICAgICBrZXk6IFN5bWJvbCgpLFxuICAgICAgICAgICAgcGxhY2VtZW50OiAnb3duJyxcbiAgICAgICAgICAgIGRlc2NyaXB0b3I6IHt9LFxuICAgICAgICAgICAgLy8gV2hlbiBAYmFiZWwvcGx1Z2luLXByb3Bvc2FsLWRlY29yYXRvcnMgaW1wbGVtZW50cyBpbml0aWFsaXplcnMsXG4gICAgICAgICAgICAvLyBkbyB0aGlzIGluc3RlYWQgb2YgdGhlIGluaXRpYWxpemVyIGJlbG93LiBTZWU6XG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYmFiZWwvYmFiZWwvaXNzdWVzLzkyNjAgZXh0cmFzOiBbXG4gICAgICAgICAgICAvLyAgIHtcbiAgICAgICAgICAgIC8vICAgICBraW5kOiAnaW5pdGlhbGl6ZXInLFxuICAgICAgICAgICAgLy8gICAgIHBsYWNlbWVudDogJ293bicsXG4gICAgICAgICAgICAvLyAgICAgaW5pdGlhbGl6ZXI6IGRlc2NyaXB0b3IuaW5pdGlhbGl6ZXIsXG4gICAgICAgICAgICAvLyAgIH1cbiAgICAgICAgICAgIC8vIF0sXG4gICAgICAgICAgICBpbml0aWFsaXplcigpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQuaW5pdGlhbGl6ZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1tlbGVtZW50LmtleV0gPSBlbGVtZW50LmluaXRpYWxpemVyLmNhbGwodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZpbmlzaGVyKGNsYXp6KSB7XG4gICAgICAgICAgICAgICAgY2xhenouY3JlYXRlUHJvcGVydHkoZWxlbWVudC5rZXksIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn07XG5jb25zdCBsZWdhY3lQcm9wZXJ0eSA9IChvcHRpb25zLCBwcm90bywgbmFtZSkgPT4ge1xuICAgIHByb3RvLmNvbnN0cnVjdG9yXG4gICAgICAgIC5jcmVhdGVQcm9wZXJ0eShuYW1lLCBvcHRpb25zKTtcbn07XG4vKipcbiAqIEEgcHJvcGVydHkgZGVjb3JhdG9yIHdoaWNoIGNyZWF0ZXMgYSBMaXRFbGVtZW50IHByb3BlcnR5IHdoaWNoIHJlZmxlY3RzIGFcbiAqIGNvcnJlc3BvbmRpbmcgYXR0cmlidXRlIHZhbHVlLiBBIGBQcm9wZXJ0eURlY2xhcmF0aW9uYCBtYXkgb3B0aW9uYWxseSBiZVxuICogc3VwcGxpZWQgdG8gY29uZmlndXJlIHByb3BlcnR5IGZlYXR1cmVzLlxuICpcbiAqIFRoaXMgZGVjb3JhdG9yIHNob3VsZCBvbmx5IGJlIHVzZWQgZm9yIHB1YmxpYyBmaWVsZHMuIFByaXZhdGUgb3IgcHJvdGVjdGVkXG4gKiBmaWVsZHMgc2hvdWxkIHVzZSB0aGUgaW50ZXJuYWxQcm9wZXJ0eSBkZWNvcmF0b3IuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiAgICAgY2xhc3MgTXlFbGVtZW50IHtcbiAqICAgICAgIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSlcbiAqICAgICAgIGNsaWNrZWQgPSBmYWxzZTtcbiAqICAgICB9XG4gKlxuICogQEV4cG9ydERlY29yYXRlZEl0ZW1zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcm9wZXJ0eShvcHRpb25zKSB7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueSBkZWNvcmF0b3JcbiAgICByZXR1cm4gKHByb3RvT3JEZXNjcmlwdG9yLCBuYW1lKSA9PiAobmFtZSAhPT0gdW5kZWZpbmVkKSA/XG4gICAgICAgIGxlZ2FjeVByb3BlcnR5KG9wdGlvbnMsIHByb3RvT3JEZXNjcmlwdG9yLCBuYW1lKSA6XG4gICAgICAgIHN0YW5kYXJkUHJvcGVydHkob3B0aW9ucywgcHJvdG9PckRlc2NyaXB0b3IpO1xufVxuLyoqXG4gKiBEZWNsYXJlcyBhIHByaXZhdGUgb3IgcHJvdGVjdGVkIHByb3BlcnR5IHRoYXQgc3RpbGwgdHJpZ2dlcnMgdXBkYXRlcyB0byB0aGVcbiAqIGVsZW1lbnQgd2hlbiBpdCBjaGFuZ2VzLlxuICpcbiAqIFByb3BlcnRpZXMgZGVjbGFyZWQgdGhpcyB3YXkgbXVzdCBub3QgYmUgdXNlZCBmcm9tIEhUTUwgb3IgSFRNTCB0ZW1wbGF0aW5nXG4gKiBzeXN0ZW1zLCB0aGV5J3JlIHNvbGVseSBmb3IgcHJvcGVydGllcyBpbnRlcm5hbCB0byB0aGUgZWxlbWVudC4gVGhlc2VcbiAqIHByb3BlcnRpZXMgbWF5IGJlIHJlbmFtZWQgYnkgb3B0aW1pemF0aW9uIHRvb2xzIGxpa2UgY2xvc3VyZSBjb21waWxlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVybmFsUHJvcGVydHkob3B0aW9ucykge1xuICAgIHJldHVybiBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogZmFsc2UsIGhhc0NoYW5nZWQ6IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5oYXNDaGFuZ2VkIH0pO1xufVxuLyoqXG4gKiBBIHByb3BlcnR5IGRlY29yYXRvciB0aGF0IGNvbnZlcnRzIGEgY2xhc3MgcHJvcGVydHkgaW50byBhIGdldHRlciB0aGF0XG4gKiBleGVjdXRlcyBhIHF1ZXJ5U2VsZWN0b3Igb24gdGhlIGVsZW1lbnQncyByZW5kZXJSb290LlxuICpcbiAqIEBwYXJhbSBzZWxlY3RvciBBIERPTVN0cmluZyBjb250YWluaW5nIG9uZSBvciBtb3JlIHNlbGVjdG9ycyB0byBtYXRjaC5cbiAqXG4gKiBTZWU6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Eb2N1bWVudC9xdWVyeVNlbGVjdG9yXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiAgICAgY2xhc3MgTXlFbGVtZW50IHtcbiAqICAgICAgIEBxdWVyeSgnI2ZpcnN0JylcbiAqICAgICAgIGZpcnN0O1xuICpcbiAqICAgICAgIHJlbmRlcigpIHtcbiAqICAgICAgICAgcmV0dXJuIGh0bWxgXG4gKiAgICAgICAgICAgPGRpdiBpZD1cImZpcnN0XCI+PC9kaXY+XG4gKiAgICAgICAgICAgPGRpdiBpZD1cInNlY29uZFwiPjwvZGl2PlxuICogICAgICAgICBgO1xuICogICAgICAgfVxuICogICAgIH1cbiAqXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWVyeShzZWxlY3Rvcikge1xuICAgIHJldHVybiAocHJvdG9PckRlc2NyaXB0b3IsIFxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnkgZGVjb3JhdG9yXG4gICAgbmFtZSkgPT4ge1xuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0ge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlclJvb3QucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIChuYW1lICE9PSB1bmRlZmluZWQpID9cbiAgICAgICAgICAgIGxlZ2FjeVF1ZXJ5KGRlc2NyaXB0b3IsIHByb3RvT3JEZXNjcmlwdG9yLCBuYW1lKSA6XG4gICAgICAgICAgICBzdGFuZGFyZFF1ZXJ5KGRlc2NyaXB0b3IsIHByb3RvT3JEZXNjcmlwdG9yKTtcbiAgICB9O1xufVxuLy8gTm90ZSwgaW4gdGhlIGZ1dHVyZSwgd2UgbWF5IGV4dGVuZCB0aGlzIGRlY29yYXRvciB0byBzdXBwb3J0IHRoZSB1c2UgY2FzZVxuLy8gd2hlcmUgdGhlIHF1ZXJpZWQgZWxlbWVudCBtYXkgbmVlZCB0byBkbyB3b3JrIHRvIGJlY29tZSByZWFkeSB0byBpbnRlcmFjdFxuLy8gd2l0aCAoZS5nLiBsb2FkIHNvbWUgaW1wbGVtZW50YXRpb24gY29kZSkuIElmIHNvLCB3ZSBtaWdodCBlbGVjdCB0b1xuLy8gYWRkIGEgc2Vjb25kIGFyZ3VtZW50IGRlZmluaW5nIGEgZnVuY3Rpb24gdGhhdCBjYW4gYmUgcnVuIHRvIG1ha2UgdGhlXG4vLyBxdWVyaWVkIGVsZW1lbnQgbG9hZGVkL3VwZGF0ZWQvcmVhZHkuXG4vKipcbiAqIEEgcHJvcGVydHkgZGVjb3JhdG9yIHRoYXQgY29udmVydHMgYSBjbGFzcyBwcm9wZXJ0eSBpbnRvIGEgZ2V0dGVyIHRoYXRcbiAqIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIHJlc3VsdCBvZiBhIHF1ZXJ5U2VsZWN0b3Igb24gdGhlXG4gKiBlbGVtZW50J3MgcmVuZGVyUm9vdCBkb25lIGFmdGVyIHRoZSBlbGVtZW50J3MgYHVwZGF0ZUNvbXBsZXRlYCBwcm9taXNlXG4gKiByZXNvbHZlcy4gV2hlbiB0aGUgcXVlcmllZCBwcm9wZXJ0eSBtYXkgY2hhbmdlIHdpdGggZWxlbWVudCBzdGF0ZSwgdGhpc1xuICogZGVjb3JhdG9yIGNhbiBiZSB1c2VkIGluc3RlYWQgb2YgcmVxdWlyaW5nIHVzZXJzIHRvIGF3YWl0IHRoZVxuICogYHVwZGF0ZUNvbXBsZXRlYCBiZWZvcmUgYWNjZXNzaW5nIHRoZSBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0gc2VsZWN0b3IgQSBET01TdHJpbmcgY29udGFpbmluZyBvbmUgb3IgbW9yZSBzZWxlY3RvcnMgdG8gbWF0Y2guXG4gKlxuICogU2VlOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRG9jdW1lbnQvcXVlcnlTZWxlY3RvclxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogICAgIGNsYXNzIE15RWxlbWVudCB7XG4gKiAgICAgICBAcXVlcnlBc3luYygnI2ZpcnN0JylcbiAqICAgICAgIGZpcnN0O1xuICpcbiAqICAgICAgIHJlbmRlcigpIHtcbiAqICAgICAgICAgcmV0dXJuIGh0bWxgXG4gKiAgICAgICAgICAgPGRpdiBpZD1cImZpcnN0XCI+PC9kaXY+XG4gKiAgICAgICAgICAgPGRpdiBpZD1cInNlY29uZFwiPjwvZGl2PlxuICogICAgICAgICBgO1xuICogICAgICAgfVxuICogICAgIH1cbiAqXG4gKiAgICAgLy8gZXh0ZXJuYWwgdXNhZ2VcbiAqICAgICBhc3luYyBkb1NvbWV0aGluZ1dpdGhGaXJzdCgpIHtcbiAqICAgICAgKGF3YWl0IGFNeUVsZW1lbnQuZmlyc3QpLmRvU29tZXRoaW5nKCk7XG4gKiAgICAgfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVlcnlBc3luYyhzZWxlY3Rvcikge1xuICAgIHJldHVybiAocHJvdG9PckRlc2NyaXB0b3IsIFxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnkgZGVjb3JhdG9yXG4gICAgbmFtZSkgPT4ge1xuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0ge1xuICAgICAgICAgICAgYXN5bmMgZ2V0KCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQ29tcGxldGU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyUm9vdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gKG5hbWUgIT09IHVuZGVmaW5lZCkgP1xuICAgICAgICAgICAgbGVnYWN5UXVlcnkoZGVzY3JpcHRvciwgcHJvdG9PckRlc2NyaXB0b3IsIG5hbWUpIDpcbiAgICAgICAgICAgIHN0YW5kYXJkUXVlcnkoZGVzY3JpcHRvciwgcHJvdG9PckRlc2NyaXB0b3IpO1xuICAgIH07XG59XG4vKipcbiAqIEEgcHJvcGVydHkgZGVjb3JhdG9yIHRoYXQgY29udmVydHMgYSBjbGFzcyBwcm9wZXJ0eSBpbnRvIGEgZ2V0dGVyXG4gKiB0aGF0IGV4ZWN1dGVzIGEgcXVlcnlTZWxlY3RvckFsbCBvbiB0aGUgZWxlbWVudCdzIHJlbmRlclJvb3QuXG4gKlxuICogQHBhcmFtIHNlbGVjdG9yIEEgRE9NU3RyaW5nIGNvbnRhaW5pbmcgb25lIG9yIG1vcmUgc2VsZWN0b3JzIHRvIG1hdGNoLlxuICpcbiAqIFNlZTpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Eb2N1bWVudC9xdWVyeVNlbGVjdG9yQWxsXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiAgICAgY2xhc3MgTXlFbGVtZW50IHtcbiAqICAgICAgIEBxdWVyeUFsbCgnZGl2JylcbiAqICAgICAgIGRpdnM7XG4gKlxuICogICAgICAgcmVuZGVyKCkge1xuICogICAgICAgICByZXR1cm4gaHRtbGBcbiAqICAgICAgICAgICA8ZGl2IGlkPVwiZmlyc3RcIj48L2Rpdj5cbiAqICAgICAgICAgICA8ZGl2IGlkPVwic2Vjb25kXCI+PC9kaXY+XG4gKiAgICAgICAgIGA7XG4gKiAgICAgICB9XG4gKiAgICAgfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVlcnlBbGwoc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gKHByb3RvT3JEZXNjcmlwdG9yLCBcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55IGRlY29yYXRvclxuICAgIG5hbWUpID0+IHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJSb290LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiAobmFtZSAhPT0gdW5kZWZpbmVkKSA/XG4gICAgICAgICAgICBsZWdhY3lRdWVyeShkZXNjcmlwdG9yLCBwcm90b09yRGVzY3JpcHRvciwgbmFtZSkgOlxuICAgICAgICAgICAgc3RhbmRhcmRRdWVyeShkZXNjcmlwdG9yLCBwcm90b09yRGVzY3JpcHRvcik7XG4gICAgfTtcbn1cbmNvbnN0IGxlZ2FjeVF1ZXJ5ID0gKGRlc2NyaXB0b3IsIHByb3RvLCBuYW1lKSA9PiB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvLCBuYW1lLCBkZXNjcmlwdG9yKTtcbn07XG5jb25zdCBzdGFuZGFyZFF1ZXJ5ID0gKGRlc2NyaXB0b3IsIGVsZW1lbnQpID0+ICh7XG4gICAga2luZDogJ21ldGhvZCcsXG4gICAgcGxhY2VtZW50OiAncHJvdG90eXBlJyxcbiAgICBrZXk6IGVsZW1lbnQua2V5LFxuICAgIGRlc2NyaXB0b3IsXG59KTtcbmNvbnN0IHN0YW5kYXJkRXZlbnRPcHRpb25zID0gKG9wdGlvbnMsIGVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBlbGVtZW50KSwgeyBmaW5pc2hlcihjbGF6eikge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihjbGF6ei5wcm90b3R5cGVbZWxlbWVudC5rZXldLCBvcHRpb25zKTtcbiAgICAgICAgfSB9KTtcbn07XG5jb25zdCBsZWdhY3lFdmVudE9wdGlvbnMgPSBcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnkgbGVnYWN5IGRlY29yYXRvclxuKG9wdGlvbnMsIHByb3RvLCBuYW1lKSA9PiB7XG4gICAgT2JqZWN0LmFzc2lnbihwcm90b1tuYW1lXSwgb3B0aW9ucyk7XG59O1xuLyoqXG4gKiBBZGRzIGV2ZW50IGxpc3RlbmVyIG9wdGlvbnMgdG8gYSBtZXRob2QgdXNlZCBhcyBhbiBldmVudCBsaXN0ZW5lciBpbiBhXG4gKiBsaXQtaHRtbCB0ZW1wbGF0ZS5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyBBbiBvYmplY3QgdGhhdCBzcGVjaWZpZXMgZXZlbnQgbGlzdGVuZXIgb3B0aW9ucyBhcyBhY2NlcHRlZCBieVxuICogYEV2ZW50VGFyZ2V0I2FkZEV2ZW50TGlzdGVuZXJgIGFuZCBgRXZlbnRUYXJnZXQjcmVtb3ZlRXZlbnRMaXN0ZW5lcmAuXG4gKlxuICogQ3VycmVudCBicm93c2VycyBzdXBwb3J0IHRoZSBgY2FwdHVyZWAsIGBwYXNzaXZlYCwgYW5kIGBvbmNlYCBvcHRpb25zLiBTZWU6XG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRXZlbnRUYXJnZXQvYWRkRXZlbnRMaXN0ZW5lciNQYXJhbWV0ZXJzXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiAgICAgY2xhc3MgTXlFbGVtZW50IHtcbiAqICAgICAgIGNsaWNrZWQgPSBmYWxzZTtcbiAqXG4gKiAgICAgICByZW5kZXIoKSB7XG4gKiAgICAgICAgIHJldHVybiBodG1sYFxuICogICAgICAgICAgIDxkaXYgQGNsaWNrPSR7dGhpcy5fb25DbGlja31gPlxuICogICAgICAgICAgICAgPGJ1dHRvbj48L2J1dHRvbj5cbiAqICAgICAgICAgICA8L2Rpdj5cbiAqICAgICAgICAgYDtcbiAqICAgICAgIH1cbiAqXG4gKiAgICAgICBAZXZlbnRPcHRpb25zKHtjYXB0dXJlOiB0cnVlfSlcbiAqICAgICAgIF9vbkNsaWNrKGUpIHtcbiAqICAgICAgICAgdGhpcy5jbGlja2VkID0gdHJ1ZTtcbiAqICAgICAgIH1cbiAqICAgICB9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBldmVudE9wdGlvbnMob3B0aW9ucykge1xuICAgIC8vIFJldHVybiB2YWx1ZSB0eXBlZCBhcyBhbnkgdG8gcHJldmVudCBUeXBlU2NyaXB0IGZyb20gY29tcGxhaW5pbmcgdGhhdFxuICAgIC8vIHN0YW5kYXJkIGRlY29yYXRvciBmdW5jdGlvbiBzaWduYXR1cmUgZG9lcyBub3QgbWF0Y2ggVHlwZVNjcmlwdCBkZWNvcmF0b3JcbiAgICAvLyBzaWduYXR1cmVcbiAgICAvLyBUT0RPKGtzY2hhYWYpOiB1bmNsZWFyIHdoeSBpdCB3YXMgb25seSBmYWlsaW5nIG9uIHRoaXMgZGVjb3JhdG9yIGFuZCBub3RcbiAgICAvLyB0aGUgb3RoZXJzXG4gICAgcmV0dXJuICgocHJvdG9PckRlc2NyaXB0b3IsIG5hbWUpID0+IChuYW1lICE9PSB1bmRlZmluZWQpID9cbiAgICAgICAgbGVnYWN5RXZlbnRPcHRpb25zKG9wdGlvbnMsIHByb3RvT3JEZXNjcmlwdG9yLCBuYW1lKSA6XG4gICAgICAgIHN0YW5kYXJkRXZlbnRPcHRpb25zKG9wdGlvbnMsIHByb3RvT3JEZXNjcmlwdG9yKSk7XG59XG4vKipcbiAqIEEgcHJvcGVydHkgZGVjb3JhdG9yIHRoYXQgY29udmVydHMgYSBjbGFzcyBwcm9wZXJ0eSBpbnRvIGEgZ2V0dGVyIHRoYXRcbiAqIHJldHVybnMgdGhlIGBhc3NpZ25lZE5vZGVzYCBvZiB0aGUgZ2l2ZW4gbmFtZWQgYHNsb3RgLiBOb3RlLCB0aGUgdHlwZSBvZlxuICogdGhpcyBwcm9wZXJ0eSBzaG91bGQgYmUgYW5ub3RhdGVkIGFzIGBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PmAuXG4gKlxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVlcnlBc3NpZ25lZE5vZGVzKHNsb3ROYW1lID0gJycsIGZsYXR0ZW4gPSBmYWxzZSkge1xuICAgIHJldHVybiAocHJvdG9PckRlc2NyaXB0b3IsIFxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnkgZGVjb3JhdG9yXG4gICAgbmFtZSkgPT4ge1xuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0ge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gYHNsb3Qke3Nsb3ROYW1lID8gYFtuYW1lPSR7c2xvdE5hbWV9XWAgOiAnJ31gO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNsb3QgPSB0aGlzLnJlbmRlclJvb3QucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNsb3QgJiYgc2xvdC5hc3NpZ25lZE5vZGVzKHsgZmxhdHRlbiB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gKG5hbWUgIT09IHVuZGVmaW5lZCkgP1xuICAgICAgICAgICAgbGVnYWN5UXVlcnkoZGVzY3JpcHRvciwgcHJvdG9PckRlc2NyaXB0b3IsIG5hbWUpIDpcbiAgICAgICAgICAgIHN0YW5kYXJkUXVlcnkoZGVzY3JpcHRvciwgcHJvdG9PckRlc2NyaXB0b3IpO1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWNvcmF0b3JzLmpzLm1hcCIsIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxOSBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlXG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dCBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhc1xucGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28gc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudFxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuZXhwb3J0IGNvbnN0IHN1cHBvcnRzQWRvcHRpbmdTdHlsZVNoZWV0cyA9ICgnYWRvcHRlZFN0eWxlU2hlZXRzJyBpbiBEb2N1bWVudC5wcm90b3R5cGUpICYmXG4gICAgKCdyZXBsYWNlJyBpbiBDU1NTdHlsZVNoZWV0LnByb3RvdHlwZSk7XG5jb25zdCBjb25zdHJ1Y3Rpb25Ub2tlbiA9IFN5bWJvbCgpO1xuZXhwb3J0IGNsYXNzIENTU1Jlc3VsdCB7XG4gICAgY29uc3RydWN0b3IoY3NzVGV4dCwgc2FmZVRva2VuKSB7XG4gICAgICAgIGlmIChzYWZlVG9rZW4gIT09IGNvbnN0cnVjdGlvblRva2VuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NTU1Jlc3VsdCBpcyBub3QgY29uc3RydWN0YWJsZS4gVXNlIGB1bnNhZmVDU1NgIG9yIGBjc3NgIGluc3RlYWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jc3NUZXh0ID0gY3NzVGV4dDtcbiAgICB9XG4gICAgLy8gTm90ZSwgdGhpcyBpcyBhIGdldHRlciBzbyB0aGF0IGl0J3MgbGF6eS4gSW4gcHJhY3RpY2UsIHRoaXMgbWVhbnNcbiAgICAvLyBzdHlsZXNoZWV0cyBhcmUgbm90IGNyZWF0ZWQgdW50aWwgdGhlIGZpcnN0IGVsZW1lbnQgaW5zdGFuY2UgaXMgbWFkZS5cbiAgICBnZXQgc3R5bGVTaGVldCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3N0eWxlU2hlZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gTm90ZSwgaWYgYGFkb3B0ZWRTdHlsZVNoZWV0c2AgaXMgc3VwcG9ydGVkIHRoZW4gd2UgYXNzdW1lIENTU1N0eWxlU2hlZXRcbiAgICAgICAgICAgIC8vIGlzIGNvbnN0cnVjdGFibGUuXG4gICAgICAgICAgICBpZiAoc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3R5bGVTaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3R5bGVTaGVldC5yZXBsYWNlU3luYyh0aGlzLmNzc1RleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3R5bGVTaGVldCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0eWxlU2hlZXQ7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jc3NUZXh0O1xuICAgIH1cbn1cbi8qKlxuICogV3JhcCBhIHZhbHVlIGZvciBpbnRlcnBvbGF0aW9uIGluIGEgY3NzIHRhZ2dlZCB0ZW1wbGF0ZSBsaXRlcmFsLlxuICpcbiAqIFRoaXMgaXMgdW5zYWZlIGJlY2F1c2UgdW50cnVzdGVkIENTUyB0ZXh0IGNhbiBiZSB1c2VkIHRvIHBob25lIGhvbWVcbiAqIG9yIGV4ZmlsdHJhdGUgZGF0YSB0byBhbiBhdHRhY2tlciBjb250cm9sbGVkIHNpdGUuIFRha2UgY2FyZSB0byBvbmx5IHVzZVxuICogdGhpcyB3aXRoIHRydXN0ZWQgaW5wdXQuXG4gKi9cbmV4cG9ydCBjb25zdCB1bnNhZmVDU1MgPSAodmFsdWUpID0+IHtcbiAgICByZXR1cm4gbmV3IENTU1Jlc3VsdChTdHJpbmcodmFsdWUpLCBjb25zdHJ1Y3Rpb25Ub2tlbik7XG59O1xuY29uc3QgdGV4dEZyb21DU1NSZXN1bHQgPSAodmFsdWUpID0+IHtcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBDU1NSZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLmNzc1RleHQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBWYWx1ZSBwYXNzZWQgdG8gJ2NzcycgZnVuY3Rpb24gbXVzdCBiZSBhICdjc3MnIGZ1bmN0aW9uIHJlc3VsdDogJHt2YWx1ZX0uIFVzZSAndW5zYWZlQ1NTJyB0byBwYXNzIG5vbi1saXRlcmFsIHZhbHVlcywgYnV0XG4gICAgICAgICAgICB0YWtlIGNhcmUgdG8gZW5zdXJlIHBhZ2Ugc2VjdXJpdHkuYCk7XG4gICAgfVxufTtcbi8qKlxuICogVGVtcGxhdGUgdGFnIHdoaWNoIHdoaWNoIGNhbiBiZSB1c2VkIHdpdGggTGl0RWxlbWVudCdzIGBzdHlsZWAgcHJvcGVydHkgdG9cbiAqIHNldCBlbGVtZW50IHN0eWxlcy4gRm9yIHNlY3VyaXR5IHJlYXNvbnMsIG9ubHkgbGl0ZXJhbCBzdHJpbmcgdmFsdWVzIG1heSBiZVxuICogdXNlZC4gVG8gaW5jb3Jwb3JhdGUgbm9uLWxpdGVyYWwgdmFsdWVzIGB1bnNhZmVDU1NgIG1heSBiZSB1c2VkIGluc2lkZSBhXG4gKiB0ZW1wbGF0ZSBzdHJpbmcgcGFydC5cbiAqL1xuZXhwb3J0IGNvbnN0IGNzcyA9IChzdHJpbmdzLCAuLi52YWx1ZXMpID0+IHtcbiAgICBjb25zdCBjc3NUZXh0ID0gdmFsdWVzLnJlZHVjZSgoYWNjLCB2LCBpZHgpID0+IGFjYyArIHRleHRGcm9tQ1NTUmVzdWx0KHYpICsgc3RyaW5nc1tpZHggKyAxXSwgc3RyaW5nc1swXSk7XG4gICAgcmV0dXJuIG5ldyBDU1NSZXN1bHQoY3NzVGV4dCwgY29uc3RydWN0aW9uVG9rZW4pO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNzcy10YWcuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuaW1wb3J0IHsgcmVuZGVyIH0gZnJvbSAnbGl0LWh0bWwvbGliL3NoYWR5LXJlbmRlci5qcyc7XG5pbXBvcnQgeyBVcGRhdGluZ0VsZW1lbnQgfSBmcm9tICcuL2xpYi91cGRhdGluZy1lbGVtZW50LmpzJztcbmV4cG9ydCAqIGZyb20gJy4vbGliL3VwZGF0aW5nLWVsZW1lbnQuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9saWIvZGVjb3JhdG9ycy5qcyc7XG5leHBvcnQgeyBodG1sLCBzdmcsIFRlbXBsYXRlUmVzdWx0LCBTVkdUZW1wbGF0ZVJlc3VsdCB9IGZyb20gJ2xpdC1odG1sL2xpdC1odG1sLmpzJztcbmltcG9ydCB7IHN1cHBvcnRzQWRvcHRpbmdTdHlsZVNoZWV0cyB9IGZyb20gJy4vbGliL2Nzcy10YWcuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9saWIvY3NzLXRhZy5qcyc7XG4vLyBJTVBPUlRBTlQ6IGRvIG5vdCBjaGFuZ2UgdGhlIHByb3BlcnR5IG5hbWUgb3IgdGhlIGFzc2lnbm1lbnQgZXhwcmVzc2lvbi5cbi8vIFRoaXMgbGluZSB3aWxsIGJlIHVzZWQgaW4gcmVnZXhlcyB0byBzZWFyY2ggZm9yIExpdEVsZW1lbnQgdXNhZ2UuXG4vLyBUT0RPKGp1c3RpbmZhZ25hbmkpOiBpbmplY3QgdmVyc2lvbiBudW1iZXIgYXQgYnVpbGQgdGltZVxuKHdpbmRvd1snbGl0RWxlbWVudFZlcnNpb25zJ10gfHwgKHdpbmRvd1snbGl0RWxlbWVudFZlcnNpb25zJ10gPSBbXSkpXG4gICAgLnB1c2goJzIuMy4xJyk7XG4vKipcbiAqIFNlbnRpbmFsIHZhbHVlIHVzZWQgdG8gYXZvaWQgY2FsbGluZyBsaXQtaHRtbCdzIHJlbmRlciBmdW5jdGlvbiB3aGVuXG4gKiBzdWJjbGFzc2VzIGRvIG5vdCBpbXBsZW1lbnQgYHJlbmRlcmBcbiAqL1xuY29uc3QgcmVuZGVyTm90SW1wbGVtZW50ZWQgPSB7fTtcbmV4cG9ydCBjbGFzcyBMaXRFbGVtZW50IGV4dGVuZHMgVXBkYXRpbmdFbGVtZW50IHtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGFycmF5IG9mIHN0eWxlcyB0byBhcHBseSB0byB0aGUgZWxlbWVudC5cbiAgICAgKiBPdmVycmlkZSB0aGlzIG1ldGhvZCB0byBpbnRlZ3JhdGUgaW50byBhIHN0eWxlIG1hbmFnZW1lbnQgc3lzdGVtLlxuICAgICAqXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0U3R5bGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHlsZXM7XG4gICAgfVxuICAgIC8qKiBAbm9jb2xsYXBzZSAqL1xuICAgIHN0YXRpYyBfZ2V0VW5pcXVlU3R5bGVzKCkge1xuICAgICAgICAvLyBPbmx5IGdhdGhlciBzdHlsZXMgb25jZSBwZXIgY2xhc3NcbiAgICAgICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnX3N0eWxlcycsIHRoaXMpKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRha2UgY2FyZSBub3QgdG8gY2FsbCBgdGhpcy5nZXRTdHlsZXMoKWAgbXVsdGlwbGUgdGltZXMgc2luY2UgdGhpc1xuICAgICAgICAvLyBnZW5lcmF0ZXMgbmV3IENTU1Jlc3VsdHMgZWFjaCB0aW1lLlxuICAgICAgICAvLyBUT0RPKHNvcnZlbGwpOiBTaW5jZSB3ZSBkbyBub3QgY2FjaGUgQ1NTUmVzdWx0cyBieSBpbnB1dCwgYW55XG4gICAgICAgIC8vIHNoYXJlZCBzdHlsZXMgd2lsbCBnZW5lcmF0ZSBuZXcgc3R5bGVzaGVldCBvYmplY3RzLCB3aGljaCBpcyB3YXN0ZWZ1bC5cbiAgICAgICAgLy8gVGhpcyBzaG91bGQgYmUgYWRkcmVzc2VkIHdoZW4gYSBicm93c2VyIHNoaXBzIGNvbnN0cnVjdGFibGVcbiAgICAgICAgLy8gc3R5bGVzaGVldHMuXG4gICAgICAgIGNvbnN0IHVzZXJTdHlsZXMgPSB0aGlzLmdldFN0eWxlcygpO1xuICAgICAgICBpZiAodXNlclN0eWxlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLl9zdHlsZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHVzZXJTdHlsZXMpKSB7XG4gICAgICAgICAgICAvLyBEZS1kdXBsaWNhdGUgc3R5bGVzIHByZXNlcnZpbmcgdGhlIF9sYXN0XyBpbnN0YW5jZSBpbiB0aGUgc2V0LlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbiB0byBhdm9pZCBkdXBsaWNhdGVkIHN0eWxlcyB0aGF0IGNhblxuICAgICAgICAgICAgLy8gb2NjdXIgZXNwZWNpYWxseSB3aGVuIGNvbXBvc2luZyB2aWEgc3ViY2xhc3NpbmcuXG4gICAgICAgICAgICAvLyBUaGUgbGFzdCBpdGVtIGlzIGtlcHQgdG8gdHJ5IHRvIHByZXNlcnZlIHRoZSBjYXNjYWRlIG9yZGVyIHdpdGggdGhlXG4gICAgICAgICAgICAvLyBhc3N1bXB0aW9uIHRoYXQgaXQncyBtb3N0IGltcG9ydGFudCB0aGF0IGxhc3QgYWRkZWQgc3R5bGVzIG92ZXJyaWRlXG4gICAgICAgICAgICAvLyBwcmV2aW91cyBzdHlsZXMuXG4gICAgICAgICAgICBjb25zdCBhZGRTdHlsZXMgPSAoc3R5bGVzLCBzZXQpID0+IHN0eWxlcy5yZWR1Y2VSaWdodCgoc2V0LCBzKSA9PiBcbiAgICAgICAgICAgIC8vIE5vdGU6IE9uIElFIHNldC5hZGQoKSBkb2VzIG5vdCByZXR1cm4gdGhlIHNldFxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheShzKSA/IGFkZFN0eWxlcyhzLCBzZXQpIDogKHNldC5hZGQocyksIHNldCksIHNldCk7XG4gICAgICAgICAgICAvLyBBcnJheS5mcm9tIGRvZXMgbm90IHdvcmsgb24gU2V0IGluIElFLCBvdGhlcndpc2UgcmV0dXJuXG4gICAgICAgICAgICAvLyBBcnJheS5mcm9tKGFkZFN0eWxlcyh1c2VyU3R5bGVzLCBuZXcgU2V0PENTU1Jlc3VsdD4oKSkpLnJldmVyc2UoKVxuICAgICAgICAgICAgY29uc3Qgc2V0ID0gYWRkU3R5bGVzKHVzZXJTdHlsZXMsIG5ldyBTZXQoKSk7XG4gICAgICAgICAgICBjb25zdCBzdHlsZXMgPSBbXTtcbiAgICAgICAgICAgIHNldC5mb3JFYWNoKCh2KSA9PiBzdHlsZXMudW5zaGlmdCh2KSk7XG4gICAgICAgICAgICB0aGlzLl9zdHlsZXMgPSBzdHlsZXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zdHlsZXMgPSBbdXNlclN0eWxlc107XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgZWxlbWVudCBpbml0aWFsaXphdGlvbi4gQnkgZGVmYXVsdCB0aGlzIGNhbGxzIGBjcmVhdGVSZW5kZXJSb290YFxuICAgICAqIHRvIGNyZWF0ZSB0aGUgZWxlbWVudCBgcmVuZGVyUm9vdGAgbm9kZSBhbmQgY2FwdHVyZXMgYW55IHByZS1zZXQgdmFsdWVzIGZvclxuICAgICAqIHJlZ2lzdGVyZWQgcHJvcGVydGllcy5cbiAgICAgKi9cbiAgICBpbml0aWFsaXplKCkge1xuICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XG4gICAgICAgIHRoaXMuY29uc3RydWN0b3IuX2dldFVuaXF1ZVN0eWxlcygpO1xuICAgICAgICB0aGlzLnJlbmRlclJvb3QgPVxuICAgICAgICAgICAgdGhpcy5jcmVhdGVSZW5kZXJSb290KCk7XG4gICAgICAgIC8vIE5vdGUsIGlmIHJlbmRlclJvb3QgaXMgbm90IGEgc2hhZG93Um9vdCwgc3R5bGVzIHdvdWxkL2NvdWxkIGFwcGx5IHRvIHRoZVxuICAgICAgICAvLyBlbGVtZW50J3MgZ2V0Um9vdE5vZGUoKS4gV2hpbGUgdGhpcyBjb3VsZCBiZSBkb25lLCB3ZSdyZSBjaG9vc2luZyBub3QgdG9cbiAgICAgICAgLy8gc3VwcG9ydCB0aGlzIG5vdyBzaW5jZSBpdCB3b3VsZCByZXF1aXJlIGRpZmZlcmVudCBsb2dpYyBhcm91bmQgZGUtZHVwaW5nLlxuICAgICAgICBpZiAod2luZG93LlNoYWRvd1Jvb3QgJiYgdGhpcy5yZW5kZXJSb290IGluc3RhbmNlb2Ygd2luZG93LlNoYWRvd1Jvb3QpIHtcbiAgICAgICAgICAgIHRoaXMuYWRvcHRTdHlsZXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBub2RlIGludG8gd2hpY2ggdGhlIGVsZW1lbnQgc2hvdWxkIHJlbmRlciBhbmQgYnkgZGVmYXVsdFxuICAgICAqIGNyZWF0ZXMgYW5kIHJldHVybnMgYW4gb3BlbiBzaGFkb3dSb290LiBJbXBsZW1lbnQgdG8gY3VzdG9taXplIHdoZXJlIHRoZVxuICAgICAqIGVsZW1lbnQncyBET00gaXMgcmVuZGVyZWQuIEZvciBleGFtcGxlLCB0byByZW5kZXIgaW50byB0aGUgZWxlbWVudCdzXG4gICAgICogY2hpbGROb2RlcywgcmV0dXJuIGB0aGlzYC5cbiAgICAgKiBAcmV0dXJucyB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBSZXR1cm5zIGEgbm9kZSBpbnRvIHdoaWNoIHRvIHJlbmRlci5cbiAgICAgKi9cbiAgICBjcmVhdGVSZW5kZXJSb290KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgc3R5bGluZyB0byB0aGUgZWxlbWVudCBzaGFkb3dSb290IHVzaW5nIHRoZSBgc3RhdGljIGdldCBzdHlsZXNgXG4gICAgICogcHJvcGVydHkuIFN0eWxpbmcgd2lsbCBhcHBseSB1c2luZyBgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHNgIHdoZXJlXG4gICAgICogYXZhaWxhYmxlIGFuZCB3aWxsIGZhbGxiYWNrIG90aGVyd2lzZS4gV2hlbiBTaGFkb3cgRE9NIGlzIHBvbHlmaWxsZWQsXG4gICAgICogU2hhZHlDU1Mgc2NvcGVzIHN0eWxlcyBhbmQgYWRkcyB0aGVtIHRvIHRoZSBkb2N1bWVudC4gV2hlbiBTaGFkb3cgRE9NXG4gICAgICogaXMgYXZhaWxhYmxlIGJ1dCBgYWRvcHRlZFN0eWxlU2hlZXRzYCBpcyBub3QsIHN0eWxlcyBhcmUgYXBwZW5kZWQgdG8gdGhlXG4gICAgICogZW5kIG9mIHRoZSBgc2hhZG93Um9vdGAgdG8gW21pbWljIHNwZWNcbiAgICAgKiBiZWhhdmlvcl0oaHR0cHM6Ly93aWNnLmdpdGh1Yi5pby9jb25zdHJ1Y3Qtc3R5bGVzaGVldHMvI3VzaW5nLWNvbnN0cnVjdGVkLXN0eWxlc2hlZXRzKS5cbiAgICAgKi9cbiAgICBhZG9wdFN0eWxlcygpIHtcbiAgICAgICAgY29uc3Qgc3R5bGVzID0gdGhpcy5jb25zdHJ1Y3Rvci5fc3R5bGVzO1xuICAgICAgICBpZiAoc3R5bGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZXJlIGFyZSB0aHJlZSBzZXBhcmF0ZSBjYXNlcyBoZXJlIGJhc2VkIG9uIFNoYWRvdyBET00gc3VwcG9ydC5cbiAgICAgICAgLy8gKDEpIHNoYWRvd1Jvb3QgcG9seWZpbGxlZDogdXNlIFNoYWR5Q1NTXG4gICAgICAgIC8vICgyKSBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyBhdmFpbGFibGU6IHVzZSBpdC5cbiAgICAgICAgLy8gKDMpIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzIHBvbHlmaWxsZWQ6IGFwcGVuZCBzdHlsZXMgYWZ0ZXJcbiAgICAgICAgLy8gcmVuZGVyaW5nXG4gICAgICAgIGlmICh3aW5kb3cuU2hhZHlDU1MgIT09IHVuZGVmaW5lZCAmJiAhd2luZG93LlNoYWR5Q1NTLm5hdGl2ZVNoYWRvdykge1xuICAgICAgICAgICAgd2luZG93LlNoYWR5Q1NTLlNjb3BpbmdTaGltLnByZXBhcmVBZG9wdGVkQ3NzVGV4dChzdHlsZXMubWFwKChzKSA9PiBzLmNzc1RleHQpLCB0aGlzLmxvY2FsTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclJvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID1cbiAgICAgICAgICAgICAgICBzdHlsZXMubWFwKChzKSA9PiBzLnN0eWxlU2hlZXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gVGhpcyBtdXN0IGJlIGRvbmUgYWZ0ZXIgcmVuZGVyaW5nIHNvIHRoZSBhY3R1YWwgc3R5bGUgaW5zZXJ0aW9uIGlzIGRvbmVcbiAgICAgICAgICAgIC8vIGluIGB1cGRhdGVgLlxuICAgICAgICAgICAgdGhpcy5fbmVlZHNTaGltQWRvcHRlZFN0eWxlU2hlZXRzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgLy8gTm90ZSwgZmlyc3QgdXBkYXRlL3JlbmRlciBoYW5kbGVzIHN0eWxlRWxlbWVudCBzbyB3ZSBvbmx5IGNhbGwgdGhpcyBpZlxuICAgICAgICAvLyBjb25uZWN0ZWQgYWZ0ZXIgZmlyc3QgdXBkYXRlLlxuICAgICAgICBpZiAodGhpcy5oYXNVcGRhdGVkICYmIHdpbmRvdy5TaGFkeUNTUyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3aW5kb3cuU2hhZHlDU1Muc3R5bGVFbGVtZW50KHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGVsZW1lbnQuIFRoaXMgbWV0aG9kIHJlZmxlY3RzIHByb3BlcnR5IHZhbHVlcyB0byBhdHRyaWJ1dGVzXG4gICAgICogYW5kIGNhbGxzIGByZW5kZXJgIHRvIHJlbmRlciBET00gdmlhIGxpdC1odG1sLiBTZXR0aW5nIHByb3BlcnRpZXMgaW5zaWRlXG4gICAgICogdGhpcyBtZXRob2Qgd2lsbCAqbm90KiB0cmlnZ2VyIGFub3RoZXIgdXBkYXRlLlxuICAgICAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICAgKi9cbiAgICB1cGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICAgICAgLy8gU2V0dGluZyBwcm9wZXJ0aWVzIGluIGByZW5kZXJgIHNob3VsZCBub3QgdHJpZ2dlciBhbiB1cGRhdGUuIFNpbmNlXG4gICAgICAgIC8vIHVwZGF0ZXMgYXJlIGFsbG93ZWQgYWZ0ZXIgc3VwZXIudXBkYXRlLCBpdCdzIGltcG9ydGFudCB0byBjYWxsIGByZW5kZXJgXG4gICAgICAgIC8vIGJlZm9yZSB0aGF0LlxuICAgICAgICBjb25zdCB0ZW1wbGF0ZVJlc3VsdCA9IHRoaXMucmVuZGVyKCk7XG4gICAgICAgIHN1cGVyLnVwZGF0ZShjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICAgIC8vIElmIHJlbmRlciBpcyBub3QgaW1wbGVtZW50ZWQgYnkgdGhlIGNvbXBvbmVudCwgZG9uJ3QgY2FsbCBsaXQtaHRtbCByZW5kZXJcbiAgICAgICAgaWYgKHRlbXBsYXRlUmVzdWx0ICE9PSByZW5kZXJOb3RJbXBsZW1lbnRlZCkge1xuICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgIC5yZW5kZXIodGVtcGxhdGVSZXN1bHQsIHRoaXMucmVuZGVyUm9vdCwgeyBzY29wZU5hbWU6IHRoaXMubG9jYWxOYW1lLCBldmVudENvbnRleHQ6IHRoaXMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hlbiBuYXRpdmUgU2hhZG93IERPTSBpcyB1c2VkIGJ1dCBhZG9wdGVkU3R5bGVzIGFyZSBub3Qgc3VwcG9ydGVkLFxuICAgICAgICAvLyBpbnNlcnQgc3R5bGluZyBhZnRlciByZW5kZXJpbmcgdG8gZW5zdXJlIGFkb3B0ZWRTdHlsZXMgaGF2ZSBoaWdoZXN0XG4gICAgICAgIC8vIHByaW9yaXR5LlxuICAgICAgICBpZiAodGhpcy5fbmVlZHNTaGltQWRvcHRlZFN0eWxlU2hlZXRzKSB7XG4gICAgICAgICAgICB0aGlzLl9uZWVkc1NoaW1BZG9wdGVkU3R5bGVTaGVldHMgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IuX3N0eWxlcy5mb3JFYWNoKChzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICAgICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gcy5jc3NUZXh0O1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyUm9vdC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VkIG9uIGVhY2ggdXBkYXRlIHRvIHBlcmZvcm0gcmVuZGVyaW5nIHRhc2tzLiBUaGlzIG1ldGhvZCBtYXkgcmV0dXJuXG4gICAgICogYW55IHZhbHVlIHJlbmRlcmFibGUgYnkgbGl0LWh0bWwncyBOb2RlUGFydCAtIHR5cGljYWxseSBhIFRlbXBsYXRlUmVzdWx0LlxuICAgICAqIFNldHRpbmcgcHJvcGVydGllcyBpbnNpZGUgdGhpcyBtZXRob2Qgd2lsbCAqbm90KiB0cmlnZ2VyIHRoZSBlbGVtZW50IHRvXG4gICAgICogdXBkYXRlLlxuICAgICAqL1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIHJlbmRlck5vdEltcGxlbWVudGVkO1xuICAgIH1cbn1cbi8qKlxuICogRW5zdXJlIHRoaXMgY2xhc3MgaXMgbWFya2VkIGFzIGBmaW5hbGl6ZWRgIGFzIGFuIG9wdGltaXphdGlvbiBlbnN1cmluZ1xuICogaXQgd2lsbCBub3QgbmVlZGxlc3NseSB0cnkgdG8gYGZpbmFsaXplYC5cbiAqXG4gKiBOb3RlIHRoaXMgcHJvcGVydHkgbmFtZSBpcyBhIHN0cmluZyB0byBwcmV2ZW50IGJyZWFraW5nIENsb3N1cmUgSlMgQ29tcGlsZXJcbiAqIG9wdGltaXphdGlvbnMuIFNlZSB1cGRhdGluZy1lbGVtZW50LnRzIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICovXG5MaXRFbGVtZW50WydmaW5hbGl6ZWQnXSA9IHRydWU7XG4vKipcbiAqIFJlbmRlciBtZXRob2QgdXNlZCB0byByZW5kZXIgdGhlIHZhbHVlIHRvIHRoZSBlbGVtZW50J3MgRE9NLlxuICogQHBhcmFtIHJlc3VsdCBUaGUgdmFsdWUgdG8gcmVuZGVyLlxuICogQHBhcmFtIGNvbnRhaW5lciBOb2RlIGludG8gd2hpY2ggdG8gcmVuZGVyLlxuICogQHBhcmFtIG9wdGlvbnMgRWxlbWVudCBuYW1lLlxuICogQG5vY29sbGFwc2VcbiAqL1xuTGl0RWxlbWVudC5yZW5kZXIgPSByZW5kZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXQtZWxlbWVudC5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG5pbXBvcnQgeyBpc1ByaW1pdGl2ZSB9IGZyb20gJy4uL2xpYi9wYXJ0cy5qcyc7XG5pbXBvcnQgeyBkaXJlY3RpdmUsIE5vZGVQYXJ0IH0gZnJvbSAnLi4vbGl0LWh0bWwuanMnO1xuLy8gRm9yIGVhY2ggcGFydCwgcmVtZW1iZXIgdGhlIHZhbHVlIHRoYXQgd2FzIGxhc3QgcmVuZGVyZWQgdG8gdGhlIHBhcnQgYnkgdGhlXG4vLyB1bnNhZmVIVE1MIGRpcmVjdGl2ZSwgYW5kIHRoZSBEb2N1bWVudEZyYWdtZW50IHRoYXQgd2FzIGxhc3Qgc2V0IGFzIGEgdmFsdWUuXG4vLyBUaGUgRG9jdW1lbnRGcmFnbWVudCBpcyB1c2VkIGFzIGEgdW5pcXVlIGtleSB0byBjaGVjayBpZiB0aGUgbGFzdCB2YWx1ZVxuLy8gcmVuZGVyZWQgdG8gdGhlIHBhcnQgd2FzIHdpdGggdW5zYWZlSFRNTC4gSWYgbm90LCB3ZSdsbCBhbHdheXMgcmUtcmVuZGVyIHRoZVxuLy8gdmFsdWUgcGFzc2VkIHRvIHVuc2FmZUhUTUwuXG5jb25zdCBwcmV2aW91c1ZhbHVlcyA9IG5ldyBXZWFrTWFwKCk7XG4vKipcbiAqIFJlbmRlcnMgdGhlIHJlc3VsdCBhcyBIVE1MLCByYXRoZXIgdGhhbiB0ZXh0LlxuICpcbiAqIE5vdGUsIHRoaXMgaXMgdW5zYWZlIHRvIHVzZSB3aXRoIGFueSB1c2VyLXByb3ZpZGVkIGlucHV0IHRoYXQgaGFzbid0IGJlZW5cbiAqIHNhbml0aXplZCBvciBlc2NhcGVkLCBhcyBpdCBtYXkgbGVhZCB0byBjcm9zcy1zaXRlLXNjcmlwdGluZ1xuICogdnVsbmVyYWJpbGl0aWVzLlxuICovXG5leHBvcnQgY29uc3QgdW5zYWZlSFRNTCA9IGRpcmVjdGl2ZSgodmFsdWUpID0+IChwYXJ0KSA9PiB7XG4gICAgaWYgKCEocGFydCBpbnN0YW5jZW9mIE5vZGVQYXJ0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vuc2FmZUhUTUwgY2FuIG9ubHkgYmUgdXNlZCBpbiB0ZXh0IGJpbmRpbmdzJyk7XG4gICAgfVxuICAgIGNvbnN0IHByZXZpb3VzVmFsdWUgPSBwcmV2aW91c1ZhbHVlcy5nZXQocGFydCk7XG4gICAgaWYgKHByZXZpb3VzVmFsdWUgIT09IHVuZGVmaW5lZCAmJiBpc1ByaW1pdGl2ZSh2YWx1ZSkgJiZcbiAgICAgICAgdmFsdWUgPT09IHByZXZpb3VzVmFsdWUudmFsdWUgJiYgcGFydC52YWx1ZSA9PT0gcHJldmlvdXNWYWx1ZS5mcmFnbWVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSB2YWx1ZTsgLy8gaW5uZXJIVE1MIGNhc3RzIHRvIHN0cmluZyBpbnRlcm5hbGx5XG4gICAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5pbXBvcnROb2RlKHRlbXBsYXRlLmNvbnRlbnQsIHRydWUpO1xuICAgIHBhcnQuc2V0VmFsdWUoZnJhZ21lbnQpO1xuICAgIHByZXZpb3VzVmFsdWVzLnNldChwYXJ0LCB7IHZhbHVlLCBmcmFnbWVudCB9KTtcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5zYWZlLWh0bWwuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuaW1wb3J0IHsgQXR0cmlidXRlUGFydCwgZGlyZWN0aXZlLCBQcm9wZXJ0eVBhcnQgfSBmcm9tICcuLi9saXQtaHRtbC5qcyc7XG4vLyBJRTExIGRvZXNuJ3Qgc3VwcG9ydCBjbGFzc0xpc3Qgb24gU1ZHIGVsZW1lbnRzLCBzbyB3ZSBlbXVsYXRlIGl0IHdpdGggYSBTZXRcbmNsYXNzIENsYXNzTGlzdCB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCkge1xuICAgICAgICB0aGlzLmNsYXNzZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICBjb25zdCBjbGFzc0xpc3QgPSAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpLnNwbGl0KC9cXHMrLyk7XG4gICAgICAgIGZvciAoY29uc3QgY2xzIG9mIGNsYXNzTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5jbGFzc2VzLmFkZChjbHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZChjbHMpIHtcbiAgICAgICAgdGhpcy5jbGFzc2VzLmFkZChjbHMpO1xuICAgICAgICB0aGlzLmNoYW5nZWQgPSB0cnVlO1xuICAgIH1cbiAgICByZW1vdmUoY2xzKSB7XG4gICAgICAgIHRoaXMuY2xhc3Nlcy5kZWxldGUoY2xzKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgY29tbWl0KCkge1xuICAgICAgICBpZiAodGhpcy5jaGFuZ2VkKSB7XG4gICAgICAgICAgICBsZXQgY2xhc3NTdHJpbmcgPSAnJztcbiAgICAgICAgICAgIHRoaXMuY2xhc3Nlcy5mb3JFYWNoKChjbHMpID0+IGNsYXNzU3RyaW5nICs9IGNscyArICcgJyk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNsYXNzU3RyaW5nKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogU3RvcmVzIHRoZSBDbGFzc0luZm8gb2JqZWN0IGFwcGxpZWQgdG8gYSBnaXZlbiBBdHRyaWJ1dGVQYXJ0LlxuICogVXNlZCB0byB1bnNldCBleGlzdGluZyB2YWx1ZXMgd2hlbiBhIG5ldyBDbGFzc0luZm8gb2JqZWN0IGlzIGFwcGxpZWQuXG4gKi9cbmNvbnN0IHByZXZpb3VzQ2xhc3Nlc0NhY2hlID0gbmV3IFdlYWtNYXAoKTtcbi8qKlxuICogQSBkaXJlY3RpdmUgdGhhdCBhcHBsaWVzIENTUyBjbGFzc2VzLiBUaGlzIG11c3QgYmUgdXNlZCBpbiB0aGUgYGNsYXNzYFxuICogYXR0cmlidXRlIGFuZCBtdXN0IGJlIHRoZSBvbmx5IHBhcnQgdXNlZCBpbiB0aGUgYXR0cmlidXRlLiBJdCB0YWtlcyBlYWNoXG4gKiBwcm9wZXJ0eSBpbiB0aGUgYGNsYXNzSW5mb2AgYXJndW1lbnQgYW5kIGFkZHMgdGhlIHByb3BlcnR5IG5hbWUgdG8gdGhlXG4gKiBlbGVtZW50J3MgYGNsYXNzYCBpZiB0aGUgcHJvcGVydHkgdmFsdWUgaXMgdHJ1dGh5OyBpZiB0aGUgcHJvcGVydHkgdmFsdWUgaXNcbiAqIGZhbHNleSwgdGhlIHByb3BlcnR5IG5hbWUgaXMgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50J3MgYGNsYXNzYC4gRm9yIGV4YW1wbGVcbiAqIGB7Zm9vOiBiYXJ9YCBhcHBsaWVzIHRoZSBjbGFzcyBgZm9vYCBpZiB0aGUgdmFsdWUgb2YgYGJhcmAgaXMgdHJ1dGh5LlxuICogQHBhcmFtIGNsYXNzSW5mbyB7Q2xhc3NJbmZvfVxuICovXG5leHBvcnQgY29uc3QgY2xhc3NNYXAgPSBkaXJlY3RpdmUoKGNsYXNzSW5mbykgPT4gKHBhcnQpID0+IHtcbiAgICBpZiAoIShwYXJ0IGluc3RhbmNlb2YgQXR0cmlidXRlUGFydCkgfHwgKHBhcnQgaW5zdGFuY2VvZiBQcm9wZXJ0eVBhcnQpIHx8XG4gICAgICAgIHBhcnQuY29tbWl0dGVyLm5hbWUgIT09ICdjbGFzcycgfHwgcGFydC5jb21taXR0ZXIucGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBgY2xhc3NNYXBgIGRpcmVjdGl2ZSBtdXN0IGJlIHVzZWQgaW4gdGhlIGBjbGFzc2AgYXR0cmlidXRlICcgK1xuICAgICAgICAgICAgJ2FuZCBtdXN0IGJlIHRoZSBvbmx5IHBhcnQgaW4gdGhlIGF0dHJpYnV0ZS4nKTtcbiAgICB9XG4gICAgY29uc3QgeyBjb21taXR0ZXIgfSA9IHBhcnQ7XG4gICAgY29uc3QgeyBlbGVtZW50IH0gPSBjb21taXR0ZXI7XG4gICAgbGV0IHByZXZpb3VzQ2xhc3NlcyA9IHByZXZpb3VzQ2xhc3Nlc0NhY2hlLmdldChwYXJ0KTtcbiAgICBpZiAocHJldmlvdXNDbGFzc2VzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gV3JpdGUgc3RhdGljIGNsYXNzZXMgb25jZVxuICAgICAgICAvLyBVc2Ugc2V0QXR0cmlidXRlKCkgYmVjYXVzZSBjbGFzc05hbWUgaXNuJ3QgYSBzdHJpbmcgb24gU1ZHIGVsZW1lbnRzXG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNvbW1pdHRlci5zdHJpbmdzLmpvaW4oJyAnKSk7XG4gICAgICAgIHByZXZpb3VzQ2xhc3Nlc0NhY2hlLnNldChwYXJ0LCBwcmV2aW91c0NsYXNzZXMgPSBuZXcgU2V0KCkpO1xuICAgIH1cbiAgICBjb25zdCBjbGFzc0xpc3QgPSAoZWxlbWVudC5jbGFzc0xpc3QgfHwgbmV3IENsYXNzTGlzdChlbGVtZW50KSk7XG4gICAgLy8gUmVtb3ZlIG9sZCBjbGFzc2VzIHRoYXQgbm8gbG9uZ2VyIGFwcGx5XG4gICAgLy8gV2UgdXNlIGZvckVhY2goKSBpbnN0ZWFkIG9mIGZvci1vZiBzbyB0aGF0IHJlIGRvbid0IHJlcXVpcmUgZG93bi1sZXZlbFxuICAgIC8vIGl0ZXJhdGlvbi5cbiAgICBwcmV2aW91c0NsYXNzZXMuZm9yRWFjaCgobmFtZSkgPT4ge1xuICAgICAgICBpZiAoIShuYW1lIGluIGNsYXNzSW5mbykpIHtcbiAgICAgICAgICAgIGNsYXNzTGlzdC5yZW1vdmUobmFtZSk7XG4gICAgICAgICAgICBwcmV2aW91c0NsYXNzZXMuZGVsZXRlKG5hbWUpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgLy8gQWRkIG9yIHJlbW92ZSBjbGFzc2VzIGJhc2VkIG9uIHRoZWlyIGNsYXNzTWFwIHZhbHVlXG4gICAgZm9yIChjb25zdCBuYW1lIGluIGNsYXNzSW5mbykge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGNsYXNzSW5mb1tuYW1lXTtcbiAgICAgICAgaWYgKHZhbHVlICE9IHByZXZpb3VzQ2xhc3Nlcy5oYXMobmFtZSkpIHtcbiAgICAgICAgICAgIC8vIFdlIGV4cGxpY2l0bHkgd2FudCBhIGxvb3NlIHRydXRoeSBjaGVjayBvZiBgdmFsdWVgIGJlY2F1c2UgaXQgc2VlbXNcbiAgICAgICAgICAgIC8vIG1vcmUgY29udmVuaWVudCB0aGF0ICcnIGFuZCAwIGFyZSBza2lwcGVkLlxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY2xhc3NMaXN0LmFkZChuYW1lKTtcbiAgICAgICAgICAgICAgICBwcmV2aW91c0NsYXNzZXMuYWRkKG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShuYW1lKTtcbiAgICAgICAgICAgICAgICBwcmV2aW91c0NsYXNzZXMuZGVsZXRlKG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2xhc3NMaXN0LmNvbW1pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjbGFzc0xpc3QuY29tbWl0KCk7XG4gICAgfVxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGFzcy1tYXAuanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGdldEFzcGVjdFJhdGlvKHBvc3QpIHtcbiAgICBjb25zdCBpbWFnZSA9IGdldFByZXZpZXcocG9zdCk7XG4gICAgaWYgKCFpbWFnZSlcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgcmV0dXJuIGltYWdlLmhlaWdodCAvIGltYWdlLndpZHRoO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEltYWdlVXJsKHBvc3QpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IGlzSW1hZ2UgPSBwb3N0LnBvc3RfaGludCA9PT0gJ2ltYWdlJztcbiAgICBpZiAoaXNJbWFnZSlcbiAgICAgICAgcmV0dXJuIHBvc3QudXJsO1xuICAgIHJldHVybiAoX2IgPSAoX2EgPSBnZXRQcmV2aWV3KHBvc3QpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudXJsKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAnJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcmV2aWV3KHBvc3QpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICBjb25zdCBpc0ltYWdlID0gcG9zdC5wb3N0X2hpbnQgPT09ICdpbWFnZSc7XG4gICAgaWYgKGlzR2FsbGVyeShwb3N0KSlcbiAgICAgICAgcmV0dXJuIGdldEdhbGxlcnlJbWFnZShwb3N0KTtcbiAgICBpZiAoaXNJbWFnZSlcbiAgICAgICAgcmV0dXJuIChfYSA9IHBvc3QucHJldmlldykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmltYWdlc1swXS5zb3VyY2U7XG4gICAgY29uc3QgcHJldmlld3MgPSAoX2IgPSBwb3N0LnByZXZpZXcpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5pbWFnZXNbMF0ucmVzb2x1dGlvbnM7XG4gICAgaWYgKCFwcmV2aWV3cylcbiAgICAgICAgcmV0dXJuO1xuICAgIHJldHVybiAoX2MgPSBwb3N0LnByZXZpZXcpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5pbWFnZXNbMF0uc291cmNlO1xuICAgIC8qIGNvbnN0IHJlc29sdXRpb24gPSBpc0xhcmdlXG4gICAgICA/IHByZXZpZXdzWzJdID8/IHByZXZpZXdzWzFdID8/IHByZXZpZXdzWzBdXG4gICAgICA6IHByZXZpZXdzWzFdID8/IHByZXZpZXdzWzBdO1xuICAgIHJldHVybiByZXNvbHV0aW9uOyAqL1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzR2FsbGVyeShwb3N0KSB7XG4gICAgcmV0dXJuICEhcG9zdC5nYWxsZXJ5X2RhdGE7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0R2FsbGVyeUltYWdlKHBvc3QpIHtcbiAgICBjb25zdCBmaXJzdEltYWdlID0gcG9zdC5nYWxsZXJ5X2RhdGEuaXRlbXNbMF07XG4gICAgY29uc3QgbWV0YWRhdGEgPSBwb3N0Lm1lZGlhX21ldGFkYXRhW2ZpcnN0SW1hZ2UubWVkaWFfaWRdO1xuICAgIGlmICghbWV0YWRhdGEpXG4gICAgICAgIHJldHVybjtcbiAgICBsZXQgdGh1bWIgPSBtZXRhZGF0YS5wLmZpbmQoKGluZm8pID0+IGluZm8ueCA+IDMwMCk7XG4gICAgaWYgKCF0aHVtYilcbiAgICAgICAgdGh1bWIgPSBtZXRhZGF0YS5zO1xuICAgIGlmICghdGh1bWIpXG4gICAgICAgIHJldHVybjtcbiAgICByZXR1cm4ge1xuICAgICAgICB1cmw6IHRodW1iLnUsXG4gICAgICAgIHdpZHRoOiB0aHVtYi54LFxuICAgICAgICBoZWlnaHQ6IHRodW1iLnksXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBodG1sRGVjb2RlKGlucHV0KSB7XG4gICAgdmFyIGRvYyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoaW5wdXQsICd0ZXh0L2h0bWwnKTtcbiAgICByZXR1cm4gZG9jLmRvY3VtZW50RWxlbWVudC50ZXh0Q29udGVudDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaXJzdE1hcmtkb3duRWxlbShpbnB1dCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkaXYuaW5uZXJIVE1MID0gaW5wdXQ7XG4gICAgY29uc3QgZmlyc3RDaGlsZCA9IChfYSA9IGRpdi5xdWVyeVNlbGVjdG9yKCcubWQnKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIGlmIChmaXJzdENoaWxkKSB7XG4gICAgICAgIHJldHVybiBmaXJzdENoaWxkLm91dGVySFRNTDtcbiAgICB9XG4gICAgcmV0dXJuO1xufVxuIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgTGl0RWxlbWVudCwgaHRtbCwgY3VzdG9tRWxlbWVudCwgcHJvcGVydHksIGNzcyB9IGZyb20gJ2xpdC1lbGVtZW50JztcbmltcG9ydCB7IHVuc2FmZUhUTUwgfSBmcm9tICdsaXQtaHRtbC9kaXJlY3RpdmVzL3Vuc2FmZS1odG1sJztcbmltcG9ydCB7IGNsYXNzTWFwIH0gZnJvbSAnbGl0LWh0bWwvZGlyZWN0aXZlcy9jbGFzcy1tYXAnO1xuaW1wb3J0IHsgZ2V0SW1hZ2VVcmwsIGh0bWxEZWNvZGUgfSBmcm9tICcuL2hlbHBlcnMnO1xubGV0IFN1YnJlZGRpdFZpZXcgPSBjbGFzcyBTdWJyZWRkaXRWaWV3IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGlmICh0aGlzLnN1YnJlZGRpdCkge1xuICAgICAgICAgICAgdGhpcy5tYWtlUXVlcnkoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgcHJldiwgY3Vycikge1xuICAgICAgICBpZiAobmFtZSA9PT0gJ3N1YnJlZGRpdCcpIHtcbiAgICAgICAgICAgIGlmIChwcmV2ICE9PSBjdXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJyZWRkaXQgPSBjdXJyO1xuICAgICAgICAgICAgICAgIHRoaXMubWFrZVF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5mZXRjaEFib3V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgbWFrZVF1ZXJ5KCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMuZGF0YSA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKCF0aGlzLnN1YnJlZGRpdClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKGBodHRwczovL3d3dy5yZWRkaXQuY29tL3IvJHt0aGlzLnN1YnJlZGRpdH0uanNvbmAsIHtcbiAgICAgICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXNwLmpzb24oKTtcbiAgICAgICAgdGhpcy5kYXRhID0gYm9keS5kYXRhO1xuICAgICAgICBjb25zb2xlLmxvZygoX2EgPSB0aGlzLmRhdGEpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jaGlsZHJlbi5tYXAoKGMpID0+IGMuZGF0YS50aXRsZSkpO1xuICAgIH1cbiAgICBhc3luYyBmZXRjaEFib3V0KCkge1xuICAgICAgICB0aGlzLmFib3V0ID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoIXRoaXMuc3VicmVkZGl0KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vd3d3LnJlZGRpdC5jb20vci8ke3RoaXMuc3VicmVkZGl0fS9hYm91dC5qc29uYCwge1xuICAgICAgICAgICAgbW9kZTogJ2NvcnMnLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlc3AuanNvbigpO1xuICAgICAgICB0aGlzLmFib3V0ID0gYm9keS5kYXRhO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IHN0eWxlcygpIHtcbiAgICAgICAgcmV0dXJuIGNzcyBgXG4gICAgICAucG9zdHMge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICAgICAgY29sb3I6IGJsYWNrO1xuICAgICAgfVxuXG4gICAgICAucG9zdCB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICAgIGNvbG9yOiBpbmhlcml0O1xuICAgICAgfVxuXG4gICAgICAucG9zdC10b3Age1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgICBwYWRkaW5nOiAxMnB4IDE2cHggMHB4O1xuICAgICAgfVxuXG4gICAgICAuc3ItaWNvbiB7XG4gICAgICAgIHdpZHRoOiAzMnB4O1xuICAgICAgICBoZWlnaHQ6IDMycHg7XG4gICAgICAgIGZsZXg6IG5vbmU7XG4gICAgICAgIG1hcmdpbi1yaWdodDogNHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1MHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgICB9XG4gICAgICAubm8taWNvbiB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IGJsdWV2aW9sZXQ7XG4gICAgICB9XG4gICAgICAuc3Ige1xuICAgICAgICBmbGV4OiBhdXRvO1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxZW07XG4gICAgICB9XG4gICAgICAuc3IgLmF1dGhvciB7XG4gICAgICAgIGNvbG9yOiBncmV5O1xuICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxO1xuICAgICAgfVxuICAgICAgLmpvaW4ge1xuICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgY29sb3I6IGJsYWNrO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1MHB4O1xuICAgICAgICBib3JkZXI6IDEuNXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBmbGV4OiBub25lO1xuICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgZm9udC1zaXplOiAxN3B4O1xuICAgICAgICBsaW5lLWhlaWdodDogMWVtO1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIHRleHQtaW5kZW50OiAtM3B4O1xuICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5wb3N0LXRpdGxlIHtcbiAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICB9XG5cbiAgICAgIC5tZWRpYSB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cblxuICAgICAgLnNlbGZ0ZXh0IHtcbiAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xuICAgICAgfVxuXG4gICAgICAucG9zdC1ib3R0b20ge1xuICAgICAgICBwYWRkaW5nOiAxMnB4IDEycHggMTZweDtcbiAgICAgIH1cblxuICAgICAgLnBvc3QtYm90dG9tIGltZyB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgd2lkdGg6IDMwNXB4O1xuICAgICAgfVxuICAgIGA7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoIXRoaXMuZGF0YSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGEpO1xuICAgICAgICBjb25zdCBpY29uVXJsID0gKChfYSA9IHRoaXMuYWJvdXQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pY29uX2ltZykgfHwgJ2h0dHBzOi8vd3d3LnJlZGRpdHN0YXRpYy5jb20vaWNvbl9wbGFuZXRfMngucG5nJztcbiAgICAgICAgcmV0dXJuIGh0bWwgYDxkaXYgY2xhc3M9XCJwb3N0c1wiPlxuICAgICAgJHt0aGlzLmRhdGEuY2hpbGRyZW5cbiAgICAgICAgICAgIC5maWx0ZXIoKGMpID0+ICFjLmRhdGEuc3RpY2tpZWQpXG4gICAgICAgICAgICAubWFwKChjKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBjb25zdCBwb3N0ID0gYy5kYXRhO1xuICAgICAgICAgICAgY29uc3QgaW1nVXJsID0gZ2V0SW1hZ2VVcmwocG9zdCk7XG4gICAgICAgICAgICByZXR1cm4gaHRtbCBgPGFcbiAgICAgICAgICAgIGNsYXNzPVwicG9zdFwiXG4gICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgICAgICAgaHJlZj1cImh0dHBzOi8vcmVkZGl0LmNvbS8ke3Bvc3QuaWR9XCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicG9zdC10b3BcIj5cbiAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgIGNsYXNzPSR7Y2xhc3NNYXAoe1xuICAgICAgICAgICAgICAgICdzci1pY29uJzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAnbm8taWNvbic6ICEoKF9hID0gdGhpcy5hYm91dCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmljb25faW1nKSxcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgIHNyYz1cIiR7aWNvblVybH1cIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3JcIj5cbiAgICAgICAgICAgICAgICByLyR7cG9zdC5zdWJyZWRkaXR9PGJyIC8+PHNwYW4gY2xhc3M9XCJhdXRob3JcIlxuICAgICAgICAgICAgICAgICAgPnUvJHtwb3N0LmF1dGhvcn08L3NwYW5cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiam9pblwiIHRpdGxlPVwiam9pbiByLyR7cG9zdC5zdWJyZWRkaXR9XCI+KzwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicG9zdC10aXRsZVwiPlxuICAgICAgICAgICAgICAke3Vuc2FmZUhUTUwocG9zdC50aXRsZSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICR7cG9zdC5zZWxmdGV4dF9odG1sXG4gICAgICAgICAgICAgICAgPyBodG1sIGA8ZGl2IGNsYXNzPVwic2VsZnRleHRcIj5cbiAgICAgICAgICAgICAgICAgICR7dW5zYWZlSFRNTChodG1sRGVjb2RlKHBvc3Quc2VsZnRleHRfaHRtbCkpfVxuICAgICAgICAgICAgICAgIDwvZGl2PmBcbiAgICAgICAgICAgICAgICA6ICcnfVxuICAgICAgICAgICAgJHtpbWdVcmwgPyB1bnNhZmVIVE1MKGA8aW1nIGNsYXNzPVwibWVkaWFcIiBzcmM9JHtpbWdVcmx9IC8+YCkgOiAnJ31cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwb3N0LWJvdHRvbVwiPlxuICAgICAgICAgICAgICA8aW1nIHNyYz1cImZha2UtcG9zdC1tZXRhLnBuZ1wiIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2E+YDtcbiAgICAgICAgfSl9XG4gICAgPC9kaXY+YDtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkoeyBhdHRyaWJ1dGU6IHRydWUsIHR5cGU6IFN0cmluZyB9KVxuXSwgU3VicmVkZGl0Vmlldy5wcm90b3R5cGUsIFwic3VicmVkZGl0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogdHJ1ZSwgdHlwZTogT2JqZWN0IH0pXG5dLCBTdWJyZWRkaXRWaWV3LnByb3RvdHlwZSwgXCJkYXRhXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogdHJ1ZSwgdHlwZTogT2JqZWN0IH0pXG5dLCBTdWJyZWRkaXRWaWV3LnByb3RvdHlwZSwgXCJhYm91dFwiLCB2b2lkIDApO1xuU3VicmVkZGl0VmlldyA9IF9fZGVjb3JhdGUoW1xuICAgIGN1c3RvbUVsZW1lbnQoJ3N1YnJlZGRpdC12aWV3Jylcbl0sIFN1YnJlZGRpdFZpZXcpO1xuZXhwb3J0IHsgU3VicmVkZGl0VmlldyB9O1xuIiwidmFyIENsYW1wT3B0aW9ucyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENsYW1wT3B0aW9ucyhjbGFtcCwgdHJ1bmNhdGlvbkNoYXIsIHRydW5jYXRpb25IVE1MLCBzcGxpdE9uQ2hhcnMpIHtcclxuICAgICAgICB0aGlzLmNsYW1wID0gY2xhbXAgfHwgXCJhdXRvXCI7XHJcbiAgICAgICAgdGhpcy50cnVuY2F0aW9uQ2hhciA9IHRydW5jYXRpb25DaGFyIHx8IFwi4oCmXCI7XHJcbiAgICAgICAgdGhpcy50cnVuY2F0aW9uSFRNTCA9IHRydW5jYXRpb25IVE1MO1xyXG4gICAgICAgIHRoaXMuc3BsaXRPbkNoYXJzID0gc3BsaXRPbkNoYXJzIHx8IFtcIi5cIiwgXCItXCIsIFwi4oCTXCIsIFwi4oCUXCIsIFwiIFwiXTtcclxuICAgIH1cclxuICAgIHJldHVybiBDbGFtcE9wdGlvbnM7XHJcbn0oKSk7XHJcbnZhciBDbGFtcFJlc3BvbnNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ2xhbXBSZXNwb25zZShvcmlnaW5hbCwgY2xhbXBlZCkge1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWwgPSBvcmlnaW5hbDtcclxuICAgICAgICB0aGlzLmNsYW1wZWQgPSBjbGFtcGVkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIENsYW1wUmVzcG9uc2U7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBDbGFtcHMgKGllLiBjdXRzIG9mZikgYW4gSFRNTCBlbGVtZW50J3MgY29udGVudCBieSBhZGRpbmcgZWxsaXBzaXMgdG8gaXQgaWYgdGhlIGNvbnRlbnQgaW5zaWRlIGlzIHRvbyBsb25nLlxyXG4gKlxyXG4gKiBAZXhwb3J0XHJcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgVGhlIEhUTUxFbGVtZW50IHRoYXQgc2hvdWxkIGJlIGNsYW1wZWQuXHJcbiAqIEBwYXJhbSB7Q2xhbXBPcHRpb25zfSBbb3B0aW9uc10gVGhlIENsYW1wIG9wdGlvbnNcclxuICogQHJldHVybnMge0NsYW1wUmVzcG9uc2V9IFRoZSBDbGFtcCByZXNwb25zZVxyXG4gKi9cclxuZnVuY3Rpb24gY2xhbXAoZWxlbWVudCwgb3B0aW9ucykge1xyXG4gICAgdmFyIHdpbiA9IHdpbmRvdztcclxuICAgIGlmICghb3B0aW9ucykge1xyXG4gICAgICAgIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGNsYW1wOiBcImF1dG9cIixcclxuICAgICAgICAgICAgdHJ1bmNhdGlvbkNoYXI6IFwi4oCmXCIsXHJcbiAgICAgICAgICAgIHNwbGl0T25DaGFyczogW1wiLlwiLCBcIi1cIiwgXCLigJNcIiwgXCLigJRcIiwgXCIgXCJdXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHZhciBvcHQgPSB7XHJcbiAgICAgICAgY2xhbXA6IG9wdGlvbnMuY2xhbXAgfHwgXCJhdXRvXCIsXHJcbiAgICAgICAgc3BsaXRPbkNoYXJzOiBvcHRpb25zLnNwbGl0T25DaGFycyB8fCBbXCIuXCIsIFwiLVwiLCBcIuKAk1wiLCBcIuKAlFwiLCBcIiBcIl0sXHJcbiAgICAgICAgdHJ1bmNhdGlvbkNoYXI6IG9wdGlvbnMudHJ1bmNhdGlvbkNoYXIgfHwgXCLigKZcIixcclxuICAgICAgICB0cnVuY2F0aW9uSFRNTDogb3B0aW9ucy50cnVuY2F0aW9uSFRNTFxyXG4gICAgfTtcclxuICAgIHZhciBzcGxpdE9uQ2hhcnMgPSBvcHQuc3BsaXRPbkNoYXJzLnNsaWNlKDApO1xyXG4gICAgdmFyIHNwbGl0Q2hhciA9IHNwbGl0T25DaGFyc1swXTtcclxuICAgIHZhciBjaHVua3M7XHJcbiAgICB2YXIgbGFzdENodW5rO1xyXG4gICAgdmFyIHN0eSA9IGVsZW1lbnQuc3R5bGU7XHJcbiAgICB2YXIgb3JpZ2luYWxUZXh0ID0gZWxlbWVudC5pbm5lckhUTUw7XHJcbiAgICB2YXIgY2xhbXBWYWx1ZSA9IG9wdC5jbGFtcDtcclxuICAgIHZhciBpc0NTU1ZhbHVlID0gY2xhbXBWYWx1ZS5pbmRleE9mICYmIChjbGFtcFZhbHVlLmluZGV4T2YoXCJweFwiKSA+IC0xIHx8IGNsYW1wVmFsdWUuaW5kZXhPZihcImVtXCIpID4gLTEpO1xyXG4gICAgdmFyIHRydW5jYXRpb25IVE1MQ29udGFpbmVyO1xyXG4gICAgaWYgKG9wdC50cnVuY2F0aW9uSFRNTCkge1xyXG4gICAgICAgIHRydW5jYXRpb25IVE1MQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgdHJ1bmNhdGlvbkhUTUxDb250YWluZXIuaW5uZXJIVE1MID0gb3B0LnRydW5jYXRpb25IVE1MO1xyXG4gICAgfVxyXG4gICAgLy8gVVRJTElUWSBGVU5DVElPTlMgX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIGN1cnJlbnQgc3R5bGUgZm9yIGFuIGVsZW1lbnQuXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtIFRoZSBlbGVtZW50IHRvIGNvbXB1dGUuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCBUaGUgc3R5bGUgcHJvcGVydHkuXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBjb21wdXRlU3R5bGUoZWxlbSwgcHJvcCkge1xyXG4gICAgICAgIHJldHVybiB3aW4uZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKS5nZXRQcm9wZXJ0eVZhbHVlKHByb3ApO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBtYXhpbXVtIG51bWJlciBvZiBsaW5lcyBvZiB0ZXh0IHRoYXQgc2hvdWxkIGJlIHJlbmRlcmVkIGJhc2VkXHJcbiAgICAgKiBvbiB0aGUgY3VycmVudCBoZWlnaHQgb2YgdGhlIGVsZW1lbnQgYW5kIHRoZSBsaW5lLWhlaWdodCBvZiB0aGUgdGV4dC5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0TWF4TGluZXMoaGVpZ2h0KSB7XHJcbiAgICAgICAgdmFyIGF2YWlsSGVpZ2h0ID0gaGVpZ2h0IHx8IGVsZW1lbnQuY2xpZW50SGVpZ2h0O1xyXG4gICAgICAgIHZhciBsaW5lSGVpZ2h0ID0gZ2V0TGluZUhlaWdodChlbGVtZW50KTtcclxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5mbG9vcihhdmFpbEhlaWdodCAvIGxpbmVIZWlnaHQpLCAwKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbWF4aW11bSBoZWlnaHQgYSBnaXZlbiBlbGVtZW50IHNob3VsZCBoYXZlIGJhc2VkIG9uIHRoZSBsaW5lLVxyXG4gICAgICogaGVpZ2h0IG9mIHRoZSB0ZXh0IGFuZCB0aGUgZ2l2ZW4gY2xhbXAgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldE1heEhlaWdodChjbG1wKSB7XHJcbiAgICAgICAgdmFyIGxpbmVIZWlnaHQgPSBnZXRMaW5lSGVpZ2h0KGVsZW1lbnQpO1xyXG4gICAgICAgIHJldHVybiBsaW5lSGVpZ2h0ICogY2xtcDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbGluZS1oZWlnaHQgb2YgYW4gZWxlbWVudCBhcyBhbiBpbnRlZ2VyLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRMaW5lSGVpZ2h0KGVsZW0pIHtcclxuICAgICAgICB2YXIgbGggPSBjb21wdXRlU3R5bGUoZWxlbSwgXCJsaW5lLWhlaWdodFwiKTtcclxuICAgICAgICBpZiAobGggPT09IFwibm9ybWFsXCIpIHtcclxuICAgICAgICAgICAgLy8gTm9ybWFsIGxpbmUgaGVpZ2h0cyB2YXJ5IGZyb20gYnJvd3NlciB0byBicm93c2VyLiBUaGUgc3BlYyByZWNvbW1lbmRzXHJcbiAgICAgICAgICAgIC8vIGEgdmFsdWUgYmV0d2VlbiAxLjAgYW5kIDEuMiBvZiB0aGUgZm9udCBzaXplLiBVc2luZyAxLjEgdG8gc3BsaXQgdGhlIGRpZmYuXHJcbiAgICAgICAgICAgIGxoID0gcGFyc2VGbG9hdChwYXJzZUZsb2F0KGNvbXB1dGVTdHlsZShlbGVtLCBcImZvbnQtc2l6ZVwiKSkudG9GaXhlZCgwKSkgKiAxLjE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHBhcnNlRmxvYXQobGgpLnRvRml4ZWQoMCkpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBoZWlnaHQgb2YgYW4gZWxlbWVudCBhcyBhbiBpbnRlZ2VyIChtYXggb2Ygc2Nyb2xsL29mZnNldC9jbGllbnQpLlxyXG4gICAgICogTm90ZTogaW5saW5lIGVsZW1lbnRzIHJldHVybiAwIGZvciBzY3JvbGxIZWlnaHQgYW5kIGNsaWVudEhlaWdodFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRFbGVtSGVpZ2h0KGVsZW0pIHtcclxuICAgICAgICAvLyBUaGUgJy0gNCcgaXMgYSBoYWNrIHRvIGRlYWwgd2l0aCB0aGUgZWxlbWVudCBoZWlnaHQgd2hlbiB0aGUgYnJvd3Nlcihlc3BlY2lhbGx5IElFKSB6b29tIGxldmVsIGlzIG5vdCAxMDAlLlxyXG4gICAgICAgIC8vIEl0IGFsc28gZG9lc24ndCBpbXBhY3QgY2xhbXBpbmcgd2hlbiB0aGUgYnJvd3NlciB6b29tIGxldmVsIGlzIDEwMCUuXHJcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KGVsZW0uc2Nyb2xsSGVpZ2h0LCBlbGVtLmNsaWVudEhlaWdodCkgLSA0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIGFuIGVsZW1lbnQncyBsYXN0IGNoaWxkLiBUaGF0IG1heSBiZSBhbm90aGVyIG5vZGUgb3IgYSBub2RlJ3MgY29udGVudHMuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldExhc3RDaGlsZChlbGVtKSB7XHJcbiAgICAgICAgaWYgKCFlbGVtLmxhc3RDaGlsZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEN1cnJlbnQgZWxlbWVudCBoYXMgY2hpbGRyZW4sIG5lZWQgdG8gZ28gZGVlcGVyIGFuZCBnZXQgbGFzdCBjaGlsZCBhcyBhIHRleHQgbm9kZVxyXG4gICAgICAgIGlmIChlbGVtLmxhc3RDaGlsZC5jaGlsZHJlbiAmJiBlbGVtLmxhc3RDaGlsZC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRMYXN0Q2hpbGQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZWxlbS5jaGlsZHJlbikucG9wKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghZWxlbS5sYXN0Q2hpbGQgfHxcclxuICAgICAgICAgICAgIWVsZW0ubGFzdENoaWxkLm5vZGVWYWx1ZSB8fFxyXG4gICAgICAgICAgICBlbGVtLmxhc3RDaGlsZC5ub2RlVmFsdWUgPT09IFwiXCIgfHxcclxuICAgICAgICAgICAgZWxlbS5sYXN0Q2hpbGQubm9kZVZhbHVlID09PSBvcHQudHJ1bmNhdGlvbkNoYXIpIHtcclxuICAgICAgICAgICAgaWYgKCFlbGVtLmxhc3RDaGlsZC5ub2RlVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciB2b2lkL2VtcHR5IGVsZW1lbnQgKHN1Y2ggYXMgPGJyPiB0YWcpIG9yIGlmIGl0J3MgdGhlIGVsbGlwc2lzIGFuZCByZW1vdmUgaXQuXHJcbiAgICAgICAgICAgICAgICBpZiAoKGVsZW0ubGFzdENoaWxkLmZpcnN0Q2hpbGQgPT09IG51bGwgfHxcclxuICAgICAgICAgICAgICAgICAgICBlbGVtLmxhc3RDaGlsZC5maXJzdENoaWxkLm5vZGVWYWx1ZSA9PT0gb3B0LnRydW5jYXRpb25DaGFyKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0ubGFzdENoaWxkLnBhcmVudE5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtLmxhc3RDaGlsZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsZW0ubGFzdENoaWxkKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgZWxlbWVudCBoYXMgbm8gbW9yZSBjaGlsZHJlbiBhbmQgcmVtb3ZlIGl0IGlmIGl0J3MgdGhlIGNhc2UuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIGZvciBpbnN0YW5jZSB3aXRoIGxpc3RzIChpLmUuIDx1bD4gYW5kIDxvbD4pIHdpdGggbm8gaXRlbXMuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCghZWxlbS5jaGlsZHJlbiB8fCBlbGVtLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkgJiYgZWxlbS5wYXJlbnROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldExhc3RDaGlsZChlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBpdCdzIGEgdGV4dCBub2RlXHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbS5sYXN0Q2hpbGQubm9kZVR5cGUgPT09IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbS5sYXN0Q2hpbGQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0TGFzdENoaWxkKGVsZW0ubGFzdENoaWxkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZWxlbS5sYXN0Q2hpbGQgJiZcclxuICAgICAgICAgICAgICAgIGVsZW0ubGFzdENoaWxkLnBhcmVudE5vZGUgJiZcclxuICAgICAgICAgICAgICAgIGVsZW0ubGFzdENoaWxkLm5vZGVWYWx1ZSA9PT0gb3B0LnRydW5jYXRpb25DaGFyKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtLmxhc3RDaGlsZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsZW0ubGFzdENoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRMYXN0Q2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZWxlbS5sYXN0Q2hpbGQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBseSB0aGUgZWxsaXBzaXMgdG8gdGhlIGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSBlbGVtIHRoZSBlbGVtZW50IHRvIGFwcGx5IHRoZSBlbGxpcHNpcyBvblxyXG4gICAgICogQHBhcmFtIHN0ciBUaGUgc3RyaW5nIHRoYXQgd2lsbCBiZSBzZXQgdG8gdGhlIGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYXBwbHlFbGxpcHNpcyhlbGVtLCBzdHIpIHtcclxuICAgICAgICBlbGVtLm5vZGVWYWx1ZSA9IHN0ciArIG9wdC50cnVuY2F0aW9uQ2hhcjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBvbmUgY2hhcmFjdGVyIGF0IGEgdGltZSBmcm9tIHRoZSB0ZXh0IHVudGlsIGl0cyB3aWR0aCBvclxyXG4gICAgICogaGVpZ2h0IGlzIGJlbmVhdGggdGhlIHBhc3NlZC1pbiBtYXggcGFyYW0uXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHRydW5jYXRlKHRhcmdldCwgbWF4SGVpZ2h0KSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVzZXRzIGdsb2JhbCB2YXJpYWJsZXMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzZXQoKSB7XHJcbiAgICAgICAgICAgIHNwbGl0T25DaGFycyA9IG9wdC5zcGxpdE9uQ2hhcnMuc2xpY2UoMCk7XHJcbiAgICAgICAgICAgIHNwbGl0Q2hhciA9IHNwbGl0T25DaGFyc1swXTtcclxuICAgICAgICAgICAgY2h1bmtzID0gbnVsbDtcclxuICAgICAgICAgICAgbGFzdENodW5rID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0YXJnZXQgfHwgIW1heEhlaWdodCB8fCAhdGFyZ2V0Lm5vZGVWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGFyZ2V0Lm5vZGVWYWx1ZS50cmltKCkuZW5kc1dpdGgob3B0LnRydW5jYXRpb25DaGFyKSkge1xyXG4gICAgICAgICAgICBhcHBseUVsbGlwc2lzKHRhcmdldCwgdGFyZ2V0Lm5vZGVWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChnZXRFbGVtSGVpZ2h0KGVsZW1lbnQpIDw9IG1heEhlaWdodCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5pbm5lckhUTUw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBub2RlVmFsdWUgPSB0YXJnZXQubm9kZVZhbHVlLnJlcGxhY2Uob3B0LnRydW5jYXRpb25DaGFyLCBcIlwiKTtcclxuICAgICAgICAvLyBHcmFiIHRoZSBuZXh0IGNodW5rc1xyXG4gICAgICAgIGlmICghY2h1bmtzKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBtb3JlIGNoYXJhY3RlcnMgdG8gdHJ5LCBncmFiIHRoZSBuZXh0IG9uZVxyXG4gICAgICAgICAgICBpZiAoc3BsaXRPbkNoYXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHNwbGl0Q2hhciA9IHNwbGl0T25DaGFycy5zaGlmdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gTm8gY2hhcmFjdGVycyB0byBjaHVuayBieS4gR28gY2hhcmFjdGVyLWJ5LWNoYXJhY3RlclxyXG4gICAgICAgICAgICAgICAgc3BsaXRDaGFyID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjaHVua3MgPSBub2RlVmFsdWUuc3BsaXQoc3BsaXRDaGFyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIGNodW5rcyBsZWZ0IHRvIHJlbW92ZSwgcmVtb3ZlIHRoZSBsYXN0IG9uZSBhbmQgc2VlIGlmXHJcbiAgICAgICAgLy8gdGhlIG5vZGVWYWx1ZSBmaXRzLlxyXG4gICAgICAgIGlmIChjaHVua3MubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICBsYXN0Q2h1bmsgPSBjaHVua3MucG9wKCk7XHJcbiAgICAgICAgICAgIGFwcGx5RWxsaXBzaXModGFyZ2V0LCBjaHVua3Muam9pbihzcGxpdENoYXIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIE5vIG1vcmUgY2h1bmtzIGNhbiBiZSByZW1vdmVkIHVzaW5nIHRoaXMgY2hhcmFjdGVyXHJcbiAgICAgICAgICAgIGNodW5rcyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEluc2VydCB0aGUgY3VzdG9tIEhUTUwgYmVmb3JlIHRoZSB0cnVuY2F0aW9uIGNoYXJhY3RlclxyXG4gICAgICAgIGlmICh0cnVuY2F0aW9uSFRNTENvbnRhaW5lcikge1xyXG4gICAgICAgICAgICB0YXJnZXQubm9kZVZhbHVlID0gdGFyZ2V0Lm5vZGVWYWx1ZS5yZXBsYWNlKG9wdC50cnVuY2F0aW9uQ2hhciwgXCJcIik7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID1cclxuICAgICAgICAgICAgICAgIHRhcmdldC5ub2RlVmFsdWUgKyBcIiBcIiArIHRydW5jYXRpb25IVE1MQ29udGFpbmVyLmlubmVySFRNTCArIG9wdC50cnVuY2F0aW9uQ2hhcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2VhcmNoIHByb2R1Y2VkIHZhbGlkIGNodW5rc1xyXG4gICAgICAgIGlmIChjaHVua3MpIHtcclxuICAgICAgICAgICAgLy8gSXQgZml0c1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5jbGllbnRIZWlnaHQgPD0gbWF4SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGVyZSdzIHN0aWxsIG1vcmUgY2hhcmFjdGVycyB0byB0cnkgc3BsaXR0aW5nIG9uLCBub3QgcXVpdGUgZG9uZSB5ZXRcclxuICAgICAgICAgICAgICAgIGlmIChzcGxpdE9uQ2hhcnMubGVuZ3RoID49IDAgJiYgc3BsaXRDaGFyICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwbHlFbGxpcHNpcyh0YXJnZXQsIGNodW5rcy5qb2luKHNwbGl0Q2hhcikgKyBzcGxpdENoYXIgKyBsYXN0Q2h1bmspO1xyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rcyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBGaW5pc2hlZCFcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5pbm5lckhUTUw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIE5vIHZhbGlkIGNodW5rcyBwcm9kdWNlZFxyXG4gICAgICAgICAgICAvLyBObyB2YWxpZCBjaHVua3MgZXZlbiB3aGVuIHNwbGl0dGluZyBieSBsZXR0ZXIsIHRpbWUgdG8gbW92ZVxyXG4gICAgICAgICAgICAvLyBvbiB0byB0aGUgbmV4dCBub2RlXHJcbiAgICAgICAgICAgIGlmIChzcGxpdENoYXIgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgIGFwcGx5RWxsaXBzaXModGFyZ2V0LCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IGdldExhc3RDaGlsZChlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHJlc2V0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydW5jYXRlKHRhcmdldCwgbWF4SGVpZ2h0KTtcclxuICAgIH1cclxuICAgIC8vIENPTlNUUlVDVE9SIF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19cclxuICAgIGlmIChjbGFtcFZhbHVlID09PSBcImF1dG9cIikge1xyXG4gICAgICAgIGNsYW1wVmFsdWUgPSBnZXRNYXhMaW5lcygpLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc0NTU1ZhbHVlKSB7XHJcbiAgICAgICAgY2xhbXBWYWx1ZSA9IGdldE1heExpbmVzKHBhcnNlSW50KGNsYW1wVmFsdWUsIDEwKSkudG9TdHJpbmcoKTtcclxuICAgIH1cclxuICAgIHZhciBjbGFtcGVkVGV4dDtcclxuICAgIHZhciBoZWlnaHQgPSBnZXRNYXhIZWlnaHQoTnVtYmVyKGNsYW1wVmFsdWUpKTtcclxuICAgIGlmIChoZWlnaHQgPCBnZXRFbGVtSGVpZ2h0KGVsZW1lbnQpKSB7XHJcbiAgICAgICAgY2xhbXBlZFRleHQgPSB0cnVuY2F0ZShnZXRMYXN0Q2hpbGQoZWxlbWVudCksIGhlaWdodCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IENsYW1wUmVzcG9uc2Uob3JpZ2luYWxUZXh0LCBjbGFtcGVkVGV4dCk7XHJcbn1cblxuZXhwb3J0IHsgQ2xhbXBPcHRpb25zLCBDbGFtcFJlc3BvbnNlLCBjbGFtcCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xhbXB5LmVzNS5qcy5tYXBcbiIsImltcG9ydCB7IGNzcywgdW5zYWZlQ1NTIH0gZnJvbSAnbGl0LWVsZW1lbnQnO1xuaW1wb3J0IHsgR1JJRF9HUkFOVUxBUklUWSB9IGZyb20gJy4vdHlwZXMnO1xuZXhwb3J0IGRlZmF1bHQgKCkgPT4gY3NzIGBcbiAgOmhvc3Qge1xuICAgIC0tdGlsZS1zaXplOiAxNTZweDtcbiAgICAtLWdyYWRpZW50LTE6IGxpbmVhci1ncmFkaWVudCg5Ny41MWRlZywgI2ZmNDQwMCAtNy4wOCUsICNmZmIzMzAgMTE2LjU3JSk7XG4gICAgLS1ncmFkaWVudC0yOiBsaW5lYXItZ3JhZGllbnQoODkuOTRkZWcsICNjMjc0ZjAgMCUsICNmMTRmYjAgMTAwJSk7XG4gICAgLS1ncmFkaWVudC0zOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgICA4OS45NGRlZyxcbiAgICAgICM1MWI5ZmYgMCUsXG4gICAgICAjNzc4NWZmIDUyLjYlLFxuICAgICAgI2IyNzlmZiA3My45NiUsXG4gICAgICAjZmY4MWVkIDEwMCVcbiAgICApO1xuICAgIC0tZ3JhZGllbnQtNDogbGluZWFyLWdyYWRpZW50KDk3LjUxZGVnLCAjMDQ4ZGU5IC03LjA4JSwgIzBmYzBkMiAxMTYuNTclKTtcbiAgICAtLWdyYWRpZW50LTU6IGxpbmVhci1ncmFkaWVudCg3MS41M2RlZywgI2MzMGQ0NyAyMC44OSUsICNmZTQzMDEgMTIxLjYyJSk7XG4gICAgLS1ncmFkaWVudC02OiBsaW5lYXItZ3JhZGllbnQoOTEuNjRkZWcsICNmNTQ0MWYgLTEwLjQ5JSwgI2ZjNzUxOSAxMDkuNzUlKTtcbiAgICAtLWdyYWRpZW50LTc6IGxpbmVhci1ncmFkaWVudCg5MS42NGRlZywgIzViM2RjMSAtMTAuNDklLCAjYWE0OGMwIDEwOS43NSUpO1xuICAgIC0tZ3JhZGllbnQtODogbGluZWFyLWdyYWRpZW50KDkxLjY0ZGVnLCAjMzM1M2I4IC0xMC40OSUsICM2ODVjZmMgMTA5Ljc1JSk7XG4gIH1cbiAgLmdyaWQge1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xuICAgIGdyaWQtYXV0by1yb3dzOiBjYWxjKCh2YXIoLS10aWxlLXNpemUpICsgMTZweCkgLyAke0dSSURfR1JBTlVMQVJJVFl9KTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIHBhZGRpbmc6IDhweDtcbiAgICAvKiBncmlkLWdhcDogMTZweDsgKi9cbiAgICBncmlkLWF1dG8tZmxvdzogZGVuc2U7XG4gIH1cblxuICAucG9zdC10aWxlIHtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgYm9yZGVyLXJhZGl1czogMTZweDtcbiAgICBtYXJnaW46IDhweDtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgYm94LXNoYWRvdzogMHB4IDRweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG5cbiAgICBncmlkLXJvdy1lbmQ6IHNwYW4gNDtcbiAgfVxuXG4gIC5wb3N0LXRpbGUtdGV4dCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIGxpbmUtaGVpZ2h0OiAxN3B4O1xuICAgIHRleHQtc2hhZG93OiAwcHggMnB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMjUpO1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgIG1hcmdpbjogMDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgYm90dG9tOiAwO1xuICB9XG5cbiAgLnNoaW0ge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yNSk7XG4gIH1cblxuICAucG9zdC10ZXh0LW9ubHkgLnBvc3QtdGlsZS10ZXh0IHtcbiAgICBib3gtc2hhZG93OiB1bnNldDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgfVxuXG4gIC5sb2FkZXIge1xuICAgIGdyaWQtY29sdW1uLWVuZDogc3BhbiAyO1xuICB9XG5cbiAgLnBvc3QtdGlsZS1pbWFnZSB7XG4gICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xuICAgIGJhY2tncm91bmQtcG9zaXRpb246IHRvcCBjZW50ZXI7XG4gICAgLyogaGVpZ2h0OiB2YXIoLS10aWxlLXNpemUpOyAqL1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgbGVmdDogMDtcbiAgICByaWdodDogMDtcbiAgICBib3R0b206IDA7XG4gIH1cbiAgLnBvc3QtdGV4dC1vbmx5IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB2YXIoLS1ncmFkaWVudC0xKTtcbiAgfVxuXG4gIC5wb3N0LXRpbGU6bnRoLWNoaWxkKDhuKS5wb3N0LXRleHQtb25seSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdmFyKC0tZ3JhZGllbnQtMik7XG4gIH1cbiAgLnBvc3QtdGlsZTpudGgtY2hpbGQoOG4gKyAxKS5wb3N0LXRleHQtb25seSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdmFyKC0tZ3JhZGllbnQtMyk7XG4gIH1cbiAgLnBvc3QtdGlsZTpudGgtY2hpbGQoOG4gKyAyKS5wb3N0LXRleHQtb25seSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdmFyKC0tZ3JhZGllbnQtNCk7XG4gIH1cbiAgLnBvc3QtdGlsZTpudGgtY2hpbGQoOG4gKyAzKS5wb3N0LXRleHQtb25seSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdmFyKC0tZ3JhZGllbnQtNSk7XG4gIH1cbiAgLnBvc3QtdGlsZTpudGgtY2hpbGQoOG4gKyA0KS5wb3N0LXRleHQtb25seSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdmFyKC0tZ3JhZGllbnQtNik7XG4gIH1cbiAgLnBvc3QtdGlsZTpudGgtY2hpbGQoOG4gKyA1KS5wb3N0LXRleHQtb25seSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdmFyKC0tZ3JhZGllbnQtNyk7XG4gIH1cbiAgLnBvc3QtdGlsZTpudGgtY2hpbGQoOG4gKyA2KS5wb3N0LXRleHQtb25seSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdmFyKC0tZ3JhZGllbnQtOCk7XG4gIH1cblxuICAuaGlkZGVuIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG5cbiAgLnN1YnJlZGRpdCB7XG4gICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgICBsaW5lLWhlaWdodDogMS4yZW07XG4gICAgbWFyZ2luLXRvcDogMTZweDtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgZmxleDogbm9uZTtcbiAgfVxuXG4gIC5wb3N0LXRleHQtb25seSAucG9zdC10aWxlLXRleHQgLnBvc3QtdGlsZS10aXRsZSB7XG4gICAgdGV4dC1zaGFkb3c6IG5vbmU7XG4gIH1cblxuICAuc3BhY2VyIHtcbiAgICBmbGV4OiBhdXRvO1xuICB9XG4gIC5wb3N0LXRpbGUtdGl0bGUge1xuICAgIG1hcmdpbjogMDtcbiAgICBmb250LXdlaWdodDogNjAwO1xuICAgIGZsZXg6IG5vbmU7XG4gICAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgfVxuXG4gIC5wb3N0LXRpbGUtYm9keSB7XG4gICAgbWFyZ2luLXRvcDogOHB4O1xuICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gIH1cblxuICAucG9zdC10aWxlLWxhcmdlIHtcbiAgICBncmlkLWNvbHVtbi1lbmQ6IHNwYW4gMjtcbiAgICAvKiBncmlkLXJvdy1lbmQ6IHNwYW4gMTY7ICovXG4gIH1cbiAgJHt1bnNhZmVDU1MocmFuZ2UoR1JJRF9HUkFOVUxBUklUWSAqIDQpXG4gICAgLm1hcCgobnVtKSA9PiBgXG4gICAgLnNwYW4ke251bX0ge1xuICAgICAgZ3JpZC1yb3ctZW5kOiBzcGFuICR7bnVtfTtcbiAgICB9XG4gIGApXG4gICAgLmpvaW4oJ1xcbicpKX1cblxuICAubWQgYSB7XG4gICAgY29sb3I6IGluaGVyaXQ7XG4gIH1cbmA7XG5mdW5jdGlvbiByYW5nZShudW0pIHtcbiAgICBjb25zdCBhcnIgPSBBcnJheShudW0pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtOyBpKyspXG4gICAgICAgIGFycltpXSA9IGk7XG4gICAgcmV0dXJuIGFycjtcbn1cbiIsImV4cG9ydCBjb25zdCBHUklEX0dSQU5VTEFSSVRZID0gNDtcbiIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IExpdEVsZW1lbnQsIGh0bWwsIGN1c3RvbUVsZW1lbnQsIHByb3BlcnR5LCBxdWVyeSB9IGZyb20gJ2xpdC1lbGVtZW50JztcbmltcG9ydCB7IHVuc2FmZUhUTUwgfSBmcm9tICdsaXQtaHRtbC9kaXJlY3RpdmVzL3Vuc2FmZS1odG1sJztcbmltcG9ydCB7IGNsYXNzTWFwIH0gZnJvbSAnbGl0LWh0bWwvZGlyZWN0aXZlcy9jbGFzcy1tYXAnO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICdAY2xhbXB5LWpzL2NsYW1weSc7XG5pbXBvcnQgZXhwbG9yZVN0eWxlcyBmcm9tICcuL2V4cGxvcmUtc3R5bGVzJztcbmltcG9ydCB7IGZpcnN0TWFya2Rvd25FbGVtLCBodG1sRGVjb2RlIH0gZnJvbSAnLi9oZWxwZXJzJztcbmxldCBUaWxlVGV4dCA9IGNsYXNzIFRpbGVUZXh0IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuaXNJbWFnZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNob3dzaGltID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zaG93dGl0bGUgPSB0cnVlO1xuICAgICAgICB0aGlzLnNob3dzdWJyZWRkaXQgPSB0cnVlO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IHN0eWxlcygpIHtcbiAgICAgICAgcmV0dXJuIGV4cGxvcmVTdHlsZXMoKTtcbiAgICB9XG4gICAgdXBkYXRlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMudGl0bGVFbGVtKSB7XG4gICAgICAgICAgICBjbGFtcCh0aGlzLnRpdGxlRWxlbSwgeyBjbGFtcDogMyB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ib2R5RWxlbSkge1xuICAgICAgICAgICAgY2xhbXAodGhpcy5ib2R5RWxlbS5maXJzdEVsZW1lbnRDaGlsZCwgeyBjbGFtcDogNSB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5wb3N0KVxuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyVGV4dCh0aGlzLnBvc3QsIHRoaXMuaXNJbWFnZSk7XG4gICAgfVxuICAgIF9yZW5kZXJUZXh0KHBvc3QsIGlzSW1hZ2UgPSBmYWxzZSkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgY29uc3QgdGV4dCA9IChfYyA9IGZpcnN0TWFya2Rvd25FbGVtKChfYiA9IGh0bWxEZWNvZGUoKF9hID0gcG9zdC5zZWxmdGV4dF9odG1sKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJykpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6ICcnKSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJyc7XG4gICAgICAgIHJldHVybiBodG1sIGA8ZGl2XG4gICAgICBjbGFzcz0ke2NsYXNzTWFwKHtcbiAgICAgICAgICAgICdwb3N0LXRpbGUtdGV4dCc6IHRydWUsXG4gICAgICAgICAgICBzaGltOiBpc0ltYWdlICYmIHRoaXMuc2hvd3NoaW0sXG4gICAgICAgIH0pfVxuICAgID5cbiAgICAgIDxoM1xuICAgICAgICBjbGFzcz0ke2NsYXNzTWFwKHtcbiAgICAgICAgICAgICdwb3N0LXRpbGUtdGl0bGUnOiB0cnVlLFxuICAgICAgICAgICAgaGlkZGVuOiBpc0ltYWdlICYmICF0aGlzLnNob3d0aXRsZSxcbiAgICAgICAgfSl9XG4gICAgICA+XG4gICAgICAgICR7aHRtbERlY29kZShwb3N0LnRpdGxlKX1cbiAgICAgIDwvaDM+XG4gICAgICAkeyh0ZXh0ID09PSBudWxsIHx8IHRleHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRleHQubGVuZ3RoKSA/IGh0bWwgYDxkaXZcbiAgICAgICAgICAgIGNsYXNzPSR7Y2xhc3NNYXAoe1xuICAgICAgICAgICAgJ3Bvc3QtdGlsZS1ib2R5JzogdHJ1ZSxcbiAgICAgICAgICAgIGhpZGRlbjogaXNJbWFnZSAmJiAhdGhpcy5zaG93dGl0bGUsXG4gICAgICAgIH0pfVxuICAgICAgICAgID5cbiAgICAgICAgICAgICR7dW5zYWZlSFRNTCh0ZXh0KX1cbiAgICAgICAgICA8L2Rpdj5gXG4gICAgICAgICAgICA6ICcnfVxuICAgICAgPGRpdiBjbGFzcz1cInNwYWNlclwiPjwvZGl2PlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzcz0ke2NsYXNzTWFwKHtcbiAgICAgICAgICAgIHN1YnJlZGRpdDogdHJ1ZSxcbiAgICAgICAgICAgIGhpZGRlbjogaXNJbWFnZSAmJiAhdGhpcy5zaG93c3VicmVkZGl0LFxuICAgICAgICB9KX1cbiAgICAgID5cbiAgICAgICAgci8ke3Bvc3Quc3VicmVkZGl0fVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+YDtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkoeyBhdHRyaWJ1dGU6IHRydWUsIHR5cGU6IE9iamVjdCB9KVxuXSwgVGlsZVRleHQucHJvdG90eXBlLCBcInBvc3RcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5KHsgYXR0cmlidXRlOiB0cnVlLCB0eXBlOiBCb29sZWFuIH0pXG5dLCBUaWxlVGV4dC5wcm90b3R5cGUsIFwiaXNJbWFnZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcXVlcnkoJy5wb3N0LXRpbGUtdGl0bGUnKVxuXSwgVGlsZVRleHQucHJvdG90eXBlLCBcInRpdGxlRWxlbVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcXVlcnkoJy5wb3N0LXRpbGUtYm9keScpXG5dLCBUaWxlVGV4dC5wcm90b3R5cGUsIFwiYm9keUVsZW1cIiwgdm9pZCAwKTtcblRpbGVUZXh0ID0gX19kZWNvcmF0ZShbXG4gICAgY3VzdG9tRWxlbWVudCgndGlsZS10ZXh0Jylcbl0sIFRpbGVUZXh0KTtcbmV4cG9ydCB7IFRpbGVUZXh0IH07XG4iLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBMaXRFbGVtZW50LCBodG1sLCBjdXN0b21FbGVtZW50LCBwcm9wZXJ0eSwgcXVlcnkgfSBmcm9tICdsaXQtZWxlbWVudCc7XG5pbXBvcnQgeyB1bnNhZmVIVE1MIH0gZnJvbSAnbGl0LWh0bWwvZGlyZWN0aXZlcy91bnNhZmUtaHRtbCc7XG5pbXBvcnQgeyBjbGFzc01hcCB9IGZyb20gJ2xpdC1odG1sL2RpcmVjdGl2ZXMvY2xhc3MtbWFwJztcbmltcG9ydCB7IEdSSURfR1JBTlVMQVJJVFkgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCAnLi9zdWJyZWRkaXQtdmlldyc7XG5pbXBvcnQgJy4vdGlsZS10ZXh0JztcbmltcG9ydCBleHBsb3JlU3R5bGVzIGZyb20gJy4vZXhwbG9yZS1zdHlsZXMnO1xuaW1wb3J0IHsgZmlyc3RNYXJrZG93bkVsZW0sIGdldEFzcGVjdFJhdGlvLCBnZXRJbWFnZVVybCwgaHRtbERlY29kZSwgfSBmcm9tICcuL2hlbHBlcnMnO1xuY29uc3QgVE9QSUNTID0ge1xuICAgIGdhbWluZzogJ2dhbWluZytoYWxvK1BTNCtycGcraW9zZ2FtaW5nK2dhbWluZ3N1Z2dlc3Rpb25zK2NvbXB1dGVycysnICtcbiAgICAgICAgJ1Nob3VsZElidXl0aGlzZ2FtZStNZWNoYW5pY2FsS2V5Ym9hcmRzK01vbml0b3JzK2hhcmR3YXJlc3dhcCtPcFRpY0dhbWluZysnICtcbiAgICAgICAgJ0RvdEEyK3BjbWFzdGVycmFjZStHaXJsR2FtZXJzK2dhbWVjb2xsZWN0aW5nK0luZGllR2FtaW5nK0ZhbGxvdXQrR2FtZXMrJyArXG4gICAgICAgICduaW50ZW5kbytTdWdnZXN0QUxhcHRvcCtTdGVhbStDb21wZXRpdGl2ZW92ZXJ3YXRjaCt3b3crZnVubnknLFxuICAgIG11c2ljOiAnTXVzaWMrVmFwb3J3YXZlK0d1aXRhcitNdXNpY0VkK1dlQXJlVGhlTXVzaWNNYWtlcnMraW5kaWVoZWFkcytNZXRhbCsnICtcbiAgICAgICAgJ0xldHNUYWxrTXVzaWMrRGVlcEludG9Zb3VUdWJlK211c2ljdGhlb3J5K01ldGFsY29yZStDYXN1YWxDb252ZXJzYXRpb24rJyArXG4gICAgICAgICdMaXN0ZW5pbmdIZWFkcytBc2tSZWRkaXQrd29haGR1ZGUrY29tcG9zZXIrcG9wcHVua2VycythbmltZSsnICtcbiAgICAgICAgJ1RoaXNJc091ck11c2ljK3VucG9wdWxhcm9waW5pb24rQWR2aWNlQW5pbWFscytCQUJZTUVUQUwrZ2FtaW5nK0VETSt0ZWNobm9sb2d5XCInLFxuICAgIHNwb3J0czogJ3Nwb3J0cytzb2NjZXIrdG9kYXlpbGVhcm5lZCtzdGFyY3JhZnQrYmFzZWJhbGwrZXNwb3J0cytyZWRkZXZpbHMrQXNrUmVkZGl0KycgK1xuICAgICAgICAnbmZsK0NGQituYmEraG9ja2V5K2xlYWd1ZW9mbGVnZW5kcytBQnJhVGhhdEZpdHMrZnVubnkrZm9ybXVsYTErTU1BKycgK1xuICAgICAgICAnUGF0cmlvdHMrZ2FtaW5nK2NvcmRjdXR0ZXJzK2RvZ2Vjb2luK2dyYW50dXJpc21vK1Nob3dlcnRob3VnaHRzK3VucG9wdWxhcm9waW5pb24rTUxTJyxcbiAgICBiZWF1dHk6ICdiZWF1dHkrQXNpYW5CZWF1dHkrT2xkU2Nob29sQ29vbCtmdW5ueStNVUFvbnRoZUNoZWFwK21ha2V1cGV4Y2hhbmdlKycgK1xuICAgICAgICAnS29yZWFuQmVhdXR5K3BpY3MrUG9yc2NoZStSYW5kb21BY3Rzb2ZNYWtldXArTWFrZXVwQWRkaWN0aW9uK2Rpc25leSsnICtcbiAgICAgICAgJ0JlYXV0eUFkZGljdGlvbitCZWF1dHlCb3hlcytBc2tXb21lbitzdWNjdWxlbnRzK0JlYXV0eUd1cnVDaGF0dGVyKycgK1xuICAgICAgICAnYmVhdXR5dGFsa3BoK2hvdXNlcGxhbnRzK2F3dytTaGlueVBva2Vtb24rY2F0cytnYXJkZW5pbmcrRnJlZUthcm1hNFUrZ2FtaW5nJyxcbn07XG5sZXQgRXhwbG9yZVBhZ2UgPSBjbGFzcyBFeHBsb3JlUGFnZSBleHRlbmRzIExpdEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zaG93dGl0bGUgPSB0cnVlO1xuICAgICAgICB0aGlzLnNob3dzdWJyZWRkaXQgPSB0cnVlO1xuICAgICAgICB0aGlzLnNob3dzaGltID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5sYXJnZUthcm1hVGhyZXNob2xkID0gMjAwMDA7XG4gICAgICAgIHRoaXMubGFyZ2VDb21tZW50VGhyZXNob2xkID0gMTAwO1xuICAgICAgICB0aGlzLmxvYWRlclJlZ2lzdGVyZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wb3N0cyA9IFtdO1xuICAgIH1cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5tYWtlUXVlcnkoKTtcbiAgICB9XG4gICAgdXBkYXRlZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9ic2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHsgZW50cmllcyB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWVudHJpZXNbMF0uaXNJbnRlcnNlY3RpbmcpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgbG9hZCBtb3JlICR7dGhpcy5hZnRlcklkfWApO1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRlciAmJiAoKF9hID0gdGhpcy5vYnNlcnZlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVub2JzZXJ2ZSh0aGlzLl9sb2FkZXIpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGVuZGluZylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWtlUXVlcnkoKTtcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICByb290OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyksXG4gICAgICAgICAgICAgICAgcm9vdE1hcmdpbjogJzEwMHB4JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9sb2FkZXIgJiYgdGhpcy5hZnRlcklkKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9hZGVyICYmICgoX2EgPSB0aGlzLm9ic2VydmVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub2JzZXJ2ZSh0aGlzLl9sb2FkZXIpKTtcbiAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgc3R5bGVzKCkge1xuICAgICAgICByZXR1cm4gZXhwbG9yZVN0eWxlcygpO1xuICAgIH1cbiAgICBvblRpbGVDbGljayhzdWJyZWRkaXQpIHtcbiAgICAgICAgdGhpcy5zdWJyZWRkaXQgPSBzdWJyZWRkaXQ7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCd0b3BpYycsICcnKTtcbiAgICB9XG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZCwgY3VycmVudCkge1xuICAgICAgICBjb25zb2xlLmxvZyhhcmd1bWVudHMpO1xuICAgICAgICBpZiAobmFtZSA9PT0gJ3RvcGljJyAmJiBvbGQgIT09IGN1cnJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMudG9waWMgPSBjdXJyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMudG9waWMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc3RzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5hZnRlcklkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHRoaXMuc3VicmVkZGl0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHRoaXMubWFrZVF1ZXJ5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWUuaW5jbHVkZXMoJ3Nob3cnKSkge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgdGhpc1tuYW1lXSA9IGN1cnJlbnQgPT09ICd0cnVlJztcbiAgICAgICAgICAgIHRoaXMuc2hvd3NoaW0gPSB0aGlzLnNob3dzdWJyZWRkaXQgfHwgdGhpcy5zaG93dGl0bGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgbWFrZVF1ZXJ5KCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgaWYgKCF0aGlzLnRvcGljKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLmRhdGEgPSB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMudG9waWMpO1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSB0cnVlO1xuICAgICAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vd3d3LnJlZGRpdC5jb20vci8ke1RPUElDU1t0aGlzLnRvcGljXX0uanNvbj9hZnRlcj0keyhfYSA9IHRoaXMuYWZ0ZXJJZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJyd9YCwge1xuICAgICAgICAgICAgbW9kZTogJ2NvcnMnLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlc3AuanNvbigpO1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kYXRhID0gYm9keS5kYXRhO1xuICAgICAgICBjb25zdCBwb3N0cyA9IChfYyA9IChfYiA9IHRoaXMuZGF0YSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNoaWxkcmVuLm1hcCgoYykgPT4gYy5kYXRhKSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogW107XG4gICAgICAgIGNvbnNvbGUubG9nKHBvc3RzKTtcbiAgICAgICAgdGhpcy5wb3N0cyA9IHRoaXMucG9zdHMuY29uY2F0KHBvc3RzLmZpbHRlcigocG9zdCkgPT4gcG9zdC5wb3N0X2hpbnQgIT09ICdsaW5rJykpO1xuICAgICAgICB0aGlzLmFmdGVySWQgPSBib2R5LmRhdGEuYWZ0ZXI7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuc3VicmVkZGl0KSB7XG4gICAgICAgICAgICByZXR1cm4gaHRtbCBgPHN1YnJlZGRpdC12aWV3XG4gICAgICAgIHN1YnJlZGRpdD0ke3RoaXMuc3VicmVkZGl0fVxuICAgICAgPjwvc3VicmVkZGl0LXZpZXc+YDtcbiAgICAgICAgfVxuICAgICAgICAvL2lmICghdGhpcy5wb3N0cy5sZW5ndGgpIHJldHVybiBodG1sYDxkaXYgY2xhc3M9XCJncmlkXCI+PC9kaXY+YDtcbiAgICAgICAgcmV0dXJuIGh0bWwgYFxuICAgICAgPGRpdiBjbGFzcz1cImdyaWRcIj5cbiAgICAgICAgJHt0aGlzLl9yZW5kZXJUaWxlcygpfVxuICAgICAgICAke3RoaXMucG9zdHMubGVuZ3RoID09PSAwID8gJycgOiB0aGlzLl9yZW5kZXJTcGFjZXJzKCl9XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICAgIH1cbiAgICBfcmVuZGVyVGlsZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc3RzLm1hcCgocG9zdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW1nVXJsID0gZ2V0SW1hZ2VVcmwocG9zdCk7XG4gICAgICAgICAgICBjb25zdCBpc01lZGlhID0gISFpbWdVcmw7XG4gICAgICAgICAgICBpZiAoaXNNZWRpYSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyTWVkaWFUaWxlKHBvc3QpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlclRleHRUaWxlKHBvc3QpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3JlbmRlclNwYWNlcnMoKSB7XG4gICAgICAgIHJldHVybiBodG1sIGA8ZGl2IGNsYXNzPVwicG9zdC10aWxlIHBvc3QtdGV4dC1vbmx5IHNwYW4zXCI+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwicG9zdC10aWxlIHBvc3QtdGV4dC1vbmx5IHNwYW4yXCI+PC9kaXY+XG4gICAgICAke0FycmF5KDQpXG4gICAgICAgICAgICAuZmlsbCgxKVxuICAgICAgICAgICAgLm1hcCgoKSA9PiBodG1sIGA8ZGl2IGNsYXNzPVwicG9zdC10aWxlIHBvc3QtdGV4dC1vbmx5IHNwYW4xXCI+PC9kaXY+YCl9XG4gICAgICA8ZGl2IGNsYXNzPVwibG9hZGVyXCI+PC9kaXY+YDtcbiAgICB9XG4gICAgX3JlbmRlck1lZGlhVGlsZShwb3N0KSB7XG4gICAgICAgIC8vY29uc3QgaXNMYXJnZSA9IHBvc3QudGl0bGUubGVuZ3RoID4gOTA7XG4gICAgICAgIGNvbnN0IGlzTGFyZ2UgPSBwb3N0LnVwcyA+IHRoaXMubGFyZ2VLYXJtYVRocmVzaG9sZCB8fCBwb3N0Lm51bV9jb21tZW50cyAvIHBvc3QudXBzID4gMC4xO1xuICAgICAgICBjb25zdCBpbWdVcmwgPSBnZXRJbWFnZVVybChwb3N0KTtcbiAgICAgICAgY29uc3QgaW1nU3R5bGVzID0ge1xuICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBgdXJsKCcke2ltZ1VybH0nKWAsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJhdGlvID0gZ2V0QXNwZWN0UmF0aW8ocG9zdCk7XG4gICAgICAgIGNvbnN0IHJvd1NwYW4gPSBNYXRoLnJvdW5kKHJhdGlvICogR1JJRF9HUkFOVUxBUklUWSkgKiAoaXNMYXJnZSA/IDIgOiAxKTtcbiAgICAgICAgY29uc3Qgc3BhbkNsYXNzID0gYHNwYW4ke2NsYW1wKHJvd1NwYW4sIE1hdGgucm91bmQoR1JJRF9HUkFOVUxBUklUWSAvIDMpLCBHUklEX0dSQU5VTEFSSVRZICogMiAqIChpc0xhcmdlID8gMiA6IDEpKX1gO1xuICAgICAgICByZXR1cm4gaHRtbCBgPGRpdlxuICAgICAgQGNsaWNrPSR7KCkgPT4gdGhpcy5vblRpbGVDbGljayhwb3N0LnN1YnJlZGRpdCl9XG4gICAgICBjbGFzcz0ke2NsYXNzTWFwKHtcbiAgICAgICAgICAgICdwb3N0LXRpbGUnOiB0cnVlLFxuICAgICAgICAgICAgW3NwYW5DbGFzc106IHRydWUsXG4gICAgICAgICAgICAncG9zdC10aWxlLWxhcmdlJzogaXNMYXJnZSxcbiAgICAgICAgfSl9XG4gICAgPlxuICAgICAgJHtpbWdVcmxcbiAgICAgICAgICAgID8gdW5zYWZlSFRNTChgPGRpdiBjbGFzcz1cInBvc3QtdGlsZS1pbWFnZVwiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogJHtpbWdTdHlsZXMuYmFja2dyb3VuZEltYWdlfVwiIC8+YClcbiAgICAgICAgICAgIDogJyd9XG4gICAgICAke3RoaXMuX3JlbmRlclRleHQocG9zdCwgdHJ1ZSl9XG4gICAgPC9kaXY+YDtcbiAgICB9XG4gICAgX3JlbmRlclRleHRUaWxlKHBvc3QpIHtcbiAgICAgICAgY29uc3QgaXNMYXJnZSA9IHBvc3QudXBzID4gdGhpcy5sYXJnZUthcm1hVGhyZXNob2xkIHx8IHBvc3QudGl0bGUubGVuZ3RoID4gMTAwO1xuICAgICAgICByZXR1cm4gaHRtbCBgPGRpdlxuICAgICAgQGNsaWNrPSR7KCkgPT4gdGhpcy5vblRpbGVDbGljayhwb3N0LnN1YnJlZGRpdCl9XG4gICAgICBjbGFzcz0ke2NsYXNzTWFwKHtcbiAgICAgICAgICAgICdwb3N0LXRpbGUnOiB0cnVlLFxuICAgICAgICAgICAgc3BhbjY6IHRydWUsXG4gICAgICAgICAgICAncG9zdC10aWxlLWxhcmdlJzogaXNMYXJnZSxcbiAgICAgICAgICAgICdwb3N0LXRleHQtb25seSc6IHRydWUsXG4gICAgICAgIH0pfVxuICAgID5cbiAgICAgICR7dGhpcy5fcmVuZGVyVGV4dChwb3N0LCBmYWxzZSl9XG4gICAgPC9kaXY+YDtcbiAgICB9XG4gICAgX3JlbmRlclRleHQocG9zdCwgaXNJbWFnZSA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBodG1sIGA8dGlsZS10ZXh0IC5wb3N0PSR7cG9zdH0gaXNJbWFnZT0ke2lzSW1hZ2V9IC8+YDtcbiAgICB9XG4gICAgX3JlbmRlclRleHRPbGQocG9zdCwgaXNJbWFnZSA9IGZhbHNlKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBjb25zdCB0ZXh0ID0gKF9jID0gZmlyc3RNYXJrZG93bkVsZW0oKF9iID0gaHRtbERlY29kZSgoX2EgPSBwb3N0LnNlbGZ0ZXh0X2h0bWwpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogJycpKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAnJztcbiAgICAgICAgcmV0dXJuIGh0bWwgYDxkaXZcbiAgICAgIGNsYXNzPSR7Y2xhc3NNYXAoe1xuICAgICAgICAgICAgJ3Bvc3QtdGlsZS10ZXh0JzogdHJ1ZSxcbiAgICAgICAgICAgIHNoaW06IGlzSW1hZ2UgJiYgdGhpcy5zaG93c2hpbSxcbiAgICAgICAgfSl9XG4gICAgPlxuICAgICAgPGgzXG4gICAgICAgIGNsYXNzPSR7Y2xhc3NNYXAoe1xuICAgICAgICAgICAgJ3Bvc3QtdGlsZS10aXRsZSc6IHRydWUsXG4gICAgICAgICAgICBoaWRkZW46IGlzSW1hZ2UgJiYgIXRoaXMuc2hvd3RpdGxlLFxuICAgICAgICB9KX1cbiAgICAgID5cbiAgICAgICAgJHtwb3N0LnRpdGxlfVxuICAgICAgPC9oMz5cbiAgICAgICR7KHRleHQgPT09IG51bGwgfHwgdGV4dCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGV4dC5sZW5ndGgpID8gaHRtbCBgPGRpdlxuICAgICAgICAgICAgY2xhc3M9JHtjbGFzc01hcCh7XG4gICAgICAgICAgICAncG9zdC10aWxlLWJvZHknOiB0cnVlLFxuICAgICAgICAgICAgaGlkZGVuOiBpc0ltYWdlICYmICF0aGlzLnNob3d0aXRsZSxcbiAgICAgICAgfSl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgJHt1bnNhZmVIVE1MKHRleHQuc2xpY2UoMCwgMjAwKSl9XG4gICAgICAgICAgPC9kaXY+YFxuICAgICAgICAgICAgOiAnJ31cbiAgICAgIDxkaXYgY2xhc3M9XCJzcGFjZXJcIj48L2Rpdj5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3M9JHtjbGFzc01hcCh7XG4gICAgICAgICAgICBzdWJyZWRkaXQ6IHRydWUsXG4gICAgICAgICAgICBoaWRkZW46IGlzSW1hZ2UgJiYgIXRoaXMuc2hvd3N1YnJlZGRpdCxcbiAgICAgICAgfSl9XG4gICAgICA+XG4gICAgICAgIHIvJHtwb3N0LnN1YnJlZGRpdH1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PmA7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5KHsgYXR0cmlidXRlOiB0cnVlLCB0eXBlOiBTdHJpbmcgfSlcbl0sIEV4cGxvcmVQYWdlLnByb3RvdHlwZSwgXCJ0b3BpY1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkoeyBhdHRyaWJ1dGU6IHRydWUsIHR5cGU6IFN0cmluZyB9KVxuXSwgRXhwbG9yZVBhZ2UucHJvdG90eXBlLCBcInN1YnJlZGRpdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkoeyBhdHRyaWJ1dGU6IHRydWUsIHR5cGU6IE9iamVjdCB9KVxuXSwgRXhwbG9yZVBhZ2UucHJvdG90eXBlLCBcImRhdGFcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5KHsgYXR0cmlidXRlOiB0cnVlLCB0eXBlOiBCb29sZWFuIH0pXG5dLCBFeHBsb3JlUGFnZS5wcm90b3R5cGUsIFwic2hvd3RpdGxlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9KVxuXSwgRXhwbG9yZVBhZ2UucHJvdG90eXBlLCBcInNob3dzdWJyZWRkaXRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5KHsgYXR0cmlidXRlOiB0cnVlLCB0eXBlOiBCb29sZWFuIH0pXG5dLCBFeHBsb3JlUGFnZS5wcm90b3R5cGUsIFwic2hvd3NoaW1cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHF1ZXJ5KCcubG9hZGVyJylcbl0sIEV4cGxvcmVQYWdlLnByb3RvdHlwZSwgXCJfbG9hZGVyXCIsIHZvaWQgMCk7XG5FeHBsb3JlUGFnZSA9IF9fZGVjb3JhdGUoW1xuICAgIGN1c3RvbUVsZW1lbnQoJ2V4cGxvcmUtcGFnZScpXG5dLCBFeHBsb3JlUGFnZSk7XG5leHBvcnQgeyBFeHBsb3JlUGFnZSB9O1xuZnVuY3Rpb24gY2xhbXAodmFsLCBtaW4sIG1heCkge1xuICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh2YWwsIG1pbiksIG1heCk7XG59XG4iLCJpbXBvcnQgJy4vY29tcG9uZW50cy9leHBsb3JlLXBhZ2UnO1xuaW1wb3J0ICcuL2NvbXBvbmVudHMvc3VicmVkZGl0LXZpZXcnO1xuYXN5bmMgZnVuY3Rpb24gbWFpbigpIHtcbiAgICBjb25zdCBleHBsb3JlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZXhwbG9yZS1wYWdlJyk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uLnBpbGwnKS5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9waWMgPSBidXR0b24uaW5uZXJIVE1MLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh7IHRvcGljIH0pO1xuICAgICAgICAgICAgZXhwbG9yZS5zZXRBdHRyaWJ1dGUoJ3RvcGljJywgdG9waWMpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dC5jaGVja2JveCcpLmZvckVhY2goKGVsZW0pID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBlbGVtO1xuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmbGFnID0gaW5wdXQuaWQgfHwgJ3Nob3dTdWJyZWRkaXQnO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZmxhZyk7XG4gICAgICAgICAgICBleHBsb3JlLnNldEF0dHJpYnV0ZShmbGFnLCBpbnB1dC5jaGVja2VkICsgJycpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbm1haW4oKTtcbiJdLCJuYW1lcyI6WyJpc0NFUG9seWZpbGwiLCJ3aW5kb3ciLCJjdXN0b21FbGVtZW50cyIsInVuZGVmaW5lZCIsInBvbHlmaWxsV3JhcEZsdXNoQ2FsbGJhY2siLCJyZW1vdmVOb2RlcyIsImNvbnRhaW5lciIsInN0YXJ0IiwiZW5kIiwibiIsIm5leHRTaWJsaW5nIiwicmVtb3ZlQ2hpbGQiLCJtYXJrZXIiLCJTdHJpbmciLCJNYXRoIiwicmFuZG9tIiwic2xpY2UiLCJub2RlTWFya2VyIiwibWFya2VyUmVnZXgiLCJSZWdFeHAiLCJUZW1wbGF0ZSIsIltvYmplY3QgT2JqZWN0XSIsInJlc3VsdCIsImVsZW1lbnQiLCJ0aGlzIiwicGFydHMiLCJub2Rlc1RvUmVtb3ZlIiwic3RhY2siLCJ3YWxrZXIiLCJkb2N1bWVudCIsImNyZWF0ZVRyZWVXYWxrZXIiLCJjb250ZW50IiwibGFzdFBhcnRJbmRleCIsImluZGV4IiwicGFydEluZGV4Iiwic3RyaW5ncyIsInZhbHVlcyIsImxlbmd0aCIsIm5vZGUiLCJuZXh0Tm9kZSIsIm5vZGVUeXBlIiwiaGFzQXR0cmlidXRlcyIsImF0dHJpYnV0ZXMiLCJjb3VudCIsImkiLCJlbmRzV2l0aCIsIm5hbWUiLCJzdHJpbmdGb3JQYXJ0IiwibGFzdEF0dHJpYnV0ZU5hbWVSZWdleCIsImV4ZWMiLCJhdHRyaWJ1dGVMb29rdXBOYW1lIiwidG9Mb3dlckNhc2UiLCJhdHRyaWJ1dGVWYWx1ZSIsImdldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInN0YXRpY3MiLCJzcGxpdCIsInB1c2giLCJ0eXBlIiwidGFnTmFtZSIsImN1cnJlbnROb2RlIiwiZGF0YSIsImluZGV4T2YiLCJwYXJlbnQiLCJwYXJlbnROb2RlIiwibGFzdEluZGV4IiwiaW5zZXJ0IiwicyIsImNyZWF0ZU1hcmtlciIsIm1hdGNoIiwiY3JlYXRlVGV4dE5vZGUiLCJpbnNlcnRCZWZvcmUiLCJwcmV2aW91c1NpYmxpbmciLCJwb3AiLCJzdHIiLCJzdWZmaXgiLCJpc1RlbXBsYXRlUGFydEFjdGl2ZSIsInBhcnQiLCJjcmVhdGVDb21tZW50IiwicmVtb3ZlTm9kZXNGcm9tVGVtcGxhdGUiLCJ0ZW1wbGF0ZSIsIm5leHRBY3RpdmVJbmRleEluVGVtcGxhdGVQYXJ0cyIsIm5vZGVJbmRleCIsInJlbW92ZUNvdW50Iiwibm9kZXNUb1JlbW92ZUluVGVtcGxhdGUiLCJjdXJyZW50UmVtb3ZpbmdOb2RlIiwiaGFzIiwiZm9yRWFjaCIsImNvdW50Tm9kZXMiLCJzdGFydEluZGV4IiwiZGlyZWN0aXZlcyIsIldlYWtNYXAiLCJkaXJlY3RpdmUiLCJmIiwiYXJncyIsImQiLCJzZXQiLCJpc0RpcmVjdGl2ZSIsIm8iLCJub0NoYW5nZSIsIm5vdGhpbmciLCJUZW1wbGF0ZUluc3RhbmNlIiwicHJvY2Vzc29yIiwib3B0aW9ucyIsIl9fcGFydHMiLCJzZXRWYWx1ZSIsImNvbW1pdCIsImZyYWdtZW50IiwiY2xvbmVOb2RlIiwiaW1wb3J0Tm9kZSIsIm5vZGVOYW1lIiwiaGFuZGxlVGV4dEV4cHJlc3Npb24iLCJpbnNlcnRBZnRlck5vZGUiLCJoYW5kbGVBdHRyaWJ1dGVFeHByZXNzaW9ucyIsImFkb3B0Tm9kZSIsInVwZ3JhZGUiLCJjb21tZW50TWFya2VyIiwiVGVtcGxhdGVSZXN1bHQiLCJsIiwiaHRtbCIsImlzQ29tbWVudEJpbmRpbmciLCJjb21tZW50T3BlbiIsImxhc3RJbmRleE9mIiwiYXR0cmlidXRlTWF0Y2giLCJzdWJzdHIiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiZ2V0SFRNTCIsImlzUHJpbWl0aXZlIiwidmFsdWUiLCJpc0l0ZXJhYmxlIiwiQXJyYXkiLCJpc0FycmF5IiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJBdHRyaWJ1dGVDb21taXR0ZXIiLCJkaXJ0eSIsIl9jcmVhdGVQYXJ0IiwiQXR0cmlidXRlUGFydCIsInRleHQiLCJ2IiwidCIsInNldEF0dHJpYnV0ZSIsIl9nZXRWYWx1ZSIsImNvbW1pdHRlciIsIk5vZGVQYXJ0IiwiX19wZW5kaW5nVmFsdWUiLCJzdGFydE5vZGUiLCJhcHBlbmRDaGlsZCIsImVuZE5vZGUiLCJyZWYiLCJfX2luc2VydCIsIl9fY29tbWl0VGV4dCIsIl9fY29tbWl0VGVtcGxhdGVSZXN1bHQiLCJOb2RlIiwiX19jb21taXROb2RlIiwiX19jb21taXRJdGVyYWJsZSIsImNsZWFyIiwidmFsdWVBc1N0cmluZyIsInRlbXBsYXRlRmFjdG9yeSIsInVwZGF0ZSIsImluc3RhbmNlIiwiX2Nsb25lIiwiaXRlbVBhcnRzIiwiaXRlbVBhcnQiLCJpdGVtIiwiYXBwZW5kSW50b1BhcnQiLCJpbnNlcnRBZnRlclBhcnQiLCJCb29sZWFuQXR0cmlidXRlUGFydCIsIkVycm9yIiwiUHJvcGVydHlDb21taXR0ZXIiLCJzdXBlciIsInNpbmdsZSIsIlByb3BlcnR5UGFydCIsImV2ZW50T3B0aW9uc1N1cHBvcnRlZCIsImNhcHR1cmUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9lIiwiRXZlbnRQYXJ0IiwiZXZlbnROYW1lIiwiZXZlbnRDb250ZXh0IiwiX19ib3VuZEhhbmRsZUV2ZW50IiwiZSIsImhhbmRsZUV2ZW50IiwibmV3TGlzdGVuZXIiLCJvbGRMaXN0ZW5lciIsInNob3VsZFJlbW92ZUxpc3RlbmVyIiwib25jZSIsInBhc3NpdmUiLCJzaG91bGRBZGRMaXN0ZW5lciIsIl9fb3B0aW9ucyIsImdldE9wdGlvbnMiLCJldmVudCIsImNhbGwiLCJ0ZW1wbGF0ZUNhY2hlIiwidGVtcGxhdGVDYWNoZXMiLCJnZXQiLCJzdHJpbmdzQXJyYXkiLCJrZXlTdHJpbmciLCJNYXAiLCJrZXkiLCJqb2luIiwiZ2V0VGVtcGxhdGVFbGVtZW50IiwiZGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yIiwicHJlZml4IiwiZ2V0VGVtcGxhdGVDYWNoZUtleSIsInNjb3BlTmFtZSIsImNvbXBhdGlibGVTaGFkeUNTU1ZlcnNpb24iLCJTaGFkeUNTUyIsInByZXBhcmVUZW1wbGF0ZURvbSIsImNvbnNvbGUiLCJ3YXJuIiwic2hhZHlUZW1wbGF0ZUZhY3RvcnkiLCJjYWNoZUtleSIsIlRFTVBMQVRFX1RZUEVTIiwic2hhZHlSZW5kZXJTZXQiLCJTZXQiLCJwcmVwYXJlVGVtcGxhdGVTdHlsZXMiLCJyZW5kZXJlZERPTSIsImFkZCIsInRlbXBsYXRlRWxlbWVudCIsInN0eWxlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb25kZW5zZWRTdHlsZSIsInN0eWxlIiwidGV4dENvbnRlbnQiLCJ0ZW1wbGF0ZXMiLCJmcm9tIiwicmVtb3ZlU3R5bGVzRnJvbUxpdFRlbXBsYXRlcyIsInJlZk5vZGUiLCJpbnNlcnRDb3VudCIsIndhbGtlckluZGV4IiwiaW5zZXJ0Tm9kZUludG9UZW1wbGF0ZSIsImZpcnN0Q2hpbGQiLCJxdWVyeVNlbGVjdG9yIiwibmF0aXZlU2hhZG93IiwicmVtb3ZlcyIsIkpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkiLCJwcm9wIiwiX29iaiIsImRlZmF1bHRDb252ZXJ0ZXIiLCJCb29sZWFuIiwiT2JqZWN0IiwiSlNPTiIsInN0cmluZ2lmeSIsIk51bWJlciIsInBhcnNlIiwibm90RXF1YWwiLCJvbGQiLCJkZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvbiIsImF0dHJpYnV0ZSIsImNvbnZlcnRlciIsInJlZmxlY3QiLCJoYXNDaGFuZ2VkIiwiVXBkYXRpbmdFbGVtZW50IiwiSFRNTEVsZW1lbnQiLCJfdXBkYXRlU3RhdGUiLCJfaW5zdGFuY2VQcm9wZXJ0aWVzIiwiX3VwZGF0ZVByb21pc2UiLCJQcm9taXNlIiwicmVzIiwiX2VuYWJsZVVwZGF0aW5nUmVzb2x2ZXIiLCJfY2hhbmdlZFByb3BlcnRpZXMiLCJfcmVmbGVjdGluZ1Byb3BlcnRpZXMiLCJpbml0aWFsaXplIiwib2JzZXJ2ZWRBdHRyaWJ1dGVzIiwiZmluYWxpemUiLCJfY2xhc3NQcm9wZXJ0aWVzIiwicCIsImF0dHIiLCJfYXR0cmlidXRlTmFtZUZvclByb3BlcnR5IiwiX2F0dHJpYnV0ZVRvUHJvcGVydHlNYXAiLCJoYXNPd25Qcm9wZXJ0eSIsInN1cGVyUHJvcGVydGllcyIsImdldFByb3RvdHlwZU9mIiwiayIsIl9lbnN1cmVDbGFzc1Byb3BlcnRpZXMiLCJub0FjY2Vzc29yIiwicHJvdG90eXBlIiwiZGVzY3JpcHRvciIsImdldFByb3BlcnR5RGVzY3JpcHRvciIsImRlZmluZVByb3BlcnR5IiwiX29wdGlvbnMiLCJvbGRWYWx1ZSIsIl9yZXF1ZXN0VXBkYXRlIiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsInN1cGVyQ3RvciIsInByb3BzIiwicHJvcGVydGllcyIsInByb3BLZXlzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImdldE93blByb3BlcnR5U3ltYm9scyIsImNyZWF0ZVByb3BlcnR5IiwiZnJvbUF0dHJpYnV0ZSIsInRvQXR0cmlidXRlIiwiX3NhdmVJbnN0YW5jZVByb3BlcnRpZXMiLCJjb25zdHJ1Y3RvciIsIl92IiwiZW5hYmxlVXBkYXRpbmciLCJfYXR0cmlidXRlVG9Qcm9wZXJ0eSIsImN0b3IiLCJhdHRyVmFsdWUiLCJfcHJvcGVydHlWYWx1ZVRvQXR0cmlidXRlIiwicHJvcE5hbWUiLCJnZXRQcm9wZXJ0eU9wdGlvbnMiLCJfcHJvcGVydHlWYWx1ZUZyb21BdHRyaWJ1dGUiLCJzaG91bGRSZXF1ZXN0VXBkYXRlIiwiX3ZhbHVlSGFzQ2hhbmdlZCIsIl9oYXNSZXF1ZXN0ZWRVcGRhdGUiLCJfZW5xdWV1ZVVwZGF0ZSIsInVwZGF0ZUNvbXBsZXRlIiwicGVyZm9ybVVwZGF0ZSIsImhhc1VwZGF0ZWQiLCJfYXBwbHlJbnN0YW5jZVByb3BlcnRpZXMiLCJzaG91bGRVcGRhdGUiLCJjaGFuZ2VkUHJvcGVydGllcyIsIl9tYXJrVXBkYXRlZCIsImZpcnN0VXBkYXRlZCIsInVwZGF0ZWQiLCJfZ2V0VXBkYXRlQ29tcGxldGUiLCJzaXplIiwiX3Byb3BlcnR5VG9BdHRyaWJ1dGUiLCJjdXN0b21FbGVtZW50IiwiY2xhc3NPckRlc2NyaXB0b3IiLCJjbGF6eiIsImRlZmluZSIsImxlZ2FjeUN1c3RvbUVsZW1lbnQiLCJraW5kIiwiZWxlbWVudHMiLCJzdGFuZGFyZEN1c3RvbUVsZW1lbnQiLCJzdGFuZGFyZFByb3BlcnR5IiwiYXNzaWduIiwicGxhY2VtZW50IiwiaW5pdGlhbGl6ZXIiLCJwcm9wZXJ0eSIsInByb3RvT3JEZXNjcmlwdG9yIiwicHJvdG8iLCJsZWdhY3lQcm9wZXJ0eSIsInF1ZXJ5Iiwic2VsZWN0b3IiLCJyZW5kZXJSb290IiwibGVnYWN5UXVlcnkiLCJzdGFuZGFyZFF1ZXJ5Iiwic3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzIiwiRG9jdW1lbnQiLCJDU1NTdHlsZVNoZWV0IiwiY29uc3RydWN0aW9uVG9rZW4iLCJDU1NSZXN1bHQiLCJjc3NUZXh0Iiwic2FmZVRva2VuIiwic3R5bGVTaGVldCIsIl9zdHlsZVNoZWV0IiwicmVwbGFjZVN5bmMiLCJjc3MiLCJyZWR1Y2UiLCJhY2MiLCJpZHgiLCJ0ZXh0RnJvbUNTU1Jlc3VsdCIsInJlbmRlck5vdEltcGxlbWVudGVkIiwiTGl0RWxlbWVudCIsInVzZXJTdHlsZXMiLCJnZXRTdHlsZXMiLCJfc3R5bGVzIiwiYWRkU3R5bGVzIiwicmVkdWNlUmlnaHQiLCJ1bnNoaWZ0IiwiX2dldFVuaXF1ZVN0eWxlcyIsImNyZWF0ZVJlbmRlclJvb3QiLCJTaGFkb3dSb290IiwiYWRvcHRTdHlsZXMiLCJhdHRhY2hTaGFkb3ciLCJtb2RlIiwiYWRvcHRlZFN0eWxlU2hlZXRzIiwibWFwIiwiX25lZWRzU2hpbUFkb3B0ZWRTdHlsZVNoZWV0cyIsIlNjb3BpbmdTaGltIiwicHJlcGFyZUFkb3B0ZWRDc3NUZXh0IiwibG9jYWxOYW1lIiwiY29ubmVjdGVkQ2FsbGJhY2siLCJzdHlsZUVsZW1lbnQiLCJ0ZW1wbGF0ZVJlc3VsdCIsInJlbmRlciIsImhhc1JlbmRlcmVkIiwibmVlZHNTY29waW5nIiwiaG9zdCIsImZpcnN0U2NvcGVSZW5kZXIiLCJyZW5kZXJDb250YWluZXIiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiYXBwZW5kSW50byIsImxpdFJlbmRlciIsImRlbGV0ZSIsInByZXZpb3VzVmFsdWVzIiwidW5zYWZlSFRNTCIsInByZXZpb3VzVmFsdWUiLCJDbGFzc0xpc3QiLCJjbGFzc2VzIiwiY2hhbmdlZCIsImNsYXNzTGlzdCIsImNscyIsImNsYXNzU3RyaW5nIiwicHJldmlvdXNDbGFzc2VzQ2FjaGUiLCJjbGFzc01hcCIsImNsYXNzSW5mbyIsInByZXZpb3VzQ2xhc3NlcyIsInJlbW92ZSIsImdldEltYWdlVXJsIiwicG9zdCIsIl9hIiwiX2IiLCJwb3N0X2hpbnQiLCJ1cmwiLCJnZXRQcmV2aWV3IiwiX2MiLCJpc0ltYWdlIiwiZ2FsbGVyeV9kYXRhIiwiaXNHYWxsZXJ5IiwiZmlyc3RJbWFnZSIsIml0ZW1zIiwibWV0YWRhdGEiLCJtZWRpYV9tZXRhZGF0YSIsIm1lZGlhX2lkIiwidGh1bWIiLCJmaW5kIiwiaW5mbyIsIngiLCJ1Iiwid2lkdGgiLCJoZWlnaHQiLCJ5IiwiZ2V0R2FsbGVyeUltYWdlIiwicHJldmlldyIsImltYWdlcyIsInNvdXJjZSIsInJlc29sdXRpb25zIiwiaHRtbERlY29kZSIsImlucHV0IiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwiZG9jdW1lbnRFbGVtZW50IiwiZmlyc3RNYXJrZG93bkVsZW0iLCJkaXYiLCJmaXJzdEVsZW1lbnRDaGlsZCIsIm91dGVySFRNTCIsIl9fZGVjb3JhdGUiLCJkZWNvcmF0b3JzIiwidGFyZ2V0IiwiZGVzYyIsImMiLCJhcmd1bWVudHMiLCJyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiU3VicmVkZGl0VmlldyIsInN1YnJlZGRpdCIsIm1ha2VRdWVyeSIsInByZXYiLCJjdXJyIiwiZmV0Y2hBYm91dCIsInJlc3AiLCJmZXRjaCIsImJvZHkiLCJqc29uIiwibG9nIiwiY2hpbGRyZW4iLCJ0aXRsZSIsImFib3V0IiwiaWNvblVybCIsImljb25faW1nIiwiZmlsdGVyIiwic3RpY2tpZWQiLCJpbWdVcmwiLCJpZCIsInNyLWljb24iLCJuby1pY29uIiwiYXV0aG9yIiwic2VsZnRleHRfaHRtbCIsIkNsYW1wUmVzcG9uc2UiLCJvcmlnaW5hbCIsImNsYW1wZWQiLCJjbGFtcCIsIndpbiIsInRydW5jYXRpb25DaGFyIiwic3BsaXRPbkNoYXJzIiwiY2h1bmtzIiwibGFzdENodW5rIiwidHJ1bmNhdGlvbkhUTUxDb250YWluZXIiLCJjbGFtcGVkVGV4dCIsIm9wdCIsInRydW5jYXRpb25IVE1MIiwic3BsaXRDaGFyIiwib3JpZ2luYWxUZXh0IiwiY2xhbXBWYWx1ZSIsImlzQ1NTVmFsdWUiLCJjb21wdXRlU3R5bGUiLCJlbGVtIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJnZXRNYXhMaW5lcyIsImF2YWlsSGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwibGluZUhlaWdodCIsImdldExpbmVIZWlnaHQiLCJtYXgiLCJmbG9vciIsImxoIiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJnZXRFbGVtSGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwiZ2V0TGFzdENoaWxkIiwibGFzdENoaWxkIiwibm9kZVZhbHVlIiwiYXBwbHlFbGxpcHNpcyIsInRvU3RyaW5nIiwicGFyc2VJbnQiLCJjbG1wIiwidHJ1bmNhdGUiLCJtYXhIZWlnaHQiLCJ0cmltIiwicmVwbGFjZSIsInNoaWZ0IiwibnVtIiwiYXJyIiwicmFuZ2UiLCJHUklEX0dSQU5VTEFSSVRZIiwiVGlsZVRleHQiLCJzaG93c2hpbSIsInNob3d0aXRsZSIsInNob3dzdWJyZWRkaXQiLCJleHBsb3JlU3R5bGVzIiwidGl0bGVFbGVtIiwiYm9keUVsZW0iLCJfcmVuZGVyVGV4dCIsInBvc3QtdGlsZS10ZXh0Iiwic2hpbSIsInBvc3QtdGlsZS10aXRsZSIsImhpZGRlbiIsInBvc3QtdGlsZS1ib2R5IiwiVE9QSUNTIiwiZ2FtaW5nIiwibXVzaWMiLCJzcG9ydHMiLCJiZWF1dHkiLCJFeHBsb3JlUGFnZSIsInBlbmRpbmciLCJsYXJnZUthcm1hVGhyZXNob2xkIiwibGFyZ2VDb21tZW50VGhyZXNob2xkIiwibG9hZGVyUmVnaXN0ZXJlZCIsInBvc3RzIiwib2JzZXJ2ZXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImVudHJpZXMiLCJpc0ludGVyc2VjdGluZyIsImFmdGVySWQiLCJfbG9hZGVyIiwidW5vYnNlcnZlIiwicm9vdCIsInJvb3RNYXJnaW4iLCJzZXRUaW1lb3V0Iiwib2JzZXJ2ZSIsImN1cnJlbnQiLCJ0b3BpYyIsImluY2x1ZGVzIiwiY29uY2F0IiwiYWZ0ZXIiLCJfcmVuZGVyVGlsZXMiLCJfcmVuZGVyU3BhY2VycyIsIl9yZW5kZXJNZWRpYVRpbGUiLCJfcmVuZGVyVGV4dFRpbGUiLCJmaWxsIiwiaXNMYXJnZSIsInVwcyIsIm51bV9jb21tZW50cyIsImltZ1N0eWxlcyIsInJhdGlvIiwiaW1hZ2UiLCJnZXRBc3BlY3RSYXRpbyIsInJvd1NwYW4iLCJyb3VuZCIsInNwYW5DbGFzcyIsInZhbCIsIm1pbiIsIm9uVGlsZUNsaWNrIiwicG9zdC10aWxlIiwicG9zdC10aWxlLWxhcmdlIiwic3BhbjYiLCJwb3N0LXRleHQtb25seSIsImFzeW5jIiwiZXhwbG9yZSIsImJ1dHRvbiIsImZsYWciLCJjaGVja2VkIiwibWFpbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQWdCTyxNQUFNQSxFQUFpQyxvQkFBWEMsUUFDTixNQUF6QkEsT0FBT0MscUJBRUhDLElBREpGLE9BQU9DLGVBQWVFLDBCQWtCYkMsRUFBYyxDQUFDQyxFQUFXQyxFQUFPQyxFQUFNLFFBQ2hELEtBQU9ELElBQVVDLEdBQUssQ0FDbEIsTUFBTUMsRUFBSUYsRUFBTUcsWUFDaEJKLEVBQVVLLFlBQVlKLEdBQ3RCQSxFQUFRRSxJQ3ZCSEcsRUFBUyxTQUFTQyxPQUFPQyxLQUFLQyxVQUFVQyxNQUFNLE9BSzlDQyxFQUFhLFVBQU9MLFVBQ3BCTSxFQUFjLElBQUlDLE9BQU8sR0FBR1AsS0FBVUssS0FRbkQsTUFBYUcsRUFDVEMsWUFBWUMsRUFBUUMsR0FDaEJDLEtBQUtDLE1BQVEsR0FDYkQsS0FBS0QsUUFBVUEsRUFDZixNQUFNRyxFQUFnQixHQUNoQkMsRUFBUSxHQUVSQyxFQUFTQyxTQUFTQyxpQkFBaUJQLEVBQVFRLFFBQVMsSUFBa0QsTUFBTSxHQUlsSCxJQUFJQyxFQUFnQixFQUNoQkMsR0FBUyxFQUNUQyxFQUFZLEVBQ2hCLE1BQU1DLFFBQUVBLEVBQVNDLFFBQVFDLE9BQUVBLElBQWFmLEVBQ3hDLEtBQU9ZLEVBQVlHLEdBQVEsQ0FDdkIsTUFBTUMsRUFBT1YsRUFBT1csV0FDcEIsR0FBYSxP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
