/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const t="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,i=(t,i,e=null)=>{for(;i!==e;){const e=i.nextSibling;t.removeChild(i),i=e}},e=`{{lit-${String(Math.random()).slice(2)}}}`,s=`\x3c!--${e}--\x3e`,n=new RegExp(`${e}|${s}`);class o{constructor(t,i){this.parts=[],this.element=i;const s=[],o=[],a=document.createTreeWalker(i.content,133,null,!1);let c=0,d=-1,u=0;const{strings:p,values:{length:f}}=t;for(;u<f;){const t=a.nextNode();if(null!==t){if(d++,1===t.nodeType){if(t.hasAttributes()){const i=t.attributes,{length:e}=i;let s=0;for(let t=0;t<e;t++)r(i[t].name,"$lit$")&&s++;for(;s-- >0;){const i=p[u],e=l.exec(i)[2],s=e.toLowerCase()+"$lit$",o=t.getAttribute(s);t.removeAttribute(s);const r=o.split(n);this.parts.push({type:"attribute",index:d,name:e,strings:r}),u+=r.length-1}}"TEMPLATE"===t.tagName&&(o.push(t),a.currentNode=t.content)}else if(3===t.nodeType){const i=t.data;if(i.indexOf(e)>=0){const e=t.parentNode,o=i.split(n),a=o.length-1;for(let i=0;i<a;i++){let s,n=o[i];if(""===n)s=h();else{const t=l.exec(n);null!==t&&r(t[2],"$lit$")&&(n=n.slice(0,t.index)+t[1]+t[2].slice(0,-"$lit$".length)+t[3]),s=document.createTextNode(n)}e.insertBefore(s,t),this.parts.push({type:"node",index:++d})}""===o[a]?(e.insertBefore(h(),t),s.push(t)):t.data=o[a],u+=a}}else if(8===t.nodeType)if(t.data===e){const i=t.parentNode;null!==t.previousSibling&&d!==c||(d++,i.insertBefore(h(),t)),c=d,this.parts.push({type:"node",index:d}),null===t.nextSibling?t.data="":(s.push(t),d--),u++}else{let i=-1;for(;-1!==(i=t.data.indexOf(e,i+1));)this.parts.push({type:"node",index:-1}),u++}}else a.currentNode=o.pop()}for(const t of s)t.parentNode.removeChild(t)}}const r=(t,i)=>{const e=t.length-i.length;return e>=0&&t.slice(e)===i},a=t=>-1!==t.index,h=()=>document.createComment(""),l=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function c(t,i){const{element:{content:e},parts:s}=t,n=document.createTreeWalker(e,133,null,!1);let o=u(s),r=s[o],a=-1,h=0;const l=[];let c=null;for(;n.nextNode();){a++;const t=n.currentNode;for(t.previousSibling===c&&(c=null),i.has(t)&&(l.push(t),null===c&&(c=t)),null!==c&&h++;void 0!==r&&r.index===a;)r.index=null!==c?-1:r.index-h,o=u(s,o),r=s[o]}l.forEach(t=>t.parentNode.removeChild(t))}const d=t=>{let i=11===t.nodeType?0:1;const e=document.createTreeWalker(t,133,null,!1);for(;e.nextNode();)i++;return i},u=(t,i=-1)=>{for(let e=i+1;e<t.length;e++){const i=t[e];if(a(i))return e}return-1};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const p=new WeakMap,f=t=>(...i)=>{const e=t(...i);return p.set(e,!0),e},g=t=>"function"==typeof t&&p.has(t),m={},v={};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class w{constructor(t,i,e){this.t=[],this.template=t,this.processor=i,this.options=e}update(t){let i=0;for(const e of this.t)void 0!==e&&e.setValue(t[i]),i++;for(const t of this.t)void 0!==t&&t.commit()}_clone(){const i=t?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],s=this.template.parts,n=document.createTreeWalker(i,133,null,!1);let o,r=0,h=0,l=n.nextNode();for(;r<s.length;)if(o=s[r],a(o)){for(;h<o.index;)h++,"TEMPLATE"===l.nodeName&&(e.push(l),n.currentNode=l.content),null===(l=n.nextNode())&&(n.currentNode=e.pop(),l=n.nextNode());if("node"===o.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(l.previousSibling),this.t.push(t)}else this.t.push(...this.processor.handleAttributeExpressions(l,o.name,o.strings,this.options));r++}else this.t.push(void 0),r++;return t&&(document.adoptNode(i),customElements.upgrade(i)),i}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const b=` ${e} `;class x{constructor(t,i,e,s){this.strings=t,this.values=i,this.type=e,this.processor=s}getHTML(){const t=this.strings.length-1;let i="",n=!1;for(let o=0;o<t;o++){const t=this.strings[o],r=t.lastIndexOf("\x3c!--");n=(r>-1||n)&&-1===t.indexOf("--\x3e",r+1);const a=l.exec(t);i+=null===a?t+(n?b:s):t.substr(0,a.index)+a[1]+a[2]+"$lit$"+a[3]+e}return i+=this.strings[t],i}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const y=t=>null===t||!("object"==typeof t||"function"==typeof t),$=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);class k{constructor(t,i,e){this.dirty=!0,this.element=t,this.name=i,this.strings=e,this.parts=[];for(let t=0;t<e.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new S(this)}_getValue(){const t=this.strings,i=t.length-1;let e="";for(let s=0;s<i;s++){e+=t[s];const i=this.parts[s];if(void 0!==i){const t=i.value;if(y(t)||!$(t))e+="string"==typeof t?t:String(t);else for(const i of t)e+="string"==typeof i?i:String(i)}}return e+=t[i],e}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class S{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===m||y(t)&&t===this.value||(this.value=t,g(t)||(this.committer.dirty=!0))}commit(){for(;g(this.value);){const t=this.value;this.value=m,t(this)}this.value!==m&&this.committer.commit()}}class M{constructor(t){this.value=void 0,this.i=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(h()),this.endNode=t.appendChild(h())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.o(this.startNode=h()),t.o(this.endNode=h())}insertAfterPart(t){t.o(this.startNode=h()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.i=t}commit(){if(null===this.startNode.parentNode)return;for(;g(this.i);){const t=this.i;this.i=m,t(this)}const t=this.i;t!==m&&(y(t)?t!==this.value&&this.h(t):t instanceof x?this.l(t):t instanceof Node?this.g(t):$(t)?this.m(t):t===v?(this.value=v,this.clear()):this.h(t))}o(t){this.endNode.parentNode.insertBefore(t,this.endNode)}g(t){this.value!==t&&(this.clear(),this.o(t),this.value=t)}h(t){const i=this.startNode.nextSibling,e="string"==typeof(t=null==t?"":t)?t:String(t);i===this.endNode.previousSibling&&3===i.nodeType?i.data=e:this.g(document.createTextNode(e)),this.value=t}l(t){const i=this.options.templateFactory(t);if(this.value instanceof w&&this.value.template===i)this.value.update(t.values);else{const e=new w(i,t.processor,this.options),s=e._clone();e.update(t.values),this.g(s),this.value=e}}m(t){Array.isArray(this.value)||(this.value=[],this.clear());const i=this.value;let e,s=0;for(const n of t)e=i[s],void 0===e&&(e=new M(this.options),i.push(e),0===s?e.appendIntoPart(this):e.insertAfterPart(i[s-1])),e.setValue(n),e.commit(),s++;s<i.length&&(i.length=s,this.clear(e&&e.endNode))}clear(t=this.startNode){i(this.startNode.parentNode,t.nextSibling,this.endNode)}}class _{constructor(t,i,e){if(this.value=void 0,this.i=void 0,2!==e.length||""!==e[0]||""!==e[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=i,this.strings=e}setValue(t){this.i=t}commit(){for(;g(this.i);){const t=this.i;this.i=m,t(this)}if(this.i===m)return;const t=!!this.i;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.i=m}}class A extends k{constructor(t,i,e){super(t,i,e),this.single=2===e.length&&""===e[0]&&""===e[1]}_createPart(){return new O(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class O extends S{}let C=!1;(()=>{try{const t={get capture(){return C=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class j{constructor(t,i,e){this.value=void 0,this.i=void 0,this.element=t,this.eventName=i,this.eventContext=e,this.v=t=>this.handleEvent(t)}setValue(t){this.i=t}commit(){for(;g(this.i);){const t=this.i;this.i=m,t(this)}if(this.i===m)return;const t=this.i,i=this.value,e=null==t||null!=i&&(t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive),s=null!=t&&(null==i||e);e&&this.element.removeEventListener(this.eventName,this.v,this.$),s&&(this.$=T(t),this.element.addEventListener(this.eventName,this.v,this.$)),this.value=t,this.i=m}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const T=t=>t&&(C?{capture:t.capture,passive:t.passive,once:t.once}:t.capture)
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */;function P(t){let i=E.get(t.type);void 0===i&&(i={stringsArray:new WeakMap,keyString:new Map},E.set(t.type,i));let s=i.stringsArray.get(t.strings);if(void 0!==s)return s;const n=t.strings.join(e);return s=i.keyString.get(n),void 0===s&&(s=new o(t,t.getTemplateElement()),i.keyString.set(n,s)),i.stringsArray.set(t.strings,s),s}const E=new Map,z=new WeakMap;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const I=new
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class{handleAttributeExpressions(t,i,e,s){const n=i[0];if("."===n){return new A(t,i.slice(1),e).parts}return"@"===n?[new j(t,i.slice(1),s.eventContext)]:"?"===n?[new _(t,i.slice(1),e)]:new k(t,i,e).parts}handleTextExpression(t){return new M(t)}};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");const B=(t,...i)=>new x(t,i,"html",I)
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */,U=(t,i)=>`${t}--${i}`;let F=!0;void 0===window.ShadyCSS?F=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),F=!1);const L=t=>i=>{const s=U(i.type,t);let n=E.get(s);void 0===n&&(n={stringsArray:new WeakMap,keyString:new Map},E.set(s,n));let r=n.stringsArray.get(i.strings);if(void 0!==r)return r;const a=i.strings.join(e);if(r=n.keyString.get(a),void 0===r){const e=i.getTemplateElement();F&&window.ShadyCSS.prepareTemplateDom(e,t),r=new o(i,e),n.keyString.set(a,r)}return n.stringsArray.set(i.strings,r),r},N=["html","svg"],V=new Set,H=(t,i,e)=>{V.add(t);const s=e?e.element:document.createElement("template"),n=i.querySelectorAll("style"),{length:o}=n;if(0===o)return void window.ShadyCSS.prepareTemplateStyles(s,t);const r=document.createElement("style");for(let t=0;t<o;t++){const i=n[t];i.parentNode.removeChild(i),r.textContent+=i.textContent}(t=>{N.forEach(i=>{const e=E.get(U(i,t));void 0!==e&&e.keyString.forEach(t=>{const{element:{content:i}}=t,e=new Set;Array.from(i.querySelectorAll("style")).forEach(t=>{e.add(t)}),c(t,e)})})})(t);const a=s.content;e?function(t,i,e=null){const{element:{content:s},parts:n}=t;if(null==e)return void s.appendChild(i);const o=document.createTreeWalker(s,133,null,!1);let r=u(n),a=0,h=-1;for(;o.nextNode();){for(h++,o.currentNode===e&&(a=d(i),e.parentNode.insertBefore(i,e));-1!==r&&n[r].index===h;){if(a>0){for(;-1!==r;)n[r].index+=a,r=u(n,r);return}r=u(n,r)}}}(e,r,a.firstChild):a.insertBefore(r,a.firstChild),window.ShadyCSS.prepareTemplateStyles(s,t);const h=a.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==h)i.insertBefore(h.cloneNode(!0),i.firstChild);else if(e){a.insertBefore(r,a.firstChild);const t=new Set;t.add(r),c(e,t)}};window.JSCompiler_renameProperty=(t,i)=>t;const R={toAttribute(t,i){switch(i){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,i){switch(i){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},G=(t,i)=>i!==t&&(i==i||t==t),W={attribute:!0,type:String,converter:R,reflect:!1,hasChanged:G};class q extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=new Promise(t=>this._enableUpdatingResolver=t),this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach((i,e)=>{const s=this._attributeNameForProperty(e,i);void 0!==s&&(this._attributeToPropertyMap.set(s,e),t.push(s))}),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach((t,i)=>this._classProperties.set(i,t))}}static createProperty(t,i=W){if(this._ensureClassProperties(),this._classProperties.set(t,i),i.noAccessor||this.prototype.hasOwnProperty(t))return;const e="symbol"==typeof t?Symbol():`__${t}`,s=this.getPropertyDescriptor(t,e,i);void 0!==s&&Object.defineProperty(this.prototype,t,s)}static getPropertyDescriptor(t,i,e){return{get(){return this[i]},set(e){const s=this[t];this[i]=e,this._requestUpdate(t,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||W}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty("finalized")||t.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const t=this.properties,i=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const e of i)this.createProperty(e,t[e])}}static _attributeNameForProperty(t,i){const e=i.attribute;return!1===e?void 0:"string"==typeof e?e:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,i,e=G){return e(t,i)}static _propertyValueFromAttribute(t,i){const e=i.type,s=i.converter||R,n="function"==typeof s?s:s.fromAttribute;return n?n(t,e):t}static _propertyValueToAttribute(t,i){if(void 0===i.reflect)return;const e=i.type,s=i.converter;return(s&&s.toAttribute||R.toAttribute)(t,e)}initialize(){this._saveInstanceProperties(),this._requestUpdate()}_saveInstanceProperties(){this.constructor._classProperties.forEach((t,i)=>{if(this.hasOwnProperty(i)){const t=this[i];delete this[i],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(i,t)}})}_applyInstanceProperties(){this._instanceProperties.forEach((t,i)=>this[i]=t),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,i,e){i!==e&&this._attributeToProperty(t,e)}_propertyToAttribute(t,i,e=W){const s=this.constructor,n=s._attributeNameForProperty(t,e);if(void 0!==n){const t=s._propertyValueToAttribute(i,e);if(void 0===t)return;this._updateState=8|this._updateState,null==t?this.removeAttribute(n):this.setAttribute(n,t),this._updateState=-9&this._updateState}}_attributeToProperty(t,i){if(8&this._updateState)return;const e=this.constructor,s=e._attributeToPropertyMap.get(t);if(void 0!==s){const t=e.getPropertyOptions(s);this._updateState=16|this._updateState,this[s]=e._propertyValueFromAttribute(i,t),this._updateState=-17&this._updateState}}_requestUpdate(t,i){let e=!0;if(void 0!==t){const s=this.constructor,n=s.getPropertyOptions(t);s._valueHasChanged(this[t],i,n.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,i),!0!==n.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,n))):e=!1}!this._hasRequestedUpdate&&e&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,i){return this._requestUpdate(t,i),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(t){}const t=this.performUpdate();return null!=t&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){this._instanceProperties&&this._applyInstanceProperties();let t=!1;const i=this._changedProperties;try{t=this.shouldUpdate(i),t?this.update(i):this._markUpdated()}catch(i){throw t=!1,this._markUpdated(),i}t&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(i)),this.updated(i))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((t,i)=>this._propertyToAttribute(i,this[i],t)),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}q.finalized=!0;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const D=t=>i=>"function"==typeof i?((t,i)=>(window.customElements.define(t,i),i))(t,i):((t,i)=>{const{kind:e,elements:s}=i;return{kind:e,elements:s,finisher(i){window.customElements.define(t,i)}}})(t,i),J=(t,i)=>"method"===i.kind&&i.descriptor&&!("value"in i.descriptor)?Object.assign(Object.assign({},i),{finisher(e){e.createProperty(i.key,t)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof i.initializer&&(this[i.key]=i.initializer.call(this))},finisher(e){e.createProperty(i.key,t)}};function K(t){return(i,e)=>void 0!==e?((t,i,e)=>{i.constructor.createProperty(e,t)})(t,i,e):J(t,i)}function Y(t){return(i,e)=>{const s={get(){return this.renderRoot.querySelector(t)},enumerable:!0,configurable:!0};return void 0!==e?Q(s,i,e):X(s,i)}}const Q=(t,i,e)=>{Object.defineProperty(i,e,t)},X=(t,i)=>({kind:"method",placement:"prototype",key:i.key,descriptor:t})
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/,Z="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,tt=Symbol();class it{constructor(t,i){if(i!==tt)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return void 0===this._styleSheet&&(Z?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const et=(t,...i)=>{const e=i.reduce((i,e,s)=>i+(t=>{if(t instanceof it)return t.cssText;if("number"==typeof t)return t;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${t}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(e)+t[s+1],t[0]);return new it(e,tt)};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litElementVersions||(window.litElementVersions=[])).push("2.3.1");const st={};class nt extends q{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(void 0===t)this._styles=[];else if(Array.isArray(t)){const i=(t,e)=>t.reduceRight((t,e)=>Array.isArray(e)?i(e,t):(t.add(e),t),e),e=i(t,new Set),s=[];e.forEach(t=>s.unshift(t)),this._styles=s}else this._styles=[t]}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const t=this.constructor._styles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?Z?this.renderRoot.adoptedStyleSheets=t.map(t=>t.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(t=>t.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(t){const i=this.render();super.update(t),i!==st&&this.constructor.render(i,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(t=>{const i=document.createElement("style");i.textContent=t.cssText,this.renderRoot.appendChild(i)}))}render(){return st}}nt.finalized=!0,nt.render=(t,e,s)=>{if(!s||"object"!=typeof s||!s.scopeName)throw new Error("The `scopeName` option is required.");const n=s.scopeName,o=z.has(e),r=F&&11===e.nodeType&&!!e.host,a=r&&!V.has(n),h=a?document.createDocumentFragment():e;if(((t,e,s)=>{let n=z.get(e);void 0===n&&(i(e,e.firstChild),z.set(e,n=new M(Object.assign({templateFactory:P},s))),n.appendInto(e)),n.setValue(t),n.commit()})(t,h,Object.assign({templateFactory:L(n)},s)),a){const t=z.get(h);z.delete(h);const s=t.value instanceof w?t.value.template:void 0;H(n,h,s),i(e,e.firstChild),e.appendChild(h),z.set(e,t)}!o&&r&&window.ShadyCSS.styleElement(e.host)};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const ot=new WeakMap,rt=f(t=>i=>{if(!(i instanceof M))throw new Error("unsafeHTML can only be used in text bindings");const e=ot.get(i);if(void 0!==e&&y(t)&&t===e.value&&i.value===e.fragment)return;const s=document.createElement("template");s.innerHTML=t;const n=document.importNode(s.content,!0);i.setValue(n),ot.set(i,{value:t,fragment:n})});
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class at{constructor(t){this.classes=new Set,this.changed=!1,this.element=t;const i=(t.getAttribute("class")||"").split(/\s+/);for(const t of i)this.classes.add(t)}add(t){this.classes.add(t),this.changed=!0}remove(t){this.classes.delete(t),this.changed=!0}commit(){if(this.changed){let t="";this.classes.forEach(i=>t+=i+" "),this.element.setAttribute("class",t)}}}const ht=new WeakMap,lt=f(t=>i=>{if(!(i instanceof S)||i instanceof O||"class"!==i.committer.name||i.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");const{committer:e}=i,{element:s}=e;let n=ht.get(i);void 0===n&&(s.setAttribute("class",e.strings.join(" ")),ht.set(i,n=new Set));const o=s.classList||new at(s);n.forEach(i=>{i in t||(o.remove(i),n.delete(i))});for(const i in t){const e=t[i];e!=n.has(i)&&(e?(o.add(i),n.add(i)):(o.remove(i),n.delete(i)))}"function"==typeof o.commit&&o.commit()});function ct(t){var i,e;return"image"===t.post_hint?t.url:null!==(e=null===(i=dt(t))||void 0===i?void 0:i.url)&&void 0!==e?e:""}function dt(t){var i,e,s;const n="image"===t.post_hint;return ut(t)?function(t){const i=t.gallery_data.items[0],e=t.media_metadata[i.media_id];if(!e)return;let s=e.p.find(t=>t.x>300);s||(s=e.s);if(!s)return;return{url:s.u,width:s.x,height:s.y}}(t):n?null===(i=t.preview)||void 0===i?void 0:i.images[0].source:(null===(e=t.preview)||void 0===e?void 0:e.images[0].resolutions)?null===(s=t.preview)||void 0===s?void 0:s.images[0].source:void 0}function ut(t){return!!t.gallery_data}function pt(t){return t&&(new DOMParser).parseFromString(t,"text/html").documentElement.textContent||""}function ft(t){var i,e;const s=document.createElement("div");s.innerHTML=t;const n=null===(i=s.querySelector(".md"))||void 0===i?void 0:i.firstElementChild;if(n)return null===(e=n.textContent)||void 0===e?void 0:e.toString()}var gt=function(t,i,e,s){for(var n,o=arguments.length,r=o<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r};let mt=class extends nt{constructor(){super(),this.subreddit&&this.makeQuery()}attributeChangedCallback(t,i,e){"subreddit"===t&&i!==e&&(this.subreddit=e,this.makeQuery(),this.fetchAbout())}async makeQuery(){var t;if(this.data=void 0,!this.subreddit)return;const i=await fetch(`https://www.reddit.com/r/${this.subreddit}.json`,{mode:"cors"}),e=await i.json();this.data=e.data,console.log(null===(t=this.data)||void 0===t?void 0:t.children.map(t=>t.data.title))}async fetchAbout(){if(this.about=void 0,!this.subreddit)return;const t=await fetch(`https://www.reddit.com/r/${this.subreddit}/about.json`,{mode:"cors"}),i=await t.json();this.about=i.data}static get styles(){return et`
      .posts {
        background-color: white;
        color: black;
      }

      .post {
        display: block;
        text-decoration: none;
        color: inherit;
      }

      .post-top {
        display: flex;
        flex-direction: row;
        padding: 12px 16px 0px;
      }

      .sr-icon {
        width: 32px;
        height: 32px;
        flex: none;
        margin-right: 4px;
        border-radius: 50px;
        border: 1px solid rgba(0, 0, 0, 0.2);
      }
      .no-icon {
        background-color: blueviolet;
      }
      .sr {
        flex: auto;
        font-size: 14px;
        line-height: 1em;
      }
      .sr .author {
        color: grey;
        font-size: 12px;
        line-height: 1;
      }
      .join {
        background: transparent;
        color: black;
        border-radius: 50px;
        border: 1.5px solid black;
        flex: none;
        font-weight: bold;
        font-size: 17px;
        line-height: 1em;
        text-align: center;
        text-indent: -3px;
        width: 20px;
        height: 20px;
        cursor: pointer;
      }

      .post-title {
        padding: 8px 16px;
        font-weight: bold;
        font-size: 16px;
      }

      .media {
        display: block;
        width: 100%;
      }

      .selftext {
        padding: 8px 16px;
        font-size: 14px;
        max-width: 100%;
        word-break: break-word;
      }

      .post-bottom {
        padding: 12px 12px 16px;
      }

      .post-bottom img {
        display: inline-block;
        width: 305px;
      }

      video {
        width: 100%;
      }
    `}onMouseOver(t){const i=this.renderRoot.querySelector(`video#${t}`);i&&i.play()}onMouseOut(t){const i=this.renderRoot.querySelector(`video#${t}`);i&&i.pause()}render(){var t;if(!this.data)return null;const i=(null===(t=this.about)||void 0===t?void 0:t.icon_img)||"https://www.redditstatic.com/icon_planet_2x.png";return B`<div class="posts">
      ${this.data.children.filter(t=>!t.data.stickied).map(t=>{var e,s;const n=t.data,o=dt(n);return B`<a
            class="post"
            target="_blank"
            href="https://reddit.com/${n.id}"
            @mouseover=${()=>this.onMouseOver(n.id)}
            @mouseout=${()=>this.onMouseOut(n.id)}
          >
            <div class="post-top">
              <img
                class=${lt({"sr-icon":!0,"no-icon":!(null===(e=this.about)||void 0===e?void 0:e.icon_img)})}
                src="${i}"
              />
              <div class="sr">
                r/${n.subreddit}<br /><span class="author"
                  >u/${n.author}</span
                >
              </div>
              <button class="join" title="join r/${n.subreddit}">+</button>
            </div>
            <div class="post-title">
              ${rt(n.title)}
            </div>
            ${n.selftext_html?B`<div class="selftext">
                  ${rt(pt(n.selftext_html))}
                </div>`:""}
            ${"hosted:video"===n.post_hint?B`<video
                  id=${n.id}
                  src=${(null===(s=n.media)||void 0===s?void 0:s.reddit_video.fallback_url)||""}
                  muted
                ></video>`:o?rt(`<img class="media" src=${o.url} />`):""}
            <div class="post-bottom">
              <img src="fake-post-meta.png" />
            </div>
          </a>`})}
    </div>`}};gt([K({attribute:!0,type:String})],mt.prototype,"subreddit",void 0),gt([K({attribute:!0,type:Object})],mt.prototype,"data",void 0),gt([K({attribute:!0,type:Object})],mt.prototype,"about",void 0),mt=gt([D("subreddit-view")],mt);var vt=function(t,i,e,s){for(var n,o=arguments.length,r=o<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r};let wt=class extends nt{constructor(){super(...arguments),this.subreddit=""}async fetchAbout(){if(this.about=void 0,!this.subreddit)return;const t=await fetch(`https://www.reddit.com/r/${this.subreddit}/about.json`,{mode:"cors"}),i=await t.json();this.about=i.data}attributeChangedCallback(t,i,e){switch(t){case"subreddit":return this.subreddit=e,void(i!==e&&this.fetchAbout())}}static get styles(){return et`
      .about {
        background-repeat: no-repeat;
        background-size: cover;
        background-position: top center;
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        color: white;
      }
      .comm-shim {
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          180deg,
          rgba(0, 0, 0, 20%) 50%,
          #000000 100%
        );
      }
      .text {
        position: absolute;
        display: flex;
        flex-direction: column;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        padding: 16px;
      }
      .intro {
        flex: none;
        margin: 0;
        font-weight: 700;
        font-size: 10px;
        line-height: 12px;
        text-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
      }
      .name {
        flex: auto;
        margin: 0;
        font-weight: bold;
        font-size: 26px;
        line-height: 31px;
        text-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
      }
      .desc {
        flex: none;
        margin: 0;
        font-size: 14px;
        line-height: 17px;
        text-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
      }
    `}render(){return this.about?B`
      <div
        class="about"
        style="background-image: url('${this.about.banner_img||this.about.header_img}')"
      >
        <div class="comm-shim"></div>
        <div class="text">
          <p class="intro">COMMUNITY SPOTLIGHT</p>
          <h3 class="name">r/${this.about.display_name}</h3>
          <p class="desc">
            ${rt(ft(pt(this.about.public_description_html)))}
          </p>
        </div>
      </div>
    `:B``}};vt([K({attribute:!0,type:String})],wt.prototype,"subreddit",void 0),vt([K({attribute:!0,type:Object})],wt.prototype,"about",void 0),wt=vt([D("community-spotlight")],wt);class bt{constructor(t,i){this.original=t,this.clamped=i}}function xt(t,i){const e=window;i||(i={clamp:"auto",truncationChar:"…",splitOnChars:[".","-","–","—"," "]});const s={clamp:i.clamp||"auto",splitOnChars:i.splitOnChars||[".","-","–","—"," "],truncationChar:i.truncationChar||"…",truncationHTML:i.truncationHTML};let n,o,r=s.splitOnChars.slice(0),a=r[0];const h=t.innerHTML;let l=s.clamp;const c=l.indexOf&&(l.indexOf("px")>-1||l.indexOf("em")>-1);let d,u;function p(t,i){return e.getComputedStyle(t).getPropertyValue(i)}function f(i){const e=i||t.clientHeight,s=g(t);return Math.max(Math.floor(e/s),0)}function g(t){if(null==i?void 0:i.lineHeight)return i.lineHeight;let e=p(t,"line-height");return"normal"===e&&(e=1.1*parseFloat(parseFloat(p(t,"font-size")).toFixed(0))),parseFloat(parseFloat(e).toFixed(0))}function m(t){return Math.max(t.scrollHeight,t.clientHeight)-4}function v(i){if(i.lastChild)return i.lastChild.children&&i.lastChild.children.length>0?v(Array.prototype.slice.call(i.children).pop()):i.lastChild&&i.lastChild.nodeValue&&""!==i.lastChild.nodeValue&&i.lastChild.nodeValue!==s.truncationChar?i.lastChild:i.lastChild.nodeValue?i.lastChild&&i.lastChild.parentNode&&i.lastChild.nodeValue===s.truncationChar?(i.lastChild.parentNode.removeChild(i.lastChild),v(t)):i:null!==i.lastChild.firstChild&&i.lastChild.firstChild.nodeValue!==s.truncationChar||!i.lastChild.parentNode||(i.lastChild.parentNode.removeChild(i.lastChild),i.children&&0!==i.children.length||!i.parentNode)?3===i.lastChild.nodeType?i.lastChild:v(i.lastChild):(i.parentNode.removeChild(i),v(t))}function w(t,i){t.nodeValue=i+s.truncationChar}s.truncationHTML&&(d=document.createElement("span"),d.innerHTML=s.truncationHTML),"auto"===l?l=f().toString():c&&(l=f(parseInt(l,10)).toString());const b=(x=Number(l),g(t)*x);var x;return b<m(t)&&(u=function i(e,h){if(!e||!h||!e.nodeValue)return;if(e.nodeValue.trim().endsWith(s.truncationChar)||w(e,e.nodeValue),m(t)<=h)return t.innerHTML;const l=e.nodeValue.replace(s.truncationChar,"");if(n||(a=r.length>0?r.shift():"",n=l.split(a)),n.length>1?(o=n.pop(),w(e,n.join(a))):n=null,d&&(e.nodeValue=e.nodeValue.replace(s.truncationChar,""),t.innerHTML=e.nodeValue+" "+d.innerHTML+s.truncationChar),n){if(t.clientHeight<=h){if(!(r.length>=0&&""!==a))return t.innerHTML;w(e,n.join(a)+a+o),n=null}}else""===a&&(w(e,""),e=v(t),r=s.splitOnChars.slice(0),a=r[0],n=null,o=null);return i(e,h)}(v(t),b)),new bt(h,u)}var yt=()=>{return et`
  :host {
    --tile-size: 156px;
    --gradient-1: linear-gradient(97.51deg, #ff4400 -7.08%, #ffb330 116.57%);
    --gradient-2: linear-gradient(89.94deg, #c274f0 0%, #f14fb0 100%);
    --gradient-3: linear-gradient(
      89.94deg,
      #51b9ff 0%,
      #7785ff 52.6%,
      #b279ff 73.96%,
      #ff81ed 100%
    );
    --gradient-4: linear-gradient(97.51deg, #048de9 -7.08%, #0fc0d2 116.57%);
    --gradient-5: linear-gradient(71.53deg, #c30d47 20.89%, #fe4301 121.62%);
    --gradient-6: linear-gradient(91.64deg, #f5441f -10.49%, #fc7519 109.75%);
    --gradient-7: linear-gradient(91.64deg, #5b3dc1 -10.49%, #aa48c0 109.75%);
    --gradient-8: linear-gradient(91.64deg, #3353b8 -10.49%, #685cfc 109.75%);
  }
  .grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-auto-rows: calc((var(--tile-size) + 16px) / ${4});
    background-color: #fff;
    padding: 8px;
    /* grid-gap: 16px; */
    grid-auto-flow: dense;
  }

  .post-tile {
    display: block;
    overflow: hidden;
    position: relative;
    cursor: pointer;
    border-radius: 16px;
    margin: 8px;
    color: white;
    box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.15);

    grid-row-end: span 4;
  }

  .post-tile-text {
    display: flex;
    flex-direction: column;
    padding: 16px;
    font-size: 12px;
    line-height: 17px;
    text-overflow: ellipsis;
    margin: 0;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }

  .shim {
    background-color: rgba(0, 0, 0, 0.25);
  }

  .post-text-only .post-tile-text {
    box-shadow: unset;
    background-color: transparent;
  }

  .loader {
    grid-column-end: span 2;
  }

  .post-tile-image {
    background-repeat: no-repeat;
    background-size: cover;
    background-position: top center;
    /* height: var(--tile-size); */
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }
  .post-text-only {
    background-image: var(--gradient-1);
  }

  .post-tile:nth-child(8n).post-text-only {
    background-image: var(--gradient-2);
  }
  .post-tile:nth-child(8n + 1).post-text-only {
    background-image: var(--gradient-3);
  }
  .post-tile:nth-child(8n + 2).post-text-only {
    background-image: var(--gradient-4);
  }
  .post-tile:nth-child(8n + 3).post-text-only {
    background-image: var(--gradient-5);
  }
  .post-tile:nth-child(8n + 4).post-text-only {
    background-image: var(--gradient-6);
  }
  .post-tile:nth-child(8n + 5).post-text-only {
    background-image: var(--gradient-7);
  }
  .post-tile:nth-child(8n + 6).post-text-only {
    background-image: var(--gradient-8);
  }

  .hidden {
    display: none;
  }

  .subreddit {
    font-weight: normal;
    line-height: 1.2em;
    margin-top: 16px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: none;
  }

  .post-text-only .post-tile-text .post-tile-title {
    text-shadow: none;
  }

  .spacer {
    flex: auto;
  }

  .gallery-icon {
    position: absolute;
    top: 10px;
    right: 6px;
    width: 28px;
    height: 28px;
  }
  .video-icon {
    position: absolute;
    top: 10px;
    right: 10px;
    width: 20px;
    height: 18px;
  }

  .post-tile-title {
    margin: 0;
    font-weight: 600;
    flex: none;
    vertical-align: bottom;
  }

  .post-tile-body {
    margin-top: 8px;
    font-weight: normal;
  }

  .post-tile-large {
    grid-column-end: span 2;
    /* grid-row-end: span 16; */
  }
  ${t=function(t){const i=Array(t);for(var e=0;e<t;e++)i[e]=e;return i}(17).map(t=>`\n    .span${t} {\n      grid-row-end: span ${t};\n    }\n  `).join("\n"),new it(String(t),tt)}

  .md a {
    color: inherit;
  }
`;var t};var $t=function(t,i,e,s){for(var n,o=arguments.length,r=o<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r};let kt=class extends nt{constructor(){super(...arguments),this.isImage=!1,this.isClamped=!1}static get styles(){return yt()}updated(){var t;this.titleElem&&!this.isClamped&&xt(this.titleElem,{clamp:(null===(t=this.post)||void 0===t?void 0:t.selftext)?"3":"5",lineHeight:17}),this.bodyElem&&!this.isClamped&&(xt(this.bodyElem,{clamp:"5",lineHeight:17}),this.isClamped=!0)}render(){return this.post?this._renderText(this.post,this.isImage):""}_renderText(t,i=!1){var e,s,n;const o=null!==(n=ft(null!==(s=pt(null!==(e=t.selftext_html)&&void 0!==e?e:""))&&void 0!==s?s:""))&&void 0!==n?n:"";return B`<div
      class=${lt({"post-tile-text":!0,shim:i})}
    >
      <h3
        class=${lt({"post-tile-title":!0})}
        title=${t.title}
      >
        ${pt(t.title)}
      </h3>
      ${(null==o?void 0:o.length)?B`<div
            class=${lt({"post-tile-body":!0})}
          >
            ${rt(o)}
          </div>`:""}
      <div class="spacer"></div>
      <div
        class=${lt({subreddit:!0})}
      >
        r/${t.subreddit}
      </div>
    </div>`}};$t([K({attribute:!0,type:Object})],kt.prototype,"post",void 0),$t([K({attribute:!0,type:Boolean})],kt.prototype,"isImage",void 0),$t([Y(".post-tile-title")],kt.prototype,"titleElem",void 0),$t([Y(".post-tile-body")],kt.prototype,"bodyElem",void 0),kt=$t([D("tile-text")],kt);var St=function(t,i,e,s){for(var n,o=arguments.length,r=o<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(i,e,r):n(i,e))||r);return o>3&&r&&Object.defineProperty(i,e,r),r};let Mt=class extends nt{constructor(){super(),this.pending=!1,this.showtitle=!1,this.showsubreddit=!1,this.showshim=!1,this.largeKarmaThreshold=2e4,this.largeCommentThreshold=100,this.loaderRegistered=!1,this.posts=[]}connectedCallback(){super.connectedCallback(),this.makeQuery()}updated(){this.observer||(this.observer=new IntersectionObserver(t=>{var i;console.log({entries:t}),t[0].isIntersecting&&(console.log(`load more ${this.afterId}`),this._loader&&(null===(i=this.observer)||void 0===i||i.unobserve(this._loader)),this.pending||this.makeQuery())},{root:document.querySelector("main"),rootMargin:"100px"})),this._loader&&this.afterId&&setTimeout(()=>{var t;this._loader&&(null===(t=this.observer)||void 0===t||t.observe(this._loader))},1e3)}static get styles(){return yt()}attributeChangedCallback(t,i,e){return console.log(arguments),"multi"===t&&i!==e?(this.multi=e,void(this.multi&&(this.posts=[],this.afterId=void 0,this.subreddit=void 0,this.makeQuery()))):"subreddit"===t&&i!==e?(this.subreddit=e,void(this.subreddit&&(this.posts=[],this.afterId=void 0,this.multi=void 0))):void(t.includes("show")&&(this[t]="true"===e,this.showshim=this.showsubreddit||this.showtitle))}async makeQuery(){var t,i,e;if(!this.multi)return;if(this.pending)return;this.data=void 0,console.log(this.multi),this.pending=!0;const s=await fetch(`https://www.reddit.com/r/${this.multi}.json?after=${null!==(t=this.afterId)&&void 0!==t?t:""}`,{mode:"cors"}),n=await s.json();this.pending=!1,this.data=n.data;const o=null!==(e=null===(i=this.data)||void 0===i?void 0:i.children.map(t=>t.data))&&void 0!==e?e:[];console.log(o),this.posts=this.posts.concat(o.filter(t=>"link"!==t.post_hint)),this.afterId=n.data.after}render(){return this.subreddit?B`<subreddit-view
        subreddit=${this.subreddit}
      ></subreddit-view>`:B`
      <div class="grid">
        ${this._renderTiles()}
        ${0===this.posts.length?"":this._renderSpacers()}
      </div>
    `}_renderTiles(){return this.posts.map((t,i)=>{const e=!!ct(t);return i%25==5?B`<a
          class="post-tile span5 post-tile-large"
          href="#!r/${t.subreddit}"
        >
          <community-spotlight
            subreddit=${t.subreddit}
          ></community-spotlight>
        </a>`:e?this._renderMediaTile(t):this._renderTextTile(t)})}_renderSpacers(){return B`<div class="post-tile post-text-only span3"></div>
      <div class="post-tile post-text-only span2"></div>
      ${Array(4).fill(1).map(()=>B`<div class="post-tile post-text-only span1"></div>`)}
      <div class="loader"></div>`}_renderMediaTile(t){const i=t.ups>this.largeKarmaThreshold||t.num_comments/t.ups>.1,e=ct(t),s=`url('${e}')`,n=function(t){const i=dt(t);return i?i.height/i.width:1}(t),o=Math.round(4*n)*(i?2:1),r=`span${a=o,h=Math.round(4/3),l=8*(i?2:1),Math.min(Math.max(a,h),l)}`;var a,h,l;return B`<a
      href="#!r/${t.subreddit}"
      class=${lt({"post-tile":!0,[r]:!0,"post-tile-large":i})}
    >
      ${e?rt(`<div class="post-tile-image" style="background-image: ${s}" />`):""}
      ${this.showshim?B`<tile-text .post=${t} isImage></tile-text>`:""}
      ${ut(t)?B`<img class="gallery-icon" src="gallery.png" />`:""}
      ${function(t){var i;return null===(i=t.post_hint)||void 0===i?void 0:i.includes("video")}(t)?B`<img class="video-icon" src="video.png" />`:""}
    </a>`}_renderTextTile(t){const i=t.ups>this.largeKarmaThreshold||t.title.length>100;return B`<a
      href="#!r/${t.subreddit}"
      class=${lt({"post-tile":!0,span6:!!t.selftext,span4:!t.selftext,"post-tile-large":i,"post-text-only":!0})}
    >
      <tile-text .post=${t} .isimage=${!1}></tile-text>
    </a>`}_renderText(t,i=!1){return B`<tile-text .post=${t} .isimage=${i} />`}};St([K({attribute:!0,type:String})],Mt.prototype,"subreddit",void 0),St([K({attribute:!0,type:String})],Mt.prototype,"multi",void 0),St([K({attribute:!0,type:String})],Mt.prototype,"postId",void 0),St([K({attribute:!0,type:Object})],Mt.prototype,"data",void 0),St([K({attribute:!0,type:Boolean})],Mt.prototype,"showtitle",void 0),St([K({attribute:!0,type:Boolean})],Mt.prototype,"showsubreddit",void 0),St([K({attribute:!0,type:Boolean})],Mt.prototype,"showshim",void 0),St([Y(".loader")],Mt.prototype,"_loader",void 0),Mt=St([D("explore-page")],Mt);const _t=/t\/(\w+)/,At=/r\/((?:\w+\+)+\w+)/,Ot=/r\/(\w+)(?:\/(\w+))?/,Ct={gaming:"gaming+halo+PS4+rpg+iosgaming+gamingsuggestions+computers+ShouldIbuythisgame+MechanicalKeyboards+Monitors+hardwareswap+OpTicGaming+DotA2+pcmasterrace+GirlGamers+gamecollecting+IndieGaming+Fallout+Games+nintendo+SuggestALaptop+Steam+Competitiveoverwatch+wow+funny",music:'Music+Vaporwave+Guitar+MusicEd+WeAreTheMusicMakers+indieheads+Metal+LetsTalkMusic+DeepIntoYouTube+musictheory+Metalcore+CasualConversation+ListeningHeads+AskReddit+woahdude+composer+poppunkers+anime+ThisIsOurMusic+unpopularopinion+AdviceAnimals+BABYMETAL+gaming+EDM+technology"',sports:"sports+soccer+todayilearned+starcraft+baseball+esports+reddevils+AskReddit+nfl+CFB+nba+hockey+leagueoflegends+ABraThatFits+funny+formula1+MMA+Patriots+gaming+cordcutters+dogecoin+granturismo+Showerthoughts+unpopularopinion+MLS",beauty:"beauty+AsianBeauty+OldSchoolCool+funny+MUAontheCheap+makeupexchange+KoreanBeauty+pics+Porsche+RandomActsofMakeup+MakeupAddiction+disney+BeautyAddiction+BeautyBoxes+AskWomen+succulents+BeautyGuruChatter+beautytalkph+houseplants+aww+ShinyPokemon+cats+gardening+FreeKarma4U+gaming"};!async function(){const t=document.querySelector("explore-page");document.querySelectorAll("button.pill").forEach(i=>{i.addEventListener("click",()=>{const e=i.innerHTML.toLowerCase();console.log({topic:e}),t.setAttribute("topic",e)})}),document.querySelectorAll("input.checkbox").forEach(i=>{const e=i;e.addEventListener("change",()=>{switch(e.id){case"showtitle":return t.setAttribute("showtitle",e.checked+""),void t.setAttribute("showsubreddit",e.checked+"")}})});const i=document.querySelector(".explore-header"),e=document.querySelector(".subreddit-header");function s(){i.classList.remove("hidden"),e.classList.add("hidden")}const n=document.querySelector(".back");function o(){var n,o;const r=(null===(n=window.location.hash)||void 0===n?void 0:n.replace(/(^!|\/$)/,""))||"";let a;if(r||function(i){var e;const n=null!==(e=Ct[i])&&void 0!==e?e:Ct.gaming;t.setAttribute("subreddit",""),t.setAttribute("multi",n),t.setAttribute("post",""),s()}("gaming"),a=r.match(_t),a){const[,t]=a;return h(null!==(o=Ct[t])&&void 0!==o?o:Ct.gaming)}if(a=r.match(At),a){const[,t]=a;return h(t)}if(a=r.match(Ot),a){const[,s,n]=a;return function(s,n){t.setAttribute("multi",""),t.setAttribute("postId",n||""),t.setAttribute("subreddit",s),i.classList.add("hidden"),e.classList.remove("hidden")}(s,n)}function h(i){t.setAttribute("subreddit",""),t.setAttribute("post",""),t.setAttribute("multi",i),s()}}null==n||n.addEventListener("click",()=>{window.history.go(-1)}),window.addEventListener("hashchange",o),o()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi9kb20uanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3RlbXBsYXRlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpYi9tb2RpZnktdGVtcGxhdGUuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL2RpcmVjdGl2ZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvcGFydC5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvdGVtcGxhdGUtaW5zdGFuY2UuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3RlbXBsYXRlLXJlc3VsdC5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvcGFydHMuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3RlbXBsYXRlLWZhY3RvcnkuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3JlbmRlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saWIvZGVmYXVsdC10ZW1wbGF0ZS1wcm9jZXNzb3IuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGl0LWh0bWwuanMiLCIuLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGliL3NoYWR5LXJlbmRlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtZWxlbWVudC9saWIvdXBkYXRpbmctZWxlbWVudC5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtZWxlbWVudC9saWIvZGVjb3JhdG9ycy5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtZWxlbWVudC9saWIvY3NzLXRhZy5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtZWxlbWVudC9saXQtZWxlbWVudC5qcyIsIi4uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9kaXJlY3RpdmVzL3Vuc2FmZS1odG1sLmpzIiwiLi4vbm9kZV9tb2R1bGVzL2xpdC1odG1sL2RpcmVjdGl2ZXMvY2xhc3MtbWFwLmpzIiwiLi4vbGliL2NvbXBvbmVudHMvaGVscGVycy5qcyIsIi4uL2xpYi9jb21wb25lbnRzL3N1YnJlZGRpdC12aWV3LmpzIiwiLi4vbGliL2NvbXBvbmVudHMvY29tbXVuaXR5LXNwb3RsaWdodC5qcyIsIi4uL2xpYi92ZW5kb3IvY2xhbXB5LmpzIiwiLi4vbGliL2NvbXBvbmVudHMvZXhwbG9yZS1zdHlsZXMuanMiLCIuLi9saWIvY29tcG9uZW50cy90eXBlcy5qcyIsIi4uL2xpYi9jb21wb25lbnRzL3RpbGUtdGV4dC5qcyIsIi4uL2xpYi9jb21wb25lbnRzL2V4cGxvcmUtcGFnZS5qcyIsIi4uL2xpYi9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIFRydWUgaWYgdGhlIGN1c3RvbSBlbGVtZW50cyBwb2x5ZmlsbCBpcyBpbiB1c2UuXG4gKi9cbmV4cG9ydCBjb25zdCBpc0NFUG9seWZpbGwgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cyAhPSBudWxsICYmXG4gICAgd2luZG93LmN1c3RvbUVsZW1lbnRzLnBvbHlmaWxsV3JhcEZsdXNoQ2FsbGJhY2sgIT09XG4gICAgICAgIHVuZGVmaW5lZDtcbi8qKlxuICogUmVwYXJlbnRzIG5vZGVzLCBzdGFydGluZyBmcm9tIGBzdGFydGAgKGluY2x1c2l2ZSkgdG8gYGVuZGAgKGV4Y2x1c2l2ZSksXG4gKiBpbnRvIGFub3RoZXIgY29udGFpbmVyIChjb3VsZCBiZSB0aGUgc2FtZSBjb250YWluZXIpLCBiZWZvcmUgYGJlZm9yZWAuIElmXG4gKiBgYmVmb3JlYCBpcyBudWxsLCBpdCBhcHBlbmRzIHRoZSBub2RlcyB0byB0aGUgY29udGFpbmVyLlxuICovXG5leHBvcnQgY29uc3QgcmVwYXJlbnROb2RlcyA9IChjb250YWluZXIsIHN0YXJ0LCBlbmQgPSBudWxsLCBiZWZvcmUgPSBudWxsKSA9PiB7XG4gICAgd2hpbGUgKHN0YXJ0ICE9PSBlbmQpIHtcbiAgICAgICAgY29uc3QgbiA9IHN0YXJ0Lm5leHRTaWJsaW5nO1xuICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKHN0YXJ0LCBiZWZvcmUpO1xuICAgICAgICBzdGFydCA9IG47XG4gICAgfVxufTtcbi8qKlxuICogUmVtb3ZlcyBub2Rlcywgc3RhcnRpbmcgZnJvbSBgc3RhcnRgIChpbmNsdXNpdmUpIHRvIGBlbmRgIChleGNsdXNpdmUpLCBmcm9tXG4gKiBgY29udGFpbmVyYC5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlbW92ZU5vZGVzID0gKGNvbnRhaW5lciwgc3RhcnQsIGVuZCA9IG51bGwpID0+IHtcbiAgICB3aGlsZSAoc3RhcnQgIT09IGVuZCkge1xuICAgICAgICBjb25zdCBuID0gc3RhcnQubmV4dFNpYmxpbmc7XG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChzdGFydCk7XG4gICAgICAgIHN0YXJ0ID0gbjtcbiAgICB9XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZG9tLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICogQW4gZXhwcmVzc2lvbiBtYXJrZXIgd2l0aCBlbWJlZGRlZCB1bmlxdWUga2V5IHRvIGF2b2lkIGNvbGxpc2lvbiB3aXRoXG4gKiBwb3NzaWJsZSB0ZXh0IGluIHRlbXBsYXRlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IG1hcmtlciA9IGB7e2xpdC0ke1N0cmluZyhNYXRoLnJhbmRvbSgpKS5zbGljZSgyKX19fWA7XG4vKipcbiAqIEFuIGV4cHJlc3Npb24gbWFya2VyIHVzZWQgdGV4dC1wb3NpdGlvbnMsIG11bHRpLWJpbmRpbmcgYXR0cmlidXRlcywgYW5kXG4gKiBhdHRyaWJ1dGVzIHdpdGggbWFya3VwLWxpa2UgdGV4dCB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBub2RlTWFya2VyID0gYDwhLS0ke21hcmtlcn0tLT5gO1xuZXhwb3J0IGNvbnN0IG1hcmtlclJlZ2V4ID0gbmV3IFJlZ0V4cChgJHttYXJrZXJ9fCR7bm9kZU1hcmtlcn1gKTtcbi8qKlxuICogU3VmZml4IGFwcGVuZGVkIHRvIGFsbCBib3VuZCBhdHRyaWJ1dGUgbmFtZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBib3VuZEF0dHJpYnV0ZVN1ZmZpeCA9ICckbGl0JCc7XG4vKipcbiAqIEFuIHVwZGF0YWJsZSBUZW1wbGF0ZSB0aGF0IHRyYWNrcyB0aGUgbG9jYXRpb24gb2YgZHluYW1pYyBwYXJ0cy5cbiAqL1xuZXhwb3J0IGNsYXNzIFRlbXBsYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihyZXN1bHQsIGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5wYXJ0cyA9IFtdO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICBjb25zdCBub2Rlc1RvUmVtb3ZlID0gW107XG4gICAgICAgIGNvbnN0IHN0YWNrID0gW107XG4gICAgICAgIC8vIEVkZ2UgbmVlZHMgYWxsIDQgcGFyYW1ldGVycyBwcmVzZW50OyBJRTExIG5lZWRzIDNyZCBwYXJhbWV0ZXIgdG8gYmUgbnVsbFxuICAgICAgICBjb25zdCB3YWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKGVsZW1lbnQuY29udGVudCwgMTMzIC8qIE5vZGVGaWx0ZXIuU0hPV197RUxFTUVOVHxDT01NRU5UfFRFWFR9ICovLCBudWxsLCBmYWxzZSk7XG4gICAgICAgIC8vIEtlZXBzIHRyYWNrIG9mIHRoZSBsYXN0IGluZGV4IGFzc29jaWF0ZWQgd2l0aCBhIHBhcnQuIFdlIHRyeSB0byBkZWxldGVcbiAgICAgICAgLy8gdW5uZWNlc3Nhcnkgbm9kZXMsIGJ1dCB3ZSBuZXZlciB3YW50IHRvIGFzc29jaWF0ZSB0d28gZGlmZmVyZW50IHBhcnRzXG4gICAgICAgIC8vIHRvIHRoZSBzYW1lIGluZGV4LiBUaGV5IG11c3QgaGF2ZSBhIGNvbnN0YW50IG5vZGUgYmV0d2Vlbi5cbiAgICAgICAgbGV0IGxhc3RQYXJ0SW5kZXggPSAwO1xuICAgICAgICBsZXQgaW5kZXggPSAtMTtcbiAgICAgICAgbGV0IHBhcnRJbmRleCA9IDA7XG4gICAgICAgIGNvbnN0IHsgc3RyaW5ncywgdmFsdWVzOiB7IGxlbmd0aCB9IH0gPSByZXN1bHQ7XG4gICAgICAgIHdoaWxlIChwYXJ0SW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKTtcbiAgICAgICAgICAgIGlmIChub2RlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UndmUgZXhoYXVzdGVkIHRoZSBjb250ZW50IGluc2lkZSBhIG5lc3RlZCB0ZW1wbGF0ZSBlbGVtZW50LlxuICAgICAgICAgICAgICAgIC8vIEJlY2F1c2Ugd2Ugc3RpbGwgaGF2ZSBwYXJ0cyAodGhlIG91dGVyIGZvci1sb29wKSwgd2Uga25vdzpcbiAgICAgICAgICAgICAgICAvLyAtIFRoZXJlIGlzIGEgdGVtcGxhdGUgaW4gdGhlIHN0YWNrXG4gICAgICAgICAgICAgICAgLy8gLSBUaGUgd2Fsa2VyIHdpbGwgZmluZCBhIG5leHROb2RlIG91dHNpZGUgdGhlIHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gc3RhY2sucG9wKCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEgLyogTm9kZS5FTEVNRU5UX05PREUgKi8pIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5oYXNBdHRyaWJ1dGVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IG5vZGUuYXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBsZW5ndGggfSA9IGF0dHJpYnV0ZXM7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlclxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTmFtZWROb2RlTWFwLFxuICAgICAgICAgICAgICAgICAgICAvLyBhdHRyaWJ1dGVzIGFyZSBub3QgZ3VhcmFudGVlZCB0byBiZSByZXR1cm5lZCBpbiBkb2N1bWVudCBvcmRlci5cbiAgICAgICAgICAgICAgICAgICAgLy8gSW4gcGFydGljdWxhciwgRWRnZS9JRSBjYW4gcmV0dXJuIHRoZW0gb3V0IG9mIG9yZGVyLCBzbyB3ZSBjYW5ub3RcbiAgICAgICAgICAgICAgICAgICAgLy8gYXNzdW1lIGEgY29ycmVzcG9uZGVuY2UgYmV0d2VlbiBwYXJ0IGluZGV4IGFuZCBhdHRyaWJ1dGUgaW5kZXguXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRzV2l0aChhdHRyaWJ1dGVzW2ldLm5hbWUsIGJvdW5kQXR0cmlidXRlU3VmZml4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGNvdW50LS0gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIHRlbXBsYXRlIGxpdGVyYWwgc2VjdGlvbiBsZWFkaW5nIHVwIHRvIHRoZSBmaXJzdFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwcmVzc2lvbiBpbiB0aGlzIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nRm9yUGFydCA9IHN0cmluZ3NbcGFydEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIGF0dHJpYnV0ZSBuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gbGFzdEF0dHJpYnV0ZU5hbWVSZWdleC5leGVjKHN0cmluZ0ZvclBhcnQpWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgY29ycmVzcG9uZGluZyBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsbCBib3VuZCBhdHRyaWJ1dGVzIGhhdmUgaGFkIGEgc3VmZml4IGFkZGVkIGluXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUZW1wbGF0ZVJlc3VsdCNnZXRIVE1MIHRvIG9wdCBvdXQgb2Ygc3BlY2lhbCBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsaW5nLiBUbyBsb29rIHVwIHRoZSBhdHRyaWJ1dGUgdmFsdWUgd2UgYWxzbyBuZWVkIHRvIGFkZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHN1ZmZpeC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZUxvb2t1cE5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCkgKyBib3VuZEF0dHJpYnV0ZVN1ZmZpeDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZVZhbHVlID0gbm9kZS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlTG9va3VwTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVMb29rdXBOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRpY3MgPSBhdHRyaWJ1dGVWYWx1ZS5zcGxpdChtYXJrZXJSZWdleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnRzLnB1c2goeyB0eXBlOiAnYXR0cmlidXRlJywgaW5kZXgsIG5hbWUsIHN0cmluZ3M6IHN0YXRpY3MgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0SW5kZXggKz0gc3RhdGljcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub2RlLnRhZ05hbWUgPT09ICdURU1QTEFURScpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gbm9kZS5jb250ZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT09IDMgLyogTm9kZS5URVhUX05PREUgKi8pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gbm9kZS5kYXRhO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmluZGV4T2YobWFya2VyKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5ncyA9IGRhdGEuc3BsaXQobWFya2VyUmVnZXgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0SW5kZXggPSBzdHJpbmdzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IHRleHQgbm9kZSBmb3IgZWFjaCBsaXRlcmFsIHNlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlc2Ugbm9kZXMgYXJlIGFsc28gdXNlZCBhcyB0aGUgbWFya2VycyBmb3Igbm9kZSBwYXJ0c1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhc3RJbmRleDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5zZXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHMgPSBzdHJpbmdzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0ID0gY3JlYXRlTWFya2VyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IGxhc3RBdHRyaWJ1dGVOYW1lUmVnZXguZXhlYyhzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2ggIT09IG51bGwgJiYgZW5kc1dpdGgobWF0Y2hbMl0sIGJvdW5kQXR0cmlidXRlU3VmZml4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gcy5zbGljZSgwLCBtYXRjaC5pbmRleCkgKyBtYXRjaFsxXSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFsyXS5zbGljZSgwLCAtYm91bmRBdHRyaWJ1dGVTdWZmaXgubGVuZ3RoKSArIG1hdGNoWzNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoaW5zZXJ0LCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFydHMucHVzaCh7IHR5cGU6ICdub2RlJywgaW5kZXg6ICsraW5kZXggfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBubyB0ZXh0LCB3ZSBtdXN0IGluc2VydCBhIGNvbW1lbnQgdG8gbWFyayBvdXIgcGxhY2UuXG4gICAgICAgICAgICAgICAgICAgIC8vIEVsc2UsIHdlIGNhbiB0cnVzdCBpdCB3aWxsIHN0aWNrIGFyb3VuZCBhZnRlciBjbG9uaW5nLlxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RyaW5nc1tsYXN0SW5kZXhdID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShjcmVhdGVNYXJrZXIoKSwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlc1RvUmVtb3ZlLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmRhdGEgPSBzdHJpbmdzW2xhc3RJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIHBhcnQgZm9yIGVhY2ggbWF0Y2ggZm91bmRcbiAgICAgICAgICAgICAgICAgICAgcGFydEluZGV4ICs9IGxhc3RJbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09PSA4IC8qIE5vZGUuQ09NTUVOVF9OT0RFICovKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuZGF0YSA9PT0gbWFya2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGEgbmV3IG1hcmtlciBub2RlIHRvIGJlIHRoZSBzdGFydE5vZGUgb2YgdGhlIFBhcnQgaWYgYW55IG9mXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBmb2xsb3dpbmcgYXJlIHRydWU6XG4gICAgICAgICAgICAgICAgICAgIC8vICAqIFdlIGRvbid0IGhhdmUgYSBwcmV2aW91c1NpYmxpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gICogVGhlIHByZXZpb3VzU2libGluZyBpcyBhbHJlYWR5IHRoZSBzdGFydCBvZiBhIHByZXZpb3VzIHBhcnRcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUucHJldmlvdXNTaWJsaW5nID09PSBudWxsIHx8IGluZGV4ID09PSBsYXN0UGFydEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShjcmVhdGVNYXJrZXIoKSwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGFzdFBhcnRJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnRzLnB1c2goeyB0eXBlOiAnbm9kZScsIGluZGV4IH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGEgbmV4dFNpYmxpbmcsIGtlZXAgdGhpcyBub2RlIHNvIHdlIGhhdmUgYW4gZW5kLlxuICAgICAgICAgICAgICAgICAgICAvLyBFbHNlLCB3ZSBjYW4gcmVtb3ZlIGl0IHRvIHNhdmUgZnV0dXJlIGNvc3RzLlxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5uZXh0U2libGluZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5kYXRhID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlc1RvUmVtb3ZlLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleC0tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhcnRJbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChpID0gbm9kZS5kYXRhLmluZGV4T2YobWFya2VyLCBpICsgMSkpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tbWVudCBub2RlIGhhcyBhIGJpbmRpbmcgbWFya2VyIGluc2lkZSwgbWFrZSBhbiBpbmFjdGl2ZSBwYXJ0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgYmluZGluZyB3b24ndCB3b3JrLCBidXQgc3Vic2VxdWVudCBiaW5kaW5ncyB3aWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIChqdXN0aW5mYWduYW5pKTogY29uc2lkZXIgd2hldGhlciBpdCdzIGV2ZW4gd29ydGggaXQgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1ha2UgYmluZGluZ3MgaW4gY29tbWVudHMgd29ya1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJ0cy5wdXNoKHsgdHlwZTogJ25vZGUnLCBpbmRleDogLTEgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0SW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBSZW1vdmUgdGV4dCBiaW5kaW5nIG5vZGVzIGFmdGVyIHRoZSB3YWxrIHRvIG5vdCBkaXN0dXJiIHRoZSBUcmVlV2Fsa2VyXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBub2Rlc1RvUmVtb3ZlKSB7XG4gICAgICAgICAgICBuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobik7XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBlbmRzV2l0aCA9IChzdHIsIHN1ZmZpeCkgPT4ge1xuICAgIGNvbnN0IGluZGV4ID0gc3RyLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGg7XG4gICAgcmV0dXJuIGluZGV4ID49IDAgJiYgc3RyLnNsaWNlKGluZGV4KSA9PT0gc3VmZml4O1xufTtcbmV4cG9ydCBjb25zdCBpc1RlbXBsYXRlUGFydEFjdGl2ZSA9IChwYXJ0KSA9PiBwYXJ0LmluZGV4ICE9PSAtMTtcbi8vIEFsbG93cyBgZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgnJylgIHRvIGJlIHJlbmFtZWQgZm9yIGFcbi8vIHNtYWxsIG1hbnVhbCBzaXplLXNhdmluZ3MuXG5leHBvcnQgY29uc3QgY3JlYXRlTWFya2VyID0gKCkgPT4gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgnJyk7XG4vKipcbiAqIFRoaXMgcmVnZXggZXh0cmFjdHMgdGhlIGF0dHJpYnV0ZSBuYW1lIHByZWNlZGluZyBhbiBhdHRyaWJ1dGUtcG9zaXRpb25cbiAqIGV4cHJlc3Npb24uIEl0IGRvZXMgdGhpcyBieSBtYXRjaGluZyB0aGUgc3ludGF4IGFsbG93ZWQgZm9yIGF0dHJpYnV0ZXNcbiAqIGFnYWluc3QgdGhlIHN0cmluZyBsaXRlcmFsIGRpcmVjdGx5IHByZWNlZGluZyB0aGUgZXhwcmVzc2lvbiwgYXNzdW1pbmcgdGhhdFxuICogdGhlIGV4cHJlc3Npb24gaXMgaW4gYW4gYXR0cmlidXRlLXZhbHVlIHBvc2l0aW9uLlxuICpcbiAqIFNlZSBhdHRyaWJ1dGVzIGluIHRoZSBIVE1MIHNwZWM6XG4gKiBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvc3ludGF4Lmh0bWwjZWxlbWVudHMtYXR0cmlidXRlc1xuICpcbiAqIFwiIFxceDA5XFx4MGFcXHgwY1xceDBkXCIgYXJlIEhUTUwgc3BhY2UgY2hhcmFjdGVyczpcbiAqIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9pbmZyYXN0cnVjdHVyZS5odG1sI3NwYWNlLWNoYXJhY3RlcnNcbiAqXG4gKiBcIlxcMC1cXHgxRlxceDdGLVxceDlGXCIgYXJlIFVuaWNvZGUgY29udHJvbCBjaGFyYWN0ZXJzLCB3aGljaCBpbmNsdWRlcyBldmVyeVxuICogc3BhY2UgY2hhcmFjdGVyIGV4Y2VwdCBcIiBcIi5cbiAqXG4gKiBTbyBhbiBhdHRyaWJ1dGUgaXM6XG4gKiAgKiBUaGUgbmFtZTogYW55IGNoYXJhY3RlciBleGNlcHQgYSBjb250cm9sIGNoYXJhY3Rlciwgc3BhY2UgY2hhcmFjdGVyLCAoJyksXG4gKiAgICAoXCIpLCBcIj5cIiwgXCI9XCIsIG9yIFwiL1wiXG4gKiAgKiBGb2xsb3dlZCBieSB6ZXJvIG9yIG1vcmUgc3BhY2UgY2hhcmFjdGVyc1xuICogICogRm9sbG93ZWQgYnkgXCI9XCJcbiAqICAqIEZvbGxvd2VkIGJ5IHplcm8gb3IgbW9yZSBzcGFjZSBjaGFyYWN0ZXJzXG4gKiAgKiBGb2xsb3dlZCBieTpcbiAqICAgICogQW55IGNoYXJhY3RlciBleGNlcHQgc3BhY2UsICgnKSwgKFwiKSwgXCI8XCIsIFwiPlwiLCBcIj1cIiwgKGApLCBvclxuICogICAgKiAoXCIpIHRoZW4gYW55IG5vbi0oXCIpLCBvclxuICogICAgKiAoJykgdGhlbiBhbnkgbm9uLSgnKVxuICovXG5leHBvcnQgY29uc3QgbGFzdEF0dHJpYnV0ZU5hbWVSZWdleCA9IFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbi8oWyBcXHgwOVxceDBhXFx4MGNcXHgwZF0pKFteXFwwLVxceDFGXFx4N0YtXFx4OUYgXCInPj0vXSspKFsgXFx4MDlcXHgwYVxceDBjXFx4MGRdKj1bIFxceDA5XFx4MGFcXHgwY1xceDBkXSooPzpbXiBcXHgwOVxceDBhXFx4MGNcXHgwZFwiJ2A8Pj1dKnxcIlteXCJdKnwnW14nXSopKSQvO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGVtcGxhdGUuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKiBAbW9kdWxlIHNoYWR5LXJlbmRlclxuICovXG5pbXBvcnQgeyBpc1RlbXBsYXRlUGFydEFjdGl2ZSB9IGZyb20gJy4vdGVtcGxhdGUuanMnO1xuY29uc3Qgd2Fsa2VyTm9kZUZpbHRlciA9IDEzMyAvKiBOb2RlRmlsdGVyLlNIT1dfe0VMRU1FTlR8Q09NTUVOVHxURVhUfSAqLztcbi8qKlxuICogUmVtb3ZlcyB0aGUgbGlzdCBvZiBub2RlcyBmcm9tIGEgVGVtcGxhdGUgc2FmZWx5LiBJbiBhZGRpdGlvbiB0byByZW1vdmluZ1xuICogbm9kZXMgZnJvbSB0aGUgVGVtcGxhdGUsIHRoZSBUZW1wbGF0ZSBwYXJ0IGluZGljZXMgYXJlIHVwZGF0ZWQgdG8gbWF0Y2hcbiAqIHRoZSBtdXRhdGVkIFRlbXBsYXRlIERPTS5cbiAqXG4gKiBBcyB0aGUgdGVtcGxhdGUgaXMgd2Fsa2VkIHRoZSByZW1vdmFsIHN0YXRlIGlzIHRyYWNrZWQgYW5kXG4gKiBwYXJ0IGluZGljZXMgYXJlIGFkanVzdGVkIGFzIG5lZWRlZC5cbiAqXG4gKiBkaXZcbiAqICAgZGl2IzEgKHJlbW92ZSkgPC0tIHN0YXJ0IHJlbW92aW5nIChyZW1vdmluZyBub2RlIGlzIGRpdiMxKVxuICogICAgIGRpdlxuICogICAgICAgZGl2IzIgKHJlbW92ZSkgIDwtLSBjb250aW51ZSByZW1vdmluZyAocmVtb3Zpbmcgbm9kZSBpcyBzdGlsbCBkaXYjMSlcbiAqICAgICAgICAgZGl2XG4gKiBkaXYgPC0tIHN0b3AgcmVtb3Zpbmcgc2luY2UgcHJldmlvdXMgc2libGluZyBpcyB0aGUgcmVtb3Zpbmcgbm9kZSAoZGl2IzEsXG4gKiByZW1vdmVkIDQgbm9kZXMpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVOb2Rlc0Zyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgbm9kZXNUb1JlbW92ZSkge1xuICAgIGNvbnN0IHsgZWxlbWVudDogeyBjb250ZW50IH0sIHBhcnRzIH0gPSB0ZW1wbGF0ZTtcbiAgICBjb25zdCB3YWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKGNvbnRlbnQsIHdhbGtlck5vZGVGaWx0ZXIsIG51bGwsIGZhbHNlKTtcbiAgICBsZXQgcGFydEluZGV4ID0gbmV4dEFjdGl2ZUluZGV4SW5UZW1wbGF0ZVBhcnRzKHBhcnRzKTtcbiAgICBsZXQgcGFydCA9IHBhcnRzW3BhcnRJbmRleF07XG4gICAgbGV0IG5vZGVJbmRleCA9IC0xO1xuICAgIGxldCByZW1vdmVDb3VudCA9IDA7XG4gICAgY29uc3Qgbm9kZXNUb1JlbW92ZUluVGVtcGxhdGUgPSBbXTtcbiAgICBsZXQgY3VycmVudFJlbW92aW5nTm9kZSA9IG51bGw7XG4gICAgd2hpbGUgKHdhbGtlci5uZXh0Tm9kZSgpKSB7XG4gICAgICAgIG5vZGVJbmRleCsrO1xuICAgICAgICBjb25zdCBub2RlID0gd2Fsa2VyLmN1cnJlbnROb2RlO1xuICAgICAgICAvLyBFbmQgcmVtb3ZhbCBpZiBzdGVwcGVkIHBhc3QgdGhlIHJlbW92aW5nIG5vZGVcbiAgICAgICAgaWYgKG5vZGUucHJldmlvdXNTaWJsaW5nID09PSBjdXJyZW50UmVtb3ZpbmdOb2RlKSB7XG4gICAgICAgICAgICBjdXJyZW50UmVtb3ZpbmdOb2RlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBBIG5vZGUgdG8gcmVtb3ZlIHdhcyBmb3VuZCBpbiB0aGUgdGVtcGxhdGVcbiAgICAgICAgaWYgKG5vZGVzVG9SZW1vdmUuaGFzKG5vZGUpKSB7XG4gICAgICAgICAgICBub2Rlc1RvUmVtb3ZlSW5UZW1wbGF0ZS5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgLy8gVHJhY2sgbm9kZSB3ZSdyZSByZW1vdmluZ1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRSZW1vdmluZ05vZGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UmVtb3ZpbmdOb2RlID0gbm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBXaGVuIHJlbW92aW5nLCBpbmNyZW1lbnQgY291bnQgYnkgd2hpY2ggdG8gYWRqdXN0IHN1YnNlcXVlbnQgcGFydCBpbmRpY2VzXG4gICAgICAgIGlmIChjdXJyZW50UmVtb3ZpbmdOb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZW1vdmVDb3VudCsrO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChwYXJ0ICE9PSB1bmRlZmluZWQgJiYgcGFydC5pbmRleCA9PT0gbm9kZUluZGV4KSB7XG4gICAgICAgICAgICAvLyBJZiBwYXJ0IGlzIGluIGEgcmVtb3ZlZCBub2RlIGRlYWN0aXZhdGUgaXQgYnkgc2V0dGluZyBpbmRleCB0byAtMSBvclxuICAgICAgICAgICAgLy8gYWRqdXN0IHRoZSBpbmRleCBhcyBuZWVkZWQuXG4gICAgICAgICAgICBwYXJ0LmluZGV4ID0gY3VycmVudFJlbW92aW5nTm9kZSAhPT0gbnVsbCA/IC0xIDogcGFydC5pbmRleCAtIHJlbW92ZUNvdW50O1xuICAgICAgICAgICAgLy8gZ28gdG8gdGhlIG5leHQgYWN0aXZlIHBhcnQuXG4gICAgICAgICAgICBwYXJ0SW5kZXggPSBuZXh0QWN0aXZlSW5kZXhJblRlbXBsYXRlUGFydHMocGFydHMsIHBhcnRJbmRleCk7XG4gICAgICAgICAgICBwYXJ0ID0gcGFydHNbcGFydEluZGV4XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBub2Rlc1RvUmVtb3ZlSW5UZW1wbGF0ZS5mb3JFYWNoKChuKSA9PiBuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobikpO1xufVxuY29uc3QgY291bnROb2RlcyA9IChub2RlKSA9PiB7XG4gICAgbGV0IGNvdW50ID0gKG5vZGUubm9kZVR5cGUgPT09IDExIC8qIE5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERSAqLykgPyAwIDogMTtcbiAgICBjb25zdCB3YWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKG5vZGUsIHdhbGtlck5vZGVGaWx0ZXIsIG51bGwsIGZhbHNlKTtcbiAgICB3aGlsZSAod2Fsa2VyLm5leHROb2RlKCkpIHtcbiAgICAgICAgY291bnQrKztcbiAgICB9XG4gICAgcmV0dXJuIGNvdW50O1xufTtcbmNvbnN0IG5leHRBY3RpdmVJbmRleEluVGVtcGxhdGVQYXJ0cyA9IChwYXJ0cywgc3RhcnRJbmRleCA9IC0xKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0SW5kZXggKyAxOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcGFydCA9IHBhcnRzW2ldO1xuICAgICAgICBpZiAoaXNUZW1wbGF0ZVBhcnRBY3RpdmUocGFydCkpIHtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn07XG4vKipcbiAqIEluc2VydHMgdGhlIGdpdmVuIG5vZGUgaW50byB0aGUgVGVtcGxhdGUsIG9wdGlvbmFsbHkgYmVmb3JlIHRoZSBnaXZlblxuICogcmVmTm9kZS4gSW4gYWRkaXRpb24gdG8gaW5zZXJ0aW5nIHRoZSBub2RlIGludG8gdGhlIFRlbXBsYXRlLCB0aGUgVGVtcGxhdGVcbiAqIHBhcnQgaW5kaWNlcyBhcmUgdXBkYXRlZCB0byBtYXRjaCB0aGUgbXV0YXRlZCBUZW1wbGF0ZSBET00uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnROb2RlSW50b1RlbXBsYXRlKHRlbXBsYXRlLCBub2RlLCByZWZOb2RlID0gbnVsbCkge1xuICAgIGNvbnN0IHsgZWxlbWVudDogeyBjb250ZW50IH0sIHBhcnRzIH0gPSB0ZW1wbGF0ZTtcbiAgICAvLyBJZiB0aGVyZSdzIG5vIHJlZk5vZGUsIHRoZW4gcHV0IG5vZGUgYXQgZW5kIG9mIHRlbXBsYXRlLlxuICAgIC8vIE5vIHBhcnQgaW5kaWNlcyBuZWVkIHRvIGJlIHNoaWZ0ZWQgaW4gdGhpcyBjYXNlLlxuICAgIGlmIChyZWZOb2RlID09PSBudWxsIHx8IHJlZk5vZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHdhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIoY29udGVudCwgd2Fsa2VyTm9kZUZpbHRlciwgbnVsbCwgZmFsc2UpO1xuICAgIGxldCBwYXJ0SW5kZXggPSBuZXh0QWN0aXZlSW5kZXhJblRlbXBsYXRlUGFydHMocGFydHMpO1xuICAgIGxldCBpbnNlcnRDb3VudCA9IDA7XG4gICAgbGV0IHdhbGtlckluZGV4ID0gLTE7XG4gICAgd2hpbGUgKHdhbGtlci5uZXh0Tm9kZSgpKSB7XG4gICAgICAgIHdhbGtlckluZGV4Kys7XG4gICAgICAgIGNvbnN0IHdhbGtlck5vZGUgPSB3YWxrZXIuY3VycmVudE5vZGU7XG4gICAgICAgIGlmICh3YWxrZXJOb2RlID09PSByZWZOb2RlKSB7XG4gICAgICAgICAgICBpbnNlcnRDb3VudCA9IGNvdW50Tm9kZXMobm9kZSk7XG4gICAgICAgICAgICByZWZOb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIHJlZk5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChwYXJ0SW5kZXggIT09IC0xICYmIHBhcnRzW3BhcnRJbmRleF0uaW5kZXggPT09IHdhbGtlckluZGV4KSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSd2ZSBpbnNlcnRlZCB0aGUgbm9kZSwgc2ltcGx5IGFkanVzdCBhbGwgc3Vic2VxdWVudCBwYXJ0c1xuICAgICAgICAgICAgaWYgKGluc2VydENvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgIHdoaWxlIChwYXJ0SW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnRzW3BhcnRJbmRleF0uaW5kZXggKz0gaW5zZXJ0Q291bnQ7XG4gICAgICAgICAgICAgICAgICAgIHBhcnRJbmRleCA9IG5leHRBY3RpdmVJbmRleEluVGVtcGxhdGVQYXJ0cyhwYXJ0cywgcGFydEluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFydEluZGV4ID0gbmV4dEFjdGl2ZUluZGV4SW5UZW1wbGF0ZVBhcnRzKHBhcnRzLCBwYXJ0SW5kZXgpO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW9kaWZ5LXRlbXBsYXRlLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbmNvbnN0IGRpcmVjdGl2ZXMgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBCcmFuZHMgYSBmdW5jdGlvbiBhcyBhIGRpcmVjdGl2ZSBmYWN0b3J5IGZ1bmN0aW9uIHNvIHRoYXQgbGl0LWh0bWwgd2lsbCBjYWxsXG4gKiB0aGUgZnVuY3Rpb24gZHVyaW5nIHRlbXBsYXRlIHJlbmRlcmluZywgcmF0aGVyIHRoYW4gcGFzc2luZyBhcyBhIHZhbHVlLlxuICpcbiAqIEEgX2RpcmVjdGl2ZV8gaXMgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgUGFydCBhcyBhbiBhcmd1bWVudC4gSXQgaGFzIHRoZVxuICogc2lnbmF0dXJlOiBgKHBhcnQ6IFBhcnQpID0+IHZvaWRgLlxuICpcbiAqIEEgZGlyZWN0aXZlIF9mYWN0b3J5XyBpcyBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYXJndW1lbnRzIGZvciBkYXRhIGFuZFxuICogY29uZmlndXJhdGlvbiBhbmQgcmV0dXJucyBhIGRpcmVjdGl2ZS4gVXNlcnMgb2YgZGlyZWN0aXZlIHVzdWFsbHkgcmVmZXIgdG9cbiAqIHRoZSBkaXJlY3RpdmUgZmFjdG9yeSBhcyB0aGUgZGlyZWN0aXZlLiBGb3IgZXhhbXBsZSwgXCJUaGUgcmVwZWF0IGRpcmVjdGl2ZVwiLlxuICpcbiAqIFVzdWFsbHkgYSB0ZW1wbGF0ZSBhdXRob3Igd2lsbCBpbnZva2UgYSBkaXJlY3RpdmUgZmFjdG9yeSBpbiB0aGVpciB0ZW1wbGF0ZVxuICogd2l0aCByZWxldmFudCBhcmd1bWVudHMsIHdoaWNoIHdpbGwgdGhlbiByZXR1cm4gYSBkaXJlY3RpdmUgZnVuY3Rpb24uXG4gKlxuICogSGVyZSdzIGFuIGV4YW1wbGUgb2YgdXNpbmcgdGhlIGByZXBlYXQoKWAgZGlyZWN0aXZlIGZhY3RvcnkgdGhhdCB0YWtlcyBhblxuICogYXJyYXkgYW5kIGEgZnVuY3Rpb24gdG8gcmVuZGVyIGFuIGl0ZW06XG4gKlxuICogYGBganNcbiAqIGh0bWxgPHVsPjwke3JlcGVhdChpdGVtcywgKGl0ZW0pID0+IGh0bWxgPGxpPiR7aXRlbX08L2xpPmApfTwvdWw+YFxuICogYGBgXG4gKlxuICogV2hlbiBgcmVwZWF0YCBpcyBpbnZva2VkLCBpdCByZXR1cm5zIGEgZGlyZWN0aXZlIGZ1bmN0aW9uIHRoYXQgY2xvc2VzIG92ZXJcbiAqIGBpdGVtc2AgYW5kIHRoZSB0ZW1wbGF0ZSBmdW5jdGlvbi4gV2hlbiB0aGUgb3V0ZXIgdGVtcGxhdGUgaXMgcmVuZGVyZWQsIHRoZVxuICogcmV0dXJuIGRpcmVjdGl2ZSBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCB0aGUgUGFydCBmb3IgdGhlIGV4cHJlc3Npb24uXG4gKiBgcmVwZWF0YCB0aGVuIHBlcmZvcm1zIGl0J3MgY3VzdG9tIGxvZ2ljIHRvIHJlbmRlciBtdWx0aXBsZSBpdGVtcy5cbiAqXG4gKiBAcGFyYW0gZiBUaGUgZGlyZWN0aXZlIGZhY3RvcnkgZnVuY3Rpb24uIE11c3QgYmUgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYVxuICogZnVuY3Rpb24gb2YgdGhlIHNpZ25hdHVyZSBgKHBhcnQ6IFBhcnQpID0+IHZvaWRgLiBUaGUgcmV0dXJuZWQgZnVuY3Rpb24gd2lsbFxuICogYmUgY2FsbGVkIHdpdGggdGhlIHBhcnQgb2JqZWN0LlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogaW1wb3J0IHtkaXJlY3RpdmUsIGh0bWx9IGZyb20gJ2xpdC1odG1sJztcbiAqXG4gKiBjb25zdCBpbW11dGFibGUgPSBkaXJlY3RpdmUoKHYpID0+IChwYXJ0KSA9PiB7XG4gKiAgIGlmIChwYXJ0LnZhbHVlICE9PSB2KSB7XG4gKiAgICAgcGFydC5zZXRWYWx1ZSh2KVxuICogICB9XG4gKiB9KTtcbiAqL1xuZXhwb3J0IGNvbnN0IGRpcmVjdGl2ZSA9IChmKSA9PiAoKC4uLmFyZ3MpID0+IHtcbiAgICBjb25zdCBkID0gZiguLi5hcmdzKTtcbiAgICBkaXJlY3RpdmVzLnNldChkLCB0cnVlKTtcbiAgICByZXR1cm4gZDtcbn0pO1xuZXhwb3J0IGNvbnN0IGlzRGlyZWN0aXZlID0gKG8pID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIG8gPT09ICdmdW5jdGlvbicgJiYgZGlyZWN0aXZlcy5oYXMobyk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlyZWN0aXZlLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICogQSBzZW50aW5lbCB2YWx1ZSB0aGF0IHNpZ25hbHMgdGhhdCBhIHZhbHVlIHdhcyBoYW5kbGVkIGJ5IGEgZGlyZWN0aXZlIGFuZFxuICogc2hvdWxkIG5vdCBiZSB3cml0dGVuIHRvIHRoZSBET00uXG4gKi9cbmV4cG9ydCBjb25zdCBub0NoYW5nZSA9IHt9O1xuLyoqXG4gKiBBIHNlbnRpbmVsIHZhbHVlIHRoYXQgc2lnbmFscyBhIE5vZGVQYXJ0IHRvIGZ1bGx5IGNsZWFyIGl0cyBjb250ZW50LlxuICovXG5leHBvcnQgY29uc3Qgbm90aGluZyA9IHt9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFydC5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIEBtb2R1bGUgbGl0LWh0bWxcbiAqL1xuaW1wb3J0IHsgaXNDRVBvbHlmaWxsIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgaXNUZW1wbGF0ZVBhcnRBY3RpdmUgfSBmcm9tICcuL3RlbXBsYXRlLmpzJztcbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgYSBgVGVtcGxhdGVgIHRoYXQgY2FuIGJlIGF0dGFjaGVkIHRvIHRoZSBET00gYW5kIHVwZGF0ZWRcbiAqIHdpdGggbmV3IHZhbHVlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFRlbXBsYXRlSW5zdGFuY2Uge1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlLCBwcm9jZXNzb3IsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fX3BhcnRzID0gW107XG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICAgICAgdGhpcy5wcm9jZXNzb3IgPSBwcm9jZXNzb3I7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgfVxuICAgIHVwZGF0ZSh2YWx1ZXMpIHtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgdGhpcy5fX3BhcnRzKSB7XG4gICAgICAgICAgICBpZiAocGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcGFydC5zZXRWYWx1ZSh2YWx1ZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiB0aGlzLl9fcGFydHMpIHtcbiAgICAgICAgICAgIGlmIChwYXJ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwYXJ0LmNvbW1pdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIF9jbG9uZSgpIHtcbiAgICAgICAgLy8gVGhlcmUgYXJlIGEgbnVtYmVyIG9mIHN0ZXBzIGluIHRoZSBsaWZlY3ljbGUgb2YgYSB0ZW1wbGF0ZSBpbnN0YW5jZSdzXG4gICAgICAgIC8vIERPTSBmcmFnbWVudDpcbiAgICAgICAgLy8gIDEuIENsb25lIC0gY3JlYXRlIHRoZSBpbnN0YW5jZSBmcmFnbWVudFxuICAgICAgICAvLyAgMi4gQWRvcHQgLSBhZG9wdCBpbnRvIHRoZSBtYWluIGRvY3VtZW50XG4gICAgICAgIC8vICAzLiBQcm9jZXNzIC0gZmluZCBwYXJ0IG1hcmtlcnMgYW5kIGNyZWF0ZSBwYXJ0c1xuICAgICAgICAvLyAgNC4gVXBncmFkZSAtIHVwZ3JhZGUgY3VzdG9tIGVsZW1lbnRzXG4gICAgICAgIC8vICA1LiBVcGRhdGUgLSBzZXQgbm9kZSwgYXR0cmlidXRlLCBwcm9wZXJ0eSwgZXRjLiwgdmFsdWVzXG4gICAgICAgIC8vICA2LiBDb25uZWN0IC0gY29ubmVjdCB0byB0aGUgZG9jdW1lbnQuIE9wdGlvbmFsIGFuZCBvdXRzaWRlIG9mIHRoaXNcbiAgICAgICAgLy8gICAgIG1ldGhvZC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gV2UgaGF2ZSBhIGZldyBjb25zdHJhaW50cyBvbiB0aGUgb3JkZXJpbmcgb2YgdGhlc2Ugc3RlcHM6XG4gICAgICAgIC8vICAqIFdlIG5lZWQgdG8gdXBncmFkZSBiZWZvcmUgdXBkYXRpbmcsIHNvIHRoYXQgcHJvcGVydHkgdmFsdWVzIHdpbGwgcGFzc1xuICAgICAgICAvLyAgICB0aHJvdWdoIGFueSBwcm9wZXJ0eSBzZXR0ZXJzLlxuICAgICAgICAvLyAgKiBXZSB3b3VsZCBsaWtlIHRvIHByb2Nlc3MgYmVmb3JlIHVwZ3JhZGluZyBzbyB0aGF0IHdlJ3JlIHN1cmUgdGhhdCB0aGVcbiAgICAgICAgLy8gICAgY2xvbmVkIGZyYWdtZW50IGlzIGluZXJ0IGFuZCBub3QgZGlzdHVyYmVkIGJ5IHNlbGYtbW9kaWZ5aW5nIERPTS5cbiAgICAgICAgLy8gICogV2Ugd2FudCBjdXN0b20gZWxlbWVudHMgdG8gdXBncmFkZSBldmVuIGluIGRpc2Nvbm5lY3RlZCBmcmFnbWVudHMuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEdpdmVuIHRoZXNlIGNvbnN0cmFpbnRzLCB3aXRoIGZ1bGwgY3VzdG9tIGVsZW1lbnRzIHN1cHBvcnQgd2Ugd291bGRcbiAgICAgICAgLy8gcHJlZmVyIHRoZSBvcmRlcjogQ2xvbmUsIFByb2Nlc3MsIEFkb3B0LCBVcGdyYWRlLCBVcGRhdGUsIENvbm5lY3RcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQnV0IFNhZmFyaSBkb2VzIG5vdCBpbXBsZW1lbnQgQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5I3VwZ3JhZGUsIHNvIHdlXG4gICAgICAgIC8vIGNhbiBub3QgaW1wbGVtZW50IHRoYXQgb3JkZXIgYW5kIHN0aWxsIGhhdmUgdXBncmFkZS1iZWZvcmUtdXBkYXRlIGFuZFxuICAgICAgICAvLyB1cGdyYWRlIGRpc2Nvbm5lY3RlZCBmcmFnbWVudHMuIFNvIHdlIGluc3RlYWQgc2FjcmlmaWNlIHRoZVxuICAgICAgICAvLyBwcm9jZXNzLWJlZm9yZS11cGdyYWRlIGNvbnN0cmFpbnQsIHNpbmNlIGluIEN1c3RvbSBFbGVtZW50cyB2MSBlbGVtZW50c1xuICAgICAgICAvLyBtdXN0IG5vdCBtb2RpZnkgdGhlaXIgbGlnaHQgRE9NIGluIHRoZSBjb25zdHJ1Y3Rvci4gV2Ugc3RpbGwgaGF2ZSBpc3N1ZXNcbiAgICAgICAgLy8gd2hlbiBjby1leGlzdGluZyB3aXRoIENFdjAgZWxlbWVudHMgbGlrZSBQb2x5bWVyIDEsIGFuZCB3aXRoIHBvbHlmaWxsc1xuICAgICAgICAvLyB0aGF0IGRvbid0IHN0cmljdGx5IGFkaGVyZSB0byB0aGUgbm8tbW9kaWZpY2F0aW9uIHJ1bGUgYmVjYXVzZSBzaGFkb3dcbiAgICAgICAgLy8gRE9NLCB3aGljaCBtYXkgYmUgY3JlYXRlZCBpbiB0aGUgY29uc3RydWN0b3IsIGlzIGVtdWxhdGVkIGJ5IGJlaW5nIHBsYWNlZFxuICAgICAgICAvLyBpbiB0aGUgbGlnaHQgRE9NLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgcmVzdWx0aW5nIG9yZGVyIGlzIG9uIG5hdGl2ZSBpczogQ2xvbmUsIEFkb3B0LCBVcGdyYWRlLCBQcm9jZXNzLFxuICAgICAgICAvLyBVcGRhdGUsIENvbm5lY3QuIGRvY3VtZW50LmltcG9ydE5vZGUoKSBwZXJmb3JtcyBDbG9uZSwgQWRvcHQsIGFuZCBVcGdyYWRlXG4gICAgICAgIC8vIGluIG9uZSBzdGVwLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgQ3VzdG9tIEVsZW1lbnRzIHYxIHBvbHlmaWxsIHN1cHBvcnRzIHVwZ3JhZGUoKSwgc28gdGhlIG9yZGVyIHdoZW5cbiAgICAgICAgLy8gcG9seWZpbGxlZCBpcyB0aGUgbW9yZSBpZGVhbDogQ2xvbmUsIFByb2Nlc3MsIEFkb3B0LCBVcGdyYWRlLCBVcGRhdGUsXG4gICAgICAgIC8vIENvbm5lY3QuXG4gICAgICAgIGNvbnN0IGZyYWdtZW50ID0gaXNDRVBvbHlmaWxsID9cbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGUuZWxlbWVudC5jb250ZW50LmNsb25lTm9kZSh0cnVlKSA6XG4gICAgICAgICAgICBkb2N1bWVudC5pbXBvcnROb2RlKHRoaXMudGVtcGxhdGUuZWxlbWVudC5jb250ZW50LCB0cnVlKTtcbiAgICAgICAgY29uc3Qgc3RhY2sgPSBbXTtcbiAgICAgICAgY29uc3QgcGFydHMgPSB0aGlzLnRlbXBsYXRlLnBhcnRzO1xuICAgICAgICAvLyBFZGdlIG5lZWRzIGFsbCA0IHBhcmFtZXRlcnMgcHJlc2VudDsgSUUxMSBuZWVkcyAzcmQgcGFyYW1ldGVyIHRvIGJlIG51bGxcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihmcmFnbWVudCwgMTMzIC8qIE5vZGVGaWx0ZXIuU0hPV197RUxFTUVOVHxDT01NRU5UfFRFWFR9ICovLCBudWxsLCBmYWxzZSk7XG4gICAgICAgIGxldCBwYXJ0SW5kZXggPSAwO1xuICAgICAgICBsZXQgbm9kZUluZGV4ID0gMDtcbiAgICAgICAgbGV0IHBhcnQ7XG4gICAgICAgIGxldCBub2RlID0gd2Fsa2VyLm5leHROb2RlKCk7XG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgdGhlIG5vZGVzIGFuZCBwYXJ0cyBvZiBhIHRlbXBsYXRlXG4gICAgICAgIHdoaWxlIChwYXJ0SW5kZXggPCBwYXJ0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHBhcnQgPSBwYXJ0c1twYXJ0SW5kZXhdO1xuICAgICAgICAgICAgaWYgKCFpc1RlbXBsYXRlUGFydEFjdGl2ZShwYXJ0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX19wYXJ0cy5wdXNoKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgcGFydEluZGV4Kys7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQcm9ncmVzcyB0aGUgdHJlZSB3YWxrZXIgdW50aWwgd2UgZmluZCBvdXIgbmV4dCBwYXJ0J3Mgbm9kZS5cbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBtdWx0aXBsZSBwYXJ0cyBtYXkgc2hhcmUgdGhlIHNhbWUgbm9kZSAoYXR0cmlidXRlIHBhcnRzXG4gICAgICAgICAgICAvLyBvbiBhIHNpbmdsZSBlbGVtZW50KSwgc28gdGhpcyBsb29wIG1heSBub3QgcnVuIGF0IGFsbC5cbiAgICAgICAgICAgIHdoaWxlIChub2RlSW5kZXggPCBwYXJ0LmluZGV4KSB7XG4gICAgICAgICAgICAgICAgbm9kZUluZGV4Kys7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT09ICdURU1QTEFURScpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gbm9kZS5jb250ZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKSkgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UndmUgZXhoYXVzdGVkIHRoZSBjb250ZW50IGluc2lkZSBhIG5lc3RlZCB0ZW1wbGF0ZSBlbGVtZW50LlxuICAgICAgICAgICAgICAgICAgICAvLyBCZWNhdXNlIHdlIHN0aWxsIGhhdmUgcGFydHMgKHRoZSBvdXRlciBmb3ItbG9vcCksIHdlIGtub3c6XG4gICAgICAgICAgICAgICAgICAgIC8vIC0gVGhlcmUgaXMgYSB0ZW1wbGF0ZSBpbiB0aGUgc3RhY2tcbiAgICAgICAgICAgICAgICAgICAgLy8gLSBUaGUgd2Fsa2VyIHdpbGwgZmluZCBhIG5leHROb2RlIG91dHNpZGUgdGhlIHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBub2RlID0gd2Fsa2VyLm5leHROb2RlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gV2UndmUgYXJyaXZlZCBhdCBvdXIgcGFydCdzIG5vZGUuXG4gICAgICAgICAgICBpZiAocGFydC50eXBlID09PSAnbm9kZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0ID0gdGhpcy5wcm9jZXNzb3IuaGFuZGxlVGV4dEV4cHJlc3Npb24odGhpcy5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICBwYXJ0Lmluc2VydEFmdGVyTm9kZShub2RlLnByZXZpb3VzU2libGluZyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fX3BhcnRzLnB1c2gocGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fcGFydHMucHVzaCguLi50aGlzLnByb2Nlc3Nvci5oYW5kbGVBdHRyaWJ1dGVFeHByZXNzaW9ucyhub2RlLCBwYXJ0Lm5hbWUsIHBhcnQuc3RyaW5ncywgdGhpcy5vcHRpb25zKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJ0SW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNDRVBvbHlmaWxsKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5hZG9wdE5vZGUoZnJhZ21lbnQpO1xuICAgICAgICAgICAgY3VzdG9tRWxlbWVudHMudXBncmFkZShmcmFnbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyYWdtZW50O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRlbXBsYXRlLWluc3RhbmNlLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICogQG1vZHVsZSBsaXQtaHRtbFxuICovXG5pbXBvcnQgeyByZXBhcmVudE5vZGVzIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgYm91bmRBdHRyaWJ1dGVTdWZmaXgsIGxhc3RBdHRyaWJ1dGVOYW1lUmVnZXgsIG1hcmtlciwgbm9kZU1hcmtlciB9IGZyb20gJy4vdGVtcGxhdGUuanMnO1xuY29uc3QgY29tbWVudE1hcmtlciA9IGAgJHttYXJrZXJ9IGA7XG4vKipcbiAqIFRoZSByZXR1cm4gdHlwZSBvZiBgaHRtbGAsIHdoaWNoIGhvbGRzIGEgVGVtcGxhdGUgYW5kIHRoZSB2YWx1ZXMgZnJvbVxuICogaW50ZXJwb2xhdGVkIGV4cHJlc3Npb25zLlxuICovXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVSZXN1bHQge1xuICAgIGNvbnN0cnVjdG9yKHN0cmluZ3MsIHZhbHVlcywgdHlwZSwgcHJvY2Vzc29yKSB7XG4gICAgICAgIHRoaXMuc3RyaW5ncyA9IHN0cmluZ3M7XG4gICAgICAgIHRoaXMudmFsdWVzID0gdmFsdWVzO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnByb2Nlc3NvciA9IHByb2Nlc3NvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHN0cmluZyBvZiBIVE1MIHVzZWQgdG8gY3JlYXRlIGEgYDx0ZW1wbGF0ZT5gIGVsZW1lbnQuXG4gICAgICovXG4gICAgZ2V0SFRNTCgpIHtcbiAgICAgICAgY29uc3QgbCA9IHRoaXMuc3RyaW5ncy5sZW5ndGggLSAxO1xuICAgICAgICBsZXQgaHRtbCA9ICcnO1xuICAgICAgICBsZXQgaXNDb21tZW50QmluZGluZyA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuc3RyaW5nc1tpXTtcbiAgICAgICAgICAgIC8vIEZvciBlYWNoIGJpbmRpbmcgd2Ugd2FudCB0byBkZXRlcm1pbmUgdGhlIGtpbmQgb2YgbWFya2VyIHRvIGluc2VydFxuICAgICAgICAgICAgLy8gaW50byB0aGUgdGVtcGxhdGUgc291cmNlIGJlZm9yZSBpdCdzIHBhcnNlZCBieSB0aGUgYnJvd3NlcidzIEhUTUxcbiAgICAgICAgICAgIC8vIHBhcnNlci4gVGhlIG1hcmtlciB0eXBlIGlzIGJhc2VkIG9uIHdoZXRoZXIgdGhlIGV4cHJlc3Npb24gaXMgaW4gYW5cbiAgICAgICAgICAgIC8vIGF0dHJpYnV0ZSwgdGV4dCwgb3IgY29tbWVudCBwb3NpdGlvbi5cbiAgICAgICAgICAgIC8vICAgKiBGb3Igbm9kZS1wb3NpdGlvbiBiaW5kaW5ncyB3ZSBpbnNlcnQgYSBjb21tZW50IHdpdGggdGhlIG1hcmtlclxuICAgICAgICAgICAgLy8gICAgIHNlbnRpbmVsIGFzIGl0cyB0ZXh0IGNvbnRlbnQsIGxpa2UgPCEtLXt7bGl0LWd1aWR9fS0tPi5cbiAgICAgICAgICAgIC8vICAgKiBGb3IgYXR0cmlidXRlIGJpbmRpbmdzIHdlIGluc2VydCBqdXN0IHRoZSBtYXJrZXIgc2VudGluZWwgZm9yIHRoZVxuICAgICAgICAgICAgLy8gICAgIGZpcnN0IGJpbmRpbmcsIHNvIHRoYXQgd2Ugc3VwcG9ydCB1bnF1b3RlZCBhdHRyaWJ1dGUgYmluZGluZ3MuXG4gICAgICAgICAgICAvLyAgICAgU3Vic2VxdWVudCBiaW5kaW5ncyBjYW4gdXNlIGEgY29tbWVudCBtYXJrZXIgYmVjYXVzZSBtdWx0aS1iaW5kaW5nXG4gICAgICAgICAgICAvLyAgICAgYXR0cmlidXRlcyBtdXN0IGJlIHF1b3RlZC5cbiAgICAgICAgICAgIC8vICAgKiBGb3IgY29tbWVudCBiaW5kaW5ncyB3ZSBpbnNlcnQganVzdCB0aGUgbWFya2VyIHNlbnRpbmVsIHNvIHdlIGRvbid0XG4gICAgICAgICAgICAvLyAgICAgY2xvc2UgdGhlIGNvbW1lbnQuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBjb2RlIHNjYW5zIHRoZSB0ZW1wbGF0ZSBzb3VyY2UsIGJ1dCBpcyAqbm90KiBhbiBIVE1MXG4gICAgICAgICAgICAvLyBwYXJzZXIuIFdlIGRvbid0IG5lZWQgdG8gdHJhY2sgdGhlIHRyZWUgc3RydWN0dXJlIG9mIHRoZSBIVE1MLCBvbmx5XG4gICAgICAgICAgICAvLyB3aGV0aGVyIGEgYmluZGluZyBpcyBpbnNpZGUgYSBjb21tZW50LCBhbmQgaWYgbm90LCBpZiBpdCBhcHBlYXJzIHRvIGJlXG4gICAgICAgICAgICAvLyB0aGUgZmlyc3QgYmluZGluZyBpbiBhbiBhdHRyaWJ1dGUuXG4gICAgICAgICAgICBjb25zdCBjb21tZW50T3BlbiA9IHMubGFzdEluZGV4T2YoJzwhLS0nKTtcbiAgICAgICAgICAgIC8vIFdlJ3JlIGluIGNvbW1lbnQgcG9zaXRpb24gaWYgd2UgaGF2ZSBhIGNvbW1lbnQgb3BlbiB3aXRoIG5vIGZvbGxvd2luZ1xuICAgICAgICAgICAgLy8gY29tbWVudCBjbG9zZS4gQmVjYXVzZSA8LS0gY2FuIGFwcGVhciBpbiBhbiBhdHRyaWJ1dGUgdmFsdWUgdGhlcmUgY2FuXG4gICAgICAgICAgICAvLyBiZSBmYWxzZSBwb3NpdGl2ZXMuXG4gICAgICAgICAgICBpc0NvbW1lbnRCaW5kaW5nID0gKGNvbW1lbnRPcGVuID4gLTEgfHwgaXNDb21tZW50QmluZGluZykgJiZcbiAgICAgICAgICAgICAgICBzLmluZGV4T2YoJy0tPicsIGNvbW1lbnRPcGVuICsgMSkgPT09IC0xO1xuICAgICAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgYW4gYXR0cmlidXRlLWxpa2Ugc2VxdWVuY2UgcHJlY2VkaW5nIHRoZVxuICAgICAgICAgICAgLy8gZXhwcmVzc2lvbi4gVGhpcyBjYW4gbWF0Y2ggXCJuYW1lPXZhbHVlXCIgbGlrZSBzdHJ1Y3R1cmVzIGluIHRleHQsXG4gICAgICAgICAgICAvLyBjb21tZW50cywgYW5kIGF0dHJpYnV0ZSB2YWx1ZXMsIHNvIHRoZXJlIGNhbiBiZSBmYWxzZS1wb3NpdGl2ZXMuXG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVNYXRjaCA9IGxhc3RBdHRyaWJ1dGVOYW1lUmVnZXguZXhlYyhzKTtcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVNYXRjaCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIFdlJ3JlIG9ubHkgaW4gdGhpcyBicmFuY2ggaWYgd2UgZG9uJ3QgaGF2ZSBhIGF0dHJpYnV0ZS1saWtlXG4gICAgICAgICAgICAgICAgLy8gcHJlY2VkaW5nIHNlcXVlbmNlLiBGb3IgY29tbWVudHMsIHRoaXMgZ3VhcmRzIGFnYWluc3QgdW51c3VhbFxuICAgICAgICAgICAgICAgIC8vIGF0dHJpYnV0ZSB2YWx1ZXMgbGlrZSA8ZGl2IGZvbz1cIjwhLS0keydiYXInfVwiPi4gQ2FzZXMgbGlrZVxuICAgICAgICAgICAgICAgIC8vIDwhLS0gZm9vPSR7J2Jhcid9LS0+IGFyZSBoYW5kbGVkIGNvcnJlY3RseSBpbiB0aGUgYXR0cmlidXRlIGJyYW5jaFxuICAgICAgICAgICAgICAgIC8vIGJlbG93LlxuICAgICAgICAgICAgICAgIGh0bWwgKz0gcyArIChpc0NvbW1lbnRCaW5kaW5nID8gY29tbWVudE1hcmtlciA6IG5vZGVNYXJrZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRm9yIGF0dHJpYnV0ZXMgd2UgdXNlIGp1c3QgYSBtYXJrZXIgc2VudGluZWwsIGFuZCBhbHNvIGFwcGVuZCBhXG4gICAgICAgICAgICAgICAgLy8gJGxpdCQgc3VmZml4IHRvIHRoZSBuYW1lIHRvIG9wdC1vdXQgb2YgYXR0cmlidXRlLXNwZWNpZmljIHBhcnNpbmdcbiAgICAgICAgICAgICAgICAvLyB0aGF0IElFIGFuZCBFZGdlIGRvIGZvciBzdHlsZSBhbmQgY2VydGFpbiBTVkcgYXR0cmlidXRlcy5cbiAgICAgICAgICAgICAgICBodG1sICs9IHMuc3Vic3RyKDAsIGF0dHJpYnV0ZU1hdGNoLmluZGV4KSArIGF0dHJpYnV0ZU1hdGNoWzFdICtcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlTWF0Y2hbMl0gKyBib3VuZEF0dHJpYnV0ZVN1ZmZpeCArIGF0dHJpYnV0ZU1hdGNoWzNdICtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGh0bWwgKz0gdGhpcy5zdHJpbmdzW2xdO1xuICAgICAgICByZXR1cm4gaHRtbDtcbiAgICB9XG4gICAgZ2V0VGVtcGxhdGVFbGVtZW50KCkge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IHRoaXMuZ2V0SFRNTCgpO1xuICAgICAgICByZXR1cm4gdGVtcGxhdGU7XG4gICAgfVxufVxuLyoqXG4gKiBBIFRlbXBsYXRlUmVzdWx0IGZvciBTVkcgZnJhZ21lbnRzLlxuICpcbiAqIFRoaXMgY2xhc3Mgd3JhcHMgSFRNTCBpbiBhbiBgPHN2Zz5gIHRhZyBpbiBvcmRlciB0byBwYXJzZSBpdHMgY29udGVudHMgaW4gdGhlXG4gKiBTVkcgbmFtZXNwYWNlLCB0aGVuIG1vZGlmaWVzIHRoZSB0ZW1wbGF0ZSB0byByZW1vdmUgdGhlIGA8c3ZnPmAgdGFnIHNvIHRoYXRcbiAqIGNsb25lcyBvbmx5IGNvbnRhaW5lciB0aGUgb3JpZ2luYWwgZnJhZ21lbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBTVkdUZW1wbGF0ZVJlc3VsdCBleHRlbmRzIFRlbXBsYXRlUmVzdWx0IHtcbiAgICBnZXRIVE1MKCkge1xuICAgICAgICByZXR1cm4gYDxzdmc+JHtzdXBlci5nZXRIVE1MKCl9PC9zdmc+YDtcbiAgICB9XG4gICAgZ2V0VGVtcGxhdGVFbGVtZW50KCkge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHN1cGVyLmdldFRlbXBsYXRlRWxlbWVudCgpO1xuICAgICAgICBjb25zdCBjb250ZW50ID0gdGVtcGxhdGUuY29udGVudDtcbiAgICAgICAgY29uc3Qgc3ZnRWxlbWVudCA9IGNvbnRlbnQuZmlyc3RDaGlsZDtcbiAgICAgICAgY29udGVudC5yZW1vdmVDaGlsZChzdmdFbGVtZW50KTtcbiAgICAgICAgcmVwYXJlbnROb2Rlcyhjb250ZW50LCBzdmdFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICByZXR1cm4gdGVtcGxhdGU7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGVtcGxhdGUtcmVzdWx0LmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICogQG1vZHVsZSBsaXQtaHRtbFxuICovXG5pbXBvcnQgeyBpc0RpcmVjdGl2ZSB9IGZyb20gJy4vZGlyZWN0aXZlLmpzJztcbmltcG9ydCB7IHJlbW92ZU5vZGVzIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgbm9DaGFuZ2UsIG5vdGhpbmcgfSBmcm9tICcuL3BhcnQuanMnO1xuaW1wb3J0IHsgVGVtcGxhdGVJbnN0YW5jZSB9IGZyb20gJy4vdGVtcGxhdGUtaW5zdGFuY2UuanMnO1xuaW1wb3J0IHsgVGVtcGxhdGVSZXN1bHQgfSBmcm9tICcuL3RlbXBsYXRlLXJlc3VsdC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVNYXJrZXIgfSBmcm9tICcuL3RlbXBsYXRlLmpzJztcbmV4cG9ydCBjb25zdCBpc1ByaW1pdGl2ZSA9ICh2YWx1ZSkgPT4ge1xuICAgIHJldHVybiAodmFsdWUgPT09IG51bGwgfHxcbiAgICAgICAgISh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykpO1xufTtcbmV4cG9ydCBjb25zdCBpc0l0ZXJhYmxlID0gKHZhbHVlKSA9PiB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpIHx8XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICEhKHZhbHVlICYmIHZhbHVlW1N5bWJvbC5pdGVyYXRvcl0pO1xufTtcbi8qKlxuICogV3JpdGVzIGF0dHJpYnV0ZSB2YWx1ZXMgdG8gdGhlIERPTSBmb3IgYSBncm91cCBvZiBBdHRyaWJ1dGVQYXJ0cyBib3VuZCB0byBhXG4gKiBzaW5nbGUgYXR0cmlidXRlLiBUaGUgdmFsdWUgaXMgb25seSBzZXQgb25jZSBldmVuIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSBwYXJ0c1xuICogZm9yIGFuIGF0dHJpYnV0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEF0dHJpYnV0ZUNvbW1pdHRlciB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgbmFtZSwgc3RyaW5ncykge1xuICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5zdHJpbmdzID0gc3RyaW5ncztcbiAgICAgICAgdGhpcy5wYXJ0cyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnBhcnRzW2ldID0gdGhpcy5fY3JlYXRlUGFydCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzaW5nbGUgcGFydC4gT3ZlcnJpZGUgdGhpcyB0byBjcmVhdGUgYSBkaWZmZXJudCB0eXBlIG9mIHBhcnQuXG4gICAgICovXG4gICAgX2NyZWF0ZVBhcnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0cmlidXRlUGFydCh0aGlzKTtcbiAgICB9XG4gICAgX2dldFZhbHVlKCkge1xuICAgICAgICBjb25zdCBzdHJpbmdzID0gdGhpcy5zdHJpbmdzO1xuICAgICAgICBjb25zdCBsID0gc3RyaW5ncy5sZW5ndGggLSAxO1xuICAgICAgICBsZXQgdGV4dCA9ICcnO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgdGV4dCArPSBzdHJpbmdzW2ldO1xuICAgICAgICAgICAgY29uc3QgcGFydCA9IHRoaXMucGFydHNbaV07XG4gICAgICAgICAgICBpZiAocGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdiA9IHBhcnQudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGlzUHJpbWl0aXZlKHYpIHx8ICFpc0l0ZXJhYmxlKHYpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQgKz0gdHlwZW9mIHYgPT09ICdzdHJpbmcnID8gdiA6IFN0cmluZyh2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiB2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IHR5cGVvZiB0ID09PSAnc3RyaW5nJyA/IHQgOiBTdHJpbmcodCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGV4dCArPSBzdHJpbmdzW2xdO1xuICAgICAgICByZXR1cm4gdGV4dDtcbiAgICB9XG4gICAgY29tbWl0KCkge1xuICAgICAgICBpZiAodGhpcy5kaXJ0eSkge1xuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSh0aGlzLm5hbWUsIHRoaXMuX2dldFZhbHVlKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBBIFBhcnQgdGhhdCBjb250cm9scyBhbGwgb3IgcGFydCBvZiBhbiBhdHRyaWJ1dGUgdmFsdWUuXG4gKi9cbmV4cG9ydCBjbGFzcyBBdHRyaWJ1dGVQYXJ0IHtcbiAgICBjb25zdHJ1Y3Rvcihjb21taXR0ZXIpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jb21taXR0ZXIgPSBjb21taXR0ZXI7XG4gICAgfVxuICAgIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gbm9DaGFuZ2UgJiYgKCFpc1ByaW1pdGl2ZSh2YWx1ZSkgfHwgdmFsdWUgIT09IHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAvLyBJZiB0aGUgdmFsdWUgaXMgYSBub3QgYSBkaXJlY3RpdmUsIGRpcnR5IHRoZSBjb21taXR0ZXIgc28gdGhhdCBpdCdsbFxuICAgICAgICAgICAgLy8gY2FsbCBzZXRBdHRyaWJ1dGUuIElmIHRoZSB2YWx1ZSBpcyBhIGRpcmVjdGl2ZSwgaXQnbGwgZGlydHkgdGhlXG4gICAgICAgICAgICAvLyBjb21taXR0ZXIgaWYgaXQgY2FsbHMgc2V0VmFsdWUoKS5cbiAgICAgICAgICAgIGlmICghaXNEaXJlY3RpdmUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21taXR0ZXIuZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbW1pdCgpIHtcbiAgICAgICAgd2hpbGUgKGlzRGlyZWN0aXZlKHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3RpdmUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5vQ2hhbmdlO1xuICAgICAgICAgICAgZGlyZWN0aXZlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZhbHVlID09PSBub0NoYW5nZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29tbWl0dGVyLmNvbW1pdCgpO1xuICAgIH1cbn1cbi8qKlxuICogQSBQYXJ0IHRoYXQgY29udHJvbHMgYSBsb2NhdGlvbiB3aXRoaW4gYSBOb2RlIHRyZWUuIExpa2UgYSBSYW5nZSwgTm9kZVBhcnRcbiAqIGhhcyBzdGFydCBhbmQgZW5kIGxvY2F0aW9ucyBhbmQgY2FuIHNldCBhbmQgdXBkYXRlIHRoZSBOb2RlcyBiZXR3ZWVuIHRob3NlXG4gKiBsb2NhdGlvbnMuXG4gKlxuICogTm9kZVBhcnRzIHN1cHBvcnQgc2V2ZXJhbCB2YWx1ZSB0eXBlczogcHJpbWl0aXZlcywgTm9kZXMsIFRlbXBsYXRlUmVzdWx0cyxcbiAqIGFzIHdlbGwgYXMgYXJyYXlzIGFuZCBpdGVyYWJsZXMgb2YgdGhvc2UgdHlwZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBOb2RlUGFydCB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBlbmRzIHRoaXMgcGFydCBpbnRvIGEgY29udGFpbmVyLlxuICAgICAqXG4gICAgICogVGhpcyBwYXJ0IG11c3QgYmUgZW1wdHksIGFzIGl0cyBjb250ZW50cyBhcmUgbm90IGF1dG9tYXRpY2FsbHkgbW92ZWQuXG4gICAgICovXG4gICAgYXBwZW5kSW50byhjb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5zdGFydE5vZGUgPSBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlTWFya2VyKCkpO1xuICAgICAgICB0aGlzLmVuZE5vZGUgPSBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlTWFya2VyKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnNlcnRzIHRoaXMgcGFydCBhZnRlciB0aGUgYHJlZmAgbm9kZSAoYmV0d2VlbiBgcmVmYCBhbmQgYHJlZmAncyBuZXh0XG4gICAgICogc2libGluZykuIEJvdGggYHJlZmAgYW5kIGl0cyBuZXh0IHNpYmxpbmcgbXVzdCBiZSBzdGF0aWMsIHVuY2hhbmdpbmcgbm9kZXNcbiAgICAgKiBzdWNoIGFzIHRob3NlIHRoYXQgYXBwZWFyIGluIGEgbGl0ZXJhbCBzZWN0aW9uIG9mIGEgdGVtcGxhdGUuXG4gICAgICpcbiAgICAgKiBUaGlzIHBhcnQgbXVzdCBiZSBlbXB0eSwgYXMgaXRzIGNvbnRlbnRzIGFyZSBub3QgYXV0b21hdGljYWxseSBtb3ZlZC5cbiAgICAgKi9cbiAgICBpbnNlcnRBZnRlck5vZGUocmVmKSB7XG4gICAgICAgIHRoaXMuc3RhcnROb2RlID0gcmVmO1xuICAgICAgICB0aGlzLmVuZE5vZGUgPSByZWYubmV4dFNpYmxpbmc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGVuZHMgdGhpcyBwYXJ0IGludG8gYSBwYXJlbnQgcGFydC5cbiAgICAgKlxuICAgICAqIFRoaXMgcGFydCBtdXN0IGJlIGVtcHR5LCBhcyBpdHMgY29udGVudHMgYXJlIG5vdCBhdXRvbWF0aWNhbGx5IG1vdmVkLlxuICAgICAqL1xuICAgIGFwcGVuZEludG9QYXJ0KHBhcnQpIHtcbiAgICAgICAgcGFydC5fX2luc2VydCh0aGlzLnN0YXJ0Tm9kZSA9IGNyZWF0ZU1hcmtlcigpKTtcbiAgICAgICAgcGFydC5fX2luc2VydCh0aGlzLmVuZE5vZGUgPSBjcmVhdGVNYXJrZXIoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluc2VydHMgdGhpcyBwYXJ0IGFmdGVyIHRoZSBgcmVmYCBwYXJ0LlxuICAgICAqXG4gICAgICogVGhpcyBwYXJ0IG11c3QgYmUgZW1wdHksIGFzIGl0cyBjb250ZW50cyBhcmUgbm90IGF1dG9tYXRpY2FsbHkgbW92ZWQuXG4gICAgICovXG4gICAgaW5zZXJ0QWZ0ZXJQYXJ0KHJlZikge1xuICAgICAgICByZWYuX19pbnNlcnQodGhpcy5zdGFydE5vZGUgPSBjcmVhdGVNYXJrZXIoKSk7XG4gICAgICAgIHRoaXMuZW5kTm9kZSA9IHJlZi5lbmROb2RlO1xuICAgICAgICByZWYuZW5kTm9kZSA9IHRoaXMuc3RhcnROb2RlO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIGNvbW1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnROb2RlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoaXNEaXJlY3RpdmUodGhpcy5fX3BlbmRpbmdWYWx1ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGl2ZSA9IHRoaXMuX19wZW5kaW5nVmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gbm9DaGFuZ2U7XG4gICAgICAgICAgICBkaXJlY3RpdmUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLl9fcGVuZGluZ1ZhbHVlO1xuICAgICAgICBpZiAodmFsdWUgPT09IG5vQ2hhbmdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUHJpbWl0aXZlKHZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX2NvbW1pdFRleHQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgVGVtcGxhdGVSZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuX19jb21taXRUZW1wbGF0ZVJlc3VsdCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICAgICAgICB0aGlzLl9fY29tbWl0Tm9kZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNJdGVyYWJsZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX19jb21taXRJdGVyYWJsZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IG5vdGhpbmcpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBub3RoaW5nO1xuICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gRmFsbGJhY2ssIHdpbGwgcmVuZGVyIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb25cbiAgICAgICAgICAgIHRoaXMuX19jb21taXRUZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfX2luc2VydChub2RlKSB7XG4gICAgICAgIHRoaXMuZW5kTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCB0aGlzLmVuZE5vZGUpO1xuICAgIH1cbiAgICBfX2NvbW1pdE5vZGUodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICB0aGlzLl9faW5zZXJ0KHZhbHVlKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBfX2NvbW1pdFRleHQodmFsdWUpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuc3RhcnROb2RlLm5leHRTaWJsaW5nO1xuICAgICAgICB2YWx1ZSA9IHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xuICAgICAgICAvLyBJZiBgdmFsdWVgIGlzbid0IGFscmVhZHkgYSBzdHJpbmcsIHdlIGV4cGxpY2l0bHkgY29udmVydCBpdCBoZXJlIGluIGNhc2VcbiAgICAgICAgLy8gaXQgY2FuJ3QgYmUgaW1wbGljaXRseSBjb252ZXJ0ZWQgLSBpLmUuIGl0J3MgYSBzeW1ib2wuXG4gICAgICAgIGNvbnN0IHZhbHVlQXNTdHJpbmcgPSB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBTdHJpbmcodmFsdWUpO1xuICAgICAgICBpZiAobm9kZSA9PT0gdGhpcy5lbmROb2RlLnByZXZpb3VzU2libGluZyAmJlxuICAgICAgICAgICAgbm9kZS5ub2RlVHlwZSA9PT0gMyAvKiBOb2RlLlRFWFRfTk9ERSAqLykge1xuICAgICAgICAgICAgLy8gSWYgd2Ugb25seSBoYXZlIGEgc2luZ2xlIHRleHQgbm9kZSBiZXR3ZWVuIHRoZSBtYXJrZXJzLCB3ZSBjYW4ganVzdFxuICAgICAgICAgICAgLy8gc2V0IGl0cyB2YWx1ZSwgcmF0aGVyIHRoYW4gcmVwbGFjaW5nIGl0LlxuICAgICAgICAgICAgLy8gVE9ETyhqdXN0aW5mYWduYW5pKTogQ2FuIHdlIGp1c3QgY2hlY2sgaWYgdGhpcy52YWx1ZSBpcyBwcmltaXRpdmU/XG4gICAgICAgICAgICBub2RlLmRhdGEgPSB2YWx1ZUFzU3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fX2NvbW1pdE5vZGUoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodmFsdWVBc1N0cmluZykpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgX19jb21taXRUZW1wbGF0ZVJlc3VsdCh2YWx1ZSkge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMub3B0aW9ucy50ZW1wbGF0ZUZhY3RvcnkodmFsdWUpO1xuICAgICAgICBpZiAodGhpcy52YWx1ZSBpbnN0YW5jZW9mIFRlbXBsYXRlSW5zdGFuY2UgJiZcbiAgICAgICAgICAgIHRoaXMudmFsdWUudGVtcGxhdGUgPT09IHRlbXBsYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlLnVwZGF0ZSh2YWx1ZS52YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIHByb3BhZ2F0ZSB0aGUgdGVtcGxhdGUgcHJvY2Vzc29yIGZyb20gdGhlIFRlbXBsYXRlUmVzdWx0XG4gICAgICAgICAgICAvLyBzbyB0aGF0IHdlIHVzZSBpdHMgc3ludGF4IGV4dGVuc2lvbiwgZXRjLiBUaGUgdGVtcGxhdGUgZmFjdG9yeSBjb21lc1xuICAgICAgICAgICAgLy8gZnJvbSB0aGUgcmVuZGVyIGZ1bmN0aW9uIG9wdGlvbnMgc28gdGhhdCBpdCBjYW4gY29udHJvbCB0ZW1wbGF0ZVxuICAgICAgICAgICAgLy8gY2FjaGluZyBhbmQgcHJlcHJvY2Vzc2luZy5cbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IFRlbXBsYXRlSW5zdGFuY2UodGVtcGxhdGUsIHZhbHVlLnByb2Nlc3NvciwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gaW5zdGFuY2UuX2Nsb25lKCk7XG4gICAgICAgICAgICBpbnN0YW5jZS51cGRhdGUodmFsdWUudmFsdWVzKTtcbiAgICAgICAgICAgIHRoaXMuX19jb21taXROb2RlKGZyYWdtZW50KTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBpbnN0YW5jZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfX2NvbW1pdEl0ZXJhYmxlKHZhbHVlKSB7XG4gICAgICAgIC8vIEZvciBhbiBJdGVyYWJsZSwgd2UgY3JlYXRlIGEgbmV3IEluc3RhbmNlUGFydCBwZXIgaXRlbSwgdGhlbiBzZXQgaXRzXG4gICAgICAgIC8vIHZhbHVlIHRvIHRoZSBpdGVtLiBUaGlzIGlzIGEgbGl0dGxlIGJpdCBvZiBvdmVyaGVhZCBmb3IgZXZlcnkgaXRlbSBpblxuICAgICAgICAvLyBhbiBJdGVyYWJsZSwgYnV0IGl0IGxldHMgdXMgcmVjdXJzZSBlYXNpbHkgYW5kIGVmZmljaWVudGx5IHVwZGF0ZSBBcnJheXNcbiAgICAgICAgLy8gb2YgVGVtcGxhdGVSZXN1bHRzIHRoYXQgd2lsbCBiZSBjb21tb25seSByZXR1cm5lZCBmcm9tIGV4cHJlc3Npb25zIGxpa2U6XG4gICAgICAgIC8vIGFycmF5Lm1hcCgoaSkgPT4gaHRtbGAke2l9YCksIGJ5IHJldXNpbmcgZXhpc3RpbmcgVGVtcGxhdGVJbnN0YW5jZXMuXG4gICAgICAgIC8vIElmIF92YWx1ZSBpcyBhbiBhcnJheSwgdGhlbiB0aGUgcHJldmlvdXMgcmVuZGVyIHdhcyBvZiBhblxuICAgICAgICAvLyBpdGVyYWJsZSBhbmQgX3ZhbHVlIHdpbGwgY29udGFpbiB0aGUgTm9kZVBhcnRzIGZyb20gdGhlIHByZXZpb3VzXG4gICAgICAgIC8vIHJlbmRlci4gSWYgX3ZhbHVlIGlzIG5vdCBhbiBhcnJheSwgY2xlYXIgdGhpcyBwYXJ0IGFuZCBtYWtlIGEgbmV3XG4gICAgICAgIC8vIGFycmF5IGZvciBOb2RlUGFydHMuXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIC8vIExldHMgdXMga2VlcCB0cmFjayBvZiBob3cgbWFueSBpdGVtcyB3ZSBzdGFtcGVkIHNvIHdlIGNhbiBjbGVhciBsZWZ0b3ZlclxuICAgICAgICAvLyBpdGVtcyBmcm9tIGEgcHJldmlvdXMgcmVuZGVyXG4gICAgICAgIGNvbnN0IGl0ZW1QYXJ0cyA9IHRoaXMudmFsdWU7XG4gICAgICAgIGxldCBwYXJ0SW5kZXggPSAwO1xuICAgICAgICBsZXQgaXRlbVBhcnQ7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB2YWx1ZSkge1xuICAgICAgICAgICAgLy8gVHJ5IHRvIHJldXNlIGFuIGV4aXN0aW5nIHBhcnRcbiAgICAgICAgICAgIGl0ZW1QYXJ0ID0gaXRlbVBhcnRzW3BhcnRJbmRleF07XG4gICAgICAgICAgICAvLyBJZiBubyBleGlzdGluZyBwYXJ0LCBjcmVhdGUgYSBuZXcgb25lXG4gICAgICAgICAgICBpZiAoaXRlbVBhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGl0ZW1QYXJ0ID0gbmV3IE5vZGVQYXJ0KHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaXRlbVBhcnRzLnB1c2goaXRlbVBhcnQpO1xuICAgICAgICAgICAgICAgIGlmIChwYXJ0SW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbVBhcnQuYXBwZW5kSW50b1BhcnQodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpdGVtUGFydC5pbnNlcnRBZnRlclBhcnQoaXRlbVBhcnRzW3BhcnRJbmRleCAtIDFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtUGFydC5zZXRWYWx1ZShpdGVtKTtcbiAgICAgICAgICAgIGl0ZW1QYXJ0LmNvbW1pdCgpO1xuICAgICAgICAgICAgcGFydEluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnRJbmRleCA8IGl0ZW1QYXJ0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIFRydW5jYXRlIHRoZSBwYXJ0cyBhcnJheSBzbyBfdmFsdWUgcmVmbGVjdHMgdGhlIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgICAgIGl0ZW1QYXJ0cy5sZW5ndGggPSBwYXJ0SW5kZXg7XG4gICAgICAgICAgICB0aGlzLmNsZWFyKGl0ZW1QYXJ0ICYmIGl0ZW1QYXJ0LmVuZE5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsZWFyKHN0YXJ0Tm9kZSA9IHRoaXMuc3RhcnROb2RlKSB7XG4gICAgICAgIHJlbW92ZU5vZGVzKHRoaXMuc3RhcnROb2RlLnBhcmVudE5vZGUsIHN0YXJ0Tm9kZS5uZXh0U2libGluZywgdGhpcy5lbmROb2RlKTtcbiAgICB9XG59XG4vKipcbiAqIEltcGxlbWVudHMgYSBib29sZWFuIGF0dHJpYnV0ZSwgcm91Z2hseSBhcyBkZWZpbmVkIGluIHRoZSBIVE1MXG4gKiBzcGVjaWZpY2F0aW9uLlxuICpcbiAqIElmIHRoZSB2YWx1ZSBpcyB0cnV0aHksIHRoZW4gdGhlIGF0dHJpYnV0ZSBpcyBwcmVzZW50IHdpdGggYSB2YWx1ZSBvZlxuICogJycuIElmIHRoZSB2YWx1ZSBpcyBmYWxzZXksIHRoZSBhdHRyaWJ1dGUgaXMgcmVtb3ZlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIEJvb2xlYW5BdHRyaWJ1dGVQYXJ0IHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBuYW1lLCBzdHJpbmdzKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzdHJpbmdzLmxlbmd0aCAhPT0gMiB8fCBzdHJpbmdzWzBdICE9PSAnJyB8fCBzdHJpbmdzWzFdICE9PSAnJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCb29sZWFuIGF0dHJpYnV0ZXMgY2FuIG9ubHkgY29udGFpbiBhIHNpbmdsZSBleHByZXNzaW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5zdHJpbmdzID0gc3RyaW5ncztcbiAgICB9XG4gICAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBjb21taXQoKSB7XG4gICAgICAgIHdoaWxlIChpc0RpcmVjdGl2ZSh0aGlzLl9fcGVuZGluZ1ZhbHVlKSkge1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0aXZlID0gdGhpcy5fX3BlbmRpbmdWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSBub0NoYW5nZTtcbiAgICAgICAgICAgIGRpcmVjdGl2ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fX3BlbmRpbmdWYWx1ZSA9PT0gbm9DaGFuZ2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZSA9ICEhdGhpcy5fX3BlbmRpbmdWYWx1ZTtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKHRoaXMubmFtZSwgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSh0aGlzLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSBub0NoYW5nZTtcbiAgICB9XG59XG4vKipcbiAqIFNldHMgYXR0cmlidXRlIHZhbHVlcyBmb3IgUHJvcGVydHlQYXJ0cywgc28gdGhhdCB0aGUgdmFsdWUgaXMgb25seSBzZXQgb25jZVxuICogZXZlbiBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgcGFydHMgZm9yIGEgcHJvcGVydHkuXG4gKlxuICogSWYgYW4gZXhwcmVzc2lvbiBjb250cm9scyB0aGUgd2hvbGUgcHJvcGVydHkgdmFsdWUsIHRoZW4gdGhlIHZhbHVlIGlzIHNpbXBseVxuICogYXNzaWduZWQgdG8gdGhlIHByb3BlcnR5IHVuZGVyIGNvbnRyb2wuIElmIHRoZXJlIGFyZSBzdHJpbmcgbGl0ZXJhbHMgb3JcbiAqIG11bHRpcGxlIGV4cHJlc3Npb25zLCB0aGVuIHRoZSBzdHJpbmdzIGFyZSBleHByZXNzaW9ucyBhcmUgaW50ZXJwb2xhdGVkIGludG9cbiAqIGEgc3RyaW5nIGZpcnN0LlxuICovXG5leHBvcnQgY2xhc3MgUHJvcGVydHlDb21taXR0ZXIgZXh0ZW5kcyBBdHRyaWJ1dGVDb21taXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIG5hbWUsIHN0cmluZ3MpIHtcbiAgICAgICAgc3VwZXIoZWxlbWVudCwgbmFtZSwgc3RyaW5ncyk7XG4gICAgICAgIHRoaXMuc2luZ2xlID1cbiAgICAgICAgICAgIChzdHJpbmdzLmxlbmd0aCA9PT0gMiAmJiBzdHJpbmdzWzBdID09PSAnJyAmJiBzdHJpbmdzWzFdID09PSAnJyk7XG4gICAgfVxuICAgIF9jcmVhdGVQYXJ0KCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb3BlcnR5UGFydCh0aGlzKTtcbiAgICB9XG4gICAgX2dldFZhbHVlKCkge1xuICAgICAgICBpZiAodGhpcy5zaW5nbGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnRzWzBdLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBlci5fZ2V0VmFsdWUoKTtcbiAgICB9XG4gICAgY29tbWl0KCkge1xuICAgICAgICBpZiAodGhpcy5kaXJ0eSkge1xuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudFt0aGlzLm5hbWVdID0gdGhpcy5fZ2V0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBQcm9wZXJ0eVBhcnQgZXh0ZW5kcyBBdHRyaWJ1dGVQYXJ0IHtcbn1cbi8vIERldGVjdCBldmVudCBsaXN0ZW5lciBvcHRpb25zIHN1cHBvcnQuIElmIHRoZSBgY2FwdHVyZWAgcHJvcGVydHkgaXMgcmVhZFxuLy8gZnJvbSB0aGUgb3B0aW9ucyBvYmplY3QsIHRoZW4gb3B0aW9ucyBhcmUgc3VwcG9ydGVkLiBJZiBub3QsIHRoZW4gdGhlIHRoaXJkXG4vLyBhcmd1bWVudCB0byBhZGQvcmVtb3ZlRXZlbnRMaXN0ZW5lciBpcyBpbnRlcnByZXRlZCBhcyB0aGUgYm9vbGVhbiBjYXB0dXJlXG4vLyB2YWx1ZSBzbyB3ZSBzaG91bGQgb25seSBwYXNzIHRoZSBgY2FwdHVyZWAgcHJvcGVydHkuXG5sZXQgZXZlbnRPcHRpb25zU3VwcG9ydGVkID0gZmFsc2U7XG4vLyBXcmFwIGludG8gYW4gSUlGRSBiZWNhdXNlIE1TIEVkZ2UgPD0gdjQxIGRvZXMgbm90IHN1cHBvcnQgaGF2aW5nIHRyeS9jYXRjaFxuLy8gYmxvY2tzIHJpZ2h0IGludG8gdGhlIGJvZHkgb2YgYSBtb2R1bGVcbigoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGdldCBjYXB0dXJlKCkge1xuICAgICAgICAgICAgICAgIGV2ZW50T3B0aW9uc1N1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdCcsIG9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGVzdCcsIG9wdGlvbnMsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBjYXRjaCAoX2UpIHtcbiAgICAgICAgLy8gZXZlbnQgb3B0aW9ucyBub3Qgc3VwcG9ydGVkXG4gICAgfVxufSkoKTtcbmV4cG9ydCBjbGFzcyBFdmVudFBhcnQge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGV2ZW50TmFtZSwgZXZlbnRDb250ZXh0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuZXZlbnROYW1lID0gZXZlbnROYW1lO1xuICAgICAgICB0aGlzLmV2ZW50Q29udGV4dCA9IGV2ZW50Q29udGV4dDtcbiAgICAgICAgdGhpcy5fX2JvdW5kSGFuZGxlRXZlbnQgPSAoZSkgPT4gdGhpcy5oYW5kbGVFdmVudChlKTtcbiAgICB9XG4gICAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBjb21taXQoKSB7XG4gICAgICAgIHdoaWxlIChpc0RpcmVjdGl2ZSh0aGlzLl9fcGVuZGluZ1ZhbHVlKSkge1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0aXZlID0gdGhpcy5fX3BlbmRpbmdWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSBub0NoYW5nZTtcbiAgICAgICAgICAgIGRpcmVjdGl2ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fX3BlbmRpbmdWYWx1ZSA9PT0gbm9DaGFuZ2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdMaXN0ZW5lciA9IHRoaXMuX19wZW5kaW5nVmFsdWU7XG4gICAgICAgIGNvbnN0IG9sZExpc3RlbmVyID0gdGhpcy52YWx1ZTtcbiAgICAgICAgY29uc3Qgc2hvdWxkUmVtb3ZlTGlzdGVuZXIgPSBuZXdMaXN0ZW5lciA9PSBudWxsIHx8XG4gICAgICAgICAgICBvbGRMaXN0ZW5lciAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgKG5ld0xpc3RlbmVyLmNhcHR1cmUgIT09IG9sZExpc3RlbmVyLmNhcHR1cmUgfHxcbiAgICAgICAgICAgICAgICAgICAgbmV3TGlzdGVuZXIub25jZSAhPT0gb2xkTGlzdGVuZXIub25jZSB8fFxuICAgICAgICAgICAgICAgICAgICBuZXdMaXN0ZW5lci5wYXNzaXZlICE9PSBvbGRMaXN0ZW5lci5wYXNzaXZlKTtcbiAgICAgICAgY29uc3Qgc2hvdWxkQWRkTGlzdGVuZXIgPSBuZXdMaXN0ZW5lciAhPSBudWxsICYmIChvbGRMaXN0ZW5lciA9PSBudWxsIHx8IHNob3VsZFJlbW92ZUxpc3RlbmVyKTtcbiAgICAgICAgaWYgKHNob3VsZFJlbW92ZUxpc3RlbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLmV2ZW50TmFtZSwgdGhpcy5fX2JvdW5kSGFuZGxlRXZlbnQsIHRoaXMuX19vcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvdWxkQWRkTGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX19vcHRpb25zID0gZ2V0T3B0aW9ucyhuZXdMaXN0ZW5lcik7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmV2ZW50TmFtZSwgdGhpcy5fX2JvdW5kSGFuZGxlRXZlbnQsIHRoaXMuX19vcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlID0gbmV3TGlzdGVuZXI7XG4gICAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSBub0NoYW5nZTtcbiAgICB9XG4gICAgaGFuZGxlRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlLmNhbGwodGhpcy5ldmVudENvbnRleHQgfHwgdGhpcy5lbGVtZW50LCBldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlLmhhbmRsZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIFdlIGNvcHkgb3B0aW9ucyBiZWNhdXNlIG9mIHRoZSBpbmNvbnNpc3RlbnQgYmVoYXZpb3Igb2YgYnJvd3NlcnMgd2hlbiByZWFkaW5nXG4vLyB0aGUgdGhpcmQgYXJndW1lbnQgb2YgYWRkL3JlbW92ZUV2ZW50TGlzdGVuZXIuIElFMTEgZG9lc24ndCBzdXBwb3J0IG9wdGlvbnNcbi8vIGF0IGFsbC4gQ2hyb21lIDQxIG9ubHkgcmVhZHMgYGNhcHR1cmVgIGlmIHRoZSBhcmd1bWVudCBpcyBhbiBvYmplY3QuXG5jb25zdCBnZXRPcHRpb25zID0gKG8pID0+IG8gJiZcbiAgICAoZXZlbnRPcHRpb25zU3VwcG9ydGVkID9cbiAgICAgICAgeyBjYXB0dXJlOiBvLmNhcHR1cmUsIHBhc3NpdmU6IG8ucGFzc2l2ZSwgb25jZTogby5vbmNlIH0gOlxuICAgICAgICBvLmNhcHR1cmUpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFydHMuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuaW1wb3J0IHsgbWFya2VyLCBUZW1wbGF0ZSB9IGZyb20gJy4vdGVtcGxhdGUuanMnO1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBUZW1wbGF0ZUZhY3Rvcnkgd2hpY2ggY2FjaGVzIFRlbXBsYXRlcyBrZXllZCBvblxuICogcmVzdWx0LnR5cGUgYW5kIHJlc3VsdC5zdHJpbmdzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGVGYWN0b3J5KHJlc3VsdCkge1xuICAgIGxldCB0ZW1wbGF0ZUNhY2hlID0gdGVtcGxhdGVDYWNoZXMuZ2V0KHJlc3VsdC50eXBlKTtcbiAgICBpZiAodGVtcGxhdGVDYWNoZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRlbXBsYXRlQ2FjaGUgPSB7XG4gICAgICAgICAgICBzdHJpbmdzQXJyYXk6IG5ldyBXZWFrTWFwKCksXG4gICAgICAgICAgICBrZXlTdHJpbmc6IG5ldyBNYXAoKVxuICAgICAgICB9O1xuICAgICAgICB0ZW1wbGF0ZUNhY2hlcy5zZXQocmVzdWx0LnR5cGUsIHRlbXBsYXRlQ2FjaGUpO1xuICAgIH1cbiAgICBsZXQgdGVtcGxhdGUgPSB0ZW1wbGF0ZUNhY2hlLnN0cmluZ3NBcnJheS5nZXQocmVzdWx0LnN0cmluZ3MpO1xuICAgIGlmICh0ZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICB9XG4gICAgLy8gSWYgdGhlIFRlbXBsYXRlU3RyaW5nc0FycmF5IGlzIG5ldywgZ2VuZXJhdGUgYSBrZXkgZnJvbSB0aGUgc3RyaW5nc1xuICAgIC8vIFRoaXMga2V5IGlzIHNoYXJlZCBiZXR3ZWVuIGFsbCB0ZW1wbGF0ZXMgd2l0aCBpZGVudGljYWwgY29udGVudFxuICAgIGNvbnN0IGtleSA9IHJlc3VsdC5zdHJpbmdzLmpvaW4obWFya2VyKTtcbiAgICAvLyBDaGVjayBpZiB3ZSBhbHJlYWR5IGhhdmUgYSBUZW1wbGF0ZSBmb3IgdGhpcyBrZXlcbiAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ2FjaGUua2V5U3RyaW5nLmdldChrZXkpO1xuICAgIGlmICh0ZW1wbGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIElmIHdlIGhhdmUgbm90IHNlZW4gdGhpcyBrZXkgYmVmb3JlLCBjcmVhdGUgYSBuZXcgVGVtcGxhdGVcbiAgICAgICAgdGVtcGxhdGUgPSBuZXcgVGVtcGxhdGUocmVzdWx0LCByZXN1bHQuZ2V0VGVtcGxhdGVFbGVtZW50KCkpO1xuICAgICAgICAvLyBDYWNoZSB0aGUgVGVtcGxhdGUgZm9yIHRoaXMga2V5XG4gICAgICAgIHRlbXBsYXRlQ2FjaGUua2V5U3RyaW5nLnNldChrZXksIHRlbXBsYXRlKTtcbiAgICB9XG4gICAgLy8gQ2FjaGUgYWxsIGZ1dHVyZSBxdWVyaWVzIGZvciB0aGlzIFRlbXBsYXRlU3RyaW5nc0FycmF5XG4gICAgdGVtcGxhdGVDYWNoZS5zdHJpbmdzQXJyYXkuc2V0KHJlc3VsdC5zdHJpbmdzLCB0ZW1wbGF0ZSk7XG4gICAgcmV0dXJuIHRlbXBsYXRlO1xufVxuZXhwb3J0IGNvbnN0IHRlbXBsYXRlQ2FjaGVzID0gbmV3IE1hcCgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGVtcGxhdGUtZmFjdG9yeS5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vKipcbiAqIEBtb2R1bGUgbGl0LWh0bWxcbiAqL1xuaW1wb3J0IHsgcmVtb3ZlTm9kZXMgfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQgeyBOb2RlUGFydCB9IGZyb20gJy4vcGFydHMuanMnO1xuaW1wb3J0IHsgdGVtcGxhdGVGYWN0b3J5IH0gZnJvbSAnLi90ZW1wbGF0ZS1mYWN0b3J5LmpzJztcbmV4cG9ydCBjb25zdCBwYXJ0cyA9IG5ldyBXZWFrTWFwKCk7XG4vKipcbiAqIFJlbmRlcnMgYSB0ZW1wbGF0ZSByZXN1bHQgb3Igb3RoZXIgdmFsdWUgdG8gYSBjb250YWluZXIuXG4gKlxuICogVG8gdXBkYXRlIGEgY29udGFpbmVyIHdpdGggbmV3IHZhbHVlcywgcmVldmFsdWF0ZSB0aGUgdGVtcGxhdGUgbGl0ZXJhbCBhbmRcbiAqIGNhbGwgYHJlbmRlcmAgd2l0aCB0aGUgbmV3IHJlc3VsdC5cbiAqXG4gKiBAcGFyYW0gcmVzdWx0IEFueSB2YWx1ZSByZW5kZXJhYmxlIGJ5IE5vZGVQYXJ0IC0gdHlwaWNhbGx5IGEgVGVtcGxhdGVSZXN1bHRcbiAqICAgICBjcmVhdGVkIGJ5IGV2YWx1YXRpbmcgYSB0ZW1wbGF0ZSB0YWcgbGlrZSBgaHRtbGAgb3IgYHN2Z2AuXG4gKiBAcGFyYW0gY29udGFpbmVyIEEgRE9NIHBhcmVudCB0byByZW5kZXIgdG8uIFRoZSBlbnRpcmUgY29udGVudHMgYXJlIGVpdGhlclxuICogICAgIHJlcGxhY2VkLCBvciBlZmZpY2llbnRseSB1cGRhdGVkIGlmIHRoZSBzYW1lIHJlc3VsdCB0eXBlIHdhcyBwcmV2aW91c1xuICogICAgIHJlbmRlcmVkIHRoZXJlLlxuICogQHBhcmFtIG9wdGlvbnMgUmVuZGVyT3B0aW9ucyBmb3IgdGhlIGVudGlyZSByZW5kZXIgdHJlZSByZW5kZXJlZCB0byB0aGlzXG4gKiAgICAgY29udGFpbmVyLiBSZW5kZXIgb3B0aW9ucyBtdXN0ICpub3QqIGNoYW5nZSBiZXR3ZWVuIHJlbmRlcnMgdG8gdGhlIHNhbWVcbiAqICAgICBjb250YWluZXIsIGFzIHRob3NlIGNoYW5nZXMgd2lsbCBub3QgZWZmZWN0IHByZXZpb3VzbHkgcmVuZGVyZWQgRE9NLlxuICovXG5leHBvcnQgY29uc3QgcmVuZGVyID0gKHJlc3VsdCwgY29udGFpbmVyLCBvcHRpb25zKSA9PiB7XG4gICAgbGV0IHBhcnQgPSBwYXJ0cy5nZXQoY29udGFpbmVyKTtcbiAgICBpZiAocGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJlbW92ZU5vZGVzKGNvbnRhaW5lciwgY29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgICAgICBwYXJ0cy5zZXQoY29udGFpbmVyLCBwYXJ0ID0gbmV3IE5vZGVQYXJ0KE9iamVjdC5hc3NpZ24oeyB0ZW1wbGF0ZUZhY3RvcnkgfSwgb3B0aW9ucykpKTtcbiAgICAgICAgcGFydC5hcHBlbmRJbnRvKGNvbnRhaW5lcik7XG4gICAgfVxuICAgIHBhcnQuc2V0VmFsdWUocmVzdWx0KTtcbiAgICBwYXJ0LmNvbW1pdCgpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlbmRlci5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG5pbXBvcnQgeyBBdHRyaWJ1dGVDb21taXR0ZXIsIEJvb2xlYW5BdHRyaWJ1dGVQYXJ0LCBFdmVudFBhcnQsIE5vZGVQYXJ0LCBQcm9wZXJ0eUNvbW1pdHRlciB9IGZyb20gJy4vcGFydHMuanMnO1xuLyoqXG4gKiBDcmVhdGVzIFBhcnRzIHdoZW4gYSB0ZW1wbGF0ZSBpcyBpbnN0YW50aWF0ZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3Ige1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBwYXJ0cyBmb3IgYW4gYXR0cmlidXRlLXBvc2l0aW9uIGJpbmRpbmcsIGdpdmVuIHRoZSBldmVudCwgYXR0cmlidXRlXG4gICAgICogbmFtZSwgYW5kIHN0cmluZyBsaXRlcmFscy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIGJpbmRpbmdcbiAgICAgKiBAcGFyYW0gbmFtZSAgVGhlIGF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtIHN0cmluZ3MgVGhlIHN0cmluZyBsaXRlcmFscy4gVGhlcmUgYXJlIGFsd2F5cyBhdCBsZWFzdCB0d28gc3RyaW5ncyxcbiAgICAgKiAgIGV2ZW50IGZvciBmdWxseS1jb250cm9sbGVkIGJpbmRpbmdzIHdpdGggYSBzaW5nbGUgZXhwcmVzc2lvbi5cbiAgICAgKi9cbiAgICBoYW5kbGVBdHRyaWJ1dGVFeHByZXNzaW9ucyhlbGVtZW50LCBuYW1lLCBzdHJpbmdzLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHByZWZpeCA9IG5hbWVbMF07XG4gICAgICAgIGlmIChwcmVmaXggPT09ICcuJykge1xuICAgICAgICAgICAgY29uc3QgY29tbWl0dGVyID0gbmV3IFByb3BlcnR5Q29tbWl0dGVyKGVsZW1lbnQsIG5hbWUuc2xpY2UoMSksIHN0cmluZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbW1pdHRlci5wYXJ0cztcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJlZml4ID09PSAnQCcpIHtcbiAgICAgICAgICAgIHJldHVybiBbbmV3IEV2ZW50UGFydChlbGVtZW50LCBuYW1lLnNsaWNlKDEpLCBvcHRpb25zLmV2ZW50Q29udGV4dCldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmVmaXggPT09ICc/Jykge1xuICAgICAgICAgICAgcmV0dXJuIFtuZXcgQm9vbGVhbkF0dHJpYnV0ZVBhcnQoZWxlbWVudCwgbmFtZS5zbGljZSgxKSwgc3RyaW5ncyldO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbW1pdHRlciA9IG5ldyBBdHRyaWJ1dGVDb21taXR0ZXIoZWxlbWVudCwgbmFtZSwgc3RyaW5ncyk7XG4gICAgICAgIHJldHVybiBjb21taXR0ZXIucGFydHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBwYXJ0cyBmb3IgYSB0ZXh0LXBvc2l0aW9uIGJpbmRpbmcuXG4gICAgICogQHBhcmFtIHRlbXBsYXRlRmFjdG9yeVxuICAgICAqL1xuICAgIGhhbmRsZVRleHRFeHByZXNzaW9uKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOb2RlUGFydChvcHRpb25zKTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgZGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yID0gbmV3IERlZmF1bHRUZW1wbGF0ZVByb2Nlc3NvcigpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVmYXVsdC10ZW1wbGF0ZS1wcm9jZXNzb3IuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuLyoqXG4gKlxuICogTWFpbiBsaXQtaHRtbCBtb2R1bGUuXG4gKlxuICogTWFpbiBleHBvcnRzOlxuICpcbiAqIC0gIFtbaHRtbF1dXG4gKiAtICBbW3N2Z11dXG4gKiAtICBbW3JlbmRlcl1dXG4gKlxuICogQG1vZHVsZSBsaXQtaHRtbFxuICogQHByZWZlcnJlZFxuICovXG4vKipcbiAqIERvIG5vdCByZW1vdmUgdGhpcyBjb21tZW50OyBpdCBrZWVwcyB0eXBlZG9jIGZyb20gbWlzcGxhY2luZyB0aGUgbW9kdWxlXG4gKiBkb2NzLlxuICovXG5pbXBvcnQgeyBkZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3IgfSBmcm9tICcuL2xpYi9kZWZhdWx0LXRlbXBsYXRlLXByb2Nlc3Nvci5qcyc7XG5pbXBvcnQgeyBTVkdUZW1wbGF0ZVJlc3VsdCwgVGVtcGxhdGVSZXN1bHQgfSBmcm9tICcuL2xpYi90ZW1wbGF0ZS1yZXN1bHQuanMnO1xuZXhwb3J0IHsgRGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yLCBkZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3IgfSBmcm9tICcuL2xpYi9kZWZhdWx0LXRlbXBsYXRlLXByb2Nlc3Nvci5qcyc7XG5leHBvcnQgeyBkaXJlY3RpdmUsIGlzRGlyZWN0aXZlIH0gZnJvbSAnLi9saWIvZGlyZWN0aXZlLmpzJztcbi8vIFRPRE8oanVzdGluZmFnbmFuaSk6IHJlbW92ZSBsaW5lIHdoZW4gd2UgZ2V0IE5vZGVQYXJ0IG1vdmluZyBtZXRob2RzXG5leHBvcnQgeyByZW1vdmVOb2RlcywgcmVwYXJlbnROb2RlcyB9IGZyb20gJy4vbGliL2RvbS5qcyc7XG5leHBvcnQgeyBub0NoYW5nZSwgbm90aGluZyB9IGZyb20gJy4vbGliL3BhcnQuanMnO1xuZXhwb3J0IHsgQXR0cmlidXRlQ29tbWl0dGVyLCBBdHRyaWJ1dGVQYXJ0LCBCb29sZWFuQXR0cmlidXRlUGFydCwgRXZlbnRQYXJ0LCBpc0l0ZXJhYmxlLCBpc1ByaW1pdGl2ZSwgTm9kZVBhcnQsIFByb3BlcnR5Q29tbWl0dGVyLCBQcm9wZXJ0eVBhcnQgfSBmcm9tICcuL2xpYi9wYXJ0cy5qcyc7XG5leHBvcnQgeyBwYXJ0cywgcmVuZGVyIH0gZnJvbSAnLi9saWIvcmVuZGVyLmpzJztcbmV4cG9ydCB7IHRlbXBsYXRlQ2FjaGVzLCB0ZW1wbGF0ZUZhY3RvcnkgfSBmcm9tICcuL2xpYi90ZW1wbGF0ZS1mYWN0b3J5LmpzJztcbmV4cG9ydCB7IFRlbXBsYXRlSW5zdGFuY2UgfSBmcm9tICcuL2xpYi90ZW1wbGF0ZS1pbnN0YW5jZS5qcyc7XG5leHBvcnQgeyBTVkdUZW1wbGF0ZVJlc3VsdCwgVGVtcGxhdGVSZXN1bHQgfSBmcm9tICcuL2xpYi90ZW1wbGF0ZS1yZXN1bHQuanMnO1xuZXhwb3J0IHsgY3JlYXRlTWFya2VyLCBpc1RlbXBsYXRlUGFydEFjdGl2ZSwgVGVtcGxhdGUgfSBmcm9tICcuL2xpYi90ZW1wbGF0ZS5qcyc7XG4vLyBJTVBPUlRBTlQ6IGRvIG5vdCBjaGFuZ2UgdGhlIHByb3BlcnR5IG5hbWUgb3IgdGhlIGFzc2lnbm1lbnQgZXhwcmVzc2lvbi5cbi8vIFRoaXMgbGluZSB3aWxsIGJlIHVzZWQgaW4gcmVnZXhlcyB0byBzZWFyY2ggZm9yIGxpdC1odG1sIHVzYWdlLlxuLy8gVE9ETyhqdXN0aW5mYWduYW5pKTogaW5qZWN0IHZlcnNpb24gbnVtYmVyIGF0IGJ1aWxkIHRpbWVcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICh3aW5kb3dbJ2xpdEh0bWxWZXJzaW9ucyddIHx8ICh3aW5kb3dbJ2xpdEh0bWxWZXJzaW9ucyddID0gW10pKS5wdXNoKCcxLjIuMScpO1xufVxuLyoqXG4gKiBJbnRlcnByZXRzIGEgdGVtcGxhdGUgbGl0ZXJhbCBhcyBhbiBIVE1MIHRlbXBsYXRlIHRoYXQgY2FuIGVmZmljaWVudGx5XG4gKiByZW5kZXIgdG8gYW5kIHVwZGF0ZSBhIGNvbnRhaW5lci5cbiAqL1xuZXhwb3J0IGNvbnN0IGh0bWwgPSAoc3RyaW5ncywgLi4udmFsdWVzKSA9PiBuZXcgVGVtcGxhdGVSZXN1bHQoc3RyaW5ncywgdmFsdWVzLCAnaHRtbCcsIGRlZmF1bHRUZW1wbGF0ZVByb2Nlc3Nvcik7XG4vKipcbiAqIEludGVycHJldHMgYSB0ZW1wbGF0ZSBsaXRlcmFsIGFzIGFuIFNWRyB0ZW1wbGF0ZSB0aGF0IGNhbiBlZmZpY2llbnRseVxuICogcmVuZGVyIHRvIGFuZCB1cGRhdGUgYSBjb250YWluZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBzdmcgPSAoc3RyaW5ncywgLi4udmFsdWVzKSA9PiBuZXcgU1ZHVGVtcGxhdGVSZXN1bHQoc3RyaW5ncywgdmFsdWVzLCAnc3ZnJywgZGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpdC1odG1sLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8qKlxuICogTW9kdWxlIHRvIGFkZCBzaGFkeSBET00vc2hhZHkgQ1NTIHBvbHlmaWxsIHN1cHBvcnQgdG8gbGl0LWh0bWwgdGVtcGxhdGVcbiAqIHJlbmRlcmluZy4gU2VlIHRoZSBbW3JlbmRlcl1dIG1ldGhvZCBmb3IgZGV0YWlscy5cbiAqXG4gKiBAbW9kdWxlIHNoYWR5LXJlbmRlclxuICogQHByZWZlcnJlZFxuICovXG4vKipcbiAqIERvIG5vdCByZW1vdmUgdGhpcyBjb21tZW50OyBpdCBrZWVwcyB0eXBlZG9jIGZyb20gbWlzcGxhY2luZyB0aGUgbW9kdWxlXG4gKiBkb2NzLlxuICovXG5pbXBvcnQgeyByZW1vdmVOb2RlcyB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IGluc2VydE5vZGVJbnRvVGVtcGxhdGUsIHJlbW92ZU5vZGVzRnJvbVRlbXBsYXRlIH0gZnJvbSAnLi9tb2RpZnktdGVtcGxhdGUuanMnO1xuaW1wb3J0IHsgcGFydHMsIHJlbmRlciBhcyBsaXRSZW5kZXIgfSBmcm9tICcuL3JlbmRlci5qcyc7XG5pbXBvcnQgeyB0ZW1wbGF0ZUNhY2hlcyB9IGZyb20gJy4vdGVtcGxhdGUtZmFjdG9yeS5qcyc7XG5pbXBvcnQgeyBUZW1wbGF0ZUluc3RhbmNlIH0gZnJvbSAnLi90ZW1wbGF0ZS1pbnN0YW5jZS5qcyc7XG5pbXBvcnQgeyBtYXJrZXIsIFRlbXBsYXRlIH0gZnJvbSAnLi90ZW1wbGF0ZS5qcyc7XG5leHBvcnQgeyBodG1sLCBzdmcsIFRlbXBsYXRlUmVzdWx0IH0gZnJvbSAnLi4vbGl0LWh0bWwuanMnO1xuLy8gR2V0IGEga2V5IHRvIGxvb2t1cCBpbiBgdGVtcGxhdGVDYWNoZXNgLlxuY29uc3QgZ2V0VGVtcGxhdGVDYWNoZUtleSA9ICh0eXBlLCBzY29wZU5hbWUpID0+IGAke3R5cGV9LS0ke3Njb3BlTmFtZX1gO1xubGV0IGNvbXBhdGlibGVTaGFkeUNTU1ZlcnNpb24gPSB0cnVlO1xuaWYgKHR5cGVvZiB3aW5kb3cuU2hhZHlDU1MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgY29tcGF0aWJsZVNoYWR5Q1NTVmVyc2lvbiA9IGZhbHNlO1xufVxuZWxzZSBpZiAodHlwZW9mIHdpbmRvdy5TaGFkeUNTUy5wcmVwYXJlVGVtcGxhdGVEb20gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgY29uc29sZS53YXJuKGBJbmNvbXBhdGlibGUgU2hhZHlDU1MgdmVyc2lvbiBkZXRlY3RlZC4gYCArXG4gICAgICAgIGBQbGVhc2UgdXBkYXRlIHRvIGF0IGxlYXN0IEB3ZWJjb21wb25lbnRzL3dlYmNvbXBvbmVudHNqc0AyLjAuMiBhbmQgYCArXG4gICAgICAgIGBAd2ViY29tcG9uZW50cy9zaGFkeWNzc0AxLjMuMS5gKTtcbiAgICBjb21wYXRpYmxlU2hhZHlDU1NWZXJzaW9uID0gZmFsc2U7XG59XG4vKipcbiAqIFRlbXBsYXRlIGZhY3Rvcnkgd2hpY2ggc2NvcGVzIHRlbXBsYXRlIERPTSB1c2luZyBTaGFkeUNTUy5cbiAqIEBwYXJhbSBzY29wZU5hbWUge3N0cmluZ31cbiAqL1xuY29uc3Qgc2hhZHlUZW1wbGF0ZUZhY3RvcnkgPSAoc2NvcGVOYW1lKSA9PiAocmVzdWx0KSA9PiB7XG4gICAgY29uc3QgY2FjaGVLZXkgPSBnZXRUZW1wbGF0ZUNhY2hlS2V5KHJlc3VsdC50eXBlLCBzY29wZU5hbWUpO1xuICAgIGxldCB0ZW1wbGF0ZUNhY2hlID0gdGVtcGxhdGVDYWNoZXMuZ2V0KGNhY2hlS2V5KTtcbiAgICBpZiAodGVtcGxhdGVDYWNoZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRlbXBsYXRlQ2FjaGUgPSB7XG4gICAgICAgICAgICBzdHJpbmdzQXJyYXk6IG5ldyBXZWFrTWFwKCksXG4gICAgICAgICAgICBrZXlTdHJpbmc6IG5ldyBNYXAoKVxuICAgICAgICB9O1xuICAgICAgICB0ZW1wbGF0ZUNhY2hlcy5zZXQoY2FjaGVLZXksIHRlbXBsYXRlQ2FjaGUpO1xuICAgIH1cbiAgICBsZXQgdGVtcGxhdGUgPSB0ZW1wbGF0ZUNhY2hlLnN0cmluZ3NBcnJheS5nZXQocmVzdWx0LnN0cmluZ3MpO1xuICAgIGlmICh0ZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICB9XG4gICAgY29uc3Qga2V5ID0gcmVzdWx0LnN0cmluZ3Muam9pbihtYXJrZXIpO1xuICAgIHRlbXBsYXRlID0gdGVtcGxhdGVDYWNoZS5rZXlTdHJpbmcuZ2V0KGtleSk7XG4gICAgaWYgKHRlbXBsYXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHJlc3VsdC5nZXRUZW1wbGF0ZUVsZW1lbnQoKTtcbiAgICAgICAgaWYgKGNvbXBhdGlibGVTaGFkeUNTU1ZlcnNpb24pIHtcbiAgICAgICAgICAgIHdpbmRvdy5TaGFkeUNTUy5wcmVwYXJlVGVtcGxhdGVEb20oZWxlbWVudCwgc2NvcGVOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICB0ZW1wbGF0ZSA9IG5ldyBUZW1wbGF0ZShyZXN1bHQsIGVsZW1lbnQpO1xuICAgICAgICB0ZW1wbGF0ZUNhY2hlLmtleVN0cmluZy5zZXQoa2V5LCB0ZW1wbGF0ZSk7XG4gICAgfVxuICAgIHRlbXBsYXRlQ2FjaGUuc3RyaW5nc0FycmF5LnNldChyZXN1bHQuc3RyaW5ncywgdGVtcGxhdGUpO1xuICAgIHJldHVybiB0ZW1wbGF0ZTtcbn07XG5jb25zdCBURU1QTEFURV9UWVBFUyA9IFsnaHRtbCcsICdzdmcnXTtcbi8qKlxuICogUmVtb3ZlcyBhbGwgc3R5bGUgZWxlbWVudHMgZnJvbSBUZW1wbGF0ZXMgZm9yIHRoZSBnaXZlbiBzY29wZU5hbWUuXG4gKi9cbmNvbnN0IHJlbW92ZVN0eWxlc0Zyb21MaXRUZW1wbGF0ZXMgPSAoc2NvcGVOYW1lKSA9PiB7XG4gICAgVEVNUExBVEVfVFlQRVMuZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZXMgPSB0ZW1wbGF0ZUNhY2hlcy5nZXQoZ2V0VGVtcGxhdGVDYWNoZUtleSh0eXBlLCBzY29wZU5hbWUpKTtcbiAgICAgICAgaWYgKHRlbXBsYXRlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZXMua2V5U3RyaW5nLmZvckVhY2goKHRlbXBsYXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBlbGVtZW50OiB7IGNvbnRlbnQgfSB9ID0gdGVtcGxhdGU7XG4gICAgICAgICAgICAgICAgLy8gSUUgMTEgZG9lc24ndCBzdXBwb3J0IHRoZSBpdGVyYWJsZSBwYXJhbSBTZXQgY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICBjb25zdCBzdHlsZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICAgICAgQXJyYXkuZnJvbShjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3N0eWxlJykpLmZvckVhY2goKHMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVzLmFkZChzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZW1vdmVOb2Rlc0Zyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgc3R5bGVzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuY29uc3Qgc2hhZHlSZW5kZXJTZXQgPSBuZXcgU2V0KCk7XG4vKipcbiAqIEZvciB0aGUgZ2l2ZW4gc2NvcGUgbmFtZSwgZW5zdXJlcyB0aGF0IFNoYWR5Q1NTIHN0eWxlIHNjb3BpbmcgaXMgcGVyZm9ybWVkLlxuICogVGhpcyBpcyBkb25lIGp1c3Qgb25jZSBwZXIgc2NvcGUgbmFtZSBzbyB0aGUgZnJhZ21lbnQgYW5kIHRlbXBsYXRlIGNhbm5vdFxuICogYmUgbW9kaWZpZWQuXG4gKiAoMSkgZXh0cmFjdHMgc3R5bGVzIGZyb20gdGhlIHJlbmRlcmVkIGZyYWdtZW50IGFuZCBoYW5kcyB0aGVtIHRvIFNoYWR5Q1NTXG4gKiB0byBiZSBzY29wZWQgYW5kIGFwcGVuZGVkIHRvIHRoZSBkb2N1bWVudFxuICogKDIpIHJlbW92ZXMgc3R5bGUgZWxlbWVudHMgZnJvbSBhbGwgbGl0LWh0bWwgVGVtcGxhdGVzIGZvciB0aGlzIHNjb3BlIG5hbWUuXG4gKlxuICogTm90ZSwgPHN0eWxlPiBlbGVtZW50cyBjYW4gb25seSBiZSBwbGFjZWQgaW50byB0ZW1wbGF0ZXMgZm9yIHRoZVxuICogaW5pdGlhbCByZW5kZXJpbmcgb2YgdGhlIHNjb3BlLiBJZiA8c3R5bGU+IGVsZW1lbnRzIGFyZSBpbmNsdWRlZCBpbiB0ZW1wbGF0ZXNcbiAqIGR5bmFtaWNhbGx5IHJlbmRlcmVkIHRvIHRoZSBzY29wZSAoYWZ0ZXIgdGhlIGZpcnN0IHNjb3BlIHJlbmRlciksIHRoZXkgd2lsbFxuICogbm90IGJlIHNjb3BlZCBhbmQgdGhlIDxzdHlsZT4gd2lsbCBiZSBsZWZ0IGluIHRoZSB0ZW1wbGF0ZSBhbmQgcmVuZGVyZWRcbiAqIG91dHB1dC5cbiAqL1xuY29uc3QgcHJlcGFyZVRlbXBsYXRlU3R5bGVzID0gKHNjb3BlTmFtZSwgcmVuZGVyZWRET00sIHRlbXBsYXRlKSA9PiB7XG4gICAgc2hhZHlSZW5kZXJTZXQuYWRkKHNjb3BlTmFtZSk7XG4gICAgLy8gSWYgYHJlbmRlcmVkRE9NYCBpcyBzdGFtcGVkIGZyb20gYSBUZW1wbGF0ZSwgdGhlbiB3ZSBuZWVkIHRvIGVkaXQgdGhhdFxuICAgIC8vIFRlbXBsYXRlJ3MgdW5kZXJseWluZyB0ZW1wbGF0ZSBlbGVtZW50LiBPdGhlcndpc2UsIHdlIGNyZWF0ZSBvbmUgaGVyZVxuICAgIC8vIHRvIGdpdmUgdG8gU2hhZHlDU1MsIHdoaWNoIHN0aWxsIHJlcXVpcmVzIG9uZSB3aGlsZSBzY29waW5nLlxuICAgIGNvbnN0IHRlbXBsYXRlRWxlbWVudCA9ICEhdGVtcGxhdGUgPyB0ZW1wbGF0ZS5lbGVtZW50IDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgICAvLyBNb3ZlIHN0eWxlcyBvdXQgb2YgcmVuZGVyZWQgRE9NIGFuZCBzdG9yZS5cbiAgICBjb25zdCBzdHlsZXMgPSByZW5kZXJlZERPTS5xdWVyeVNlbGVjdG9yQWxsKCdzdHlsZScpO1xuICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBzdHlsZXM7XG4gICAgLy8gSWYgdGhlcmUgYXJlIG5vIHN0eWxlcywgc2tpcCB1bm5lY2Vzc2FyeSB3b3JrXG4gICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBFbnN1cmUgcHJlcGFyZVRlbXBsYXRlU3R5bGVzIGlzIGNhbGxlZCB0byBzdXBwb3J0IGFkZGluZ1xuICAgICAgICAvLyBzdHlsZXMgdmlhIGBwcmVwYXJlQWRvcHRlZENzc1RleHRgIHNpbmNlIHRoYXQgcmVxdWlyZXMgdGhhdFxuICAgICAgICAvLyBgcHJlcGFyZVRlbXBsYXRlU3R5bGVzYCBpcyBjYWxsZWQuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFNoYWR5Q1NTIHdpbGwgb25seSB1cGRhdGUgc3R5bGVzIGNvbnRhaW5pbmcgQGFwcGx5IGluIHRoZSB0ZW1wbGF0ZVxuICAgICAgICAvLyBnaXZlbiB0byBgcHJlcGFyZVRlbXBsYXRlU3R5bGVzYC4gSWYgbm8gbGl0IFRlbXBsYXRlIHdhcyBnaXZlbixcbiAgICAgICAgLy8gU2hhZHlDU1Mgd2lsbCBub3QgYmUgYWJsZSB0byB1cGRhdGUgdXNlcyBvZiBAYXBwbHkgaW4gYW55IHJlbGV2YW50XG4gICAgICAgIC8vIHRlbXBsYXRlLiBIb3dldmVyLCB0aGlzIGlzIG5vdCBhIHByb2JsZW0gYmVjYXVzZSB3ZSBvbmx5IGNyZWF0ZSB0aGVcbiAgICAgICAgLy8gdGVtcGxhdGUgZm9yIHRoZSBwdXJwb3NlIG9mIHN1cHBvcnRpbmcgYHByZXBhcmVBZG9wdGVkQ3NzVGV4dGAsXG4gICAgICAgIC8vIHdoaWNoIGRvZXNuJ3Qgc3VwcG9ydCBAYXBwbHkgYXQgYWxsLlxuICAgICAgICB3aW5kb3cuU2hhZHlDU1MucHJlcGFyZVRlbXBsYXRlU3R5bGVzKHRlbXBsYXRlRWxlbWVudCwgc2NvcGVOYW1lKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb25kZW5zZWRTdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgLy8gQ29sbGVjdCBzdHlsZXMgaW50byBhIHNpbmdsZSBzdHlsZS4gVGhpcyBoZWxwcyB1cyBtYWtlIHN1cmUgU2hhZHlDU1NcbiAgICAvLyBtYW5pcHVsYXRpb25zIHdpbGwgbm90IHByZXZlbnQgdXMgZnJvbSBiZWluZyBhYmxlIHRvIGZpeCB1cCB0ZW1wbGF0ZVxuICAgIC8vIHBhcnQgaW5kaWNlcy5cbiAgICAvLyBOT1RFOiBjb2xsZWN0aW5nIHN0eWxlcyBpcyBpbmVmZmljaWVudCBmb3IgYnJvd3NlcnMgYnV0IFNoYWR5Q1NTXG4gICAgLy8gY3VycmVudGx5IGRvZXMgdGhpcyBhbnl3YXkuIFdoZW4gaXQgZG9lcyBub3QsIHRoaXMgc2hvdWxkIGJlIGNoYW5nZWQuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzdHlsZSA9IHN0eWxlc1tpXTtcbiAgICAgICAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG4gICAgICAgIGNvbmRlbnNlZFN0eWxlLnRleHRDb250ZW50ICs9IHN0eWxlLnRleHRDb250ZW50O1xuICAgIH1cbiAgICAvLyBSZW1vdmUgc3R5bGVzIGZyb20gbmVzdGVkIHRlbXBsYXRlcyBpbiB0aGlzIHNjb3BlLlxuICAgIHJlbW92ZVN0eWxlc0Zyb21MaXRUZW1wbGF0ZXMoc2NvcGVOYW1lKTtcbiAgICAvLyBBbmQgdGhlbiBwdXQgdGhlIGNvbmRlbnNlZCBzdHlsZSBpbnRvIHRoZSBcInJvb3RcIiB0ZW1wbGF0ZSBwYXNzZWQgaW4gYXNcbiAgICAvLyBgdGVtcGxhdGVgLlxuICAgIGNvbnN0IGNvbnRlbnQgPSB0ZW1wbGF0ZUVsZW1lbnQuY29udGVudDtcbiAgICBpZiAoISF0ZW1wbGF0ZSkge1xuICAgICAgICBpbnNlcnROb2RlSW50b1RlbXBsYXRlKHRlbXBsYXRlLCBjb25kZW5zZWRTdHlsZSwgY29udGVudC5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnRlbnQuaW5zZXJ0QmVmb3JlKGNvbmRlbnNlZFN0eWxlLCBjb250ZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICAvLyBOb3RlLCBpdCdzIGltcG9ydGFudCB0aGF0IFNoYWR5Q1NTIGdldHMgdGhlIHRlbXBsYXRlIHRoYXQgYGxpdC1odG1sYFxuICAgIC8vIHdpbGwgYWN0dWFsbHkgcmVuZGVyIHNvIHRoYXQgaXQgY2FuIHVwZGF0ZSB0aGUgc3R5bGUgaW5zaWRlIHdoZW5cbiAgICAvLyBuZWVkZWQgKGUuZy4gQGFwcGx5IG5hdGl2ZSBTaGFkb3cgRE9NIGNhc2UpLlxuICAgIHdpbmRvdy5TaGFkeUNTUy5wcmVwYXJlVGVtcGxhdGVTdHlsZXModGVtcGxhdGVFbGVtZW50LCBzY29wZU5hbWUpO1xuICAgIGNvbnN0IHN0eWxlID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCdzdHlsZScpO1xuICAgIGlmICh3aW5kb3cuU2hhZHlDU1MubmF0aXZlU2hhZG93ICYmIHN0eWxlICE9PSBudWxsKSB7XG4gICAgICAgIC8vIFdoZW4gaW4gbmF0aXZlIFNoYWRvdyBET00sIGVuc3VyZSB0aGUgc3R5bGUgY3JlYXRlZCBieSBTaGFkeUNTUyBpc1xuICAgICAgICAvLyBpbmNsdWRlZCBpbiBpbml0aWFsbHkgcmVuZGVyZWQgb3V0cHV0IChgcmVuZGVyZWRET01gKS5cbiAgICAgICAgcmVuZGVyZWRET00uaW5zZXJ0QmVmb3JlKHN0eWxlLmNsb25lTm9kZSh0cnVlKSwgcmVuZGVyZWRET00uZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCEhdGVtcGxhdGUpIHtcbiAgICAgICAgLy8gV2hlbiBubyBzdHlsZSBpcyBsZWZ0IGluIHRoZSB0ZW1wbGF0ZSwgcGFydHMgd2lsbCBiZSBicm9rZW4gYXMgYVxuICAgICAgICAvLyByZXN1bHQuIFRvIGZpeCB0aGlzLCB3ZSBwdXQgYmFjayB0aGUgc3R5bGUgbm9kZSBTaGFkeUNTUyByZW1vdmVkXG4gICAgICAgIC8vIGFuZCB0aGVuIHRlbGwgbGl0IHRvIHJlbW92ZSB0aGF0IG5vZGUgZnJvbSB0aGUgdGVtcGxhdGUuXG4gICAgICAgIC8vIFRoZXJlIGNhbiBiZSBubyBzdHlsZSBpbiB0aGUgdGVtcGxhdGUgaW4gMiBjYXNlcyAoMSkgd2hlbiBTaGFkeSBET01cbiAgICAgICAgLy8gaXMgaW4gdXNlLCBTaGFkeUNTUyByZW1vdmVzIGFsbCBzdHlsZXMsICgyKSB3aGVuIG5hdGl2ZSBTaGFkb3cgRE9NXG4gICAgICAgIC8vIGlzIGluIHVzZSBTaGFkeUNTUyByZW1vdmVzIHRoZSBzdHlsZSBpZiBpdCBjb250YWlucyBubyBjb250ZW50LlxuICAgICAgICAvLyBOT1RFLCBTaGFkeUNTUyBjcmVhdGVzIGl0cyBvd24gc3R5bGUgc28gd2UgY2FuIHNhZmVseSBhZGQvcmVtb3ZlXG4gICAgICAgIC8vIGBjb25kZW5zZWRTdHlsZWAgaGVyZS5cbiAgICAgICAgY29udGVudC5pbnNlcnRCZWZvcmUoY29uZGVuc2VkU3R5bGUsIGNvbnRlbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgIGNvbnN0IHJlbW92ZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIHJlbW92ZXMuYWRkKGNvbmRlbnNlZFN0eWxlKTtcbiAgICAgICAgcmVtb3ZlTm9kZXNGcm9tVGVtcGxhdGUodGVtcGxhdGUsIHJlbW92ZXMpO1xuICAgIH1cbn07XG4vKipcbiAqIEV4dGVuc2lvbiB0byB0aGUgc3RhbmRhcmQgYHJlbmRlcmAgbWV0aG9kIHdoaWNoIHN1cHBvcnRzIHJlbmRlcmluZ1xuICogdG8gU2hhZG93Um9vdHMgd2hlbiB0aGUgU2hhZHlET00gKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJjb21wb25lbnRzL3NoYWR5ZG9tKVxuICogYW5kIFNoYWR5Q1NTIChodHRwczovL2dpdGh1Yi5jb20vd2ViY29tcG9uZW50cy9zaGFkeWNzcykgcG9seWZpbGxzIGFyZSB1c2VkXG4gKiBvciB3aGVuIHRoZSB3ZWJjb21wb25lbnRzanNcbiAqIChodHRwczovL2dpdGh1Yi5jb20vd2ViY29tcG9uZW50cy93ZWJjb21wb25lbnRzanMpIHBvbHlmaWxsIGlzIHVzZWQuXG4gKlxuICogQWRkcyBhIGBzY29wZU5hbWVgIG9wdGlvbiB3aGljaCBpcyB1c2VkIHRvIHNjb3BlIGVsZW1lbnQgRE9NIGFuZCBzdHlsZXNoZWV0c1xuICogd2hlbiBuYXRpdmUgU2hhZG93RE9NIGlzIHVuYXZhaWxhYmxlLiBUaGUgYHNjb3BlTmFtZWAgd2lsbCBiZSBhZGRlZCB0b1xuICogdGhlIGNsYXNzIGF0dHJpYnV0ZSBvZiBhbGwgcmVuZGVyZWQgRE9NLiBJbiBhZGRpdGlvbiwgYW55IHN0eWxlIGVsZW1lbnRzIHdpbGxcbiAqIGJlIGF1dG9tYXRpY2FsbHkgcmUtd3JpdHRlbiB3aXRoIHRoaXMgYHNjb3BlTmFtZWAgc2VsZWN0b3IgYW5kIG1vdmVkIG91dFxuICogb2YgdGhlIHJlbmRlcmVkIERPTSBhbmQgaW50byB0aGUgZG9jdW1lbnQgYDxoZWFkPmAuXG4gKlxuICogSXQgaXMgY29tbW9uIHRvIHVzZSB0aGlzIHJlbmRlciBtZXRob2QgaW4gY29uanVuY3Rpb24gd2l0aCBhIGN1c3RvbSBlbGVtZW50XG4gKiB3aGljaCByZW5kZXJzIGEgc2hhZG93Um9vdC4gV2hlbiB0aGlzIGlzIGRvbmUsIHR5cGljYWxseSB0aGUgZWxlbWVudCdzXG4gKiBgbG9jYWxOYW1lYCBzaG91bGQgYmUgdXNlZCBhcyB0aGUgYHNjb3BlTmFtZWAuXG4gKlxuICogSW4gYWRkaXRpb24gdG8gRE9NIHNjb3BpbmcsIFNoYWR5Q1NTIGFsc28gc3VwcG9ydHMgYSBiYXNpYyBzaGltIGZvciBjc3NcbiAqIGN1c3RvbSBwcm9wZXJ0aWVzIChuZWVkZWQgb25seSBvbiBvbGRlciBicm93c2VycyBsaWtlIElFMTEpIGFuZCBhIHNoaW0gZm9yXG4gKiBhIGRlcHJlY2F0ZWQgZmVhdHVyZSBjYWxsZWQgYEBhcHBseWAgdGhhdCBzdXBwb3J0cyBhcHBseWluZyBhIHNldCBvZiBjc3NcbiAqIGN1c3RvbSBwcm9wZXJ0aWVzIHRvIGEgZ2l2ZW4gbG9jYXRpb24uXG4gKlxuICogVXNhZ2UgY29uc2lkZXJhdGlvbnM6XG4gKlxuICogKiBQYXJ0IHZhbHVlcyBpbiBgPHN0eWxlPmAgZWxlbWVudHMgYXJlIG9ubHkgYXBwbGllZCB0aGUgZmlyc3QgdGltZSBhIGdpdmVuXG4gKiBgc2NvcGVOYW1lYCByZW5kZXJzLiBTdWJzZXF1ZW50IGNoYW5nZXMgdG8gcGFydHMgaW4gc3R5bGUgZWxlbWVudHMgd2lsbCBoYXZlXG4gKiBubyBlZmZlY3QuIEJlY2F1c2Ugb2YgdGhpcywgcGFydHMgaW4gc3R5bGUgZWxlbWVudHMgc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3JcbiAqIHZhbHVlcyB0aGF0IHdpbGwgbmV2ZXIgY2hhbmdlLCBmb3IgZXhhbXBsZSBwYXJ0cyB0aGF0IHNldCBzY29wZS13aWRlIHRoZW1lXG4gKiB2YWx1ZXMgb3IgcGFydHMgd2hpY2ggcmVuZGVyIHNoYXJlZCBzdHlsZSBlbGVtZW50cy5cbiAqXG4gKiAqIE5vdGUsIGR1ZSB0byBhIGxpbWl0YXRpb24gb2YgdGhlIFNoYWR5RE9NIHBvbHlmaWxsLCByZW5kZXJpbmcgaW4gYVxuICogY3VzdG9tIGVsZW1lbnQncyBgY29uc3RydWN0b3JgIGlzIG5vdCBzdXBwb3J0ZWQuIEluc3RlYWQgcmVuZGVyaW5nIHNob3VsZFxuICogZWl0aGVyIGRvbmUgYXN5bmNocm9ub3VzbHksIGZvciBleGFtcGxlIGF0IG1pY3JvdGFzayB0aW1pbmcgKGZvciBleGFtcGxlXG4gKiBgUHJvbWlzZS5yZXNvbHZlKClgKSwgb3IgYmUgZGVmZXJyZWQgdW50aWwgdGhlIGZpcnN0IHRpbWUgdGhlIGVsZW1lbnQnc1xuICogYGNvbm5lY3RlZENhbGxiYWNrYCBydW5zLlxuICpcbiAqIFVzYWdlIGNvbnNpZGVyYXRpb25zIHdoZW4gdXNpbmcgc2hpbW1lZCBjdXN0b20gcHJvcGVydGllcyBvciBgQGFwcGx5YDpcbiAqXG4gKiAqIFdoZW5ldmVyIGFueSBkeW5hbWljIGNoYW5nZXMgYXJlIG1hZGUgd2hpY2ggYWZmZWN0XG4gKiBjc3MgY3VzdG9tIHByb3BlcnRpZXMsIGBTaGFkeUNTUy5zdHlsZUVsZW1lbnQoZWxlbWVudClgIG11c3QgYmUgY2FsbGVkXG4gKiB0byB1cGRhdGUgdGhlIGVsZW1lbnQuIFRoZXJlIGFyZSB0d28gY2FzZXMgd2hlbiB0aGlzIGlzIG5lZWRlZDpcbiAqICgxKSB0aGUgZWxlbWVudCBpcyBjb25uZWN0ZWQgdG8gYSBuZXcgcGFyZW50LCAoMikgYSBjbGFzcyBpcyBhZGRlZCB0byB0aGVcbiAqIGVsZW1lbnQgdGhhdCBjYXVzZXMgaXQgdG8gbWF0Y2ggZGlmZmVyZW50IGN1c3RvbSBwcm9wZXJ0aWVzLlxuICogVG8gYWRkcmVzcyB0aGUgZmlyc3QgY2FzZSB3aGVuIHJlbmRlcmluZyBhIGN1c3RvbSBlbGVtZW50LCBgc3R5bGVFbGVtZW50YFxuICogc2hvdWxkIGJlIGNhbGxlZCBpbiB0aGUgZWxlbWVudCdzIGBjb25uZWN0ZWRDYWxsYmFja2AuXG4gKlxuICogKiBTaGltbWVkIGN1c3RvbSBwcm9wZXJ0aWVzIG1heSBvbmx5IGJlIGRlZmluZWQgZWl0aGVyIGZvciBhbiBlbnRpcmVcbiAqIHNoYWRvd1Jvb3QgKGZvciBleGFtcGxlLCBpbiBhIGA6aG9zdGAgcnVsZSkgb3IgdmlhIGEgcnVsZSB0aGF0IGRpcmVjdGx5XG4gKiBtYXRjaGVzIGFuIGVsZW1lbnQgd2l0aCBhIHNoYWRvd1Jvb3QuIEluIG90aGVyIHdvcmRzLCBpbnN0ZWFkIG9mIGZsb3dpbmcgZnJvbVxuICogcGFyZW50IHRvIGNoaWxkIGFzIGRvIG5hdGl2ZSBjc3MgY3VzdG9tIHByb3BlcnRpZXMsIHNoaW1tZWQgY3VzdG9tIHByb3BlcnRpZXNcbiAqIGZsb3cgb25seSBmcm9tIHNoYWRvd1Jvb3RzIHRvIG5lc3RlZCBzaGFkb3dSb290cy5cbiAqXG4gKiAqIFdoZW4gdXNpbmcgYEBhcHBseWAgbWl4aW5nIGNzcyBzaG9ydGhhbmQgcHJvcGVydHkgbmFtZXMgd2l0aFxuICogbm9uLXNob3J0aGFuZCBuYW1lcyAoZm9yIGV4YW1wbGUgYGJvcmRlcmAgYW5kIGBib3JkZXItd2lkdGhgKSBpcyBub3RcbiAqIHN1cHBvcnRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlbmRlciA9IChyZXN1bHQsIGNvbnRhaW5lciwgb3B0aW9ucykgPT4ge1xuICAgIGlmICghb3B0aW9ucyB8fCB0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcgfHwgIW9wdGlvbnMuc2NvcGVOYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGBzY29wZU5hbWVgIG9wdGlvbiBpcyByZXF1aXJlZC4nKTtcbiAgICB9XG4gICAgY29uc3Qgc2NvcGVOYW1lID0gb3B0aW9ucy5zY29wZU5hbWU7XG4gICAgY29uc3QgaGFzUmVuZGVyZWQgPSBwYXJ0cy5oYXMoY29udGFpbmVyKTtcbiAgICBjb25zdCBuZWVkc1Njb3BpbmcgPSBjb21wYXRpYmxlU2hhZHlDU1NWZXJzaW9uICYmXG4gICAgICAgIGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gMTEgLyogTm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFICovICYmXG4gICAgICAgICEhY29udGFpbmVyLmhvc3Q7XG4gICAgLy8gSGFuZGxlIGZpcnN0IHJlbmRlciB0byBhIHNjb3BlIHNwZWNpYWxseS4uLlxuICAgIGNvbnN0IGZpcnN0U2NvcGVSZW5kZXIgPSBuZWVkc1Njb3BpbmcgJiYgIXNoYWR5UmVuZGVyU2V0LmhhcyhzY29wZU5hbWUpO1xuICAgIC8vIE9uIGZpcnN0IHNjb3BlIHJlbmRlciwgcmVuZGVyIGludG8gYSBmcmFnbWVudDsgdGhpcyBjYW5ub3QgYmUgYSBzaW5nbGVcbiAgICAvLyBmcmFnbWVudCB0aGF0IGlzIHJldXNlZCBzaW5jZSBuZXN0ZWQgcmVuZGVycyBjYW4gb2NjdXIgc3luY2hyb25vdXNseS5cbiAgICBjb25zdCByZW5kZXJDb250YWluZXIgPSBmaXJzdFNjb3BlUmVuZGVyID8gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpIDogY29udGFpbmVyO1xuICAgIGxpdFJlbmRlcihyZXN1bHQsIHJlbmRlckNvbnRhaW5lciwgT2JqZWN0LmFzc2lnbih7IHRlbXBsYXRlRmFjdG9yeTogc2hhZHlUZW1wbGF0ZUZhY3Rvcnkoc2NvcGVOYW1lKSB9LCBvcHRpb25zKSk7XG4gICAgLy8gV2hlbiBwZXJmb3JtaW5nIGZpcnN0IHNjb3BlIHJlbmRlcixcbiAgICAvLyAoMSkgV2UndmUgcmVuZGVyZWQgaW50byBhIGZyYWdtZW50IHNvIHRoYXQgdGhlcmUncyBhIGNoYW5jZSB0b1xuICAgIC8vIGBwcmVwYXJlVGVtcGxhdGVTdHlsZXNgIGJlZm9yZSBzdWItZWxlbWVudHMgaGl0IHRoZSBET01cbiAgICAvLyAod2hpY2ggbWlnaHQgY2F1c2UgdGhlbSB0byByZW5kZXIgYmFzZWQgb24gYSBjb21tb24gcGF0dGVybiBvZlxuICAgIC8vIHJlbmRlcmluZyBpbiBhIGN1c3RvbSBlbGVtZW50J3MgYGNvbm5lY3RlZENhbGxiYWNrYCk7XG4gICAgLy8gKDIpIFNjb3BlIHRoZSB0ZW1wbGF0ZSB3aXRoIFNoYWR5Q1NTIG9uZSB0aW1lIG9ubHkgZm9yIHRoaXMgc2NvcGUuXG4gICAgLy8gKDMpIFJlbmRlciB0aGUgZnJhZ21lbnQgaW50byB0aGUgY29udGFpbmVyIGFuZCBtYWtlIHN1cmUgdGhlXG4gICAgLy8gY29udGFpbmVyIGtub3dzIGl0cyBgcGFydGAgaXMgdGhlIG9uZSB3ZSBqdXN0IHJlbmRlcmVkLiBUaGlzIGVuc3VyZXNcbiAgICAvLyBET00gd2lsbCBiZSByZS11c2VkIG9uIHN1YnNlcXVlbnQgcmVuZGVycy5cbiAgICBpZiAoZmlyc3RTY29wZVJlbmRlcikge1xuICAgICAgICBjb25zdCBwYXJ0ID0gcGFydHMuZ2V0KHJlbmRlckNvbnRhaW5lcik7XG4gICAgICAgIHBhcnRzLmRlbGV0ZShyZW5kZXJDb250YWluZXIpO1xuICAgICAgICAvLyBTaGFkeUNTUyBtaWdodCBoYXZlIHN0eWxlIHNoZWV0cyAoZS5nLiBmcm9tIGBwcmVwYXJlQWRvcHRlZENzc1RleHRgKVxuICAgICAgICAvLyB0aGF0IHNob3VsZCBhcHBseSB0byBgcmVuZGVyQ29udGFpbmVyYCBldmVuIGlmIHRoZSByZW5kZXJlZCB2YWx1ZSBpc1xuICAgICAgICAvLyBub3QgYSBUZW1wbGF0ZUluc3RhbmNlLiBIb3dldmVyLCBpdCB3aWxsIG9ubHkgaW5zZXJ0IHNjb3BlZCBzdHlsZXNcbiAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQgaWYgYHByZXBhcmVUZW1wbGF0ZVN0eWxlc2AgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWRcbiAgICAgICAgLy8gZm9yIHRoZSBnaXZlbiBzY29wZSBuYW1lLlxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHBhcnQudmFsdWUgaW5zdGFuY2VvZiBUZW1wbGF0ZUluc3RhbmNlID9cbiAgICAgICAgICAgIHBhcnQudmFsdWUudGVtcGxhdGUgOlxuICAgICAgICAgICAgdW5kZWZpbmVkO1xuICAgICAgICBwcmVwYXJlVGVtcGxhdGVTdHlsZXMoc2NvcGVOYW1lLCByZW5kZXJDb250YWluZXIsIHRlbXBsYXRlKTtcbiAgICAgICAgcmVtb3ZlTm9kZXMoY29udGFpbmVyLCBjb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyZW5kZXJDb250YWluZXIpO1xuICAgICAgICBwYXJ0cy5zZXQoY29udGFpbmVyLCBwYXJ0KTtcbiAgICB9XG4gICAgLy8gQWZ0ZXIgZWxlbWVudHMgaGF2ZSBoaXQgdGhlIERPTSwgdXBkYXRlIHN0eWxpbmcgaWYgdGhpcyBpcyB0aGVcbiAgICAvLyBpbml0aWFsIHJlbmRlciB0byB0aGlzIGNvbnRhaW5lci5cbiAgICAvLyBUaGlzIGlzIG5lZWRlZCB3aGVuZXZlciBkeW5hbWljIGNoYW5nZXMgYXJlIG1hZGUgc28gaXQgd291bGQgYmVcbiAgICAvLyBzYWZlc3QgdG8gZG8gZXZlcnkgcmVuZGVyOyBob3dldmVyLCB0aGlzIHdvdWxkIHJlZ3Jlc3MgcGVyZm9ybWFuY2VcbiAgICAvLyBzbyB3ZSBsZWF2ZSBpdCB1cCB0byB0aGUgdXNlciB0byBjYWxsIGBTaGFkeUNTUy5zdHlsZUVsZW1lbnRgXG4gICAgLy8gZm9yIGR5bmFtaWMgY2hhbmdlcy5cbiAgICBpZiAoIWhhc1JlbmRlcmVkICYmIG5lZWRzU2NvcGluZykge1xuICAgICAgICB3aW5kb3cuU2hhZHlDU1Muc3R5bGVFbGVtZW50KGNvbnRhaW5lci5ob3N0KTtcbiAgICB9XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hhZHktcmVuZGVyLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbnZhciBfYTtcbi8qKlxuICogV2hlbiB1c2luZyBDbG9zdXJlIENvbXBpbGVyLCBKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KHByb3BlcnR5LCBvYmplY3QpIGlzXG4gKiByZXBsYWNlZCBhdCBjb21waWxlIHRpbWUgYnkgdGhlIG11bmdlZCBuYW1lIGZvciBvYmplY3RbcHJvcGVydHldLiBXZSBjYW5ub3RcbiAqIGFsaWFzIHRoaXMgZnVuY3Rpb24sIHNvIHdlIGhhdmUgdG8gdXNlIGEgc21hbGwgc2hpbSB0aGF0IGhhcyB0aGUgc2FtZVxuICogYmVoYXZpb3Igd2hlbiBub3QgY29tcGlsaW5nLlxuICovXG53aW5kb3cuSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSA9XG4gICAgKHByb3AsIF9vYmopID0+IHByb3A7XG5leHBvcnQgY29uc3QgZGVmYXVsdENvbnZlcnRlciA9IHtcbiAgICB0b0F0dHJpYnV0ZSh2YWx1ZSwgdHlwZSkge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgQm9vbGVhbjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgPyAnJyA6IG51bGw7XG4gICAgICAgICAgICBjYXNlIE9iamVjdDpcbiAgICAgICAgICAgIGNhc2UgQXJyYXk6XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIHZhbHVlIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYCBwYXNzIHRoaXMgdGhyb3VnaFxuICAgICAgICAgICAgICAgIC8vIHRvIGFsbG93IHJlbW92aW5nL25vIGNoYW5nZSBiZWhhdmlvci5cbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIGZyb21BdHRyaWJ1dGUodmFsdWUsIHR5cGUpIHtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIEJvb2xlYW46XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlICE9PSBudWxsO1xuICAgICAgICAgICAgY2FzZSBOdW1iZXI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlID09PSBudWxsID8gbnVsbCA6IE51bWJlcih2YWx1ZSk7XG4gICAgICAgICAgICBjYXNlIE9iamVjdDpcbiAgICAgICAgICAgIGNhc2UgQXJyYXk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG59O1xuLyoqXG4gKiBDaGFuZ2UgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBkaWZmZXJlbnQgZnJvbSBgb2xkVmFsdWVgLlxuICogVGhpcyBtZXRob2QgaXMgdXNlZCBhcyB0aGUgZGVmYXVsdCBmb3IgYSBwcm9wZXJ0eSdzIGBoYXNDaGFuZ2VkYCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGNvbnN0IG5vdEVxdWFsID0gKHZhbHVlLCBvbGQpID0+IHtcbiAgICAvLyBUaGlzIGVuc3VyZXMgKG9sZD09TmFOLCB2YWx1ZT09TmFOKSBhbHdheXMgcmV0dXJucyBmYWxzZVxuICAgIHJldHVybiBvbGQgIT09IHZhbHVlICYmIChvbGQgPT09IG9sZCB8fCB2YWx1ZSA9PT0gdmFsdWUpO1xufTtcbmNvbnN0IGRlZmF1bHRQcm9wZXJ0eURlY2xhcmF0aW9uID0ge1xuICAgIGF0dHJpYnV0ZTogdHJ1ZSxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY29udmVydGVyOiBkZWZhdWx0Q29udmVydGVyLFxuICAgIHJlZmxlY3Q6IGZhbHNlLFxuICAgIGhhc0NoYW5nZWQ6IG5vdEVxdWFsXG59O1xuY29uc3QgU1RBVEVfSEFTX1VQREFURUQgPSAxO1xuY29uc3QgU1RBVEVfVVBEQVRFX1JFUVVFU1RFRCA9IDEgPDwgMjtcbmNvbnN0IFNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fQVRUUklCVVRFID0gMSA8PCAzO1xuY29uc3QgU1RBVEVfSVNfUkVGTEVDVElOR19UT19QUk9QRVJUWSA9IDEgPDwgNDtcbi8qKlxuICogVGhlIENsb3N1cmUgSlMgQ29tcGlsZXIgZG9lc24ndCBjdXJyZW50bHkgaGF2ZSBnb29kIHN1cHBvcnQgZm9yIHN0YXRpY1xuICogcHJvcGVydHkgc2VtYW50aWNzIHdoZXJlIFwidGhpc1wiIGlzIGR5bmFtaWMgKGUuZy5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1jb21waWxlci9pc3N1ZXMvMzE3NyBhbmQgb3RoZXJzKSBzbyB3ZSB1c2VcbiAqIHRoaXMgaGFjayB0byBieXBhc3MgYW55IHJld3JpdGluZyBieSB0aGUgY29tcGlsZXIuXG4gKi9cbmNvbnN0IGZpbmFsaXplZCA9ICdmaW5hbGl6ZWQnO1xuLyoqXG4gKiBCYXNlIGVsZW1lbnQgY2xhc3Mgd2hpY2ggbWFuYWdlcyBlbGVtZW50IHByb3BlcnRpZXMgYW5kIGF0dHJpYnV0ZXMuIFdoZW5cbiAqIHByb3BlcnRpZXMgY2hhbmdlLCB0aGUgYHVwZGF0ZWAgbWV0aG9kIGlzIGFzeW5jaHJvbm91c2x5IGNhbGxlZC4gVGhpcyBtZXRob2RcbiAqIHNob3VsZCBiZSBzdXBwbGllZCBieSBzdWJjbGFzc2VycyB0byByZW5kZXIgdXBkYXRlcyBhcyBkZXNpcmVkLlxuICovXG5leHBvcnQgY2xhc3MgVXBkYXRpbmdFbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IDA7XG4gICAgICAgIHRoaXMuX2luc3RhbmNlUHJvcGVydGllcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0byBhbiB1bnJlc29sdmVkIFByb21pc2Ugc28gd2UgY2FuIG1ha2Ugc3VyZSB0aGUgZWxlbWVudCBoYXNcbiAgICAgICAgLy8gY29ubmVjdGVkIGJlZm9yZSBmaXJzdCB1cGRhdGUuXG4gICAgICAgIHRoaXMuX3VwZGF0ZVByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzKSA9PiB0aGlzLl9lbmFibGVVcGRhdGluZ1Jlc29sdmVyID0gcmVzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcCB3aXRoIGtleXMgZm9yIGFueSBwcm9wZXJ0aWVzIHRoYXQgaGF2ZSBjaGFuZ2VkIHNpbmNlIHRoZSBsYXN0XG4gICAgICAgICAqIHVwZGF0ZSBjeWNsZSB3aXRoIHByZXZpb3VzIHZhbHVlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2NoYW5nZWRQcm9wZXJ0aWVzID0gbmV3IE1hcCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogTWFwIHdpdGgga2V5cyBvZiBwcm9wZXJ0aWVzIHRoYXQgc2hvdWxkIGJlIHJlZmxlY3RlZCB3aGVuIHVwZGF0ZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9yZWZsZWN0aW5nUHJvcGVydGllcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsaXN0IG9mIGF0dHJpYnV0ZXMgY29ycmVzcG9uZGluZyB0byB0aGUgcmVnaXN0ZXJlZCBwcm9wZXJ0aWVzLlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIC8vIG5vdGU6IHBpZ2d5IGJhY2tpbmcgb24gdGhpcyB0byBlbnN1cmUgd2UncmUgZmluYWxpemVkLlxuICAgICAgICB0aGlzLmZpbmFsaXplKCk7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBbXTtcbiAgICAgICAgLy8gVXNlIGZvckVhY2ggc28gdGhpcyB3b3JrcyBldmVuIGlmIGZvci9vZiBsb29wcyBhcmUgY29tcGlsZWQgdG8gZm9yIGxvb3BzXG4gICAgICAgIC8vIGV4cGVjdGluZyBhcnJheXNcbiAgICAgICAgdGhpcy5fY2xhc3NQcm9wZXJ0aWVzLmZvckVhY2goKHYsIHApID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHIgPSB0aGlzLl9hdHRyaWJ1dGVOYW1lRm9yUHJvcGVydHkocCwgdik7XG4gICAgICAgICAgICBpZiAoYXR0ciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYXR0cmlidXRlVG9Qcm9wZXJ0eU1hcC5zZXQoYXR0ciwgcCk7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcy5wdXNoKGF0dHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhlIHByaXZhdGUgYF9jbGFzc1Byb3BlcnRpZXNgIHByb3BlcnR5IG1ldGFkYXRhIGlzIGNyZWF0ZWQuXG4gICAgICogSW4gYWRkaXRpb24gdG8gYGZpbmFsaXplYCB0aGlzIGlzIGFsc28gY2FsbGVkIGluIGBjcmVhdGVQcm9wZXJ0eWAgdG9cbiAgICAgKiBlbnN1cmUgdGhlIGBAcHJvcGVydHlgIGRlY29yYXRvciBjYW4gYWRkIHByb3BlcnR5IG1ldGFkYXRhLlxuICAgICAqL1xuICAgIC8qKiBAbm9jb2xsYXBzZSAqL1xuICAgIHN0YXRpYyBfZW5zdXJlQ2xhc3NQcm9wZXJ0aWVzKCkge1xuICAgICAgICAvLyBlbnN1cmUgcHJpdmF0ZSBzdG9yYWdlIGZvciBwcm9wZXJ0eSBkZWNsYXJhdGlvbnMuXG4gICAgICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfY2xhc3NQcm9wZXJ0aWVzJywgdGhpcykpKSB7XG4gICAgICAgICAgICB0aGlzLl9jbGFzc1Byb3BlcnRpZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICAvLyBOT1RFOiBXb3JrYXJvdW5kIElFMTEgbm90IHN1cHBvcnRpbmcgTWFwIGNvbnN0cnVjdG9yIGFyZ3VtZW50LlxuICAgICAgICAgICAgY29uc3Qgc3VwZXJQcm9wZXJ0aWVzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9jbGFzc1Byb3BlcnRpZXM7XG4gICAgICAgICAgICBpZiAoc3VwZXJQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzdXBlclByb3BlcnRpZXMuZm9yRWFjaCgodiwgaykgPT4gdGhpcy5fY2xhc3NQcm9wZXJ0aWVzLnNldChrLCB2KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHByb3BlcnR5IGFjY2Vzc29yIG9uIHRoZSBlbGVtZW50IHByb3RvdHlwZSBpZiBvbmUgZG9lcyBub3QgZXhpc3RcbiAgICAgKiBhbmQgc3RvcmVzIGEgUHJvcGVydHlEZWNsYXJhdGlvbiBmb3IgdGhlIHByb3BlcnR5IHdpdGggdGhlIGdpdmVuIG9wdGlvbnMuXG4gICAgICogVGhlIHByb3BlcnR5IHNldHRlciBjYWxscyB0aGUgcHJvcGVydHkncyBgaGFzQ2hhbmdlZGAgcHJvcGVydHkgb3B0aW9uXG4gICAgICogb3IgdXNlcyBhIHN0cmljdCBpZGVudGl0eSBjaGVjayB0byBkZXRlcm1pbmUgd2hldGhlciBvciBub3QgdG8gcmVxdWVzdFxuICAgICAqIGFuIHVwZGF0ZS5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIG1heSBiZSBvdmVycmlkZGVuIHRvIGN1c3RvbWl6ZSBwcm9wZXJ0aWVzOyBob3dldmVyLFxuICAgICAqIHdoZW4gZG9pbmcgc28sIGl0J3MgaW1wb3J0YW50IHRvIGNhbGwgYHN1cGVyLmNyZWF0ZVByb3BlcnR5YCB0byBlbnN1cmVcbiAgICAgKiB0aGUgcHJvcGVydHkgaXMgc2V0dXAgY29ycmVjdGx5LiBUaGlzIG1ldGhvZCBjYWxsc1xuICAgICAqIGBnZXRQcm9wZXJ0eURlc2NyaXB0b3JgIGludGVybmFsbHkgdG8gZ2V0IGEgZGVzY3JpcHRvciB0byBpbnN0YWxsLlxuICAgICAqIFRvIGN1c3RvbWl6ZSB3aGF0IHByb3BlcnRpZXMgZG8gd2hlbiB0aGV5IGFyZSBnZXQgb3Igc2V0LCBvdmVycmlkZVxuICAgICAqIGBnZXRQcm9wZXJ0eURlc2NyaXB0b3JgLiBUbyBjdXN0b21pemUgdGhlIG9wdGlvbnMgZm9yIGEgcHJvcGVydHksXG4gICAgICogaW1wbGVtZW50IGBjcmVhdGVQcm9wZXJ0eWAgbGlrZSB0aGlzOlxuICAgICAqXG4gICAgICogc3RhdGljIGNyZWF0ZVByb3BlcnR5KG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgKiAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKG9wdGlvbnMsIHtteU9wdGlvbjogdHJ1ZX0pO1xuICAgICAqICAgc3VwZXIuY3JlYXRlUHJvcGVydHkobmFtZSwgb3B0aW9ucyk7XG4gICAgICogfVxuICAgICAqXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlUHJvcGVydHkobmFtZSwgb3B0aW9ucyA9IGRlZmF1bHRQcm9wZXJ0eURlY2xhcmF0aW9uKSB7XG4gICAgICAgIC8vIE5vdGUsIHNpbmNlIHRoaXMgY2FuIGJlIGNhbGxlZCBieSB0aGUgYEBwcm9wZXJ0eWAgZGVjb3JhdG9yIHdoaWNoXG4gICAgICAgIC8vIGlzIGNhbGxlZCBiZWZvcmUgYGZpbmFsaXplYCwgd2UgZW5zdXJlIHN0b3JhZ2UgZXhpc3RzIGZvciBwcm9wZXJ0eVxuICAgICAgICAvLyBtZXRhZGF0YS5cbiAgICAgICAgdGhpcy5fZW5zdXJlQ2xhc3NQcm9wZXJ0aWVzKCk7XG4gICAgICAgIHRoaXMuX2NsYXNzUHJvcGVydGllcy5zZXQobmFtZSwgb3B0aW9ucyk7XG4gICAgICAgIC8vIERvIG5vdCBnZW5lcmF0ZSBhbiBhY2Nlc3NvciBpZiB0aGUgcHJvdG90eXBlIGFscmVhZHkgaGFzIG9uZSwgc2luY2VcbiAgICAgICAgLy8gaXQgd291bGQgYmUgbG9zdCBvdGhlcndpc2UgYW5kIHRoYXQgd291bGQgbmV2ZXIgYmUgdGhlIHVzZXIncyBpbnRlbnRpb247XG4gICAgICAgIC8vIEluc3RlYWQsIHdlIGV4cGVjdCB1c2VycyB0byBjYWxsIGByZXF1ZXN0VXBkYXRlYCB0aGVtc2VsdmVzIGZyb21cbiAgICAgICAgLy8gdXNlci1kZWZpbmVkIGFjY2Vzc29ycy4gTm90ZSB0aGF0IGlmIHRoZSBzdXBlciBoYXMgYW4gYWNjZXNzb3Igd2Ugd2lsbFxuICAgICAgICAvLyBzdGlsbCBvdmVyd3JpdGUgaXRcbiAgICAgICAgaWYgKG9wdGlvbnMubm9BY2Nlc3NvciB8fCB0aGlzLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGtleSA9IHR5cGVvZiBuYW1lID09PSAnc3ltYm9sJyA/IFN5bWJvbCgpIDogYF9fJHtuYW1lfWA7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSB0aGlzLmdldFByb3BlcnR5RGVzY3JpcHRvcihuYW1lLCBrZXksIG9wdGlvbnMpO1xuICAgICAgICBpZiAoZGVzY3JpcHRvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5wcm90b3R5cGUsIG5hbWUsIGRlc2NyaXB0b3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwcm9wZXJ0eSBkZXNjcmlwdG9yIHRvIGJlIGRlZmluZWQgb24gdGhlIGdpdmVuIG5hbWVkIHByb3BlcnR5LlxuICAgICAqIElmIG5vIGRlc2NyaXB0b3IgaXMgcmV0dXJuZWQsIHRoZSBwcm9wZXJ0eSB3aWxsIG5vdCBiZWNvbWUgYW4gYWNjZXNzb3IuXG4gICAgICogRm9yIGV4YW1wbGUsXG4gICAgICpcbiAgICAgKiAgIGNsYXNzIE15RWxlbWVudCBleHRlbmRzIExpdEVsZW1lbnQge1xuICAgICAqICAgICBzdGF0aWMgZ2V0UHJvcGVydHlEZXNjcmlwdG9yKG5hbWUsIGtleSwgb3B0aW9ucykge1xuICAgICAqICAgICAgIGNvbnN0IGRlZmF1bHREZXNjcmlwdG9yID1cbiAgICAgKiAgICAgICAgICAgc3VwZXIuZ2V0UHJvcGVydHlEZXNjcmlwdG9yKG5hbWUsIGtleSwgb3B0aW9ucyk7XG4gICAgICogICAgICAgY29uc3Qgc2V0dGVyID0gZGVmYXVsdERlc2NyaXB0b3Iuc2V0O1xuICAgICAqICAgICAgIHJldHVybiB7XG4gICAgICogICAgICAgICBnZXQ6IGRlZmF1bHREZXNjcmlwdG9yLmdldCxcbiAgICAgKiAgICAgICAgIHNldCh2YWx1ZSkge1xuICAgICAqICAgICAgICAgICBzZXR0ZXIuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgICogICAgICAgICAgIC8vIGN1c3RvbSBhY3Rpb24uXG4gICAgICogICAgICAgICB9LFxuICAgICAqICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAqICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAqICAgICAgIH1cbiAgICAgKiAgICAgfVxuICAgICAqICAgfVxuICAgICAqXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0UHJvcGVydHlEZXNjcmlwdG9yKG5hbWUsIGtleSwgX29wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnkgbm8gc3ltYm9sIGluIGluZGV4XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNba2V5XTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXNbbmFtZV07XG4gICAgICAgICAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVxdWVzdFVwZGF0ZShuYW1lLCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcm9wZXJ0eSBvcHRpb25zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gcHJvcGVydHkuXG4gICAgICogVGhlc2Ugb3B0aW9ucyBhcmUgZGVmaW5lZCB3aXRoIGEgUHJvcGVydHlEZWNsYXJhdGlvbiB2aWEgdGhlIGBwcm9wZXJ0aWVzYFxuICAgICAqIG9iamVjdCBvciB0aGUgYEBwcm9wZXJ0eWAgZGVjb3JhdG9yIGFuZCBhcmUgcmVnaXN0ZXJlZCBpblxuICAgICAqIGBjcmVhdGVQcm9wZXJ0eSguLi4pYC5cbiAgICAgKlxuICAgICAqIE5vdGUsIHRoaXMgbWV0aG9kIHNob3VsZCBiZSBjb25zaWRlcmVkIFwiZmluYWxcIiBhbmQgbm90IG92ZXJyaWRkZW4uIFRvXG4gICAgICogY3VzdG9taXplIHRoZSBvcHRpb25zIGZvciBhIGdpdmVuIHByb3BlcnR5LCBvdmVycmlkZSBgY3JlYXRlUHJvcGVydHlgLlxuICAgICAqXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKiBAZmluYWxcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0UHJvcGVydHlPcHRpb25zKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NsYXNzUHJvcGVydGllcyAmJiB0aGlzLl9jbGFzc1Byb3BlcnRpZXMuZ2V0KG5hbWUpIHx8XG4gICAgICAgICAgICBkZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBwcm9wZXJ0eSBhY2Nlc3NvcnMgZm9yIHJlZ2lzdGVyZWQgcHJvcGVydGllcyBhbmQgZW5zdXJlc1xuICAgICAqIGFueSBzdXBlcmNsYXNzZXMgYXJlIGFsc28gZmluYWxpemVkLlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGZpbmFsaXplKCkge1xuICAgICAgICAvLyBmaW5hbGl6ZSBhbnkgc3VwZXJjbGFzc2VzXG4gICAgICAgIGNvbnN0IHN1cGVyQ3RvciA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKTtcbiAgICAgICAgaWYgKCFzdXBlckN0b3IuaGFzT3duUHJvcGVydHkoZmluYWxpemVkKSkge1xuICAgICAgICAgICAgc3VwZXJDdG9yLmZpbmFsaXplKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1tmaW5hbGl6ZWRdID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fZW5zdXJlQ2xhc3NQcm9wZXJ0aWVzKCk7XG4gICAgICAgIC8vIGluaXRpYWxpemUgTWFwIHBvcHVsYXRlZCBpbiBvYnNlcnZlZEF0dHJpYnV0ZXNcbiAgICAgICAgdGhpcy5fYXR0cmlidXRlVG9Qcm9wZXJ0eU1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgLy8gbWFrZSBhbnkgcHJvcGVydGllc1xuICAgICAgICAvLyBOb3RlLCBvbmx5IHByb2Nlc3MgXCJvd25cIiBwcm9wZXJ0aWVzIHNpbmNlIHRoaXMgZWxlbWVudCB3aWxsIGluaGVyaXRcbiAgICAgICAgLy8gYW55IHByb3BlcnRpZXMgZGVmaW5lZCBvbiB0aGUgc3VwZXJDbGFzcywgYW5kIGZpbmFsaXphdGlvbiBlbnN1cmVzXG4gICAgICAgIC8vIHRoZSBlbnRpcmUgcHJvdG90eXBlIGNoYWluIGlzIGZpbmFsaXplZC5cbiAgICAgICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgncHJvcGVydGllcycsIHRoaXMpKSkge1xuICAgICAgICAgICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BlcnRpZXM7XG4gICAgICAgICAgICAvLyBzdXBwb3J0IHN5bWJvbHMgaW4gcHJvcGVydGllcyAoSUUxMSBkb2VzIG5vdCBzdXBwb3J0IHRoaXMpXG4gICAgICAgICAgICBjb25zdCBwcm9wS2V5cyA9IFtcbiAgICAgICAgICAgICAgICAuLi5PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwcm9wcyksXG4gICAgICAgICAgICAgICAgLi4uKHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSAnZnVuY3Rpb24nKSA/XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocHJvcHMpIDpcbiAgICAgICAgICAgICAgICAgICAgW11cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICAvLyBUaGlzIGZvci9vZiBpcyBvayBiZWNhdXNlIHByb3BLZXlzIGlzIGFuIGFycmF5XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHAgb2YgcHJvcEtleXMpIHtcbiAgICAgICAgICAgICAgICAvLyBub3RlLCB1c2Ugb2YgYGFueWAgaXMgZHVlIHRvIFR5cGVTcmlwdCBsYWNrIG9mIHN1cHBvcnQgZm9yIHN5bWJvbCBpblxuICAgICAgICAgICAgICAgIC8vIGluZGV4IHR5cGVzXG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueSBubyBzeW1ib2wgaW4gaW5kZXhcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVByb3BlcnR5KHAsIHByb3BzW3BdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcm9wZXJ0eSBuYW1lIGZvciB0aGUgZ2l2ZW4gYXR0cmlidXRlIGBuYW1lYC5cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfYXR0cmlidXRlTmFtZUZvclByb3BlcnR5KG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlID0gb3B0aW9ucy5hdHRyaWJ1dGU7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGUgPT09IGZhbHNlID9cbiAgICAgICAgICAgIHVuZGVmaW5lZCA6XG4gICAgICAgICAgICAodHlwZW9mIGF0dHJpYnV0ZSA9PT0gJ3N0cmluZycgP1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSA6XG4gICAgICAgICAgICAgICAgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyA/IG5hbWUudG9Mb3dlckNhc2UoKSA6IHVuZGVmaW5lZCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYSBwcm9wZXJ0eSBzaG91bGQgcmVxdWVzdCBhbiB1cGRhdGUuXG4gICAgICogQ2FsbGVkIHdoZW4gYSBwcm9wZXJ0eSB2YWx1ZSBpcyBzZXQgYW5kIHVzZXMgdGhlIGBoYXNDaGFuZ2VkYFxuICAgICAqIG9wdGlvbiBmb3IgdGhlIHByb3BlcnR5IGlmIHByZXNlbnQgb3IgYSBzdHJpY3QgaWRlbnRpdHkgY2hlY2suXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX3ZhbHVlSGFzQ2hhbmdlZCh2YWx1ZSwgb2xkLCBoYXNDaGFuZ2VkID0gbm90RXF1YWwpIHtcbiAgICAgICAgcmV0dXJuIGhhc0NoYW5nZWQodmFsdWUsIG9sZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIGZvciB0aGUgZ2l2ZW4gYXR0cmlidXRlIHZhbHVlLlxuICAgICAqIENhbGxlZCB2aWEgdGhlIGBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tgIGFuZCB1c2VzIHRoZSBwcm9wZXJ0eSdzXG4gICAgICogYGNvbnZlcnRlcmAgb3IgYGNvbnZlcnRlci5mcm9tQXR0cmlidXRlYCBwcm9wZXJ0eSBvcHRpb24uXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX3Byb3BlcnR5VmFsdWVGcm9tQXR0cmlidXRlKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBvcHRpb25zLnR5cGU7XG4gICAgICAgIGNvbnN0IGNvbnZlcnRlciA9IG9wdGlvbnMuY29udmVydGVyIHx8IGRlZmF1bHRDb252ZXJ0ZXI7XG4gICAgICAgIGNvbnN0IGZyb21BdHRyaWJ1dGUgPSAodHlwZW9mIGNvbnZlcnRlciA9PT0gJ2Z1bmN0aW9uJyA/IGNvbnZlcnRlciA6IGNvbnZlcnRlci5mcm9tQXR0cmlidXRlKTtcbiAgICAgICAgcmV0dXJuIGZyb21BdHRyaWJ1dGUgPyBmcm9tQXR0cmlidXRlKHZhbHVlLCB0eXBlKSA6IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBhdHRyaWJ1dGUgdmFsdWUgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eSB2YWx1ZS4gSWYgdGhpc1xuICAgICAqIHJldHVybnMgdW5kZWZpbmVkLCB0aGUgcHJvcGVydHkgd2lsbCAqbm90KiBiZSByZWZsZWN0ZWQgdG8gYW4gYXR0cmlidXRlLlxuICAgICAqIElmIHRoaXMgcmV0dXJucyBudWxsLCB0aGUgYXR0cmlidXRlIHdpbGwgYmUgcmVtb3ZlZCwgb3RoZXJ3aXNlIHRoZVxuICAgICAqIGF0dHJpYnV0ZSB3aWxsIGJlIHNldCB0byB0aGUgdmFsdWUuXG4gICAgICogVGhpcyB1c2VzIHRoZSBwcm9wZXJ0eSdzIGByZWZsZWN0YCBhbmQgYHR5cGUudG9BdHRyaWJ1dGVgIHByb3BlcnR5IG9wdGlvbnMuXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX3Byb3BlcnR5VmFsdWVUb0F0dHJpYnV0ZSh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucy5yZWZsZWN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0eXBlID0gb3B0aW9ucy50eXBlO1xuICAgICAgICBjb25zdCBjb252ZXJ0ZXIgPSBvcHRpb25zLmNvbnZlcnRlcjtcbiAgICAgICAgY29uc3QgdG9BdHRyaWJ1dGUgPSBjb252ZXJ0ZXIgJiYgY29udmVydGVyLnRvQXR0cmlidXRlIHx8XG4gICAgICAgICAgICBkZWZhdWx0Q29udmVydGVyLnRvQXR0cmlidXRlO1xuICAgICAgICByZXR1cm4gdG9BdHRyaWJ1dGUodmFsdWUsIHR5cGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBlbGVtZW50IGluaXRpYWxpemF0aW9uLiBCeSBkZWZhdWx0IGNhcHR1cmVzIGFueSBwcmUtc2V0IHZhbHVlcyBmb3JcbiAgICAgKiByZWdpc3RlcmVkIHByb3BlcnRpZXMuXG4gICAgICovXG4gICAgaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgdGhpcy5fc2F2ZUluc3RhbmNlUHJvcGVydGllcygpO1xuICAgICAgICAvLyBlbnN1cmVzIGZpcnN0IHVwZGF0ZSB3aWxsIGJlIGNhdWdodCBieSBhbiBlYXJseSBhY2Nlc3Mgb2ZcbiAgICAgICAgLy8gYHVwZGF0ZUNvbXBsZXRlYFxuICAgICAgICB0aGlzLl9yZXF1ZXN0VXBkYXRlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpeGVzIGFueSBwcm9wZXJ0aWVzIHNldCBvbiB0aGUgaW5zdGFuY2UgYmVmb3JlIHVwZ3JhZGUgdGltZS5cbiAgICAgKiBPdGhlcndpc2UgdGhlc2Ugd291bGQgc2hhZG93IHRoZSBhY2Nlc3NvciBhbmQgYnJlYWsgdGhlc2UgcHJvcGVydGllcy5cbiAgICAgKiBUaGUgcHJvcGVydGllcyBhcmUgc3RvcmVkIGluIGEgTWFwIHdoaWNoIGlzIHBsYXllZCBiYWNrIGFmdGVyIHRoZVxuICAgICAqIGNvbnN0cnVjdG9yIHJ1bnMuIE5vdGUsIG9uIHZlcnkgb2xkIHZlcnNpb25zIG9mIFNhZmFyaSAoPD05KSBvciBDaHJvbWVcbiAgICAgKiAoPD00MSksIHByb3BlcnRpZXMgY3JlYXRlZCBmb3IgbmF0aXZlIHBsYXRmb3JtIHByb3BlcnRpZXMgbGlrZSAoYGlkYCBvclxuICAgICAqIGBuYW1lYCkgbWF5IG5vdCBoYXZlIGRlZmF1bHQgdmFsdWVzIHNldCBpbiB0aGUgZWxlbWVudCBjb25zdHJ1Y3Rvci4gT25cbiAgICAgKiB0aGVzZSBicm93c2VycyBuYXRpdmUgcHJvcGVydGllcyBhcHBlYXIgb24gaW5zdGFuY2VzIGFuZCB0aGVyZWZvcmUgdGhlaXJcbiAgICAgKiBkZWZhdWx0IHZhbHVlIHdpbGwgb3ZlcndyaXRlIGFueSBlbGVtZW50IGRlZmF1bHQgKGUuZy4gaWYgdGhlIGVsZW1lbnQgc2V0c1xuICAgICAqIHRoaXMuaWQgPSAnaWQnIGluIHRoZSBjb25zdHJ1Y3RvciwgdGhlICdpZCcgd2lsbCBiZWNvbWUgJycgc2luY2UgdGhpcyBpc1xuICAgICAqIHRoZSBuYXRpdmUgcGxhdGZvcm0gZGVmYXVsdCkuXG4gICAgICovXG4gICAgX3NhdmVJbnN0YW5jZVByb3BlcnRpZXMoKSB7XG4gICAgICAgIC8vIFVzZSBmb3JFYWNoIHNvIHRoaXMgd29ya3MgZXZlbiBpZiBmb3Ivb2YgbG9vcHMgYXJlIGNvbXBpbGVkIHRvIGZvciBsb29wc1xuICAgICAgICAvLyBleHBlY3RpbmcgYXJyYXlzXG4gICAgICAgIHRoaXMuY29uc3RydWN0b3JcbiAgICAgICAgICAgIC5fY2xhc3NQcm9wZXJ0aWVzLmZvckVhY2goKF92LCBwKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eShwKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpc1twXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpc1twXTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2luc3RhbmNlUHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZVByb3BlcnRpZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlUHJvcGVydGllcy5zZXQocCwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBwcmV2aW91c2x5IHNhdmVkIGluc3RhbmNlIHByb3BlcnRpZXMuXG4gICAgICovXG4gICAgX2FwcGx5SW5zdGFuY2VQcm9wZXJ0aWVzKCkge1xuICAgICAgICAvLyBVc2UgZm9yRWFjaCBzbyB0aGlzIHdvcmtzIGV2ZW4gaWYgZm9yL29mIGxvb3BzIGFyZSBjb21waWxlZCB0byBmb3IgbG9vcHNcbiAgICAgICAgLy8gZXhwZWN0aW5nIGFycmF5c1xuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XG4gICAgICAgIHRoaXMuX2luc3RhbmNlUHJvcGVydGllcy5mb3JFYWNoKCh2LCBwKSA9PiB0aGlzW3BdID0gdik7XG4gICAgICAgIHRoaXMuX2luc3RhbmNlUHJvcGVydGllcyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIC8vIEVuc3VyZSBmaXJzdCBjb25uZWN0aW9uIGNvbXBsZXRlcyBhbiB1cGRhdGUuIFVwZGF0ZXMgY2Fubm90IGNvbXBsZXRlXG4gICAgICAgIC8vIGJlZm9yZSBjb25uZWN0aW9uLlxuICAgICAgICB0aGlzLmVuYWJsZVVwZGF0aW5nKCk7XG4gICAgfVxuICAgIGVuYWJsZVVwZGF0aW5nKCkge1xuICAgICAgICBpZiAodGhpcy5fZW5hYmxlVXBkYXRpbmdSZXNvbHZlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLl9lbmFibGVVcGRhdGluZ1Jlc29sdmVyKCk7XG4gICAgICAgICAgICB0aGlzLl9lbmFibGVVcGRhdGluZ1Jlc29sdmVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFsbG93cyBmb3IgYHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKClgIGluIGV4dGVuc2lvbnMgd2hpbGVcbiAgICAgKiByZXNlcnZpbmcgdGhlIHBvc3NpYmlsaXR5IG9mIG1ha2luZyBub24tYnJlYWtpbmcgZmVhdHVyZSBhZGRpdGlvbnNcbiAgICAgKiB3aGVuIGRpc2Nvbm5lY3RpbmcgYXQgc29tZSBwb2ludCBpbiB0aGUgZnV0dXJlLlxuICAgICAqL1xuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTeW5jaHJvbml6ZXMgcHJvcGVydHkgdmFsdWVzIHdoZW4gYXR0cmlidXRlcyBjaGFuZ2UuXG4gICAgICovXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKG9sZCAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2F0dHJpYnV0ZVRvUHJvcGVydHkobmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9wcm9wZXJ0eVRvQXR0cmlidXRlKG5hbWUsIHZhbHVlLCBvcHRpb25zID0gZGVmYXVsdFByb3BlcnR5RGVjbGFyYXRpb24pIHtcbiAgICAgICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIGNvbnN0IGF0dHIgPSBjdG9yLl9hdHRyaWJ1dGVOYW1lRm9yUHJvcGVydHkobmFtZSwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChhdHRyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJWYWx1ZSA9IGN0b3IuX3Byb3BlcnR5VmFsdWVUb0F0dHJpYnV0ZSh2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAvLyBhbiB1bmRlZmluZWQgdmFsdWUgZG9lcyBub3QgY2hhbmdlIHRoZSBhdHRyaWJ1dGUuXG4gICAgICAgICAgICBpZiAoYXR0clZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUcmFjayBpZiB0aGUgcHJvcGVydHkgaXMgYmVpbmcgcmVmbGVjdGVkIHRvIGF2b2lkXG4gICAgICAgICAgICAvLyBzZXR0aW5nIHRoZSBwcm9wZXJ0eSBhZ2FpbiB2aWEgYGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja2AuIE5vdGU6XG4gICAgICAgICAgICAvLyAxLiB0aGlzIHRha2VzIGFkdmFudGFnZSBvZiB0aGUgZmFjdCB0aGF0IHRoZSBjYWxsYmFjayBpcyBzeW5jaHJvbm91cy5cbiAgICAgICAgICAgIC8vIDIuIHdpbGwgYmVoYXZlIGluY29ycmVjdGx5IGlmIG11bHRpcGxlIGF0dHJpYnV0ZXMgYXJlIGluIHRoZSByZWFjdGlvblxuICAgICAgICAgICAgLy8gc3RhY2sgYXQgdGltZSBvZiBjYWxsaW5nLiBIb3dldmVyLCBzaW5jZSB3ZSBwcm9jZXNzIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgIC8vIGluIGB1cGRhdGVgIHRoaXMgc2hvdWxkIG5vdCBiZSBwb3NzaWJsZSAob3IgYW4gZXh0cmVtZSBjb3JuZXIgY2FzZVxuICAgICAgICAgICAgLy8gdGhhdCB3ZSdkIGxpa2UgdG8gZGlzY292ZXIpLlxuICAgICAgICAgICAgLy8gbWFyayBzdGF0ZSByZWZsZWN0aW5nXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlIHwgU1RBVEVfSVNfUkVGTEVDVElOR19UT19BVFRSSUJVVEU7XG4gICAgICAgICAgICBpZiAoYXR0clZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBtYXJrIHN0YXRlIG5vdCByZWZsZWN0aW5nXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlICYgflNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fQVRUUklCVVRFO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9hdHRyaWJ1dGVUb1Byb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIC8vIFVzZSB0cmFja2luZyBpbmZvIHRvIGF2b2lkIGRlc2VyaWFsaXppbmcgYXR0cmlidXRlIHZhbHVlIGlmIGl0IHdhc1xuICAgICAgICAvLyBqdXN0IHNldCBmcm9tIGEgcHJvcGVydHkgc2V0dGVyLlxuICAgICAgICBpZiAodGhpcy5fdXBkYXRlU3RhdGUgJiBTVEFURV9JU19SRUZMRUNUSU5HX1RPX0FUVFJJQlVURSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICAvLyBOb3RlLCBoaW50IHRoaXMgYXMgYW4gYEF0dHJpYnV0ZU1hcGAgc28gY2xvc3VyZSBjbGVhcmx5IHVuZGVyc3RhbmRzXG4gICAgICAgIC8vIHRoZSB0eXBlOyBpdCBoYXMgaXNzdWVzIHdpdGggdHJhY2tpbmcgdHlwZXMgdGhyb3VnaCBzdGF0aWNzXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby11bm5lY2Vzc2FyeS10eXBlLWFzc2VydGlvblxuICAgICAgICBjb25zdCBwcm9wTmFtZSA9IGN0b3IuX2F0dHJpYnV0ZVRvUHJvcGVydHlNYXAuZ2V0KG5hbWUpO1xuICAgICAgICBpZiAocHJvcE5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGN0b3IuZ2V0UHJvcGVydHlPcHRpb25zKHByb3BOYW1lKTtcbiAgICAgICAgICAgIC8vIG1hcmsgc3RhdGUgcmVmbGVjdGluZ1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUgPSB0aGlzLl91cGRhdGVTdGF0ZSB8IFNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fUFJPUEVSVFk7XG4gICAgICAgICAgICB0aGlzW3Byb3BOYW1lXSA9XG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueVxuICAgICAgICAgICAgICAgIGN0b3IuX3Byb3BlcnR5VmFsdWVGcm9tQXR0cmlidXRlKHZhbHVlLCBvcHRpb25zKTtcbiAgICAgICAgICAgIC8vIG1hcmsgc3RhdGUgbm90IHJlZmxlY3RpbmdcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlID0gdGhpcy5fdXBkYXRlU3RhdGUgJiB+U1RBVEVfSVNfUkVGTEVDVElOR19UT19QUk9QRVJUWTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIHByaXZhdGUgdmVyc2lvbiBvZiBgcmVxdWVzdFVwZGF0ZWAgZG9lcyBub3QgYWNjZXNzIG9yIHJldHVybiB0aGVcbiAgICAgKiBgdXBkYXRlQ29tcGxldGVgIHByb21pc2UuIFRoaXMgcHJvbWlzZSBjYW4gYmUgb3ZlcnJpZGRlbiBhbmQgaXMgdGhlcmVmb3JlXG4gICAgICogbm90IGZyZWUgdG8gYWNjZXNzLlxuICAgICAqL1xuICAgIF9yZXF1ZXN0VXBkYXRlKG5hbWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGxldCBzaG91bGRSZXF1ZXN0VXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIHByb3BlcnR5IGtleSwgcGVyZm9ybSBwcm9wZXJ0eSB1cGRhdGUgc3RlcHMuXG4gICAgICAgIGlmIChuYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGN0b3IuZ2V0UHJvcGVydHlPcHRpb25zKG5hbWUpO1xuICAgICAgICAgICAgaWYgKGN0b3IuX3ZhbHVlSGFzQ2hhbmdlZCh0aGlzW25hbWVdLCBvbGRWYWx1ZSwgb3B0aW9ucy5oYXNDaGFuZ2VkKSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fY2hhbmdlZFByb3BlcnRpZXMuaGFzKG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NoYW5nZWRQcm9wZXJ0aWVzLnNldChuYW1lLCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEFkZCB0byByZWZsZWN0aW5nIHByb3BlcnRpZXMgc2V0LlxuICAgICAgICAgICAgICAgIC8vIE5vdGUsIGl0J3MgaW1wb3J0YW50IHRoYXQgZXZlcnkgY2hhbmdlIGhhcyBhIGNoYW5jZSB0byBhZGQgdGhlXG4gICAgICAgICAgICAgICAgLy8gcHJvcGVydHkgdG8gYF9yZWZsZWN0aW5nUHJvcGVydGllc2AuIFRoaXMgZW5zdXJlcyBzZXR0aW5nXG4gICAgICAgICAgICAgICAgLy8gYXR0cmlidXRlICsgcHJvcGVydHkgcmVmbGVjdHMgY29ycmVjdGx5LlxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJlZmxlY3QgPT09IHRydWUgJiZcbiAgICAgICAgICAgICAgICAgICAgISh0aGlzLl91cGRhdGVTdGF0ZSAmIFNUQVRFX0lTX1JFRkxFQ1RJTkdfVE9fUFJPUEVSVFkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yZWZsZWN0aW5nUHJvcGVydGllcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWZsZWN0aW5nUHJvcGVydGllcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWZsZWN0aW5nUHJvcGVydGllcy5zZXQobmFtZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQWJvcnQgdGhlIHJlcXVlc3QgaWYgdGhlIHByb3BlcnR5IHNob3VsZCBub3QgYmUgY29uc2lkZXJlZCBjaGFuZ2VkLlxuICAgICAgICAgICAgICAgIHNob3VsZFJlcXVlc3RVcGRhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2hhc1JlcXVlc3RlZFVwZGF0ZSAmJiBzaG91bGRSZXF1ZXN0VXBkYXRlKSB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVQcm9taXNlID0gdGhpcy5fZW5xdWV1ZVVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcXVlc3RzIGFuIHVwZGF0ZSB3aGljaCBpcyBwcm9jZXNzZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgc2hvdWxkXG4gICAgICogYmUgY2FsbGVkIHdoZW4gYW4gZWxlbWVudCBzaG91bGQgdXBkYXRlIGJhc2VkIG9uIHNvbWUgc3RhdGUgbm90IHRyaWdnZXJlZFxuICAgICAqIGJ5IHNldHRpbmcgYSBwcm9wZXJ0eS4gSW4gdGhpcyBjYXNlLCBwYXNzIG5vIGFyZ3VtZW50cy4gSXQgc2hvdWxkIGFsc28gYmVcbiAgICAgKiBjYWxsZWQgd2hlbiBtYW51YWxseSBpbXBsZW1lbnRpbmcgYSBwcm9wZXJ0eSBzZXR0ZXIuIEluIHRoaXMgY2FzZSwgcGFzcyB0aGVcbiAgICAgKiBwcm9wZXJ0eSBgbmFtZWAgYW5kIGBvbGRWYWx1ZWAgdG8gZW5zdXJlIHRoYXQgYW55IGNvbmZpZ3VyZWQgcHJvcGVydHlcbiAgICAgKiBvcHRpb25zIGFyZSBob25vcmVkLiBSZXR1cm5zIHRoZSBgdXBkYXRlQ29tcGxldGVgIFByb21pc2Ugd2hpY2ggaXMgcmVzb2x2ZWRcbiAgICAgKiB3aGVuIHRoZSB1cGRhdGUgY29tcGxldGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUge1Byb3BlcnR5S2V5fSAob3B0aW9uYWwpIG5hbWUgb2YgcmVxdWVzdGluZyBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSBvbGRWYWx1ZSB7YW55fSAob3B0aW9uYWwpIG9sZCB2YWx1ZSBvZiByZXF1ZXN0aW5nIHByb3BlcnR5XG4gICAgICogQHJldHVybnMge1Byb21pc2V9IEEgUHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIHVwZGF0ZSBjb21wbGV0ZXMuXG4gICAgICovXG4gICAgcmVxdWVzdFVwZGF0ZShuYW1lLCBvbGRWYWx1ZSkge1xuICAgICAgICB0aGlzLl9yZXF1ZXN0VXBkYXRlKG5hbWUsIG9sZFZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlQ29tcGxldGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgdGhlIGVsZW1lbnQgdG8gYXN5bmNocm9ub3VzbHkgdXBkYXRlLlxuICAgICAqL1xuICAgIGFzeW5jIF9lbnF1ZXVlVXBkYXRlKCkge1xuICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZSA9IHRoaXMuX3VwZGF0ZVN0YXRlIHwgU1RBVEVfVVBEQVRFX1JFUVVFU1RFRDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEVuc3VyZSBhbnkgcHJldmlvdXMgdXBkYXRlIGhhcyByZXNvbHZlZCBiZWZvcmUgdXBkYXRpbmcuXG4gICAgICAgICAgICAvLyBUaGlzIGBhd2FpdGAgYWxzbyBlbnN1cmVzIHRoYXQgcHJvcGVydHkgY2hhbmdlcyBhcmUgYmF0Y2hlZC5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3VwZGF0ZVByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIElnbm9yZSBhbnkgcHJldmlvdXMgZXJyb3JzLiBXZSBvbmx5IGNhcmUgdGhhdCB0aGUgcHJldmlvdXMgY3ljbGUgaXNcbiAgICAgICAgICAgIC8vIGRvbmUuIEFueSBlcnJvciBzaG91bGQgaGF2ZSBiZWVuIGhhbmRsZWQgaW4gdGhlIHByZXZpb3VzIHVwZGF0ZS5cbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnBlcmZvcm1VcGRhdGUoKTtcbiAgICAgICAgLy8gSWYgYHBlcmZvcm1VcGRhdGVgIHJldHVybnMgYSBQcm9taXNlLCB3ZSBhd2FpdCBpdC4gVGhpcyBpcyBkb25lIHRvXG4gICAgICAgIC8vIGVuYWJsZSBjb29yZGluYXRpbmcgdXBkYXRlcyB3aXRoIGEgc2NoZWR1bGVyLiBOb3RlLCB0aGUgcmVzdWx0IGlzXG4gICAgICAgIC8vIGNoZWNrZWQgdG8gYXZvaWQgZGVsYXlpbmcgYW4gYWRkaXRpb25hbCBtaWNyb3Rhc2sgdW5sZXNzIHdlIG5lZWQgdG8uXG4gICAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgYXdhaXQgcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhdGhpcy5faGFzUmVxdWVzdGVkVXBkYXRlO1xuICAgIH1cbiAgICBnZXQgX2hhc1JlcXVlc3RlZFVwZGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLl91cGRhdGVTdGF0ZSAmIFNUQVRFX1VQREFURV9SRVFVRVNURUQpO1xuICAgIH1cbiAgICBnZXQgaGFzVXBkYXRlZCgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLl91cGRhdGVTdGF0ZSAmIFNUQVRFX0hBU19VUERBVEVEKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYW4gZWxlbWVudCB1cGRhdGUuIE5vdGUsIGlmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gZHVyaW5nIHRoZVxuICAgICAqIHVwZGF0ZSwgYGZpcnN0VXBkYXRlZGAgYW5kIGB1cGRhdGVkYCB3aWxsIG5vdCBiZSBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGNoYW5nZSB0aGUgdGltaW5nIG9mIHVwZGF0ZXMuIElmIHRoaXNcbiAgICAgKiBtZXRob2QgaXMgb3ZlcnJpZGRlbiwgYHN1cGVyLnBlcmZvcm1VcGRhdGUoKWAgbXVzdCBiZSBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBGb3IgaW5zdGFuY2UsIHRvIHNjaGVkdWxlIHVwZGF0ZXMgdG8gb2NjdXIganVzdCBiZWZvcmUgdGhlIG5leHQgZnJhbWU6XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBwcm90ZWN0ZWQgYXN5bmMgcGVyZm9ybVVwZGF0ZSgpOiBQcm9taXNlPHVua25vd24+IHtcbiAgICAgKiAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gcmVzb2x2ZSgpKSk7XG4gICAgICogICBzdXBlci5wZXJmb3JtVXBkYXRlKCk7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHBlcmZvcm1VcGRhdGUoKSB7XG4gICAgICAgIC8vIE1peGluIGluc3RhbmNlIHByb3BlcnRpZXMgb25jZSwgaWYgdGhleSBleGlzdC5cbiAgICAgICAgaWYgKHRoaXMuX2luc3RhbmNlUHJvcGVydGllcykge1xuICAgICAgICAgICAgdGhpcy5fYXBwbHlJbnN0YW5jZVByb3BlcnRpZXMoKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2hvdWxkVXBkYXRlID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGNoYW5nZWRQcm9wZXJ0aWVzID0gdGhpcy5fY2hhbmdlZFByb3BlcnRpZXM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzaG91bGRVcGRhdGUgPSB0aGlzLnNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICAgICAgICBpZiAoc2hvdWxkVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWFya1VwZGF0ZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gUHJldmVudCBgZmlyc3RVcGRhdGVkYCBhbmQgYHVwZGF0ZWRgIGZyb20gcnVubmluZyB3aGVuIHRoZXJlJ3MgYW5cbiAgICAgICAgICAgIC8vIHVwZGF0ZSBleGNlcHRpb24uXG4gICAgICAgICAgICBzaG91bGRVcGRhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIEVuc3VyZSBlbGVtZW50IGNhbiBhY2NlcHQgYWRkaXRpb25hbCB1cGRhdGVzIGFmdGVyIGFuIGV4Y2VwdGlvbi5cbiAgICAgICAgICAgIHRoaXMuX21hcmtVcGRhdGVkKCk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaG91bGRVcGRhdGUpIHtcbiAgICAgICAgICAgIGlmICghKHRoaXMuX3VwZGF0ZVN0YXRlICYgU1RBVEVfSEFTX1VQREFURUQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUgPSB0aGlzLl91cGRhdGVTdGF0ZSB8IFNUQVRFX0hBU19VUERBVEVEO1xuICAgICAgICAgICAgICAgIHRoaXMuZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX21hcmtVcGRhdGVkKCkge1xuICAgICAgICB0aGlzLl9jaGFuZ2VkUHJvcGVydGllcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUgPSB0aGlzLl91cGRhdGVTdGF0ZSAmIH5TVEFURV9VUERBVEVfUkVRVUVTVEVEO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGVsZW1lbnQgaGFzIGNvbXBsZXRlZCB1cGRhdGluZy5cbiAgICAgKiBUaGUgUHJvbWlzZSB2YWx1ZSBpcyBhIGJvb2xlYW4gdGhhdCBpcyBgdHJ1ZWAgaWYgdGhlIGVsZW1lbnQgY29tcGxldGVkIHRoZVxuICAgICAqIHVwZGF0ZSB3aXRob3V0IHRyaWdnZXJpbmcgYW5vdGhlciB1cGRhdGUuIFRoZSBQcm9taXNlIHJlc3VsdCBpcyBgZmFsc2VgIGlmXG4gICAgICogYSBwcm9wZXJ0eSB3YXMgc2V0IGluc2lkZSBgdXBkYXRlZCgpYC4gSWYgdGhlIFByb21pc2UgaXMgcmVqZWN0ZWQsIGFuXG4gICAgICogZXhjZXB0aW9uIHdhcyB0aHJvd24gZHVyaW5nIHRoZSB1cGRhdGUuXG4gICAgICpcbiAgICAgKiBUbyBhd2FpdCBhZGRpdGlvbmFsIGFzeW5jaHJvbm91cyB3b3JrLCBvdmVycmlkZSB0aGUgYF9nZXRVcGRhdGVDb21wbGV0ZWBcbiAgICAgKiBtZXRob2QuIEZvciBleGFtcGxlLCBpdCBpcyBzb21ldGltZXMgdXNlZnVsIHRvIGF3YWl0IGEgcmVuZGVyZWQgZWxlbWVudFxuICAgICAqIGJlZm9yZSBmdWxmaWxsaW5nIHRoaXMgUHJvbWlzZS4gVG8gZG8gdGhpcywgZmlyc3QgYXdhaXRcbiAgICAgKiBgc3VwZXIuX2dldFVwZGF0ZUNvbXBsZXRlKClgLCB0aGVuIGFueSBzdWJzZXF1ZW50IHN0YXRlLlxuICAgICAqXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IFRoZSBQcm9taXNlIHJldHVybnMgYSBib29sZWFuIHRoYXQgaW5kaWNhdGVzIGlmIHRoZVxuICAgICAqIHVwZGF0ZSByZXNvbHZlZCB3aXRob3V0IHRyaWdnZXJpbmcgYW5vdGhlciB1cGRhdGUuXG4gICAgICovXG4gICAgZ2V0IHVwZGF0ZUNvbXBsZXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VXBkYXRlQ29tcGxldGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGUgcG9pbnQgZm9yIHRoZSBgdXBkYXRlQ29tcGxldGVgIHByb21pc2UuXG4gICAgICpcbiAgICAgKiBJdCBpcyBub3Qgc2FmZSB0byBvdmVycmlkZSB0aGUgYHVwZGF0ZUNvbXBsZXRlYCBnZXR0ZXIgZGlyZWN0bHkgZHVlIHRvIGFcbiAgICAgKiBsaW1pdGF0aW9uIGluIFR5cGVTY3JpcHQgd2hpY2ggbWVhbnMgaXQgaXMgbm90IHBvc3NpYmxlIHRvIGNhbGwgYVxuICAgICAqIHN1cGVyY2xhc3MgZ2V0dGVyIChlLmcuIGBzdXBlci51cGRhdGVDb21wbGV0ZS50aGVuKC4uLilgKSB3aGVuIHRoZSB0YXJnZXRcbiAgICAgKiBsYW5ndWFnZSBpcyBFUzUgKGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMzM4KS5cbiAgICAgKiBUaGlzIG1ldGhvZCBzaG91bGQgYmUgb3ZlcnJpZGRlbiBpbnN0ZWFkLiBGb3IgZXhhbXBsZTpcbiAgICAgKlxuICAgICAqICAgY2xhc3MgTXlFbGVtZW50IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gICAgICogICAgIGFzeW5jIF9nZXRVcGRhdGVDb21wbGV0ZSgpIHtcbiAgICAgKiAgICAgICBhd2FpdCBzdXBlci5fZ2V0VXBkYXRlQ29tcGxldGUoKTtcbiAgICAgKiAgICAgICBhd2FpdCB0aGlzLl9teUNoaWxkLnVwZGF0ZUNvbXBsZXRlO1xuICAgICAqICAgICB9XG4gICAgICogICB9XG4gICAgICovXG4gICAgX2dldFVwZGF0ZUNvbXBsZXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXBkYXRlUHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udHJvbHMgd2hldGhlciBvciBub3QgYHVwZGF0ZWAgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIHRoZSBlbGVtZW50IHJlcXVlc3RzXG4gICAgICogYW4gdXBkYXRlLiBCeSBkZWZhdWx0LCB0aGlzIG1ldGhvZCBhbHdheXMgcmV0dXJucyBgdHJ1ZWAsIGJ1dCB0aGlzIGNhbiBiZVxuICAgICAqIGN1c3RvbWl6ZWQgdG8gY29udHJvbCB3aGVuIHRvIHVwZGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICAgKi9cbiAgICBzaG91bGRVcGRhdGUoX2NoYW5nZWRQcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBlbGVtZW50LiBUaGlzIG1ldGhvZCByZWZsZWN0cyBwcm9wZXJ0eSB2YWx1ZXMgdG8gYXR0cmlidXRlcy5cbiAgICAgKiBJdCBjYW4gYmUgb3ZlcnJpZGRlbiB0byByZW5kZXIgYW5kIGtlZXAgdXBkYXRlZCBlbGVtZW50IERPTS5cbiAgICAgKiBTZXR0aW5nIHByb3BlcnRpZXMgaW5zaWRlIHRoaXMgbWV0aG9kIHdpbGwgKm5vdCogdHJpZ2dlclxuICAgICAqIGFub3RoZXIgdXBkYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIF9jaGFuZ2VkUHJvcGVydGllcyBNYXAgb2YgY2hhbmdlZCBwcm9wZXJ0aWVzIHdpdGggb2xkIHZhbHVlc1xuICAgICAqL1xuICAgIHVwZGF0ZShfY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKHRoaXMuX3JlZmxlY3RpbmdQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMuX3JlZmxlY3RpbmdQcm9wZXJ0aWVzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAvLyBVc2UgZm9yRWFjaCBzbyB0aGlzIHdvcmtzIGV2ZW4gaWYgZm9yL29mIGxvb3BzIGFyZSBjb21waWxlZCB0byBmb3JcbiAgICAgICAgICAgIC8vIGxvb3BzIGV4cGVjdGluZyBhcnJheXNcbiAgICAgICAgICAgIHRoaXMuX3JlZmxlY3RpbmdQcm9wZXJ0aWVzLmZvckVhY2goKHYsIGspID0+IHRoaXMuX3Byb3BlcnR5VG9BdHRyaWJ1dGUoaywgdGhpc1trXSwgdikpO1xuICAgICAgICAgICAgdGhpcy5fcmVmbGVjdGluZ1Byb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbWFya1VwZGF0ZWQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52b2tlZCB3aGVuZXZlciB0aGUgZWxlbWVudCBpcyB1cGRhdGVkLiBJbXBsZW1lbnQgdG8gcGVyZm9ybVxuICAgICAqIHBvc3QtdXBkYXRpbmcgdGFza3MgdmlhIERPTSBBUElzLCBmb3IgZXhhbXBsZSwgZm9jdXNpbmcgYW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIFNldHRpbmcgcHJvcGVydGllcyBpbnNpZGUgdGhpcyBtZXRob2Qgd2lsbCB0cmlnZ2VyIHRoZSBlbGVtZW50IHRvIHVwZGF0ZVxuICAgICAqIGFnYWluIGFmdGVyIHRoaXMgdXBkYXRlIGN5Y2xlIGNvbXBsZXRlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICAgKi9cbiAgICB1cGRhdGVkKF9jaGFuZ2VkUHJvcGVydGllcykge1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VkIHdoZW4gdGhlIGVsZW1lbnQgaXMgZmlyc3QgdXBkYXRlZC4gSW1wbGVtZW50IHRvIHBlcmZvcm0gb25lIHRpbWVcbiAgICAgKiB3b3JrIG9uIHRoZSBlbGVtZW50IGFmdGVyIHVwZGF0ZS5cbiAgICAgKlxuICAgICAqIFNldHRpbmcgcHJvcGVydGllcyBpbnNpZGUgdGhpcyBtZXRob2Qgd2lsbCB0cmlnZ2VyIHRoZSBlbGVtZW50IHRvIHVwZGF0ZVxuICAgICAqIGFnYWluIGFmdGVyIHRoaXMgdXBkYXRlIGN5Y2xlIGNvbXBsZXRlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICAgKi9cbiAgICBmaXJzdFVwZGF0ZWQoX2NoYW5nZWRQcm9wZXJ0aWVzKSB7XG4gICAgfVxufVxuX2EgPSBmaW5hbGl6ZWQ7XG4vKipcbiAqIE1hcmtzIGNsYXNzIGFzIGhhdmluZyBmaW5pc2hlZCBjcmVhdGluZyBwcm9wZXJ0aWVzLlxuICovXG5VcGRhdGluZ0VsZW1lbnRbX2FdID0gdHJ1ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVwZGF0aW5nLWVsZW1lbnQuanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuY29uc3QgbGVnYWN5Q3VzdG9tRWxlbWVudCA9ICh0YWdOYW1lLCBjbGF6eikgPT4ge1xuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUodGFnTmFtZSwgY2xhenopO1xuICAgIC8vIENhc3QgYXMgYW55IGJlY2F1c2UgVFMgZG9lc24ndCByZWNvZ25pemUgdGhlIHJldHVybiB0eXBlIGFzIGJlaW5nIGFcbiAgICAvLyBzdWJ0eXBlIG9mIHRoZSBkZWNvcmF0ZWQgY2xhc3Mgd2hlbiBjbGF6eiBpcyB0eXBlZCBhc1xuICAgIC8vIGBDb25zdHJ1Y3RvcjxIVE1MRWxlbWVudD5gIGZvciBzb21lIHJlYXNvbi5cbiAgICAvLyBgQ29uc3RydWN0b3I8SFRNTEVsZW1lbnQ+YCBpcyBoZWxwZnVsIHRvIG1ha2Ugc3VyZSB0aGUgZGVjb3JhdG9yIGlzXG4gICAgLy8gYXBwbGllZCB0byBlbGVtZW50cyBob3dldmVyLlxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnlcbiAgICByZXR1cm4gY2xheno7XG59O1xuY29uc3Qgc3RhbmRhcmRDdXN0b21FbGVtZW50ID0gKHRhZ05hbWUsIGRlc2NyaXB0b3IpID0+IHtcbiAgICBjb25zdCB7IGtpbmQsIGVsZW1lbnRzIH0gPSBkZXNjcmlwdG9yO1xuICAgIHJldHVybiB7XG4gICAgICAgIGtpbmQsXG4gICAgICAgIGVsZW1lbnRzLFxuICAgICAgICAvLyBUaGlzIGNhbGxiYWNrIGlzIGNhbGxlZCBvbmNlIHRoZSBjbGFzcyBpcyBvdGhlcndpc2UgZnVsbHkgZGVmaW5lZFxuICAgICAgICBmaW5pc2hlcihjbGF6eikge1xuICAgICAgICAgICAgd2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSh0YWdOYW1lLCBjbGF6eik7XG4gICAgICAgIH1cbiAgICB9O1xufTtcbi8qKlxuICogQ2xhc3MgZGVjb3JhdG9yIGZhY3RvcnkgdGhhdCBkZWZpbmVzIHRoZSBkZWNvcmF0ZWQgY2xhc3MgYXMgYSBjdXN0b20gZWxlbWVudC5cbiAqXG4gKiBgYGBcbiAqIEBjdXN0b21FbGVtZW50KCdteS1lbGVtZW50JylcbiAqIGNsYXNzIE15RWxlbWVudCB7XG4gKiAgIHJlbmRlcigpIHtcbiAqICAgICByZXR1cm4gaHRtbGBgO1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gdGFnTmFtZSBUaGUgbmFtZSBvZiB0aGUgY3VzdG9tIGVsZW1lbnQgdG8gZGVmaW5lLlxuICovXG5leHBvcnQgY29uc3QgY3VzdG9tRWxlbWVudCA9ICh0YWdOYW1lKSA9PiAoY2xhc3NPckRlc2NyaXB0b3IpID0+ICh0eXBlb2YgY2xhc3NPckRlc2NyaXB0b3IgPT09ICdmdW5jdGlvbicpID9cbiAgICBsZWdhY3lDdXN0b21FbGVtZW50KHRhZ05hbWUsIGNsYXNzT3JEZXNjcmlwdG9yKSA6XG4gICAgc3RhbmRhcmRDdXN0b21FbGVtZW50KHRhZ05hbWUsIGNsYXNzT3JEZXNjcmlwdG9yKTtcbmNvbnN0IHN0YW5kYXJkUHJvcGVydHkgPSAob3B0aW9ucywgZWxlbWVudCkgPT4ge1xuICAgIC8vIFdoZW4gZGVjb3JhdGluZyBhbiBhY2Nlc3NvciwgcGFzcyBpdCB0aHJvdWdoIGFuZCBhZGQgcHJvcGVydHkgbWV0YWRhdGEuXG4gICAgLy8gTm90ZSwgdGhlIGBoYXNPd25Qcm9wZXJ0eWAgY2hlY2sgaW4gYGNyZWF0ZVByb3BlcnR5YCBlbnN1cmVzIHdlIGRvbid0XG4gICAgLy8gc3RvbXAgb3ZlciB0aGUgdXNlcidzIGFjY2Vzc29yLlxuICAgIGlmIChlbGVtZW50LmtpbmQgPT09ICdtZXRob2QnICYmIGVsZW1lbnQuZGVzY3JpcHRvciAmJlxuICAgICAgICAhKCd2YWx1ZScgaW4gZWxlbWVudC5kZXNjcmlwdG9yKSkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBlbGVtZW50KSwgeyBmaW5pc2hlcihjbGF6eikge1xuICAgICAgICAgICAgICAgIGNsYXp6LmNyZWF0ZVByb3BlcnR5KGVsZW1lbnQua2V5LCBvcHRpb25zKTtcbiAgICAgICAgICAgIH0gfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBjcmVhdGVQcm9wZXJ0eSgpIHRha2VzIGNhcmUgb2YgZGVmaW5pbmcgdGhlIHByb3BlcnR5LCBidXQgd2Ugc3RpbGxcbiAgICAgICAgLy8gbXVzdCByZXR1cm4gc29tZSBraW5kIG9mIGRlc2NyaXB0b3IsIHNvIHJldHVybiBhIGRlc2NyaXB0b3IgZm9yIGFuXG4gICAgICAgIC8vIHVudXNlZCBwcm90b3R5cGUgZmllbGQuIFRoZSBmaW5pc2hlciBjYWxscyBjcmVhdGVQcm9wZXJ0eSgpLlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogJ2ZpZWxkJyxcbiAgICAgICAgICAgIGtleTogU3ltYm9sKCksXG4gICAgICAgICAgICBwbGFjZW1lbnQ6ICdvd24nLFxuICAgICAgICAgICAgZGVzY3JpcHRvcjoge30sXG4gICAgICAgICAgICAvLyBXaGVuIEBiYWJlbC9wbHVnaW4tcHJvcG9zYWwtZGVjb3JhdG9ycyBpbXBsZW1lbnRzIGluaXRpYWxpemVycyxcbiAgICAgICAgICAgIC8vIGRvIHRoaXMgaW5zdGVhZCBvZiB0aGUgaW5pdGlhbGl6ZXIgYmVsb3cuIFNlZTpcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iYWJlbC9iYWJlbC9pc3N1ZXMvOTI2MCBleHRyYXM6IFtcbiAgICAgICAgICAgIC8vICAge1xuICAgICAgICAgICAgLy8gICAgIGtpbmQ6ICdpbml0aWFsaXplcicsXG4gICAgICAgICAgICAvLyAgICAgcGxhY2VtZW50OiAnb3duJyxcbiAgICAgICAgICAgIC8vICAgICBpbml0aWFsaXplcjogZGVzY3JpcHRvci5pbml0aWFsaXplcixcbiAgICAgICAgICAgIC8vICAgfVxuICAgICAgICAgICAgLy8gXSxcbiAgICAgICAgICAgIGluaXRpYWxpemVyKCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5pbml0aWFsaXplciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzW2VsZW1lbnQua2V5XSA9IGVsZW1lbnQuaW5pdGlhbGl6ZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmluaXNoZXIoY2xhenopIHtcbiAgICAgICAgICAgICAgICBjbGF6ei5jcmVhdGVQcm9wZXJ0eShlbGVtZW50LmtleSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufTtcbmNvbnN0IGxlZ2FjeVByb3BlcnR5ID0gKG9wdGlvbnMsIHByb3RvLCBuYW1lKSA9PiB7XG4gICAgcHJvdG8uY29uc3RydWN0b3JcbiAgICAgICAgLmNyZWF0ZVByb3BlcnR5KG5hbWUsIG9wdGlvbnMpO1xufTtcbi8qKlxuICogQSBwcm9wZXJ0eSBkZWNvcmF0b3Igd2hpY2ggY3JlYXRlcyBhIExpdEVsZW1lbnQgcHJvcGVydHkgd2hpY2ggcmVmbGVjdHMgYVxuICogY29ycmVzcG9uZGluZyBhdHRyaWJ1dGUgdmFsdWUuIEEgYFByb3BlcnR5RGVjbGFyYXRpb25gIG1heSBvcHRpb25hbGx5IGJlXG4gKiBzdXBwbGllZCB0byBjb25maWd1cmUgcHJvcGVydHkgZmVhdHVyZXMuXG4gKlxuICogVGhpcyBkZWNvcmF0b3Igc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgcHVibGljIGZpZWxkcy4gUHJpdmF0ZSBvciBwcm90ZWN0ZWRcbiAqIGZpZWxkcyBzaG91bGQgdXNlIHRoZSBpbnRlcm5hbFByb3BlcnR5IGRlY29yYXRvci5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqICAgICBjbGFzcyBNeUVsZW1lbnQge1xuICogICAgICAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KVxuICogICAgICAgY2xpY2tlZCA9IGZhbHNlO1xuICogICAgIH1cbiAqXG4gKiBARXhwb3J0RGVjb3JhdGVkSXRlbXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByb3BlcnR5KG9wdGlvbnMpIHtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55IGRlY29yYXRvclxuICAgIHJldHVybiAocHJvdG9PckRlc2NyaXB0b3IsIG5hbWUpID0+IChuYW1lICE9PSB1bmRlZmluZWQpID9cbiAgICAgICAgbGVnYWN5UHJvcGVydHkob3B0aW9ucywgcHJvdG9PckRlc2NyaXB0b3IsIG5hbWUpIDpcbiAgICAgICAgc3RhbmRhcmRQcm9wZXJ0eShvcHRpb25zLCBwcm90b09yRGVzY3JpcHRvcik7XG59XG4vKipcbiAqIERlY2xhcmVzIGEgcHJpdmF0ZSBvciBwcm90ZWN0ZWQgcHJvcGVydHkgdGhhdCBzdGlsbCB0cmlnZ2VycyB1cGRhdGVzIHRvIHRoZVxuICogZWxlbWVudCB3aGVuIGl0IGNoYW5nZXMuXG4gKlxuICogUHJvcGVydGllcyBkZWNsYXJlZCB0aGlzIHdheSBtdXN0IG5vdCBiZSB1c2VkIGZyb20gSFRNTCBvciBIVE1MIHRlbXBsYXRpbmdcbiAqIHN5c3RlbXMsIHRoZXkncmUgc29sZWx5IGZvciBwcm9wZXJ0aWVzIGludGVybmFsIHRvIHRoZSBlbGVtZW50LiBUaGVzZVxuICogcHJvcGVydGllcyBtYXkgYmUgcmVuYW1lZCBieSBvcHRpbWl6YXRpb24gdG9vbHMgbGlrZSBjbG9zdXJlIGNvbXBpbGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJuYWxQcm9wZXJ0eShvcHRpb25zKSB7XG4gICAgcmV0dXJuIHByb3BlcnR5KHsgYXR0cmlidXRlOiBmYWxzZSwgaGFzQ2hhbmdlZDogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmhhc0NoYW5nZWQgfSk7XG59XG4vKipcbiAqIEEgcHJvcGVydHkgZGVjb3JhdG9yIHRoYXQgY29udmVydHMgYSBjbGFzcyBwcm9wZXJ0eSBpbnRvIGEgZ2V0dGVyIHRoYXRcbiAqIGV4ZWN1dGVzIGEgcXVlcnlTZWxlY3RvciBvbiB0aGUgZWxlbWVudCdzIHJlbmRlclJvb3QuXG4gKlxuICogQHBhcmFtIHNlbGVjdG9yIEEgRE9NU3RyaW5nIGNvbnRhaW5pbmcgb25lIG9yIG1vcmUgc2VsZWN0b3JzIHRvIG1hdGNoLlxuICpcbiAqIFNlZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0RvY3VtZW50L3F1ZXJ5U2VsZWN0b3JcbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqICAgICBjbGFzcyBNeUVsZW1lbnQge1xuICogICAgICAgQHF1ZXJ5KCcjZmlyc3QnKVxuICogICAgICAgZmlyc3Q7XG4gKlxuICogICAgICAgcmVuZGVyKCkge1xuICogICAgICAgICByZXR1cm4gaHRtbGBcbiAqICAgICAgICAgICA8ZGl2IGlkPVwiZmlyc3RcIj48L2Rpdj5cbiAqICAgICAgICAgICA8ZGl2IGlkPVwic2Vjb25kXCI+PC9kaXY+XG4gKiAgICAgICAgIGA7XG4gKiAgICAgICB9XG4gKiAgICAgfVxuICpcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5KHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIChwcm90b09yRGVzY3JpcHRvciwgXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueSBkZWNvcmF0b3JcbiAgICBuYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyUm9vdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gKG5hbWUgIT09IHVuZGVmaW5lZCkgP1xuICAgICAgICAgICAgbGVnYWN5UXVlcnkoZGVzY3JpcHRvciwgcHJvdG9PckRlc2NyaXB0b3IsIG5hbWUpIDpcbiAgICAgICAgICAgIHN0YW5kYXJkUXVlcnkoZGVzY3JpcHRvciwgcHJvdG9PckRlc2NyaXB0b3IpO1xuICAgIH07XG59XG4vLyBOb3RlLCBpbiB0aGUgZnV0dXJlLCB3ZSBtYXkgZXh0ZW5kIHRoaXMgZGVjb3JhdG9yIHRvIHN1cHBvcnQgdGhlIHVzZSBjYXNlXG4vLyB3aGVyZSB0aGUgcXVlcmllZCBlbGVtZW50IG1heSBuZWVkIHRvIGRvIHdvcmsgdG8gYmVjb21lIHJlYWR5IHRvIGludGVyYWN0XG4vLyB3aXRoIChlLmcuIGxvYWQgc29tZSBpbXBsZW1lbnRhdGlvbiBjb2RlKS4gSWYgc28sIHdlIG1pZ2h0IGVsZWN0IHRvXG4vLyBhZGQgYSBzZWNvbmQgYXJndW1lbnQgZGVmaW5pbmcgYSBmdW5jdGlvbiB0aGF0IGNhbiBiZSBydW4gdG8gbWFrZSB0aGVcbi8vIHF1ZXJpZWQgZWxlbWVudCBsb2FkZWQvdXBkYXRlZC9yZWFkeS5cbi8qKlxuICogQSBwcm9wZXJ0eSBkZWNvcmF0b3IgdGhhdCBjb252ZXJ0cyBhIGNsYXNzIHByb3BlcnR5IGludG8gYSBnZXR0ZXIgdGhhdFxuICogcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgcmVzdWx0IG9mIGEgcXVlcnlTZWxlY3RvciBvbiB0aGVcbiAqIGVsZW1lbnQncyByZW5kZXJSb290IGRvbmUgYWZ0ZXIgdGhlIGVsZW1lbnQncyBgdXBkYXRlQ29tcGxldGVgIHByb21pc2VcbiAqIHJlc29sdmVzLiBXaGVuIHRoZSBxdWVyaWVkIHByb3BlcnR5IG1heSBjaGFuZ2Ugd2l0aCBlbGVtZW50IHN0YXRlLCB0aGlzXG4gKiBkZWNvcmF0b3IgY2FuIGJlIHVzZWQgaW5zdGVhZCBvZiByZXF1aXJpbmcgdXNlcnMgdG8gYXdhaXQgdGhlXG4gKiBgdXBkYXRlQ29tcGxldGVgIGJlZm9yZSBhY2Nlc3NpbmcgdGhlIHByb3BlcnR5LlxuICpcbiAqIEBwYXJhbSBzZWxlY3RvciBBIERPTVN0cmluZyBjb250YWluaW5nIG9uZSBvciBtb3JlIHNlbGVjdG9ycyB0byBtYXRjaC5cbiAqXG4gKiBTZWU6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Eb2N1bWVudC9xdWVyeVNlbGVjdG9yXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiAgICAgY2xhc3MgTXlFbGVtZW50IHtcbiAqICAgICAgIEBxdWVyeUFzeW5jKCcjZmlyc3QnKVxuICogICAgICAgZmlyc3Q7XG4gKlxuICogICAgICAgcmVuZGVyKCkge1xuICogICAgICAgICByZXR1cm4gaHRtbGBcbiAqICAgICAgICAgICA8ZGl2IGlkPVwiZmlyc3RcIj48L2Rpdj5cbiAqICAgICAgICAgICA8ZGl2IGlkPVwic2Vjb25kXCI+PC9kaXY+XG4gKiAgICAgICAgIGA7XG4gKiAgICAgICB9XG4gKiAgICAgfVxuICpcbiAqICAgICAvLyBleHRlcm5hbCB1c2FnZVxuICogICAgIGFzeW5jIGRvU29tZXRoaW5nV2l0aEZpcnN0KCkge1xuICogICAgICAoYXdhaXQgYU15RWxlbWVudC5maXJzdCkuZG9Tb21ldGhpbmcoKTtcbiAqICAgICB9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWVyeUFzeW5jKHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIChwcm90b09yRGVzY3JpcHRvciwgXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueSBkZWNvcmF0b3JcbiAgICBuYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICBhc3luYyBnZXQoKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVDb21wbGV0ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJSb290LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiAobmFtZSAhPT0gdW5kZWZpbmVkKSA/XG4gICAgICAgICAgICBsZWdhY3lRdWVyeShkZXNjcmlwdG9yLCBwcm90b09yRGVzY3JpcHRvciwgbmFtZSkgOlxuICAgICAgICAgICAgc3RhbmRhcmRRdWVyeShkZXNjcmlwdG9yLCBwcm90b09yRGVzY3JpcHRvcik7XG4gICAgfTtcbn1cbi8qKlxuICogQSBwcm9wZXJ0eSBkZWNvcmF0b3IgdGhhdCBjb252ZXJ0cyBhIGNsYXNzIHByb3BlcnR5IGludG8gYSBnZXR0ZXJcbiAqIHRoYXQgZXhlY3V0ZXMgYSBxdWVyeVNlbGVjdG9yQWxsIG9uIHRoZSBlbGVtZW50J3MgcmVuZGVyUm9vdC5cbiAqXG4gKiBAcGFyYW0gc2VsZWN0b3IgQSBET01TdHJpbmcgY29udGFpbmluZyBvbmUgb3IgbW9yZSBzZWxlY3RvcnMgdG8gbWF0Y2guXG4gKlxuICogU2VlOlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0RvY3VtZW50L3F1ZXJ5U2VsZWN0b3JBbGxcbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqICAgICBjbGFzcyBNeUVsZW1lbnQge1xuICogICAgICAgQHF1ZXJ5QWxsKCdkaXYnKVxuICogICAgICAgZGl2cztcbiAqXG4gKiAgICAgICByZW5kZXIoKSB7XG4gKiAgICAgICAgIHJldHVybiBodG1sYFxuICogICAgICAgICAgIDxkaXYgaWQ9XCJmaXJzdFwiPjwvZGl2PlxuICogICAgICAgICAgIDxkaXYgaWQ9XCJzZWNvbmRcIj48L2Rpdj5cbiAqICAgICAgICAgYDtcbiAqICAgICAgIH1cbiAqICAgICB9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWVyeUFsbChzZWxlY3Rvcikge1xuICAgIHJldHVybiAocHJvdG9PckRlc2NyaXB0b3IsIFxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnkgZGVjb3JhdG9yXG4gICAgbmFtZSkgPT4ge1xuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0ge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlclJvb3QucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIChuYW1lICE9PSB1bmRlZmluZWQpID9cbiAgICAgICAgICAgIGxlZ2FjeVF1ZXJ5KGRlc2NyaXB0b3IsIHByb3RvT3JEZXNjcmlwdG9yLCBuYW1lKSA6XG4gICAgICAgICAgICBzdGFuZGFyZFF1ZXJ5KGRlc2NyaXB0b3IsIHByb3RvT3JEZXNjcmlwdG9yKTtcbiAgICB9O1xufVxuY29uc3QgbGVnYWN5UXVlcnkgPSAoZGVzY3JpcHRvciwgcHJvdG8sIG5hbWUpID0+IHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG8sIG5hbWUsIGRlc2NyaXB0b3IpO1xufTtcbmNvbnN0IHN0YW5kYXJkUXVlcnkgPSAoZGVzY3JpcHRvciwgZWxlbWVudCkgPT4gKHtcbiAgICBraW5kOiAnbWV0aG9kJyxcbiAgICBwbGFjZW1lbnQ6ICdwcm90b3R5cGUnLFxuICAgIGtleTogZWxlbWVudC5rZXksXG4gICAgZGVzY3JpcHRvcixcbn0pO1xuY29uc3Qgc3RhbmRhcmRFdmVudE9wdGlvbnMgPSAob3B0aW9ucywgZWxlbWVudCkgPT4ge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGVsZW1lbnQpLCB7IGZpbmlzaGVyKGNsYXp6KSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGNsYXp6LnByb3RvdHlwZVtlbGVtZW50LmtleV0sIG9wdGlvbnMpO1xuICAgICAgICB9IH0pO1xufTtcbmNvbnN0IGxlZ2FjeUV2ZW50T3B0aW9ucyA9IFxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueSBsZWdhY3kgZGVjb3JhdG9yXG4ob3B0aW9ucywgcHJvdG8sIG5hbWUpID0+IHtcbiAgICBPYmplY3QuYXNzaWduKHByb3RvW25hbWVdLCBvcHRpb25zKTtcbn07XG4vKipcbiAqIEFkZHMgZXZlbnQgbGlzdGVuZXIgb3B0aW9ucyB0byBhIG1ldGhvZCB1c2VkIGFzIGFuIGV2ZW50IGxpc3RlbmVyIGluIGFcbiAqIGxpdC1odG1sIHRlbXBsYXRlLlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIEFuIG9iamVjdCB0aGF0IHNwZWNpZmllcyBldmVudCBsaXN0ZW5lciBvcHRpb25zIGFzIGFjY2VwdGVkIGJ5XG4gKiBgRXZlbnRUYXJnZXQjYWRkRXZlbnRMaXN0ZW5lcmAgYW5kIGBFdmVudFRhcmdldCNyZW1vdmVFdmVudExpc3RlbmVyYC5cbiAqXG4gKiBDdXJyZW50IGJyb3dzZXJzIHN1cHBvcnQgdGhlIGBjYXB0dXJlYCwgYHBhc3NpdmVgLCBhbmQgYG9uY2VgIG9wdGlvbnMuIFNlZTpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FdmVudFRhcmdldC9hZGRFdmVudExpc3RlbmVyI1BhcmFtZXRlcnNcbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqICAgICBjbGFzcyBNeUVsZW1lbnQge1xuICogICAgICAgY2xpY2tlZCA9IGZhbHNlO1xuICpcbiAqICAgICAgIHJlbmRlcigpIHtcbiAqICAgICAgICAgcmV0dXJuIGh0bWxgXG4gKiAgICAgICAgICAgPGRpdiBAY2xpY2s9JHt0aGlzLl9vbkNsaWNrfWA+XG4gKiAgICAgICAgICAgICA8YnV0dG9uPjwvYnV0dG9uPlxuICogICAgICAgICAgIDwvZGl2PlxuICogICAgICAgICBgO1xuICogICAgICAgfVxuICpcbiAqICAgICAgIEBldmVudE9wdGlvbnMoe2NhcHR1cmU6IHRydWV9KVxuICogICAgICAgX29uQ2xpY2soZSkge1xuICogICAgICAgICB0aGlzLmNsaWNrZWQgPSB0cnVlO1xuICogICAgICAgfVxuICogICAgIH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV2ZW50T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgLy8gUmV0dXJuIHZhbHVlIHR5cGVkIGFzIGFueSB0byBwcmV2ZW50IFR5cGVTY3JpcHQgZnJvbSBjb21wbGFpbmluZyB0aGF0XG4gICAgLy8gc3RhbmRhcmQgZGVjb3JhdG9yIGZ1bmN0aW9uIHNpZ25hdHVyZSBkb2VzIG5vdCBtYXRjaCBUeXBlU2NyaXB0IGRlY29yYXRvclxuICAgIC8vIHNpZ25hdHVyZVxuICAgIC8vIFRPRE8oa3NjaGFhZik6IHVuY2xlYXIgd2h5IGl0IHdhcyBvbmx5IGZhaWxpbmcgb24gdGhpcyBkZWNvcmF0b3IgYW5kIG5vdFxuICAgIC8vIHRoZSBvdGhlcnNcbiAgICByZXR1cm4gKChwcm90b09yRGVzY3JpcHRvciwgbmFtZSkgPT4gKG5hbWUgIT09IHVuZGVmaW5lZCkgP1xuICAgICAgICBsZWdhY3lFdmVudE9wdGlvbnMob3B0aW9ucywgcHJvdG9PckRlc2NyaXB0b3IsIG5hbWUpIDpcbiAgICAgICAgc3RhbmRhcmRFdmVudE9wdGlvbnMob3B0aW9ucywgcHJvdG9PckRlc2NyaXB0b3IpKTtcbn1cbi8qKlxuICogQSBwcm9wZXJ0eSBkZWNvcmF0b3IgdGhhdCBjb252ZXJ0cyBhIGNsYXNzIHByb3BlcnR5IGludG8gYSBnZXR0ZXIgdGhhdFxuICogcmV0dXJucyB0aGUgYGFzc2lnbmVkTm9kZXNgIG9mIHRoZSBnaXZlbiBuYW1lZCBgc2xvdGAuIE5vdGUsIHRoZSB0eXBlIG9mXG4gKiB0aGlzIHByb3BlcnR5IHNob3VsZCBiZSBhbm5vdGF0ZWQgYXMgYE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+YC5cbiAqXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWVyeUFzc2lnbmVkTm9kZXMoc2xvdE5hbWUgPSAnJywgZmxhdHRlbiA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIChwcm90b09yRGVzY3JpcHRvciwgXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWFueSBkZWNvcmF0b3JcbiAgICBuYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSBgc2xvdCR7c2xvdE5hbWUgPyBgW25hbWU9JHtzbG90TmFtZX1dYCA6ICcnfWA7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2xvdCA9IHRoaXMucmVuZGVyUm9vdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2xvdCAmJiBzbG90LmFzc2lnbmVkTm9kZXMoeyBmbGF0dGVuIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiAobmFtZSAhPT0gdW5kZWZpbmVkKSA/XG4gICAgICAgICAgICBsZWdhY3lRdWVyeShkZXNjcmlwdG9yLCBwcm90b09yRGVzY3JpcHRvciwgbmFtZSkgOlxuICAgICAgICAgICAgc3RhbmRhcmRRdWVyeShkZXNjcmlwdG9yLCBwcm90b09yRGVzY3JpcHRvcik7XG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlY29yYXRvcnMuanMubWFwIiwiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE5IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmVcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0IENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzXG5wYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzbyBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50XG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5leHBvcnQgY29uc3Qgc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzID0gKCdhZG9wdGVkU3R5bGVTaGVldHMnIGluIERvY3VtZW50LnByb3RvdHlwZSkgJiZcbiAgICAoJ3JlcGxhY2UnIGluIENTU1N0eWxlU2hlZXQucHJvdG90eXBlKTtcbmNvbnN0IGNvbnN0cnVjdGlvblRva2VuID0gU3ltYm9sKCk7XG5leHBvcnQgY2xhc3MgQ1NTUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3Rvcihjc3NUZXh0LCBzYWZlVG9rZW4pIHtcbiAgICAgICAgaWYgKHNhZmVUb2tlbiAhPT0gY29uc3RydWN0aW9uVG9rZW4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ1NTUmVzdWx0IGlzIG5vdCBjb25zdHJ1Y3RhYmxlLiBVc2UgYHVuc2FmZUNTU2Agb3IgYGNzc2AgaW5zdGVhZC4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNzc1RleHQgPSBjc3NUZXh0O1xuICAgIH1cbiAgICAvLyBOb3RlLCB0aGlzIGlzIGEgZ2V0dGVyIHNvIHRoYXQgaXQncyBsYXp5LiBJbiBwcmFjdGljZSwgdGhpcyBtZWFuc1xuICAgIC8vIHN0eWxlc2hlZXRzIGFyZSBub3QgY3JlYXRlZCB1bnRpbCB0aGUgZmlyc3QgZWxlbWVudCBpbnN0YW5jZSBpcyBtYWRlLlxuICAgIGdldCBzdHlsZVNoZWV0KCkge1xuICAgICAgICBpZiAodGhpcy5fc3R5bGVTaGVldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBOb3RlLCBpZiBgYWRvcHRlZFN0eWxlU2hlZXRzYCBpcyBzdXBwb3J0ZWQgdGhlbiB3ZSBhc3N1bWUgQ1NTU3R5bGVTaGVldFxuICAgICAgICAgICAgLy8gaXMgY29uc3RydWN0YWJsZS5cbiAgICAgICAgICAgIGlmIChzdXBwb3J0c0Fkb3B0aW5nU3R5bGVTaGVldHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdHlsZVNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdHlsZVNoZWV0LnJlcGxhY2VTeW5jKHRoaXMuY3NzVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdHlsZVNoZWV0ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fc3R5bGVTaGVldDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNzc1RleHQ7XG4gICAgfVxufVxuLyoqXG4gKiBXcmFwIGEgdmFsdWUgZm9yIGludGVycG9sYXRpb24gaW4gYSBjc3MgdGFnZ2VkIHRlbXBsYXRlIGxpdGVyYWwuXG4gKlxuICogVGhpcyBpcyB1bnNhZmUgYmVjYXVzZSB1bnRydXN0ZWQgQ1NTIHRleHQgY2FuIGJlIHVzZWQgdG8gcGhvbmUgaG9tZVxuICogb3IgZXhmaWx0cmF0ZSBkYXRhIHRvIGFuIGF0dGFja2VyIGNvbnRyb2xsZWQgc2l0ZS4gVGFrZSBjYXJlIHRvIG9ubHkgdXNlXG4gKiB0aGlzIHdpdGggdHJ1c3RlZCBpbnB1dC5cbiAqL1xuZXhwb3J0IGNvbnN0IHVuc2FmZUNTUyA9ICh2YWx1ZSkgPT4ge1xuICAgIHJldHVybiBuZXcgQ1NTUmVzdWx0KFN0cmluZyh2YWx1ZSksIGNvbnN0cnVjdGlvblRva2VuKTtcbn07XG5jb25zdCB0ZXh0RnJvbUNTU1Jlc3VsdCA9ICh2YWx1ZSkgPT4ge1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIENTU1Jlc3VsdCkge1xuICAgICAgICByZXR1cm4gdmFsdWUuY3NzVGV4dDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZhbHVlIHBhc3NlZCB0byAnY3NzJyBmdW5jdGlvbiBtdXN0IGJlIGEgJ2NzcycgZnVuY3Rpb24gcmVzdWx0OiAke3ZhbHVlfS4gVXNlICd1bnNhZmVDU1MnIHRvIHBhc3Mgbm9uLWxpdGVyYWwgdmFsdWVzLCBidXRcbiAgICAgICAgICAgIHRha2UgY2FyZSB0byBlbnN1cmUgcGFnZSBzZWN1cml0eS5gKTtcbiAgICB9XG59O1xuLyoqXG4gKiBUZW1wbGF0ZSB0YWcgd2hpY2ggd2hpY2ggY2FuIGJlIHVzZWQgd2l0aCBMaXRFbGVtZW50J3MgYHN0eWxlYCBwcm9wZXJ0eSB0b1xuICogc2V0IGVsZW1lbnQgc3R5bGVzLiBGb3Igc2VjdXJpdHkgcmVhc29ucywgb25seSBsaXRlcmFsIHN0cmluZyB2YWx1ZXMgbWF5IGJlXG4gKiB1c2VkLiBUbyBpbmNvcnBvcmF0ZSBub24tbGl0ZXJhbCB2YWx1ZXMgYHVuc2FmZUNTU2AgbWF5IGJlIHVzZWQgaW5zaWRlIGFcbiAqIHRlbXBsYXRlIHN0cmluZyBwYXJ0LlxuICovXG5leHBvcnQgY29uc3QgY3NzID0gKHN0cmluZ3MsIC4uLnZhbHVlcykgPT4ge1xuICAgIGNvbnN0IGNzc1RleHQgPSB2YWx1ZXMucmVkdWNlKChhY2MsIHYsIGlkeCkgPT4gYWNjICsgdGV4dEZyb21DU1NSZXN1bHQodikgKyBzdHJpbmdzW2lkeCArIDFdLCBzdHJpbmdzWzBdKTtcbiAgICByZXR1cm4gbmV3IENTU1Jlc3VsdChjc3NUZXh0LCBjb25zdHJ1Y3Rpb25Ub2tlbik7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3NzLXRhZy5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG5pbXBvcnQgeyByZW5kZXIgfSBmcm9tICdsaXQtaHRtbC9saWIvc2hhZHktcmVuZGVyLmpzJztcbmltcG9ydCB7IFVwZGF0aW5nRWxlbWVudCB9IGZyb20gJy4vbGliL3VwZGF0aW5nLWVsZW1lbnQuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9saWIvdXBkYXRpbmctZWxlbWVudC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2xpYi9kZWNvcmF0b3JzLmpzJztcbmV4cG9ydCB7IGh0bWwsIHN2ZywgVGVtcGxhdGVSZXN1bHQsIFNWR1RlbXBsYXRlUmVzdWx0IH0gZnJvbSAnbGl0LWh0bWwvbGl0LWh0bWwuanMnO1xuaW1wb3J0IHsgc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzIH0gZnJvbSAnLi9saWIvY3NzLXRhZy5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2xpYi9jc3MtdGFnLmpzJztcbi8vIElNUE9SVEFOVDogZG8gbm90IGNoYW5nZSB0aGUgcHJvcGVydHkgbmFtZSBvciB0aGUgYXNzaWdubWVudCBleHByZXNzaW9uLlxuLy8gVGhpcyBsaW5lIHdpbGwgYmUgdXNlZCBpbiByZWdleGVzIHRvIHNlYXJjaCBmb3IgTGl0RWxlbWVudCB1c2FnZS5cbi8vIFRPRE8oanVzdGluZmFnbmFuaSk6IGluamVjdCB2ZXJzaW9uIG51bWJlciBhdCBidWlsZCB0aW1lXG4od2luZG93WydsaXRFbGVtZW50VmVyc2lvbnMnXSB8fCAod2luZG93WydsaXRFbGVtZW50VmVyc2lvbnMnXSA9IFtdKSlcbiAgICAucHVzaCgnMi4zLjEnKTtcbi8qKlxuICogU2VudGluYWwgdmFsdWUgdXNlZCB0byBhdm9pZCBjYWxsaW5nIGxpdC1odG1sJ3MgcmVuZGVyIGZ1bmN0aW9uIHdoZW5cbiAqIHN1YmNsYXNzZXMgZG8gbm90IGltcGxlbWVudCBgcmVuZGVyYFxuICovXG5jb25zdCByZW5kZXJOb3RJbXBsZW1lbnRlZCA9IHt9O1xuZXhwb3J0IGNsYXNzIExpdEVsZW1lbnQgZXh0ZW5kcyBVcGRhdGluZ0VsZW1lbnQge1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgYXJyYXkgb2Ygc3R5bGVzIHRvIGFwcGx5IHRvIHRoZSBlbGVtZW50LlxuICAgICAqIE92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGludGVncmF0ZSBpbnRvIGEgc3R5bGUgbWFuYWdlbWVudCBzeXN0ZW0uXG4gICAgICpcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRTdHlsZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0eWxlcztcbiAgICB9XG4gICAgLyoqIEBub2NvbGxhcHNlICovXG4gICAgc3RhdGljIF9nZXRVbmlxdWVTdHlsZXMoKSB7XG4gICAgICAgIC8vIE9ubHkgZ2F0aGVyIHN0eWxlcyBvbmNlIHBlciBjbGFzc1xuICAgICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfc3R5bGVzJywgdGhpcykpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGFrZSBjYXJlIG5vdCB0byBjYWxsIGB0aGlzLmdldFN0eWxlcygpYCBtdWx0aXBsZSB0aW1lcyBzaW5jZSB0aGlzXG4gICAgICAgIC8vIGdlbmVyYXRlcyBuZXcgQ1NTUmVzdWx0cyBlYWNoIHRpbWUuXG4gICAgICAgIC8vIFRPRE8oc29ydmVsbCk6IFNpbmNlIHdlIGRvIG5vdCBjYWNoZSBDU1NSZXN1bHRzIGJ5IGlucHV0LCBhbnlcbiAgICAgICAgLy8gc2hhcmVkIHN0eWxlcyB3aWxsIGdlbmVyYXRlIG5ldyBzdHlsZXNoZWV0IG9iamVjdHMsIHdoaWNoIGlzIHdhc3RlZnVsLlxuICAgICAgICAvLyBUaGlzIHNob3VsZCBiZSBhZGRyZXNzZWQgd2hlbiBhIGJyb3dzZXIgc2hpcHMgY29uc3RydWN0YWJsZVxuICAgICAgICAvLyBzdHlsZXNoZWV0cy5cbiAgICAgICAgY29uc3QgdXNlclN0eWxlcyA9IHRoaXMuZ2V0U3R5bGVzKCk7XG4gICAgICAgIGlmICh1c2VyU3R5bGVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0eWxlcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodXNlclN0eWxlcykpIHtcbiAgICAgICAgICAgIC8vIERlLWR1cGxpY2F0ZSBzdHlsZXMgcHJlc2VydmluZyB0aGUgX2xhc3RfIGluc3RhbmNlIGluIHRoZSBzZXQuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uIHRvIGF2b2lkIGR1cGxpY2F0ZWQgc3R5bGVzIHRoYXQgY2FuXG4gICAgICAgICAgICAvLyBvY2N1ciBlc3BlY2lhbGx5IHdoZW4gY29tcG9zaW5nIHZpYSBzdWJjbGFzc2luZy5cbiAgICAgICAgICAgIC8vIFRoZSBsYXN0IGl0ZW0gaXMga2VwdCB0byB0cnkgdG8gcHJlc2VydmUgdGhlIGNhc2NhZGUgb3JkZXIgd2l0aCB0aGVcbiAgICAgICAgICAgIC8vIGFzc3VtcHRpb24gdGhhdCBpdCdzIG1vc3QgaW1wb3J0YW50IHRoYXQgbGFzdCBhZGRlZCBzdHlsZXMgb3ZlcnJpZGVcbiAgICAgICAgICAgIC8vIHByZXZpb3VzIHN0eWxlcy5cbiAgICAgICAgICAgIGNvbnN0IGFkZFN0eWxlcyA9IChzdHlsZXMsIHNldCkgPT4gc3R5bGVzLnJlZHVjZVJpZ2h0KChzZXQsIHMpID0+IFxuICAgICAgICAgICAgLy8gTm90ZTogT24gSUUgc2V0LmFkZCgpIGRvZXMgbm90IHJldHVybiB0aGUgc2V0XG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KHMpID8gYWRkU3R5bGVzKHMsIHNldCkgOiAoc2V0LmFkZChzKSwgc2V0KSwgc2V0KTtcbiAgICAgICAgICAgIC8vIEFycmF5LmZyb20gZG9lcyBub3Qgd29yayBvbiBTZXQgaW4gSUUsIG90aGVyd2lzZSByZXR1cm5cbiAgICAgICAgICAgIC8vIEFycmF5LmZyb20oYWRkU3R5bGVzKHVzZXJTdHlsZXMsIG5ldyBTZXQ8Q1NTUmVzdWx0PigpKSkucmV2ZXJzZSgpXG4gICAgICAgICAgICBjb25zdCBzZXQgPSBhZGRTdHlsZXModXNlclN0eWxlcywgbmV3IFNldCgpKTtcbiAgICAgICAgICAgIGNvbnN0IHN0eWxlcyA9IFtdO1xuICAgICAgICAgICAgc2V0LmZvckVhY2goKHYpID0+IHN0eWxlcy51bnNoaWZ0KHYpKTtcbiAgICAgICAgICAgIHRoaXMuX3N0eWxlcyA9IHN0eWxlcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3N0eWxlcyA9IFt1c2VyU3R5bGVzXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBlbGVtZW50IGluaXRpYWxpemF0aW9uLiBCeSBkZWZhdWx0IHRoaXMgY2FsbHMgYGNyZWF0ZVJlbmRlclJvb3RgXG4gICAgICogdG8gY3JlYXRlIHRoZSBlbGVtZW50IGByZW5kZXJSb290YCBub2RlIGFuZCBjYXB0dXJlcyBhbnkgcHJlLXNldCB2YWx1ZXMgZm9yXG4gICAgICogcmVnaXN0ZXJlZCBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIGluaXRpYWxpemUoKSB7XG4gICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5fZ2V0VW5pcXVlU3R5bGVzKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUm9vdCA9XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVJlbmRlclJvb3QoKTtcbiAgICAgICAgLy8gTm90ZSwgaWYgcmVuZGVyUm9vdCBpcyBub3QgYSBzaGFkb3dSb290LCBzdHlsZXMgd291bGQvY291bGQgYXBwbHkgdG8gdGhlXG4gICAgICAgIC8vIGVsZW1lbnQncyBnZXRSb290Tm9kZSgpLiBXaGlsZSB0aGlzIGNvdWxkIGJlIGRvbmUsIHdlJ3JlIGNob29zaW5nIG5vdCB0b1xuICAgICAgICAvLyBzdXBwb3J0IHRoaXMgbm93IHNpbmNlIGl0IHdvdWxkIHJlcXVpcmUgZGlmZmVyZW50IGxvZ2ljIGFyb3VuZCBkZS1kdXBpbmcuXG4gICAgICAgIGlmICh3aW5kb3cuU2hhZG93Um9vdCAmJiB0aGlzLnJlbmRlclJvb3QgaW5zdGFuY2VvZiB3aW5kb3cuU2hhZG93Um9vdCkge1xuICAgICAgICAgICAgdGhpcy5hZG9wdFN0eWxlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG5vZGUgaW50byB3aGljaCB0aGUgZWxlbWVudCBzaG91bGQgcmVuZGVyIGFuZCBieSBkZWZhdWx0XG4gICAgICogY3JlYXRlcyBhbmQgcmV0dXJucyBhbiBvcGVuIHNoYWRvd1Jvb3QuIEltcGxlbWVudCB0byBjdXN0b21pemUgd2hlcmUgdGhlXG4gICAgICogZWxlbWVudCdzIERPTSBpcyByZW5kZXJlZC4gRm9yIGV4YW1wbGUsIHRvIHJlbmRlciBpbnRvIHRoZSBlbGVtZW50J3NcbiAgICAgKiBjaGlsZE5vZGVzLCByZXR1cm4gYHRoaXNgLlxuICAgICAqIEByZXR1cm5zIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IFJldHVybnMgYSBub2RlIGludG8gd2hpY2ggdG8gcmVuZGVyLlxuICAgICAqL1xuICAgIGNyZWF0ZVJlbmRlclJvb3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBzdHlsaW5nIHRvIHRoZSBlbGVtZW50IHNoYWRvd1Jvb3QgdXNpbmcgdGhlIGBzdGF0aWMgZ2V0IHN0eWxlc2BcbiAgICAgKiBwcm9wZXJ0eS4gU3R5bGluZyB3aWxsIGFwcGx5IHVzaW5nIGBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0c2Agd2hlcmVcbiAgICAgKiBhdmFpbGFibGUgYW5kIHdpbGwgZmFsbGJhY2sgb3RoZXJ3aXNlLiBXaGVuIFNoYWRvdyBET00gaXMgcG9seWZpbGxlZCxcbiAgICAgKiBTaGFkeUNTUyBzY29wZXMgc3R5bGVzIGFuZCBhZGRzIHRoZW0gdG8gdGhlIGRvY3VtZW50LiBXaGVuIFNoYWRvdyBET01cbiAgICAgKiBpcyBhdmFpbGFibGUgYnV0IGBhZG9wdGVkU3R5bGVTaGVldHNgIGlzIG5vdCwgc3R5bGVzIGFyZSBhcHBlbmRlZCB0byB0aGVcbiAgICAgKiBlbmQgb2YgdGhlIGBzaGFkb3dSb290YCB0byBbbWltaWMgc3BlY1xuICAgICAqIGJlaGF2aW9yXShodHRwczovL3dpY2cuZ2l0aHViLmlvL2NvbnN0cnVjdC1zdHlsZXNoZWV0cy8jdXNpbmctY29uc3RydWN0ZWQtc3R5bGVzaGVldHMpLlxuICAgICAqL1xuICAgIGFkb3B0U3R5bGVzKCkge1xuICAgICAgICBjb25zdCBzdHlsZXMgPSB0aGlzLmNvbnN0cnVjdG9yLl9zdHlsZXM7XG4gICAgICAgIGlmIChzdHlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlcmUgYXJlIHRocmVlIHNlcGFyYXRlIGNhc2VzIGhlcmUgYmFzZWQgb24gU2hhZG93IERPTSBzdXBwb3J0LlxuICAgICAgICAvLyAoMSkgc2hhZG93Um9vdCBwb2x5ZmlsbGVkOiB1c2UgU2hhZHlDU1NcbiAgICAgICAgLy8gKDIpIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzIGF2YWlsYWJsZTogdXNlIGl0LlxuICAgICAgICAvLyAoMykgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgcG9seWZpbGxlZDogYXBwZW5kIHN0eWxlcyBhZnRlclxuICAgICAgICAvLyByZW5kZXJpbmdcbiAgICAgICAgaWYgKHdpbmRvdy5TaGFkeUNTUyAhPT0gdW5kZWZpbmVkICYmICF3aW5kb3cuU2hhZHlDU1MubmF0aXZlU2hhZG93KSB7XG4gICAgICAgICAgICB3aW5kb3cuU2hhZHlDU1MuU2NvcGluZ1NoaW0ucHJlcGFyZUFkb3B0ZWRDc3NUZXh0KHN0eWxlcy5tYXAoKHMpID0+IHMuY3NzVGV4dCksIHRoaXMubG9jYWxOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdXBwb3J0c0Fkb3B0aW5nU3R5bGVTaGVldHMpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUm9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPVxuICAgICAgICAgICAgICAgIHN0eWxlcy5tYXAoKHMpID0+IHMuc3R5bGVTaGVldCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBUaGlzIG11c3QgYmUgZG9uZSBhZnRlciByZW5kZXJpbmcgc28gdGhlIGFjdHVhbCBzdHlsZSBpbnNlcnRpb24gaXMgZG9uZVxuICAgICAgICAgICAgLy8gaW4gYHVwZGF0ZWAuXG4gICAgICAgICAgICB0aGlzLl9uZWVkc1NoaW1BZG9wdGVkU3R5bGVTaGVldHMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICAvLyBOb3RlLCBmaXJzdCB1cGRhdGUvcmVuZGVyIGhhbmRsZXMgc3R5bGVFbGVtZW50IHNvIHdlIG9ubHkgY2FsbCB0aGlzIGlmXG4gICAgICAgIC8vIGNvbm5lY3RlZCBhZnRlciBmaXJzdCB1cGRhdGUuXG4gICAgICAgIGlmICh0aGlzLmhhc1VwZGF0ZWQgJiYgd2luZG93LlNoYWR5Q1NTICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5TaGFkeUNTUy5zdHlsZUVsZW1lbnQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgZWxlbWVudC4gVGhpcyBtZXRob2QgcmVmbGVjdHMgcHJvcGVydHkgdmFsdWVzIHRvIGF0dHJpYnV0ZXNcbiAgICAgKiBhbmQgY2FsbHMgYHJlbmRlcmAgdG8gcmVuZGVyIERPTSB2aWEgbGl0LWh0bWwuIFNldHRpbmcgcHJvcGVydGllcyBpbnNpZGVcbiAgICAgKiB0aGlzIG1ldGhvZCB3aWxsICpub3QqIHRyaWdnZXIgYW5vdGhlciB1cGRhdGUuXG4gICAgICogQHBhcmFtIF9jaGFuZ2VkUHJvcGVydGllcyBNYXAgb2YgY2hhbmdlZCBwcm9wZXJ0aWVzIHdpdGggb2xkIHZhbHVlc1xuICAgICAqL1xuICAgIHVwZGF0ZShjaGFuZ2VkUHJvcGVydGllcykge1xuICAgICAgICAvLyBTZXR0aW5nIHByb3BlcnRpZXMgaW4gYHJlbmRlcmAgc2hvdWxkIG5vdCB0cmlnZ2VyIGFuIHVwZGF0ZS4gU2luY2VcbiAgICAgICAgLy8gdXBkYXRlcyBhcmUgYWxsb3dlZCBhZnRlciBzdXBlci51cGRhdGUsIGl0J3MgaW1wb3J0YW50IHRvIGNhbGwgYHJlbmRlcmBcbiAgICAgICAgLy8gYmVmb3JlIHRoYXQuXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlUmVzdWx0ID0gdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgc3VwZXIudXBkYXRlKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICAgICAgLy8gSWYgcmVuZGVyIGlzIG5vdCBpbXBsZW1lbnRlZCBieSB0aGUgY29tcG9uZW50LCBkb24ndCBjYWxsIGxpdC1odG1sIHJlbmRlclxuICAgICAgICBpZiAodGVtcGxhdGVSZXN1bHQgIT09IHJlbmRlck5vdEltcGxlbWVudGVkKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgLnJlbmRlcih0ZW1wbGF0ZVJlc3VsdCwgdGhpcy5yZW5kZXJSb290LCB7IHNjb3BlTmFtZTogdGhpcy5sb2NhbE5hbWUsIGV2ZW50Q29udGV4dDogdGhpcyB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXaGVuIG5hdGl2ZSBTaGFkb3cgRE9NIGlzIHVzZWQgYnV0IGFkb3B0ZWRTdHlsZXMgYXJlIG5vdCBzdXBwb3J0ZWQsXG4gICAgICAgIC8vIGluc2VydCBzdHlsaW5nIGFmdGVyIHJlbmRlcmluZyB0byBlbnN1cmUgYWRvcHRlZFN0eWxlcyBoYXZlIGhpZ2hlc3RcbiAgICAgICAgLy8gcHJpb3JpdHkuXG4gICAgICAgIGlmICh0aGlzLl9uZWVkc1NoaW1BZG9wdGVkU3R5bGVTaGVldHMpIHtcbiAgICAgICAgICAgIHRoaXMuX25lZWRzU2hpbUFkb3B0ZWRTdHlsZVNoZWV0cyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5fc3R5bGVzLmZvckVhY2goKHMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBzLmNzc1RleHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJSb290LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludm9rZWQgb24gZWFjaCB1cGRhdGUgdG8gcGVyZm9ybSByZW5kZXJpbmcgdGFza3MuIFRoaXMgbWV0aG9kIG1heSByZXR1cm5cbiAgICAgKiBhbnkgdmFsdWUgcmVuZGVyYWJsZSBieSBsaXQtaHRtbCdzIE5vZGVQYXJ0IC0gdHlwaWNhbGx5IGEgVGVtcGxhdGVSZXN1bHQuXG4gICAgICogU2V0dGluZyBwcm9wZXJ0aWVzIGluc2lkZSB0aGlzIG1ldGhvZCB3aWxsICpub3QqIHRyaWdnZXIgdGhlIGVsZW1lbnQgdG9cbiAgICAgKiB1cGRhdGUuXG4gICAgICovXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gcmVuZGVyTm90SW1wbGVtZW50ZWQ7XG4gICAgfVxufVxuLyoqXG4gKiBFbnN1cmUgdGhpcyBjbGFzcyBpcyBtYXJrZWQgYXMgYGZpbmFsaXplZGAgYXMgYW4gb3B0aW1pemF0aW9uIGVuc3VyaW5nXG4gKiBpdCB3aWxsIG5vdCBuZWVkbGVzc2x5IHRyeSB0byBgZmluYWxpemVgLlxuICpcbiAqIE5vdGUgdGhpcyBwcm9wZXJ0eSBuYW1lIGlzIGEgc3RyaW5nIHRvIHByZXZlbnQgYnJlYWtpbmcgQ2xvc3VyZSBKUyBDb21waWxlclxuICogb3B0aW1pemF0aW9ucy4gU2VlIHVwZGF0aW5nLWVsZW1lbnQudHMgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKi9cbkxpdEVsZW1lbnRbJ2ZpbmFsaXplZCddID0gdHJ1ZTtcbi8qKlxuICogUmVuZGVyIG1ldGhvZCB1c2VkIHRvIHJlbmRlciB0aGUgdmFsdWUgdG8gdGhlIGVsZW1lbnQncyBET00uXG4gKiBAcGFyYW0gcmVzdWx0IFRoZSB2YWx1ZSB0byByZW5kZXIuXG4gKiBAcGFyYW0gY29udGFpbmVyIE5vZGUgaW50byB3aGljaCB0byByZW5kZXIuXG4gKiBAcGFyYW0gb3B0aW9ucyBFbGVtZW50IG5hbWUuXG4gKiBAbm9jb2xsYXBzZVxuICovXG5MaXRFbGVtZW50LnJlbmRlciA9IHJlbmRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpdC1lbGVtZW50LmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbmltcG9ydCB7IGlzUHJpbWl0aXZlIH0gZnJvbSAnLi4vbGliL3BhcnRzLmpzJztcbmltcG9ydCB7IGRpcmVjdGl2ZSwgTm9kZVBhcnQgfSBmcm9tICcuLi9saXQtaHRtbC5qcyc7XG4vLyBGb3IgZWFjaCBwYXJ0LCByZW1lbWJlciB0aGUgdmFsdWUgdGhhdCB3YXMgbGFzdCByZW5kZXJlZCB0byB0aGUgcGFydCBieSB0aGVcbi8vIHVuc2FmZUhUTUwgZGlyZWN0aXZlLCBhbmQgdGhlIERvY3VtZW50RnJhZ21lbnQgdGhhdCB3YXMgbGFzdCBzZXQgYXMgYSB2YWx1ZS5cbi8vIFRoZSBEb2N1bWVudEZyYWdtZW50IGlzIHVzZWQgYXMgYSB1bmlxdWUga2V5IHRvIGNoZWNrIGlmIHRoZSBsYXN0IHZhbHVlXG4vLyByZW5kZXJlZCB0byB0aGUgcGFydCB3YXMgd2l0aCB1bnNhZmVIVE1MLiBJZiBub3QsIHdlJ2xsIGFsd2F5cyByZS1yZW5kZXIgdGhlXG4vLyB2YWx1ZSBwYXNzZWQgdG8gdW5zYWZlSFRNTC5cbmNvbnN0IHByZXZpb3VzVmFsdWVzID0gbmV3IFdlYWtNYXAoKTtcbi8qKlxuICogUmVuZGVycyB0aGUgcmVzdWx0IGFzIEhUTUwsIHJhdGhlciB0aGFuIHRleHQuXG4gKlxuICogTm90ZSwgdGhpcyBpcyB1bnNhZmUgdG8gdXNlIHdpdGggYW55IHVzZXItcHJvdmlkZWQgaW5wdXQgdGhhdCBoYXNuJ3QgYmVlblxuICogc2FuaXRpemVkIG9yIGVzY2FwZWQsIGFzIGl0IG1heSBsZWFkIHRvIGNyb3NzLXNpdGUtc2NyaXB0aW5nXG4gKiB2dWxuZXJhYmlsaXRpZXMuXG4gKi9cbmV4cG9ydCBjb25zdCB1bnNhZmVIVE1MID0gZGlyZWN0aXZlKCh2YWx1ZSkgPT4gKHBhcnQpID0+IHtcbiAgICBpZiAoIShwYXJ0IGluc3RhbmNlb2YgTm9kZVBhcnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigndW5zYWZlSFRNTCBjYW4gb25seSBiZSB1c2VkIGluIHRleHQgYmluZGluZ3MnKTtcbiAgICB9XG4gICAgY29uc3QgcHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzVmFsdWVzLmdldChwYXJ0KTtcbiAgICBpZiAocHJldmlvdXNWYWx1ZSAhPT0gdW5kZWZpbmVkICYmIGlzUHJpbWl0aXZlKHZhbHVlKSAmJlxuICAgICAgICB2YWx1ZSA9PT0gcHJldmlvdXNWYWx1ZS52YWx1ZSAmJiBwYXJ0LnZhbHVlID09PSBwcmV2aW91c1ZhbHVlLmZyYWdtZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IHZhbHVlOyAvLyBpbm5lckhUTUwgY2FzdHMgdG8gc3RyaW5nIGludGVybmFsbHlcbiAgICBjb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmltcG9ydE5vZGUodGVtcGxhdGUuY29udGVudCwgdHJ1ZSk7XG4gICAgcGFydC5zZXRWYWx1ZShmcmFnbWVudCk7XG4gICAgcHJldmlvdXNWYWx1ZXMuc2V0KHBhcnQsIHsgdmFsdWUsIGZyYWdtZW50IH0pO1xufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD11bnNhZmUtaHRtbC5qcy5tYXAiLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG5pbXBvcnQgeyBBdHRyaWJ1dGVQYXJ0LCBkaXJlY3RpdmUsIFByb3BlcnR5UGFydCB9IGZyb20gJy4uL2xpdC1odG1sLmpzJztcbi8vIElFMTEgZG9lc24ndCBzdXBwb3J0IGNsYXNzTGlzdCBvbiBTVkcgZWxlbWVudHMsIHNvIHdlIGVtdWxhdGUgaXQgd2l0aCBhIFNldFxuY2xhc3MgQ2xhc3NMaXN0IHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY2xhc3NlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGNsYXNzTGlzdCA9IChlbGVtZW50LmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJykuc3BsaXQoL1xccysvKTtcbiAgICAgICAgZm9yIChjb25zdCBjbHMgb2YgY2xhc3NMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLmNsYXNzZXMuYWRkKGNscyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkKGNscykge1xuICAgICAgICB0aGlzLmNsYXNzZXMuYWRkKGNscyk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCA9IHRydWU7XG4gICAgfVxuICAgIHJlbW92ZShjbHMpIHtcbiAgICAgICAgdGhpcy5jbGFzc2VzLmRlbGV0ZShjbHMpO1xuICAgICAgICB0aGlzLmNoYW5nZWQgPSB0cnVlO1xuICAgIH1cbiAgICBjb21taXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmNoYW5nZWQpIHtcbiAgICAgICAgICAgIGxldCBjbGFzc1N0cmluZyA9ICcnO1xuICAgICAgICAgICAgdGhpcy5jbGFzc2VzLmZvckVhY2goKGNscykgPT4gY2xhc3NTdHJpbmcgKz0gY2xzICsgJyAnKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xhc3NTdHJpbmcpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBTdG9yZXMgdGhlIENsYXNzSW5mbyBvYmplY3QgYXBwbGllZCB0byBhIGdpdmVuIEF0dHJpYnV0ZVBhcnQuXG4gKiBVc2VkIHRvIHVuc2V0IGV4aXN0aW5nIHZhbHVlcyB3aGVuIGEgbmV3IENsYXNzSW5mbyBvYmplY3QgaXMgYXBwbGllZC5cbiAqL1xuY29uc3QgcHJldmlvdXNDbGFzc2VzQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBBIGRpcmVjdGl2ZSB0aGF0IGFwcGxpZXMgQ1NTIGNsYXNzZXMuIFRoaXMgbXVzdCBiZSB1c2VkIGluIHRoZSBgY2xhc3NgXG4gKiBhdHRyaWJ1dGUgYW5kIG11c3QgYmUgdGhlIG9ubHkgcGFydCB1c2VkIGluIHRoZSBhdHRyaWJ1dGUuIEl0IHRha2VzIGVhY2hcbiAqIHByb3BlcnR5IGluIHRoZSBgY2xhc3NJbmZvYCBhcmd1bWVudCBhbmQgYWRkcyB0aGUgcHJvcGVydHkgbmFtZSB0byB0aGVcbiAqIGVsZW1lbnQncyBgY2xhc3NgIGlmIHRoZSBwcm9wZXJ0eSB2YWx1ZSBpcyB0cnV0aHk7IGlmIHRoZSBwcm9wZXJ0eSB2YWx1ZSBpc1xuICogZmFsc2V5LCB0aGUgcHJvcGVydHkgbmFtZSBpcyByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnQncyBgY2xhc3NgLiBGb3IgZXhhbXBsZVxuICogYHtmb286IGJhcn1gIGFwcGxpZXMgdGhlIGNsYXNzIGBmb29gIGlmIHRoZSB2YWx1ZSBvZiBgYmFyYCBpcyB0cnV0aHkuXG4gKiBAcGFyYW0gY2xhc3NJbmZvIHtDbGFzc0luZm99XG4gKi9cbmV4cG9ydCBjb25zdCBjbGFzc01hcCA9IGRpcmVjdGl2ZSgoY2xhc3NJbmZvKSA9PiAocGFydCkgPT4ge1xuICAgIGlmICghKHBhcnQgaW5zdGFuY2VvZiBBdHRyaWJ1dGVQYXJ0KSB8fCAocGFydCBpbnN0YW5jZW9mIFByb3BlcnR5UGFydCkgfHxcbiAgICAgICAgcGFydC5jb21taXR0ZXIubmFtZSAhPT0gJ2NsYXNzJyB8fCBwYXJ0LmNvbW1pdHRlci5wYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGBjbGFzc01hcGAgZGlyZWN0aXZlIG11c3QgYmUgdXNlZCBpbiB0aGUgYGNsYXNzYCBhdHRyaWJ1dGUgJyArXG4gICAgICAgICAgICAnYW5kIG11c3QgYmUgdGhlIG9ubHkgcGFydCBpbiB0aGUgYXR0cmlidXRlLicpO1xuICAgIH1cbiAgICBjb25zdCB7IGNvbW1pdHRlciB9ID0gcGFydDtcbiAgICBjb25zdCB7IGVsZW1lbnQgfSA9IGNvbW1pdHRlcjtcbiAgICBsZXQgcHJldmlvdXNDbGFzc2VzID0gcHJldmlvdXNDbGFzc2VzQ2FjaGUuZ2V0KHBhcnQpO1xuICAgIGlmIChwcmV2aW91c0NsYXNzZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBXcml0ZSBzdGF0aWMgY2xhc3NlcyBvbmNlXG4gICAgICAgIC8vIFVzZSBzZXRBdHRyaWJ1dGUoKSBiZWNhdXNlIGNsYXNzTmFtZSBpc24ndCBhIHN0cmluZyBvbiBTVkcgZWxlbWVudHNcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY29tbWl0dGVyLnN0cmluZ3Muam9pbignICcpKTtcbiAgICAgICAgcHJldmlvdXNDbGFzc2VzQ2FjaGUuc2V0KHBhcnQsIHByZXZpb3VzQ2xhc3NlcyA9IG5ldyBTZXQoKSk7XG4gICAgfVxuICAgIGNvbnN0IGNsYXNzTGlzdCA9IChlbGVtZW50LmNsYXNzTGlzdCB8fCBuZXcgQ2xhc3NMaXN0KGVsZW1lbnQpKTtcbiAgICAvLyBSZW1vdmUgb2xkIGNsYXNzZXMgdGhhdCBubyBsb25nZXIgYXBwbHlcbiAgICAvLyBXZSB1c2UgZm9yRWFjaCgpIGluc3RlYWQgb2YgZm9yLW9mIHNvIHRoYXQgcmUgZG9uJ3QgcmVxdWlyZSBkb3duLWxldmVsXG4gICAgLy8gaXRlcmF0aW9uLlxuICAgIHByZXZpb3VzQ2xhc3Nlcy5mb3JFYWNoKChuYW1lKSA9PiB7XG4gICAgICAgIGlmICghKG5hbWUgaW4gY2xhc3NJbmZvKSkge1xuICAgICAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShuYW1lKTtcbiAgICAgICAgICAgIHByZXZpb3VzQ2xhc3Nlcy5kZWxldGUobmFtZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvLyBBZGQgb3IgcmVtb3ZlIGNsYXNzZXMgYmFzZWQgb24gdGhlaXIgY2xhc3NNYXAgdmFsdWVcbiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gY2xhc3NJbmZvKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gY2xhc3NJbmZvW25hbWVdO1xuICAgICAgICBpZiAodmFsdWUgIT0gcHJldmlvdXNDbGFzc2VzLmhhcyhuYW1lKSkge1xuICAgICAgICAgICAgLy8gV2UgZXhwbGljaXRseSB3YW50IGEgbG9vc2UgdHJ1dGh5IGNoZWNrIG9mIGB2YWx1ZWAgYmVjYXVzZSBpdCBzZWVtc1xuICAgICAgICAgICAgLy8gbW9yZSBjb252ZW5pZW50IHRoYXQgJycgYW5kIDAgYXJlIHNraXBwZWQuXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjbGFzc0xpc3QuYWRkKG5hbWUpO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzQ2xhc3Nlcy5hZGQobmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjbGFzc0xpc3QucmVtb3ZlKG5hbWUpO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzQ2xhc3Nlcy5kZWxldGUobmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjbGFzc0xpc3QuY29tbWl0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNsYXNzTGlzdC5jb21taXQoKTtcbiAgICB9XG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsYXNzLW1hcC5qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gZ2V0QXNwZWN0UmF0aW8ocG9zdCkge1xuICAgIGNvbnN0IGltYWdlID0gZ2V0UHJldmlldyhwb3N0KTtcbiAgICBpZiAoIWltYWdlKVxuICAgICAgICByZXR1cm4gMTtcbiAgICByZXR1cm4gaW1hZ2UuaGVpZ2h0IC8gaW1hZ2Uud2lkdGg7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0SW1hZ2VVcmwocG9zdCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgaXNJbWFnZSA9IHBvc3QucG9zdF9oaW50ID09PSAnaW1hZ2UnO1xuICAgIGlmIChpc0ltYWdlKVxuICAgICAgICByZXR1cm4gcG9zdC51cmw7XG4gICAgcmV0dXJuIChfYiA9IChfYSA9IGdldFByZXZpZXcocG9zdCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51cmwpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6ICcnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFByZXZpZXcocG9zdCkge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIGNvbnN0IGlzSW1hZ2UgPSBwb3N0LnBvc3RfaGludCA9PT0gJ2ltYWdlJztcbiAgICBpZiAoaXNHYWxsZXJ5KHBvc3QpKVxuICAgICAgICByZXR1cm4gZ2V0R2FsbGVyeUltYWdlKHBvc3QpO1xuICAgIGlmIChpc0ltYWdlKVxuICAgICAgICByZXR1cm4gKF9hID0gcG9zdC5wcmV2aWV3KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaW1hZ2VzWzBdLnNvdXJjZTtcbiAgICBjb25zdCBwcmV2aWV3cyA9IChfYiA9IHBvc3QucHJldmlldykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmltYWdlc1swXS5yZXNvbHV0aW9ucztcbiAgICBpZiAoIXByZXZpZXdzKVxuICAgICAgICByZXR1cm47XG4gICAgcmV0dXJuIChfYyA9IHBvc3QucHJldmlldykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmltYWdlc1swXS5zb3VyY2U7XG4gICAgLyogY29uc3QgcmVzb2x1dGlvbiA9IGlzTGFyZ2VcbiAgICAgID8gcHJldmlld3NbMl0gPz8gcHJldmlld3NbMV0gPz8gcHJldmlld3NbMF1cbiAgICAgIDogcHJldmlld3NbMV0gPz8gcHJldmlld3NbMF07XG4gICAgcmV0dXJuIHJlc29sdXRpb247ICovXG59XG5leHBvcnQgZnVuY3Rpb24gaXNHYWxsZXJ5KHBvc3QpIHtcbiAgICByZXR1cm4gISFwb3N0LmdhbGxlcnlfZGF0YTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1ZpZGVvKHBvc3QpIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIChfYSA9IHBvc3QucG9zdF9oaW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaW5jbHVkZXMoJ3ZpZGVvJyk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0R2FsbGVyeUltYWdlKHBvc3QpIHtcbiAgICBjb25zdCBmaXJzdEltYWdlID0gcG9zdC5nYWxsZXJ5X2RhdGEuaXRlbXNbMF07XG4gICAgY29uc3QgbWV0YWRhdGEgPSBwb3N0Lm1lZGlhX21ldGFkYXRhW2ZpcnN0SW1hZ2UubWVkaWFfaWRdO1xuICAgIGlmICghbWV0YWRhdGEpXG4gICAgICAgIHJldHVybjtcbiAgICBsZXQgdGh1bWIgPSBtZXRhZGF0YS5wLmZpbmQoKGluZm8pID0+IGluZm8ueCA+IDMwMCk7XG4gICAgaWYgKCF0aHVtYilcbiAgICAgICAgdGh1bWIgPSBtZXRhZGF0YS5zO1xuICAgIGlmICghdGh1bWIpXG4gICAgICAgIHJldHVybjtcbiAgICByZXR1cm4ge1xuICAgICAgICB1cmw6IHRodW1iLnUsXG4gICAgICAgIHdpZHRoOiB0aHVtYi54LFxuICAgICAgICBoZWlnaHQ6IHRodW1iLnksXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBodG1sRGVjb2RlKGlucHV0KSB7XG4gICAgaWYgKCFpbnB1dClcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIHZhciBkb2MgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGlucHV0LCAndGV4dC9odG1sJyk7XG4gICAgcmV0dXJuIGRvYy5kb2N1bWVudEVsZW1lbnQudGV4dENvbnRlbnQgfHwgJyc7XG59XG5leHBvcnQgZnVuY3Rpb24gZmlyc3RNYXJrZG93bkVsZW0oaW5wdXQpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpdi5pbm5lckhUTUwgPSBpbnB1dDtcbiAgICBjb25zdCBmaXJzdENoaWxkID0gKF9hID0gZGl2LnF1ZXJ5U2VsZWN0b3IoJy5tZCcpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgaWYgKGZpcnN0Q2hpbGQpIHtcbiAgICAgICAgcmV0dXJuIChfYiA9IGZpcnN0Q2hpbGQudGV4dENvbnRlbnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi50b1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm47XG59XG4iLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBMaXRFbGVtZW50LCBodG1sLCBjdXN0b21FbGVtZW50LCBwcm9wZXJ0eSwgY3NzIH0gZnJvbSAnbGl0LWVsZW1lbnQnO1xuaW1wb3J0IHsgdW5zYWZlSFRNTCB9IGZyb20gJ2xpdC1odG1sL2RpcmVjdGl2ZXMvdW5zYWZlLWh0bWwnO1xuaW1wb3J0IHsgY2xhc3NNYXAgfSBmcm9tICdsaXQtaHRtbC9kaXJlY3RpdmVzL2NsYXNzLW1hcCc7XG5pbXBvcnQgeyBnZXRQcmV2aWV3LCBodG1sRGVjb2RlIH0gZnJvbSAnLi9oZWxwZXJzJztcbmxldCBTdWJyZWRkaXRWaWV3ID0gY2xhc3MgU3VicmVkZGl0VmlldyBleHRlbmRzIExpdEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAodGhpcy5zdWJyZWRkaXQpIHtcbiAgICAgICAgICAgIHRoaXMubWFrZVF1ZXJ5KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIHByZXYsIGN1cnIpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdzdWJyZWRkaXQnKSB7XG4gICAgICAgICAgICBpZiAocHJldiAhPT0gY3Vycikge1xuICAgICAgICAgICAgICAgIHRoaXMuc3VicmVkZGl0ID0gY3VycjtcbiAgICAgICAgICAgICAgICB0aGlzLm1ha2VRdWVyeSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hBYm91dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG1ha2VRdWVyeSgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLmRhdGEgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICghdGhpcy5zdWJyZWRkaXQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly93d3cucmVkZGl0LmNvbS9yLyR7dGhpcy5zdWJyZWRkaXR9Lmpzb25gLCB7XG4gICAgICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVzcC5qc29uKCk7XG4gICAgICAgIHRoaXMuZGF0YSA9IGJvZHkuZGF0YTtcbiAgICAgICAgY29uc29sZS5sb2coKF9hID0gdGhpcy5kYXRhKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2hpbGRyZW4ubWFwKChjKSA9PiBjLmRhdGEudGl0bGUpKTtcbiAgICB9XG4gICAgYXN5bmMgZmV0Y2hBYm91dCgpIHtcbiAgICAgICAgdGhpcy5hYm91dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKCF0aGlzLnN1YnJlZGRpdClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKGBodHRwczovL3d3dy5yZWRkaXQuY29tL3IvJHt0aGlzLnN1YnJlZGRpdH0vYWJvdXQuanNvbmAsIHtcbiAgICAgICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXNwLmpzb24oKTtcbiAgICAgICAgdGhpcy5hYm91dCA9IGJvZHkuZGF0YTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBzdHlsZXMoKSB7XG4gICAgICAgIHJldHVybiBjc3MgYFxuICAgICAgLnBvc3RzIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICAgIGNvbG9yOiBibGFjaztcbiAgICAgIH1cblxuICAgICAgLnBvc3Qge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgICBjb2xvcjogaW5oZXJpdDtcbiAgICAgIH1cblxuICAgICAgLnBvc3QtdG9wIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICAgICAgcGFkZGluZzogMTJweCAxNnB4IDBweDtcbiAgICAgIH1cblxuICAgICAgLnNyLWljb24ge1xuICAgICAgICB3aWR0aDogMzJweDtcbiAgICAgICAgaGVpZ2h0OiAzMnB4O1xuICAgICAgICBmbGV4OiBub25lO1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTBweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjIpO1xuICAgICAgfVxuICAgICAgLm5vLWljb24ge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibHVldmlvbGV0O1xuICAgICAgfVxuICAgICAgLnNyIHtcbiAgICAgICAgZmxleDogYXV0bztcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBsaW5lLWhlaWdodDogMWVtO1xuICAgICAgfVxuICAgICAgLnNyIC5hdXRob3Ige1xuICAgICAgICBjb2xvcjogZ3JleTtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBsaW5lLWhlaWdodDogMTtcbiAgICAgIH1cbiAgICAgIC5qb2luIHtcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgIGNvbG9yOiBibGFjaztcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTBweDtcbiAgICAgICAgYm9yZGVyOiAxLjVweCBzb2xpZCBibGFjaztcbiAgICAgICAgZmxleDogbm9uZTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgIGZvbnQtc2l6ZTogMTdweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDFlbTtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB0ZXh0LWluZGVudDogLTNweDtcbiAgICAgICAgd2lkdGg6IDIwcHg7XG4gICAgICAgIGhlaWdodDogMjBweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAucG9zdC10aXRsZSB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgfVxuXG4gICAgICAubWVkaWEge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICB9XG5cbiAgICAgIC5zZWxmdGV4dCB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgICAgIH1cblxuICAgICAgLnBvc3QtYm90dG9tIHtcbiAgICAgICAgcGFkZGluZzogMTJweCAxMnB4IDE2cHg7XG4gICAgICB9XG5cbiAgICAgIC5wb3N0LWJvdHRvbSBpbWcge1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgIHdpZHRoOiAzMDVweDtcbiAgICAgIH1cblxuICAgICAgdmlkZW8ge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cbiAgICBgO1xuICAgIH1cbiAgICBvbk1vdXNlT3Zlcihwb3N0SWQpIHtcbiAgICAgICAgY29uc3QgdmlkZW9FbGVtID0gdGhpcy5yZW5kZXJSb290LnF1ZXJ5U2VsZWN0b3IoYHZpZGVvIyR7cG9zdElkfWApO1xuICAgICAgICBpZiAodmlkZW9FbGVtKSB7XG4gICAgICAgICAgICB2aWRlb0VsZW0ucGxheSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uTW91c2VPdXQocG9zdElkKSB7XG4gICAgICAgIGNvbnN0IHZpZGVvRWxlbSA9IHRoaXMucmVuZGVyUm9vdC5xdWVyeVNlbGVjdG9yKGB2aWRlbyMke3Bvc3RJZH1gKTtcbiAgICAgICAgaWYgKHZpZGVvRWxlbSkge1xuICAgICAgICAgICAgdmlkZW9FbGVtLnBhdXNlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICghdGhpcy5kYXRhKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IGljb25VcmwgPSAoKF9hID0gdGhpcy5hYm91dCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmljb25faW1nKSB8fCAnaHR0cHM6Ly93d3cucmVkZGl0c3RhdGljLmNvbS9pY29uX3BsYW5ldF8yeC5wbmcnO1xuICAgICAgICByZXR1cm4gaHRtbCBgPGRpdiBjbGFzcz1cInBvc3RzXCI+XG4gICAgICAke3RoaXMuZGF0YS5jaGlsZHJlblxuICAgICAgICAgICAgLmZpbHRlcigoYykgPT4gIWMuZGF0YS5zdGlja2llZClcbiAgICAgICAgICAgIC5tYXAoKGMpID0+IHtcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICBjb25zdCBwb3N0ID0gYy5kYXRhO1xuICAgICAgICAgICAgY29uc3QgaW1nVXJsID0gZ2V0UHJldmlldyhwb3N0KTtcbiAgICAgICAgICAgIHJldHVybiBodG1sIGA8YVxuICAgICAgICAgICAgY2xhc3M9XCJwb3N0XCJcbiAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXG4gICAgICAgICAgICBocmVmPVwiaHR0cHM6Ly9yZWRkaXQuY29tLyR7cG9zdC5pZH1cIlxuICAgICAgICAgICAgQG1vdXNlb3Zlcj0keygpID0+IHRoaXMub25Nb3VzZU92ZXIocG9zdC5pZCl9XG4gICAgICAgICAgICBAbW91c2VvdXQ9JHsoKSA9PiB0aGlzLm9uTW91c2VPdXQocG9zdC5pZCl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBvc3QtdG9wXCI+XG4gICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICBjbGFzcz0ke2NsYXNzTWFwKHtcbiAgICAgICAgICAgICAgICAnc3ItaWNvbic6IHRydWUsXG4gICAgICAgICAgICAgICAgJ25vLWljb24nOiAhKChfYSA9IHRoaXMuYWJvdXQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pY29uX2ltZyksXG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICBzcmM9XCIke2ljb25Vcmx9XCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNyXCI+XG4gICAgICAgICAgICAgICAgci8ke3Bvc3Quc3VicmVkZGl0fTxiciAvPjxzcGFuIGNsYXNzPVwiYXV0aG9yXCJcbiAgICAgICAgICAgICAgICAgID51LyR7cG9zdC5hdXRob3J9PC9zcGFuXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImpvaW5cIiB0aXRsZT1cImpvaW4gci8ke3Bvc3Quc3VicmVkZGl0fVwiPis8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBvc3QtdGl0bGVcIj5cbiAgICAgICAgICAgICAgJHt1bnNhZmVIVE1MKHBvc3QudGl0bGUpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAke3Bvc3Quc2VsZnRleHRfaHRtbFxuICAgICAgICAgICAgICAgID8gaHRtbCBgPGRpdiBjbGFzcz1cInNlbGZ0ZXh0XCI+XG4gICAgICAgICAgICAgICAgICAke3Vuc2FmZUhUTUwoaHRtbERlY29kZShwb3N0LnNlbGZ0ZXh0X2h0bWwpKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5gXG4gICAgICAgICAgICAgICAgOiAnJ31cbiAgICAgICAgICAgICR7cG9zdC5wb3N0X2hpbnQgPT09ICdob3N0ZWQ6dmlkZW8nXG4gICAgICAgICAgICAgICAgPyBodG1sIGA8dmlkZW9cbiAgICAgICAgICAgICAgICAgIGlkPSR7cG9zdC5pZH1cbiAgICAgICAgICAgICAgICAgIHNyYz0keygoX2IgPSBwb3N0Lm1lZGlhKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IucmVkZGl0X3ZpZGVvLmZhbGxiYWNrX3VybCkgfHwgJyd9XG4gICAgICAgICAgICAgICAgICBtdXRlZFxuICAgICAgICAgICAgICAgID48L3ZpZGVvPmBcbiAgICAgICAgICAgICAgICA6IGltZ1VybFxuICAgICAgICAgICAgICAgICAgICA/IHVuc2FmZUhUTUwoYDxpbWcgY2xhc3M9XCJtZWRpYVwiIHNyYz0ke2ltZ1VybC51cmx9IC8+YClcbiAgICAgICAgICAgICAgICAgICAgOiAnJ31cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwb3N0LWJvdHRvbVwiPlxuICAgICAgICAgICAgICA8aW1nIHNyYz1cImZha2UtcG9zdC1tZXRhLnBuZ1wiIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2E+YDtcbiAgICAgICAgfSl9XG4gICAgPC9kaXY+YDtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkoeyBhdHRyaWJ1dGU6IHRydWUsIHR5cGU6IFN0cmluZyB9KVxuXSwgU3VicmVkZGl0Vmlldy5wcm90b3R5cGUsIFwic3VicmVkZGl0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogdHJ1ZSwgdHlwZTogT2JqZWN0IH0pXG5dLCBTdWJyZWRkaXRWaWV3LnByb3RvdHlwZSwgXCJkYXRhXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogdHJ1ZSwgdHlwZTogT2JqZWN0IH0pXG5dLCBTdWJyZWRkaXRWaWV3LnByb3RvdHlwZSwgXCJhYm91dFwiLCB2b2lkIDApO1xuU3VicmVkZGl0VmlldyA9IF9fZGVjb3JhdGUoW1xuICAgIGN1c3RvbUVsZW1lbnQoJ3N1YnJlZGRpdC12aWV3Jylcbl0sIFN1YnJlZGRpdFZpZXcpO1xuZXhwb3J0IHsgU3VicmVkZGl0VmlldyB9O1xuIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgTGl0RWxlbWVudCwgaHRtbCwgY3VzdG9tRWxlbWVudCwgcHJvcGVydHksIGNzcyB9IGZyb20gJ2xpdC1lbGVtZW50JztcbmltcG9ydCB7IGZpcnN0TWFya2Rvd25FbGVtLCBodG1sRGVjb2RlIH0gZnJvbSAnLi9oZWxwZXJzJztcbmltcG9ydCB7IHVuc2FmZUhUTUwgfSBmcm9tICdsaXQtaHRtbC9kaXJlY3RpdmVzL3Vuc2FmZS1odG1sJztcbmxldCBDb21tdW5pdHlTcG90bGlnaHQgPSBjbGFzcyBDb21tdW5pdHlTcG90bGlnaHQgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5zdWJyZWRkaXQgPSAnJztcbiAgICB9XG4gICAgYXN5bmMgZmV0Y2hBYm91dCgpIHtcbiAgICAgICAgdGhpcy5hYm91dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKCF0aGlzLnN1YnJlZGRpdClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKGBodHRwczovL3d3dy5yZWRkaXQuY29tL3IvJHt0aGlzLnN1YnJlZGRpdH0vYWJvdXQuanNvbmAsIHtcbiAgICAgICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXNwLmpzb24oKTtcbiAgICAgICAgdGhpcy5hYm91dCA9IGJvZHkuZGF0YTtcbiAgICB9XG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIHByZXYsIGN1cnJlbnQpIHtcbiAgICAgICAgc3dpdGNoIChuYW1lKSB7XG4gICAgICAgICAgICBjYXNlICdzdWJyZWRkaXQnOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJyZWRkaXQgPSBjdXJyZW50O1xuICAgICAgICAgICAgICAgIGlmIChwcmV2ICE9PSBjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hBYm91dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGdldCBzdHlsZXMoKSB7XG4gICAgICAgIHJldHVybiBjc3MgYFxuICAgICAgLmFib3V0IHtcbiAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgICAgICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcbiAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogdG9wIGNlbnRlcjtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICBib3R0b206IDA7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cbiAgICAgIC5jb21tLXNoaW0ge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KFxuICAgICAgICAgIDE4MGRlZyxcbiAgICAgICAgICByZ2JhKDAsIDAsIDAsIDIwJSkgNTAlLFxuICAgICAgICAgICMwMDAwMDAgMTAwJVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLnRleHQge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgIH1cbiAgICAgIC5pbnRybyB7XG4gICAgICAgIGZsZXg6IG5vbmU7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgICBsaW5lLWhlaWdodDogMTJweDtcbiAgICAgICAgdGV4dC1zaGFkb3c6IDBweCA0cHggNHB4IHJnYmEoMCwgMCwgMCwgMC4yNSk7XG4gICAgICB9XG4gICAgICAubmFtZSB7XG4gICAgICAgIGZsZXg6IGF1dG87XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgIGZvbnQtc2l6ZTogMjZweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDMxcHg7XG4gICAgICAgIHRleHQtc2hhZG93OiAwcHggNHB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMjUpO1xuICAgICAgfVxuICAgICAgLmRlc2Mge1xuICAgICAgICBmbGV4OiBub25lO1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDE3cHg7XG4gICAgICAgIHRleHQtc2hhZG93OiAwcHggNHB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMjUpO1xuICAgICAgfVxuICAgIGA7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmFib3V0KVxuICAgICAgICAgICAgcmV0dXJuIGh0bWwgYGA7XG4gICAgICAgIHJldHVybiBodG1sIGBcbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3M9XCJhYm91dFwiXG4gICAgICAgIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCcke3RoaXMuYWJvdXQuYmFubmVyX2ltZyB8fFxuICAgICAgICAgICAgdGhpcy5hYm91dC5oZWFkZXJfaW1nfScpXCJcbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbW0tc2hpbVwiPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dFwiPlxuICAgICAgICAgIDxwIGNsYXNzPVwiaW50cm9cIj5DT01NVU5JVFkgU1BPVExJR0hUPC9wPlxuICAgICAgICAgIDxoMyBjbGFzcz1cIm5hbWVcIj5yLyR7dGhpcy5hYm91dC5kaXNwbGF5X25hbWV9PC9oMz5cbiAgICAgICAgICA8cCBjbGFzcz1cImRlc2NcIj5cbiAgICAgICAgICAgICR7dW5zYWZlSFRNTChmaXJzdE1hcmtkb3duRWxlbShodG1sRGVjb2RlKHRoaXMuYWJvdXQucHVibGljX2Rlc2NyaXB0aW9uX2h0bWwpKSl9XG4gICAgICAgICAgPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5KHsgYXR0cmlidXRlOiB0cnVlLCB0eXBlOiBTdHJpbmcgfSlcbl0sIENvbW11bml0eVNwb3RsaWdodC5wcm90b3R5cGUsIFwic3VicmVkZGl0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogdHJ1ZSwgdHlwZTogT2JqZWN0IH0pXG5dLCBDb21tdW5pdHlTcG90bGlnaHQucHJvdG90eXBlLCBcImFib3V0XCIsIHZvaWQgMCk7XG5Db21tdW5pdHlTcG90bGlnaHQgPSBfX2RlY29yYXRlKFtcbiAgICBjdXN0b21FbGVtZW50KCdjb21tdW5pdHktc3BvdGxpZ2h0Jylcbl0sIENvbW11bml0eVNwb3RsaWdodCk7XG5leHBvcnQgZGVmYXVsdCBDb21tdW5pdHlTcG90bGlnaHQ7XG4iLCIvKipcbiAqIENvcGllZCBhbmQgbW9kaWZpZWQgZnJvbTpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jbGFtcHktanMvY2xhbXB5L2Jsb2IvbWFzdGVyL3NyYy9jbGFtcHkudHNcbiAqL1xuZXhwb3J0IGNsYXNzIENsYW1wT3B0aW9ucyB7XG4gICAgY29uc3RydWN0b3IoY2xhbXAsIHRydW5jYXRpb25DaGFyLCB0cnVuY2F0aW9uSFRNTCwgc3BsaXRPbkNoYXJzKSB7XG4gICAgICAgIHRoaXMuY2xhbXAgPSBjbGFtcCB8fCAnYXV0byc7XG4gICAgICAgIHRoaXMudHJ1bmNhdGlvbkNoYXIgPSB0cnVuY2F0aW9uQ2hhciB8fCAn4oCmJztcbiAgICAgICAgdGhpcy50cnVuY2F0aW9uSFRNTCA9IHRydW5jYXRpb25IVE1MO1xuICAgICAgICB0aGlzLnNwbGl0T25DaGFycyA9IHNwbGl0T25DaGFycyB8fCBbJy4nLCAnLScsICfigJMnLCAn4oCUJywgJyAnXTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ2xhbXBSZXNwb25zZSB7XG4gICAgY29uc3RydWN0b3Iob3JpZ2luYWwsIGNsYW1wZWQpIHtcbiAgICAgICAgdGhpcy5vcmlnaW5hbCA9IG9yaWdpbmFsO1xuICAgICAgICB0aGlzLmNsYW1wZWQgPSBjbGFtcGVkO1xuICAgIH1cbn1cbi8qKlxuICogQ2xhbXBzIChpZS4gY3V0cyBvZmYpIGFuIEhUTUwgZWxlbWVudCdzIGNvbnRlbnQgYnkgYWRkaW5nIGVsbGlwc2lzIHRvIGl0IGlmIHRoZSBjb250ZW50IGluc2lkZSBpcyB0b28gbG9uZy5cbiAqXG4gKiBAZXhwb3J0XG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IFRoZSBIVE1MRWxlbWVudCB0aGF0IHNob3VsZCBiZSBjbGFtcGVkLlxuICogQHBhcmFtIHtDbGFtcE9wdGlvbnN9IFtvcHRpb25zXSBUaGUgQ2xhbXAgb3B0aW9uc1xuICogQHJldHVybnMge0NsYW1wUmVzcG9uc2V9IFRoZSBDbGFtcCByZXNwb25zZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIGNvbnN0IHdpbiA9IHdpbmRvdztcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGNsYW1wOiAnYXV0bycsXG4gICAgICAgICAgICB0cnVuY2F0aW9uQ2hhcjogJ+KApicsXG4gICAgICAgICAgICBzcGxpdE9uQ2hhcnM6IFsnLicsICctJywgJ+KAkycsICfigJQnLCAnICddLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBvcHQgPSB7XG4gICAgICAgIGNsYW1wOiBvcHRpb25zLmNsYW1wIHx8ICdhdXRvJyxcbiAgICAgICAgc3BsaXRPbkNoYXJzOiBvcHRpb25zLnNwbGl0T25DaGFycyB8fCBbJy4nLCAnLScsICfigJMnLCAn4oCUJywgJyAnXSxcbiAgICAgICAgdHJ1bmNhdGlvbkNoYXI6IG9wdGlvbnMudHJ1bmNhdGlvbkNoYXIgfHwgJ+KApicsXG4gICAgICAgIHRydW5jYXRpb25IVE1MOiBvcHRpb25zLnRydW5jYXRpb25IVE1MLFxuICAgIH07XG4gICAgbGV0IHNwbGl0T25DaGFycyA9IG9wdC5zcGxpdE9uQ2hhcnMuc2xpY2UoMCk7XG4gICAgbGV0IHNwbGl0Q2hhciA9IHNwbGl0T25DaGFyc1swXTtcbiAgICBsZXQgY2h1bmtzO1xuICAgIGxldCBsYXN0Q2h1bms7XG4gICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gZWxlbWVudC5pbm5lckhUTUw7XG4gICAgbGV0IGNsYW1wVmFsdWUgPSBvcHQuY2xhbXA7XG4gICAgY29uc3QgaXNDU1NWYWx1ZSA9IGNsYW1wVmFsdWUuaW5kZXhPZiAmJlxuICAgICAgICAoY2xhbXBWYWx1ZS5pbmRleE9mKCdweCcpID4gLTEgfHwgY2xhbXBWYWx1ZS5pbmRleE9mKCdlbScpID4gLTEpO1xuICAgIGxldCB0cnVuY2F0aW9uSFRNTENvbnRhaW5lcjtcbiAgICBpZiAob3B0LnRydW5jYXRpb25IVE1MKSB7XG4gICAgICAgIHRydW5jYXRpb25IVE1MQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICB0cnVuY2F0aW9uSFRNTENvbnRhaW5lci5pbm5lckhUTUwgPSBvcHQudHJ1bmNhdGlvbkhUTUw7XG4gICAgfVxuICAgIC8vIFVUSUxJVFkgRlVOQ1RJT05TIF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGN1cnJlbnQgc3R5bGUgZm9yIGFuIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbSBUaGUgZWxlbWVudCB0byBjb21wdXRlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIFRoZSBzdHlsZSBwcm9wZXJ0eS5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbXB1dGVTdHlsZShlbGVtLCBwcm9wKSB7XG4gICAgICAgIHJldHVybiB3aW4uZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKS5nZXRQcm9wZXJ0eVZhbHVlKHByb3ApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYXhpbXVtIG51bWJlciBvZiBsaW5lcyBvZiB0ZXh0IHRoYXQgc2hvdWxkIGJlIHJlbmRlcmVkIGJhc2VkXG4gICAgICogb24gdGhlIGN1cnJlbnQgaGVpZ2h0IG9mIHRoZSBlbGVtZW50IGFuZCB0aGUgbGluZS1oZWlnaHQgb2YgdGhlIHRleHQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0TWF4TGluZXMoaGVpZ2h0KSB7XG4gICAgICAgIGNvbnN0IGF2YWlsSGVpZ2h0ID0gaGVpZ2h0IHx8IGVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICAgICAgICBjb25zdCBsaW5lSGVpZ2h0ID0gZ2V0TGluZUhlaWdodChlbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KE1hdGguZmxvb3IoYXZhaWxIZWlnaHQgLyBsaW5lSGVpZ2h0KSwgMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG1heGltdW0gaGVpZ2h0IGEgZ2l2ZW4gZWxlbWVudCBzaG91bGQgaGF2ZSBiYXNlZCBvbiB0aGUgbGluZS1cbiAgICAgKiBoZWlnaHQgb2YgdGhlIHRleHQgYW5kIHRoZSBnaXZlbiBjbGFtcCB2YWx1ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRNYXhIZWlnaHQoY2xtcCkge1xuICAgICAgICBjb25zdCBsaW5lSGVpZ2h0ID0gZ2V0TGluZUhlaWdodChlbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIGxpbmVIZWlnaHQgKiBjbG1wO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsaW5lLWhlaWdodCBvZiBhbiBlbGVtZW50IGFzIGFuIGludGVnZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0TGluZUhlaWdodChlbGVtKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubGluZUhlaWdodClcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmxpbmVIZWlnaHQ7XG4gICAgICAgIGxldCBsaCA9IGNvbXB1dGVTdHlsZShlbGVtLCAnbGluZS1oZWlnaHQnKTtcbiAgICAgICAgaWYgKGxoID09PSAnbm9ybWFsJykge1xuICAgICAgICAgICAgLy8gTm9ybWFsIGxpbmUgaGVpZ2h0cyB2YXJ5IGZyb20gYnJvd3NlciB0byBicm93c2VyLiBUaGUgc3BlYyByZWNvbW1lbmRzXG4gICAgICAgICAgICAvLyBhIHZhbHVlIGJldHdlZW4gMS4wIGFuZCAxLjIgb2YgdGhlIGZvbnQgc2l6ZS4gVXNpbmcgMS4xIHRvIHNwbGl0IHRoZSBkaWZmLlxuICAgICAgICAgICAgbGggPVxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQocGFyc2VGbG9hdChjb21wdXRlU3R5bGUoZWxlbSwgJ2ZvbnQtc2l6ZScpKS50b0ZpeGVkKDApKSAqXG4gICAgICAgICAgICAgICAgICAgIDEuMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChwYXJzZUZsb2F0KGxoKS50b0ZpeGVkKDApKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaGVpZ2h0IG9mIGFuIGVsZW1lbnQgYXMgYW4gaW50ZWdlciAobWF4IG9mIHNjcm9sbC9vZmZzZXQvY2xpZW50KS5cbiAgICAgKiBOb3RlOiBpbmxpbmUgZWxlbWVudHMgcmV0dXJuIDAgZm9yIHNjcm9sbEhlaWdodCBhbmQgY2xpZW50SGVpZ2h0XG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0RWxlbUhlaWdodChlbGVtKSB7XG4gICAgICAgIC8vIFRoZSAnLSA0JyBpcyBhIGhhY2sgdG8gZGVhbCB3aXRoIHRoZSBlbGVtZW50IGhlaWdodCB3aGVuIHRoZSBicm93c2VyKGVzcGVjaWFsbHkgSUUpIHpvb20gbGV2ZWwgaXMgbm90IDEwMCUuXG4gICAgICAgIC8vIEl0IGFsc28gZG9lc24ndCBpbXBhY3QgY2xhbXBpbmcgd2hlbiB0aGUgYnJvd3NlciB6b29tIGxldmVsIGlzIDEwMCUuXG4gICAgICAgIHJldHVybiBNYXRoLm1heChlbGVtLnNjcm9sbEhlaWdodCwgZWxlbS5jbGllbnRIZWlnaHQpIC0gNDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyBhbiBlbGVtZW50J3MgbGFzdCBjaGlsZC4gVGhhdCBtYXkgYmUgYW5vdGhlciBub2RlIG9yIGEgbm9kZSdzIGNvbnRlbnRzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldExhc3RDaGlsZChlbGVtKSB7XG4gICAgICAgIGlmICghZWxlbS5sYXN0Q2hpbGQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBDdXJyZW50IGVsZW1lbnQgaGFzIGNoaWxkcmVuLCBuZWVkIHRvIGdvIGRlZXBlciBhbmQgZ2V0IGxhc3QgY2hpbGQgYXMgYSB0ZXh0IG5vZGVcbiAgICAgICAgaWYgKGVsZW0ubGFzdENoaWxkLmNoaWxkcmVuICYmIGVsZW0ubGFzdENoaWxkLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRMYXN0Q2hpbGQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZWxlbS5jaGlsZHJlbikucG9wKCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoaXMgaXMgdGhlIGFic29sdXRlIGxhc3QgY2hpbGQsIGEgdGV4dCBub2RlLCBidXQgc29tZXRoaW5nJ3Mgd3Jvbmcgd2l0aCBpdC4gUmVtb3ZlIGl0IGFuZCBrZWVwIHRyeWluZ1xuICAgICAgICBlbHNlIGlmICghZWxlbS5sYXN0Q2hpbGQgfHxcbiAgICAgICAgICAgICFlbGVtLmxhc3RDaGlsZC5ub2RlVmFsdWUgfHxcbiAgICAgICAgICAgIGVsZW0ubGFzdENoaWxkLm5vZGVWYWx1ZSA9PT0gJycgfHxcbiAgICAgICAgICAgIGVsZW0ubGFzdENoaWxkLm5vZGVWYWx1ZSA9PT0gb3B0LnRydW5jYXRpb25DaGFyKSB7XG4gICAgICAgICAgICBpZiAoIWVsZW0ubGFzdENoaWxkLm5vZGVWYWx1ZSkge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciB2b2lkL2VtcHR5IGVsZW1lbnQgKHN1Y2ggYXMgPGJyPiB0YWcpIG9yIGlmIGl0J3MgdGhlIGVsbGlwc2lzIGFuZCByZW1vdmUgaXQuXG4gICAgICAgICAgICAgICAgaWYgKChlbGVtLmxhc3RDaGlsZC5maXJzdENoaWxkID09PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgICAgIGVsZW0ubGFzdENoaWxkLmZpcnN0Q2hpbGQubm9kZVZhbHVlID09PSBvcHQudHJ1bmNhdGlvbkNoYXIpICYmXG4gICAgICAgICAgICAgICAgICAgIGVsZW0ubGFzdENoaWxkLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5sYXN0Q2hpbGQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtLmxhc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBlbGVtZW50IGhhcyBubyBtb3JlIGNoaWxkcmVuIGFuZCByZW1vdmUgaXQgaWYgaXQncyB0aGUgY2FzZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIGZvciBpbnN0YW5jZSB3aXRoIGxpc3RzIChpLmUuIDx1bD4gYW5kIDxvbD4pIHdpdGggbm8gaXRlbXMuXG4gICAgICAgICAgICAgICAgICAgIGlmICgoIWVsZW0uY2hpbGRyZW4gfHwgZWxlbS5jaGlsZHJlbi5sZW5ndGggPT09IDApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRMYXN0Q2hpbGQoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhIHRleHQgbm9kZVxuICAgICAgICAgICAgICAgIGlmIChlbGVtLmxhc3RDaGlsZC5ub2RlVHlwZSA9PT0gMykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbS5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0TGFzdENoaWxkKGVsZW0ubGFzdENoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWxlbS5sYXN0Q2hpbGQgJiZcbiAgICAgICAgICAgICAgICBlbGVtLmxhc3RDaGlsZC5wYXJlbnROb2RlICYmXG4gICAgICAgICAgICAgICAgZWxlbS5sYXN0Q2hpbGQubm9kZVZhbHVlID09PSBvcHQudHJ1bmNhdGlvbkNoYXIpIHtcbiAgICAgICAgICAgICAgICBlbGVtLmxhc3RDaGlsZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsZW0ubGFzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGdldExhc3RDaGlsZChlbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBsYXN0IGNoaWxkIHdlIHdhbnQsIHJldHVybiBpdFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtLmxhc3RDaGlsZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBseSB0aGUgZWxsaXBzaXMgdG8gdGhlIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gZWxlbSB0aGUgZWxlbWVudCB0byBhcHBseSB0aGUgZWxsaXBzaXMgb25cbiAgICAgKiBAcGFyYW0gc3RyIFRoZSBzdHJpbmcgdGhhdCB3aWxsIGJlIHNldCB0byB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFwcGx5RWxsaXBzaXMoZWxlbSwgc3RyKSB7XG4gICAgICAgIGVsZW0ubm9kZVZhbHVlID0gc3RyICsgb3B0LnRydW5jYXRpb25DaGFyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIG9uZSBjaGFyYWN0ZXIgYXQgYSB0aW1lIGZyb20gdGhlIHRleHQgdW50aWwgaXRzIHdpZHRoIG9yXG4gICAgICogaGVpZ2h0IGlzIGJlbmVhdGggdGhlIHBhc3NlZC1pbiBtYXggcGFyYW0uXG4gICAgICovXG4gICAgZnVuY3Rpb24gdHJ1bmNhdGUodGFyZ2V0LCBtYXhIZWlnaHQpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlc2V0cyBnbG9iYWwgdmFyaWFibGVzLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICAgICAgICBzcGxpdE9uQ2hhcnMgPSBvcHQuc3BsaXRPbkNoYXJzLnNsaWNlKDApO1xuICAgICAgICAgICAgc3BsaXRDaGFyID0gc3BsaXRPbkNoYXJzWzBdO1xuICAgICAgICAgICAgY2h1bmtzID0gbnVsbDtcbiAgICAgICAgICAgIGxhc3RDaHVuayA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0YXJnZXQgfHwgIW1heEhlaWdodCB8fCAhdGFyZ2V0Lm5vZGVWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGFyZ2V0Lm5vZGVWYWx1ZS50cmltKCkuZW5kc1dpdGgob3B0LnRydW5jYXRpb25DaGFyKSkge1xuICAgICAgICAgICAgYXBwbHlFbGxpcHNpcyh0YXJnZXQsIHRhcmdldC5ub2RlVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnZXRFbGVtSGVpZ2h0KGVsZW1lbnQpIDw9IG1heEhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuaW5uZXJIVE1MO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5vZGVWYWx1ZSA9IHRhcmdldC5ub2RlVmFsdWUucmVwbGFjZShvcHQudHJ1bmNhdGlvbkNoYXIsICcnKTtcbiAgICAgICAgLy8gR3JhYiB0aGUgbmV4dCBjaHVua3NcbiAgICAgICAgaWYgKCFjaHVua3MpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBtb3JlIGNoYXJhY3RlcnMgdG8gdHJ5LCBncmFiIHRoZSBuZXh0IG9uZVxuICAgICAgICAgICAgaWYgKHNwbGl0T25DaGFycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgc3BsaXRDaGFyID0gc3BsaXRPbkNoYXJzLnNoaWZ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBObyBjaGFyYWN0ZXJzIHRvIGNodW5rIGJ5LiBHbyBjaGFyYWN0ZXItYnktY2hhcmFjdGVyXG4gICAgICAgICAgICAgICAgc3BsaXRDaGFyID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaHVua3MgPSBub2RlVmFsdWUuc3BsaXQoc3BsaXRDaGFyKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgY2h1bmtzIGxlZnQgdG8gcmVtb3ZlLCByZW1vdmUgdGhlIGxhc3Qgb25lIGFuZCBzZWUgaWZcbiAgICAgICAgLy8gdGhlIG5vZGVWYWx1ZSBmaXRzLlxuICAgICAgICBpZiAoY2h1bmtzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGxhc3RDaHVuayA9IGNodW5rcy5wb3AoKTtcbiAgICAgICAgICAgIGFwcGx5RWxsaXBzaXModGFyZ2V0LCBjaHVua3Muam9pbihzcGxpdENoYXIpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIG1vcmUgY2h1bmtzIGNhbiBiZSByZW1vdmVkIHVzaW5nIHRoaXMgY2hhcmFjdGVyXG4gICAgICAgICAgICBjaHVua3MgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vIEluc2VydCB0aGUgY3VzdG9tIEhUTUwgYmVmb3JlIHRoZSB0cnVuY2F0aW9uIGNoYXJhY3RlclxuICAgICAgICBpZiAodHJ1bmNhdGlvbkhUTUxDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRhcmdldC5ub2RlVmFsdWUgPSB0YXJnZXQubm9kZVZhbHVlLnJlcGxhY2Uob3B0LnRydW5jYXRpb25DaGFyLCAnJyk7XG4gICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9XG4gICAgICAgICAgICAgICAgdGFyZ2V0Lm5vZGVWYWx1ZSArXG4gICAgICAgICAgICAgICAgICAgICcgJyArXG4gICAgICAgICAgICAgICAgICAgIHRydW5jYXRpb25IVE1MQ29udGFpbmVyLmlubmVySFRNTCArXG4gICAgICAgICAgICAgICAgICAgIG9wdC50cnVuY2F0aW9uQ2hhcjtcbiAgICAgICAgfVxuICAgICAgICAvLyBTZWFyY2ggcHJvZHVjZWQgdmFsaWQgY2h1bmtzXG4gICAgICAgIGlmIChjaHVua3MpIHtcbiAgICAgICAgICAgIC8vIEl0IGZpdHNcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmNsaWVudEhlaWdodCA8PSBtYXhIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGVyZSdzIHN0aWxsIG1vcmUgY2hhcmFjdGVycyB0byB0cnkgc3BsaXR0aW5nIG9uLCBub3QgcXVpdGUgZG9uZSB5ZXRcbiAgICAgICAgICAgICAgICBpZiAoc3BsaXRPbkNoYXJzLmxlbmd0aCA+PSAwICYmIHNwbGl0Q2hhciAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgYXBwbHlFbGxpcHNpcyh0YXJnZXQsIGNodW5rcy5qb2luKHNwbGl0Q2hhcikgKyBzcGxpdENoYXIgKyBsYXN0Q2h1bmspO1xuICAgICAgICAgICAgICAgICAgICBjaHVua3MgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmluaXNoZWQhXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmlubmVySFRNTDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBObyB2YWxpZCBjaHVua3MgcHJvZHVjZWRcbiAgICAgICAgICAgIC8vIE5vIHZhbGlkIGNodW5rcyBldmVuIHdoZW4gc3BsaXR0aW5nIGJ5IGxldHRlciwgdGltZSB0byBtb3ZlXG4gICAgICAgICAgICAvLyBvbiB0byB0aGUgbmV4dCBub2RlXG4gICAgICAgICAgICBpZiAoc3BsaXRDaGFyID09PSAnJykge1xuICAgICAgICAgICAgICAgIGFwcGx5RWxsaXBzaXModGFyZ2V0LCAnJyk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gZ2V0TGFzdENoaWxkKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydW5jYXRlKHRhcmdldCwgbWF4SGVpZ2h0KTtcbiAgICB9XG4gICAgLy8gQ09OU1RSVUNUT1IgX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX1xuICAgIGlmIChjbGFtcFZhbHVlID09PSAnYXV0bycpIHtcbiAgICAgICAgY2xhbXBWYWx1ZSA9IGdldE1heExpbmVzKCkudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNDU1NWYWx1ZSkge1xuICAgICAgICBjbGFtcFZhbHVlID0gZ2V0TWF4TGluZXMocGFyc2VJbnQoY2xhbXBWYWx1ZSwgMTApKS50b1N0cmluZygpO1xuICAgIH1cbiAgICBsZXQgY2xhbXBlZFRleHQ7XG4gICAgY29uc3QgaGVpZ2h0ID0gZ2V0TWF4SGVpZ2h0KE51bWJlcihjbGFtcFZhbHVlKSk7XG4gICAgaWYgKGhlaWdodCA8IGdldEVsZW1IZWlnaHQoZWxlbWVudCkpIHtcbiAgICAgICAgY2xhbXBlZFRleHQgPSB0cnVuY2F0ZShnZXRMYXN0Q2hpbGQoZWxlbWVudCksIGhlaWdodCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgQ2xhbXBSZXNwb25zZShvcmlnaW5hbFRleHQsIGNsYW1wZWRUZXh0KTtcbn1cbiIsImltcG9ydCB7IGNzcywgdW5zYWZlQ1NTIH0gZnJvbSAnbGl0LWVsZW1lbnQnO1xuaW1wb3J0IHsgR1JJRF9HUkFOVUxBUklUWSB9IGZyb20gJy4vdHlwZXMnO1xuZXhwb3J0IGRlZmF1bHQgKCkgPT4gY3NzIGBcbiAgOmhvc3Qge1xuICAgIC0tdGlsZS1zaXplOiAxNTZweDtcbiAgICAtLWdyYWRpZW50LTE6IGxpbmVhci1ncmFkaWVudCg5Ny41MWRlZywgI2ZmNDQwMCAtNy4wOCUsICNmZmIzMzAgMTE2LjU3JSk7XG4gICAgLS1ncmFkaWVudC0yOiBsaW5lYXItZ3JhZGllbnQoODkuOTRkZWcsICNjMjc0ZjAgMCUsICNmMTRmYjAgMTAwJSk7XG4gICAgLS1ncmFkaWVudC0zOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgICA4OS45NGRlZyxcbiAgICAgICM1MWI5ZmYgMCUsXG4gICAgICAjNzc4NWZmIDUyLjYlLFxuICAgICAgI2IyNzlmZiA3My45NiUsXG4gICAgICAjZmY4MWVkIDEwMCVcbiAgICApO1xuICAgIC0tZ3JhZGllbnQtNDogbGluZWFyLWdyYWRpZW50KDk3LjUxZGVnLCAjMDQ4ZGU5IC03LjA4JSwgIzBmYzBkMiAxMTYuNTclKTtcbiAgICAtLWdyYWRpZW50LTU6IGxpbmVhci1ncmFkaWVudCg3MS41M2RlZywgI2MzMGQ0NyAyMC44OSUsICNmZTQzMDEgMTIxLjYyJSk7XG4gICAgLS1ncmFkaWVudC02OiBsaW5lYXItZ3JhZGllbnQoOTEuNjRkZWcsICNmNTQ0MWYgLTEwLjQ5JSwgI2ZjNzUxOSAxMDkuNzUlKTtcbiAgICAtLWdyYWRpZW50LTc6IGxpbmVhci1ncmFkaWVudCg5MS42NGRlZywgIzViM2RjMSAtMTAuNDklLCAjYWE0OGMwIDEwOS43NSUpO1xuICAgIC0tZ3JhZGllbnQtODogbGluZWFyLWdyYWRpZW50KDkxLjY0ZGVnLCAjMzM1M2I4IC0xMC40OSUsICM2ODVjZmMgMTA5Ljc1JSk7XG4gIH1cbiAgLmdyaWQge1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xuICAgIGdyaWQtYXV0by1yb3dzOiBjYWxjKCh2YXIoLS10aWxlLXNpemUpICsgMTZweCkgLyAke0dSSURfR1JBTlVMQVJJVFl9KTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIHBhZGRpbmc6IDhweDtcbiAgICAvKiBncmlkLWdhcDogMTZweDsgKi9cbiAgICBncmlkLWF1dG8tZmxvdzogZGVuc2U7XG4gIH1cblxuICAucG9zdC10aWxlIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgYm9yZGVyLXJhZGl1czogMTZweDtcbiAgICBtYXJnaW46IDhweDtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgYm94LXNoYWRvdzogMHB4IDRweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG5cbiAgICBncmlkLXJvdy1lbmQ6IHNwYW4gNDtcbiAgfVxuXG4gIC5wb3N0LXRpbGUtdGV4dCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIGxpbmUtaGVpZ2h0OiAxN3B4O1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgIG1hcmdpbjogMDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgYm90dG9tOiAwO1xuICB9XG5cbiAgLnNoaW0ge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yNSk7XG4gIH1cblxuICAucG9zdC10ZXh0LW9ubHkgLnBvc3QtdGlsZS10ZXh0IHtcbiAgICBib3gtc2hhZG93OiB1bnNldDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgfVxuXG4gIC5sb2FkZXIge1xuICAgIGdyaWQtY29sdW1uLWVuZDogc3BhbiAyO1xuICB9XG5cbiAgLnBvc3QtdGlsZS1pbWFnZSB7XG4gICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xuICAgIGJhY2tncm91bmQtcG9zaXRpb246IHRvcCBjZW50ZXI7XG4gICAgLyogaGVpZ2h0OiB2YXIoLS10aWxlLXNpemUpOyAqL1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgbGVmdDogMDtcbiAgICByaWdodDogMDtcbiAgICBib3R0b206IDA7XG4gIH1cbiAgLnBvc3QtdGV4dC1vbmx5IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB2YXIoLS1ncmFkaWVudC0xKTtcbiAgfVxuXG4gIC5wb3N0LXRpbGU6bnRoLWNoaWxkKDhuKS5wb3N0LXRleHQtb25seSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdmFyKC0tZ3JhZGllbnQtMik7XG4gIH1cbiAgLnBvc3QtdGlsZTpudGgtY2hpbGQoOG4gKyAxKS5wb3N0LXRleHQtb25seSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdmFyKC0tZ3JhZGllbnQtMyk7XG4gIH1cbiAgLnBvc3QtdGlsZTpudGgtY2hpbGQoOG4gKyAyKS5wb3N0LXRleHQtb25seSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdmFyKC0tZ3JhZGllbnQtNCk7XG4gIH1cbiAgLnBvc3QtdGlsZTpudGgtY2hpbGQoOG4gKyAzKS5wb3N0LXRleHQtb25seSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdmFyKC0tZ3JhZGllbnQtNSk7XG4gIH1cbiAgLnBvc3QtdGlsZTpudGgtY2hpbGQoOG4gKyA0KS5wb3N0LXRleHQtb25seSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdmFyKC0tZ3JhZGllbnQtNik7XG4gIH1cbiAgLnBvc3QtdGlsZTpudGgtY2hpbGQoOG4gKyA1KS5wb3N0LXRleHQtb25seSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdmFyKC0tZ3JhZGllbnQtNyk7XG4gIH1cbiAgLnBvc3QtdGlsZTpudGgtY2hpbGQoOG4gKyA2KS5wb3N0LXRleHQtb25seSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdmFyKC0tZ3JhZGllbnQtOCk7XG4gIH1cblxuICAuaGlkZGVuIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG5cbiAgLnN1YnJlZGRpdCB7XG4gICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgICBsaW5lLWhlaWdodDogMS4yZW07XG4gICAgbWFyZ2luLXRvcDogMTZweDtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgZmxleDogbm9uZTtcbiAgfVxuXG4gIC5wb3N0LXRleHQtb25seSAucG9zdC10aWxlLXRleHQgLnBvc3QtdGlsZS10aXRsZSB7XG4gICAgdGV4dC1zaGFkb3c6IG5vbmU7XG4gIH1cblxuICAuc3BhY2VyIHtcbiAgICBmbGV4OiBhdXRvO1xuICB9XG5cbiAgLmdhbGxlcnktaWNvbiB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMTBweDtcbiAgICByaWdodDogNnB4O1xuICAgIHdpZHRoOiAyOHB4O1xuICAgIGhlaWdodDogMjhweDtcbiAgfVxuICAudmlkZW8taWNvbiB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMTBweDtcbiAgICByaWdodDogMTBweDtcbiAgICB3aWR0aDogMjBweDtcbiAgICBoZWlnaHQ6IDE4cHg7XG4gIH1cblxuICAucG9zdC10aWxlLXRpdGxlIHtcbiAgICBtYXJnaW46IDA7XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICBmbGV4OiBub25lO1xuICAgIHZlcnRpY2FsLWFsaWduOiBib3R0b207XG4gIH1cblxuICAucG9zdC10aWxlLWJvZHkge1xuICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICBmb250LXdlaWdodDogbm9ybWFsO1xuICB9XG5cbiAgLnBvc3QtdGlsZS1sYXJnZSB7XG4gICAgZ3JpZC1jb2x1bW4tZW5kOiBzcGFuIDI7XG4gICAgLyogZ3JpZC1yb3ctZW5kOiBzcGFuIDE2OyAqL1xuICB9XG4gICR7dW5zYWZlQ1NTKHJhbmdlKEdSSURfR1JBTlVMQVJJVFkgKiA0ICsgMSlcbiAgICAubWFwKChudW0pID0+IGBcbiAgICAuc3BhbiR7bnVtfSB7XG4gICAgICBncmlkLXJvdy1lbmQ6IHNwYW4gJHtudW19O1xuICAgIH1cbiAgYClcbiAgICAuam9pbignXFxuJykpfVxuXG4gIC5tZCBhIHtcbiAgICBjb2xvcjogaW5oZXJpdDtcbiAgfVxuYDtcbmZ1bmN0aW9uIHJhbmdlKG51bSkge1xuICAgIGNvbnN0IGFyciA9IEFycmF5KG51bSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW07IGkrKylcbiAgICAgICAgYXJyW2ldID0gaTtcbiAgICByZXR1cm4gYXJyO1xufVxuIiwiZXhwb3J0IGNvbnN0IEdSSURfR1JBTlVMQVJJVFkgPSA0O1xuIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgTGl0RWxlbWVudCwgaHRtbCwgY3VzdG9tRWxlbWVudCwgcHJvcGVydHksIHF1ZXJ5IH0gZnJvbSAnbGl0LWVsZW1lbnQnO1xuaW1wb3J0IHsgdW5zYWZlSFRNTCB9IGZyb20gJ2xpdC1odG1sL2RpcmVjdGl2ZXMvdW5zYWZlLWh0bWwnO1xuaW1wb3J0IHsgY2xhc3NNYXAgfSBmcm9tICdsaXQtaHRtbC9kaXJlY3RpdmVzL2NsYXNzLW1hcCc7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4uL3ZlbmRvci9jbGFtcHknO1xuaW1wb3J0IGV4cGxvcmVTdHlsZXMgZnJvbSAnLi9leHBsb3JlLXN0eWxlcyc7XG5pbXBvcnQgeyBmaXJzdE1hcmtkb3duRWxlbSwgaHRtbERlY29kZSB9IGZyb20gJy4vaGVscGVycyc7XG5sZXQgVGlsZVRleHQgPSBjbGFzcyBUaWxlVGV4dCBleHRlbmRzIExpdEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmlzSW1hZ2UgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc0NsYW1wZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBzdHlsZXMoKSB7XG4gICAgICAgIHJldHVybiBleHBsb3JlU3R5bGVzKCk7XG4gICAgfVxuICAgIHVwZGF0ZWQoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHRoaXMudGl0bGVFbGVtICYmICF0aGlzLmlzQ2xhbXBlZCkge1xuICAgICAgICAgICAgY2xhbXAodGhpcy50aXRsZUVsZW0sIHtcbiAgICAgICAgICAgICAgICBjbGFtcDogKChfYSA9IHRoaXMucG9zdCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNlbGZ0ZXh0KSA/ICczJyA6ICc1JyxcbiAgICAgICAgICAgICAgICBsaW5lSGVpZ2h0OiAxNyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmJvZHlFbGVtICYmICF0aGlzLmlzQ2xhbXBlZCkge1xuICAgICAgICAgICAgY2xhbXAodGhpcy5ib2R5RWxlbSwge1xuICAgICAgICAgICAgICAgIGNsYW1wOiAnNScsXG4gICAgICAgICAgICAgICAgbGluZUhlaWdodDogMTcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaXNDbGFtcGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5wb3N0KVxuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyVGV4dCh0aGlzLnBvc3QsIHRoaXMuaXNJbWFnZSk7XG4gICAgfVxuICAgIF9yZW5kZXJUZXh0KHBvc3QsIGlzSW1hZ2UgPSBmYWxzZSkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgY29uc3QgdGV4dCA9IChfYyA9IGZpcnN0TWFya2Rvd25FbGVtKChfYiA9IGh0bWxEZWNvZGUoKF9hID0gcG9zdC5zZWxmdGV4dF9odG1sKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJykpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6ICcnKSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJyc7XG4gICAgICAgIHJldHVybiBodG1sIGA8ZGl2XG4gICAgICBjbGFzcz0ke2NsYXNzTWFwKHtcbiAgICAgICAgICAgICdwb3N0LXRpbGUtdGV4dCc6IHRydWUsXG4gICAgICAgICAgICBzaGltOiBpc0ltYWdlLFxuICAgICAgICB9KX1cbiAgICA+XG4gICAgICA8aDNcbiAgICAgICAgY2xhc3M9JHtjbGFzc01hcCh7XG4gICAgICAgICAgICAncG9zdC10aWxlLXRpdGxlJzogdHJ1ZSxcbiAgICAgICAgfSl9XG4gICAgICAgIHRpdGxlPSR7cG9zdC50aXRsZX1cbiAgICAgID5cbiAgICAgICAgJHtodG1sRGVjb2RlKHBvc3QudGl0bGUpfVxuICAgICAgPC9oMz5cbiAgICAgICR7KHRleHQgPT09IG51bGwgfHwgdGV4dCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGV4dC5sZW5ndGgpID8gaHRtbCBgPGRpdlxuICAgICAgICAgICAgY2xhc3M9JHtjbGFzc01hcCh7XG4gICAgICAgICAgICAncG9zdC10aWxlLWJvZHknOiB0cnVlLFxuICAgICAgICB9KX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICAke3Vuc2FmZUhUTUwodGV4dCl9XG4gICAgICAgICAgPC9kaXY+YFxuICAgICAgICAgICAgOiAnJ31cbiAgICAgIDxkaXYgY2xhc3M9XCJzcGFjZXJcIj48L2Rpdj5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3M9JHtjbGFzc01hcCh7XG4gICAgICAgICAgICBzdWJyZWRkaXQ6IHRydWUsXG4gICAgICAgIH0pfVxuICAgICAgPlxuICAgICAgICByLyR7cG9zdC5zdWJyZWRkaXR9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5gO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogdHJ1ZSwgdHlwZTogT2JqZWN0IH0pXG5dLCBUaWxlVGV4dC5wcm90b3R5cGUsIFwicG9zdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkoeyBhdHRyaWJ1dGU6IHRydWUsIHR5cGU6IEJvb2xlYW4gfSlcbl0sIFRpbGVUZXh0LnByb3RvdHlwZSwgXCJpc0ltYWdlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBxdWVyeSgnLnBvc3QtdGlsZS10aXRsZScpXG5dLCBUaWxlVGV4dC5wcm90b3R5cGUsIFwidGl0bGVFbGVtXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBxdWVyeSgnLnBvc3QtdGlsZS1ib2R5Jylcbl0sIFRpbGVUZXh0LnByb3RvdHlwZSwgXCJib2R5RWxlbVwiLCB2b2lkIDApO1xuVGlsZVRleHQgPSBfX2RlY29yYXRlKFtcbiAgICBjdXN0b21FbGVtZW50KCd0aWxlLXRleHQnKVxuXSwgVGlsZVRleHQpO1xuZXhwb3J0IHsgVGlsZVRleHQgfTtcbiIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IExpdEVsZW1lbnQsIGh0bWwsIGN1c3RvbUVsZW1lbnQsIHByb3BlcnR5LCBxdWVyeSB9IGZyb20gJ2xpdC1lbGVtZW50JztcbmltcG9ydCB7IHVuc2FmZUhUTUwgfSBmcm9tICdsaXQtaHRtbC9kaXJlY3RpdmVzL3Vuc2FmZS1odG1sJztcbmltcG9ydCB7IGNsYXNzTWFwIH0gZnJvbSAnbGl0LWh0bWwvZGlyZWN0aXZlcy9jbGFzcy1tYXAnO1xuaW1wb3J0IHsgR1JJRF9HUkFOVUxBUklUWSB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0ICcuL3N1YnJlZGRpdC12aWV3JztcbmltcG9ydCAnLi9jb21tdW5pdHktc3BvdGxpZ2h0JztcbmltcG9ydCAnLi90aWxlLXRleHQnO1xuaW1wb3J0IGV4cGxvcmVTdHlsZXMgZnJvbSAnLi9leHBsb3JlLXN0eWxlcyc7XG5pbXBvcnQgeyBnZXRBc3BlY3RSYXRpbywgZ2V0SW1hZ2VVcmwsIGlzR2FsbGVyeSwgaXNWaWRlbyB9IGZyb20gJy4vaGVscGVycyc7XG5sZXQgRXhwbG9yZVBhZ2UgPSBjbGFzcyBFeHBsb3JlUGFnZSBleHRlbmRzIExpdEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zaG93dGl0bGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zaG93c3VicmVkZGl0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2hvd3NoaW0gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sYXJnZUthcm1hVGhyZXNob2xkID0gMjAwMDA7XG4gICAgICAgIHRoaXMubGFyZ2VDb21tZW50VGhyZXNob2xkID0gMTAwO1xuICAgICAgICB0aGlzLmxvYWRlclJlZ2lzdGVyZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wb3N0cyA9IFtdO1xuICAgIH1cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5tYWtlUXVlcnkoKTtcbiAgICB9XG4gICAgdXBkYXRlZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9ic2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHsgZW50cmllcyB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWVudHJpZXNbMF0uaXNJbnRlcnNlY3RpbmcpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgbG9hZCBtb3JlICR7dGhpcy5hZnRlcklkfWApO1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRlciAmJiAoKF9hID0gdGhpcy5vYnNlcnZlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVub2JzZXJ2ZSh0aGlzLl9sb2FkZXIpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGVuZGluZylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWtlUXVlcnkoKTtcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICByb290OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyksXG4gICAgICAgICAgICAgICAgcm9vdE1hcmdpbjogJzEwMHB4JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9sb2FkZXIgJiYgdGhpcy5hZnRlcklkKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9hZGVyICYmICgoX2EgPSB0aGlzLm9ic2VydmVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub2JzZXJ2ZSh0aGlzLl9sb2FkZXIpKTtcbiAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgc3R5bGVzKCkge1xuICAgICAgICByZXR1cm4gZXhwbG9yZVN0eWxlcygpO1xuICAgIH1cbiAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkLCBjdXJyZW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGFyZ3VtZW50cyk7XG4gICAgICAgIGlmIChuYW1lID09PSAnbXVsdGknICYmIG9sZCAhPT0gY3VycmVudCkge1xuICAgICAgICAgICAgdGhpcy5tdWx0aSA9IGN1cnJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5tdWx0aSkge1xuICAgICAgICAgICAgICAgIHRoaXMucG9zdHMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLmFmdGVySWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJyZWRkaXQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWtlUXVlcnkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmFtZSA9PT0gJ3N1YnJlZGRpdCcgJiYgb2xkICE9PSBjdXJyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnN1YnJlZGRpdCA9IGN1cnJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5zdWJyZWRkaXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc3RzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5hZnRlcklkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHRoaXMubXVsdGkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWUuaW5jbHVkZXMoJ3Nob3cnKSkge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgdGhpc1tuYW1lXSA9IGN1cnJlbnQgPT09ICd0cnVlJztcbiAgICAgICAgICAgIHRoaXMuc2hvd3NoaW0gPSB0aGlzLnNob3dzdWJyZWRkaXQgfHwgdGhpcy5zaG93dGl0bGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgbWFrZVF1ZXJ5KCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgaWYgKCF0aGlzLm11bHRpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLmRhdGEgPSB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMubXVsdGkpO1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSB0cnVlO1xuICAgICAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vd3d3LnJlZGRpdC5jb20vci8ke3RoaXMubXVsdGl9Lmpzb24/YWZ0ZXI9JHsoX2EgPSB0aGlzLmFmdGVySWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnfWAsIHtcbiAgICAgICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXNwLmpzb24oKTtcbiAgICAgICAgdGhpcy5wZW5kaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGF0YSA9IGJvZHkuZGF0YTtcbiAgICAgICAgY29uc3QgcG9zdHMgPSAoX2MgPSAoX2IgPSB0aGlzLmRhdGEpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jaGlsZHJlbi5tYXAoKGMpID0+IGMuZGF0YSkpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFtdO1xuICAgICAgICBjb25zb2xlLmxvZyhwb3N0cyk7XG4gICAgICAgIHRoaXMucG9zdHMgPSB0aGlzLnBvc3RzLmNvbmNhdChwb3N0cy5maWx0ZXIoKHBvc3QpID0+IHBvc3QucG9zdF9oaW50ICE9PSAnbGluaycpKTtcbiAgICAgICAgdGhpcy5hZnRlcklkID0gYm9keS5kYXRhLmFmdGVyO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnJlZGRpdCkge1xuICAgICAgICAgICAgcmV0dXJuIGh0bWwgYDxzdWJyZWRkaXQtdmlld1xuICAgICAgICBzdWJyZWRkaXQ9JHt0aGlzLnN1YnJlZGRpdH1cbiAgICAgID48L3N1YnJlZGRpdC12aWV3PmA7XG4gICAgICAgIH1cbiAgICAgICAgLy9pZiAoIXRoaXMucG9zdHMubGVuZ3RoKSByZXR1cm4gaHRtbGA8ZGl2IGNsYXNzPVwiZ3JpZFwiPjwvZGl2PmA7XG4gICAgICAgIHJldHVybiBodG1sIGBcbiAgICAgIDxkaXYgY2xhc3M9XCJncmlkXCI+XG4gICAgICAgICR7dGhpcy5fcmVuZGVyVGlsZXMoKX1cbiAgICAgICAgJHt0aGlzLnBvc3RzLmxlbmd0aCA9PT0gMCA/ICcnIDogdGhpcy5fcmVuZGVyU3BhY2VycygpfVxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgICB9XG4gICAgX3JlbmRlclRpbGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3N0cy5tYXAoKHBvc3QsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbWdVcmwgPSBnZXRJbWFnZVVybChwb3N0KTtcbiAgICAgICAgICAgIGNvbnN0IGlzTWVkaWEgPSAhIWltZ1VybDtcbiAgICAgICAgICAgIGlmIChpbmRleCAlIDI1ID09PSA1KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGh0bWwgYDxhXG4gICAgICAgICAgY2xhc3M9XCJwb3N0LXRpbGUgc3BhbjUgcG9zdC10aWxlLWxhcmdlXCJcbiAgICAgICAgICBocmVmPVwiIyFyLyR7cG9zdC5zdWJyZWRkaXR9XCJcbiAgICAgICAgPlxuICAgICAgICAgIDxjb21tdW5pdHktc3BvdGxpZ2h0XG4gICAgICAgICAgICBzdWJyZWRkaXQ9JHtwb3N0LnN1YnJlZGRpdH1cbiAgICAgICAgICA+PC9jb21tdW5pdHktc3BvdGxpZ2h0PlxuICAgICAgICA8L2E+YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc01lZGlhKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJNZWRpYVRpbGUocG9zdCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyVGV4dFRpbGUocG9zdCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfcmVuZGVyU3BhY2VycygpIHtcbiAgICAgICAgcmV0dXJuIGh0bWwgYDxkaXYgY2xhc3M9XCJwb3N0LXRpbGUgcG9zdC10ZXh0LW9ubHkgc3BhbjNcIj48L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJwb3N0LXRpbGUgcG9zdC10ZXh0LW9ubHkgc3BhbjJcIj48L2Rpdj5cbiAgICAgICR7QXJyYXkoNClcbiAgICAgICAgICAgIC5maWxsKDEpXG4gICAgICAgICAgICAubWFwKCgpID0+IGh0bWwgYDxkaXYgY2xhc3M9XCJwb3N0LXRpbGUgcG9zdC10ZXh0LW9ubHkgc3BhbjFcIj48L2Rpdj5gKX1cbiAgICAgIDxkaXYgY2xhc3M9XCJsb2FkZXJcIj48L2Rpdj5gO1xuICAgIH1cbiAgICBfcmVuZGVyTWVkaWFUaWxlKHBvc3QpIHtcbiAgICAgICAgLy9jb25zdCBpc0xhcmdlID0gcG9zdC50aXRsZS5sZW5ndGggPiA5MDtcbiAgICAgICAgY29uc3QgaXNMYXJnZSA9IHBvc3QudXBzID4gdGhpcy5sYXJnZUthcm1hVGhyZXNob2xkIHx8IHBvc3QubnVtX2NvbW1lbnRzIC8gcG9zdC51cHMgPiAwLjE7XG4gICAgICAgIGNvbnN0IGltZ1VybCA9IGdldEltYWdlVXJsKHBvc3QpO1xuICAgICAgICBjb25zdCBpbWdTdHlsZXMgPSB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IGB1cmwoJyR7aW1nVXJsfScpYCxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmF0aW8gPSBnZXRBc3BlY3RSYXRpbyhwb3N0KTtcbiAgICAgICAgY29uc3Qgcm93U3BhbiA9IE1hdGgucm91bmQocmF0aW8gKiBHUklEX0dSQU5VTEFSSVRZKSAqIChpc0xhcmdlID8gMiA6IDEpO1xuICAgICAgICBjb25zdCBzcGFuQ2xhc3MgPSBgc3BhbiR7Y2xhbXAocm93U3BhbiwgTWF0aC5yb3VuZChHUklEX0dSQU5VTEFSSVRZIC8gMyksIEdSSURfR1JBTlVMQVJJVFkgKiAyICogKGlzTGFyZ2UgPyAyIDogMSkpfWA7XG4gICAgICAgIHJldHVybiBodG1sIGA8YVxuICAgICAgaHJlZj1cIiMhci8ke3Bvc3Quc3VicmVkZGl0fVwiXG4gICAgICBjbGFzcz0ke2NsYXNzTWFwKHtcbiAgICAgICAgICAgICdwb3N0LXRpbGUnOiB0cnVlLFxuICAgICAgICAgICAgW3NwYW5DbGFzc106IHRydWUsXG4gICAgICAgICAgICAncG9zdC10aWxlLWxhcmdlJzogaXNMYXJnZSxcbiAgICAgICAgfSl9XG4gICAgPlxuICAgICAgJHtpbWdVcmxcbiAgICAgICAgICAgID8gdW5zYWZlSFRNTChgPGRpdiBjbGFzcz1cInBvc3QtdGlsZS1pbWFnZVwiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogJHtpbWdTdHlsZXMuYmFja2dyb3VuZEltYWdlfVwiIC8+YClcbiAgICAgICAgICAgIDogJyd9XG4gICAgICAke3RoaXMuc2hvd3NoaW1cbiAgICAgICAgICAgID8gaHRtbCBgPHRpbGUtdGV4dCAucG9zdD0ke3Bvc3R9IGlzSW1hZ2U+PC90aWxlLXRleHQ+YFxuICAgICAgICAgICAgOiAnJ31cbiAgICAgICR7aXNHYWxsZXJ5KHBvc3QpXG4gICAgICAgICAgICA/IGh0bWwgYDxpbWcgY2xhc3M9XCJnYWxsZXJ5LWljb25cIiBzcmM9XCJnYWxsZXJ5LnBuZ1wiIC8+YFxuICAgICAgICAgICAgOiAnJ31cbiAgICAgICR7aXNWaWRlbyhwb3N0KSA/IGh0bWwgYDxpbWcgY2xhc3M9XCJ2aWRlby1pY29uXCIgc3JjPVwidmlkZW8ucG5nXCIgLz5gIDogJyd9XG4gICAgPC9hPmA7XG4gICAgfVxuICAgIF9yZW5kZXJUZXh0VGlsZShwb3N0KSB7XG4gICAgICAgIGNvbnN0IGlzTGFyZ2UgPSBwb3N0LnVwcyA+IHRoaXMubGFyZ2VLYXJtYVRocmVzaG9sZCB8fCBwb3N0LnRpdGxlLmxlbmd0aCA+IDEwMDtcbiAgICAgICAgcmV0dXJuIGh0bWwgYDxhXG4gICAgICBocmVmPVwiIyFyLyR7cG9zdC5zdWJyZWRkaXR9XCJcbiAgICAgIGNsYXNzPSR7Y2xhc3NNYXAoe1xuICAgICAgICAgICAgJ3Bvc3QtdGlsZSc6IHRydWUsXG4gICAgICAgICAgICBzcGFuNjogISFwb3N0LnNlbGZ0ZXh0LFxuICAgICAgICAgICAgc3BhbjQ6ICFwb3N0LnNlbGZ0ZXh0LFxuICAgICAgICAgICAgJ3Bvc3QtdGlsZS1sYXJnZSc6IGlzTGFyZ2UsXG4gICAgICAgICAgICAncG9zdC10ZXh0LW9ubHknOiB0cnVlLFxuICAgICAgICB9KX1cbiAgICA+XG4gICAgICA8dGlsZS10ZXh0IC5wb3N0PSR7cG9zdH0gLmlzaW1hZ2U9JHtmYWxzZX0+PC90aWxlLXRleHQ+XG4gICAgPC9hPmA7XG4gICAgfVxuICAgIF9yZW5kZXJUZXh0KHBvc3QsIGlzSW1hZ2UgPSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gaHRtbCBgPHRpbGUtdGV4dCAucG9zdD0ke3Bvc3R9IC5pc2ltYWdlPSR7aXNJbWFnZX0gLz5gO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogdHJ1ZSwgdHlwZTogU3RyaW5nIH0pXG5dLCBFeHBsb3JlUGFnZS5wcm90b3R5cGUsIFwic3VicmVkZGl0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogdHJ1ZSwgdHlwZTogU3RyaW5nIH0pXG5dLCBFeHBsb3JlUGFnZS5wcm90b3R5cGUsIFwibXVsdGlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5KHsgYXR0cmlidXRlOiB0cnVlLCB0eXBlOiBTdHJpbmcgfSlcbl0sIEV4cGxvcmVQYWdlLnByb3RvdHlwZSwgXCJwb3N0SWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5KHsgYXR0cmlidXRlOiB0cnVlLCB0eXBlOiBPYmplY3QgfSlcbl0sIEV4cGxvcmVQYWdlLnByb3RvdHlwZSwgXCJkYXRhXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9KVxuXSwgRXhwbG9yZVBhZ2UucHJvdG90eXBlLCBcInNob3d0aXRsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkoeyBhdHRyaWJ1dGU6IHRydWUsIHR5cGU6IEJvb2xlYW4gfSlcbl0sIEV4cGxvcmVQYWdlLnByb3RvdHlwZSwgXCJzaG93c3VicmVkZGl0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9KVxuXSwgRXhwbG9yZVBhZ2UucHJvdG90eXBlLCBcInNob3dzaGltXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBxdWVyeSgnLmxvYWRlcicpXG5dLCBFeHBsb3JlUGFnZS5wcm90b3R5cGUsIFwiX2xvYWRlclwiLCB2b2lkIDApO1xuRXhwbG9yZVBhZ2UgPSBfX2RlY29yYXRlKFtcbiAgICBjdXN0b21FbGVtZW50KCdleHBsb3JlLXBhZ2UnKVxuXSwgRXhwbG9yZVBhZ2UpO1xuZXhwb3J0IHsgRXhwbG9yZVBhZ2UgfTtcbmZ1bmN0aW9uIGNsYW1wKHZhbCwgbWluLCBtYXgpIHtcbiAgICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodmFsLCBtaW4pLCBtYXgpO1xufVxuIiwiaW1wb3J0ICcuL2NvbXBvbmVudHMvZXhwbG9yZS1wYWdlJztcbmltcG9ydCAnLi9jb21wb25lbnRzL3N1YnJlZGRpdC12aWV3JztcbmNvbnN0IFRPUElDX1JFID0gL3RcXC8oXFx3KykvO1xuY29uc3QgTVVMVElfUkUgPSAvclxcLygoPzpcXHcrXFwrKStcXHcrKS87XG5jb25zdCBTVUJSRURJVF9SRSA9IC9yXFwvKFxcdyspKD86XFwvKFxcdyspKT8vO1xuY29uc3QgVE9QSUNTID0ge1xuICAgIGdhbWluZzogJ2dhbWluZytoYWxvK1BTNCtycGcraW9zZ2FtaW5nK2dhbWluZ3N1Z2dlc3Rpb25zK2NvbXB1dGVycysnICtcbiAgICAgICAgJ1Nob3VsZElidXl0aGlzZ2FtZStNZWNoYW5pY2FsS2V5Ym9hcmRzK01vbml0b3JzK2hhcmR3YXJlc3dhcCtPcFRpY0dhbWluZysnICtcbiAgICAgICAgJ0RvdEEyK3BjbWFzdGVycmFjZStHaXJsR2FtZXJzK2dhbWVjb2xsZWN0aW5nK0luZGllR2FtaW5nK0ZhbGxvdXQrR2FtZXMrJyArXG4gICAgICAgICduaW50ZW5kbytTdWdnZXN0QUxhcHRvcCtTdGVhbStDb21wZXRpdGl2ZW92ZXJ3YXRjaCt3b3crZnVubnknLFxuICAgIG11c2ljOiAnTXVzaWMrVmFwb3J3YXZlK0d1aXRhcitNdXNpY0VkK1dlQXJlVGhlTXVzaWNNYWtlcnMraW5kaWVoZWFkcytNZXRhbCsnICtcbiAgICAgICAgJ0xldHNUYWxrTXVzaWMrRGVlcEludG9Zb3VUdWJlK211c2ljdGhlb3J5K01ldGFsY29yZStDYXN1YWxDb252ZXJzYXRpb24rJyArXG4gICAgICAgICdMaXN0ZW5pbmdIZWFkcytBc2tSZWRkaXQrd29haGR1ZGUrY29tcG9zZXIrcG9wcHVua2VycythbmltZSsnICtcbiAgICAgICAgJ1RoaXNJc091ck11c2ljK3VucG9wdWxhcm9waW5pb24rQWR2aWNlQW5pbWFscytCQUJZTUVUQUwrZ2FtaW5nK0VETSt0ZWNobm9sb2d5XCInLFxuICAgIHNwb3J0czogJ3Nwb3J0cytzb2NjZXIrdG9kYXlpbGVhcm5lZCtzdGFyY3JhZnQrYmFzZWJhbGwrZXNwb3J0cytyZWRkZXZpbHMrQXNrUmVkZGl0KycgK1xuICAgICAgICAnbmZsK0NGQituYmEraG9ja2V5K2xlYWd1ZW9mbGVnZW5kcytBQnJhVGhhdEZpdHMrZnVubnkrZm9ybXVsYTErTU1BKycgK1xuICAgICAgICAnUGF0cmlvdHMrZ2FtaW5nK2NvcmRjdXR0ZXJzK2RvZ2Vjb2luK2dyYW50dXJpc21vK1Nob3dlcnRob3VnaHRzK3VucG9wdWxhcm9waW5pb24rTUxTJyxcbiAgICBiZWF1dHk6ICdiZWF1dHkrQXNpYW5CZWF1dHkrT2xkU2Nob29sQ29vbCtmdW5ueStNVUFvbnRoZUNoZWFwK21ha2V1cGV4Y2hhbmdlKycgK1xuICAgICAgICAnS29yZWFuQmVhdXR5K3BpY3MrUG9yc2NoZStSYW5kb21BY3Rzb2ZNYWtldXArTWFrZXVwQWRkaWN0aW9uK2Rpc25leSsnICtcbiAgICAgICAgJ0JlYXV0eUFkZGljdGlvbitCZWF1dHlCb3hlcytBc2tXb21lbitzdWNjdWxlbnRzK0JlYXV0eUd1cnVDaGF0dGVyKycgK1xuICAgICAgICAnYmVhdXR5dGFsa3BoK2hvdXNlcGxhbnRzK2F3dytTaGlueVBva2Vtb24rY2F0cytnYXJkZW5pbmcrRnJlZUthcm1hNFUrZ2FtaW5nJyxcbn07XG5hc3luYyBmdW5jdGlvbiBtYWluKCkge1xuICAgIGNvbnN0IGV4cGxvcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdleHBsb3JlLXBhZ2UnKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24ucGlsbCcpLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0b3BpYyA9IGJ1dHRvbi5pbm5lckhUTUwudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHsgdG9waWMgfSk7XG4gICAgICAgICAgICBleHBsb3JlLnNldEF0dHJpYnV0ZSgndG9waWMnLCB0b3BpYyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0LmNoZWNrYm94JykuZm9yRWFjaCgoZWxlbSkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IGVsZW07XG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAoaW5wdXQuaWQpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzaG93dGl0bGUnOiB7XG4gICAgICAgICAgICAgICAgICAgIGV4cGxvcmUuc2V0QXR0cmlidXRlKCdzaG93dGl0bGUnLCBpbnB1dC5jaGVja2VkICsgJycpO1xuICAgICAgICAgICAgICAgICAgICBleHBsb3JlLnNldEF0dHJpYnV0ZSgnc2hvd3N1YnJlZGRpdCcsIGlucHV0LmNoZWNrZWQgKyAnJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGNvbnN0IGV4cGxvcmVIZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXhwbG9yZS1oZWFkZXInKTtcbiAgICBjb25zdCBzdWJyZWRkaXRIZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3VicmVkZGl0LWhlYWRlcicpO1xuICAgIGZ1bmN0aW9uIHNob3dFeHBsb3JlSGVhZGVyKCkge1xuICAgICAgICBleHBsb3JlSGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICBzdWJyZWRkaXRIZWFkZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNob3dTdWJyZWRkaXRIZWFkZXIoKSB7XG4gICAgICAgIGV4cGxvcmVIZWFkZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIHN1YnJlZGRpdEhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICB9XG4gICAgY29uc3QgYmFja0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYWNrJyk7XG4gICAgYmFja0J1dHRvbiA9PT0gbnVsbCB8fCBiYWNrQnV0dG9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBiYWNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5nbygtMSk7XG4gICAgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCBnbyk7XG4gICAgZ28oKTtcbiAgICBmdW5jdGlvbiBnbygpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3Qgcm91dGUgPSAoKF9hID0gd2luZG93LmxvY2F0aW9uLmhhc2gpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yZXBsYWNlKC8oXiF8XFwvJCkvLCAnJykpIHx8ICcnO1xuICAgICAgICBpZiAoIXJvdXRlKVxuICAgICAgICAgICAgZ29Ub3BpYygnZ2FtaW5nJyk7XG4gICAgICAgIGxldCBtYXRjaDtcbiAgICAgICAgbWF0Y2ggPSByb3V0ZS5tYXRjaChUT1BJQ19SRSk7XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgY29uc3QgWywgdG9waWNdID0gbWF0Y2g7XG4gICAgICAgICAgICByZXR1cm4gZ29NdWx0aSgoX2IgPSBUT1BJQ1NbdG9waWNdKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBUT1BJQ1MuZ2FtaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBtYXRjaCA9IHJvdXRlLm1hdGNoKE1VTFRJX1JFKTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBjb25zdCBbLCBtdWx0aV0gPSBtYXRjaDtcbiAgICAgICAgICAgIHJldHVybiBnb011bHRpKG11bHRpKTtcbiAgICAgICAgfVxuICAgICAgICBtYXRjaCA9IHJvdXRlLm1hdGNoKFNVQlJFRElUX1JFKTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBjb25zdCBbLCBzdWJyZWRkaXQsIHBvc3RJZF0gPSBtYXRjaDtcbiAgICAgICAgICAgIHJldHVybiBnb1N1YnJlZGRpdChzdWJyZWRkaXQsIHBvc3RJZCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZ29Ub3BpYyh0b3BpYykge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgY29uc3QgbXVsdGkgPSAoX2EgPSBUT1BJQ1NbdG9waWNdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBUT1BJQ1MuZ2FtaW5nO1xuICAgICAgICAgICAgZXhwbG9yZS5zZXRBdHRyaWJ1dGUoJ3N1YnJlZGRpdCcsICcnKTtcbiAgICAgICAgICAgIGV4cGxvcmUuc2V0QXR0cmlidXRlKCdtdWx0aScsIG11bHRpKTtcbiAgICAgICAgICAgIGV4cGxvcmUuc2V0QXR0cmlidXRlKCdwb3N0JywgJycpO1xuICAgICAgICAgICAgc2hvd0V4cGxvcmVIZWFkZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBnb011bHRpKG11bHRpKSB7XG4gICAgICAgICAgICBleHBsb3JlLnNldEF0dHJpYnV0ZSgnc3VicmVkZGl0JywgJycpO1xuICAgICAgICAgICAgZXhwbG9yZS5zZXRBdHRyaWJ1dGUoJ3Bvc3QnLCAnJyk7XG4gICAgICAgICAgICBleHBsb3JlLnNldEF0dHJpYnV0ZSgnbXVsdGknLCBtdWx0aSk7XG4gICAgICAgICAgICBzaG93RXhwbG9yZUhlYWRlcigpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGdvU3VicmVkZGl0KHN1YnJlZGRpdCwgcG9zdElkKSB7XG4gICAgICAgICAgICBleHBsb3JlLnNldEF0dHJpYnV0ZSgnbXVsdGknLCAnJyk7XG4gICAgICAgICAgICBleHBsb3JlLnNldEF0dHJpYnV0ZSgncG9zdElkJywgcG9zdElkIHx8ICcnKTtcbiAgICAgICAgICAgIGV4cGxvcmUuc2V0QXR0cmlidXRlKCdzdWJyZWRkaXQnLCBzdWJyZWRkaXQpO1xuICAgICAgICAgICAgc2hvd1N1YnJlZGRpdEhlYWRlcigpO1xuICAgICAgICB9XG4gICAgfVxufVxubWFpbigpO1xuIl0sIm5hbWVzIjpbImlzQ0VQb2x5ZmlsbCIsIndpbmRvdyIsImN1c3RvbUVsZW1lbnRzIiwidW5kZWZpbmVkIiwicG9seWZpbGxXcmFwRmx1c2hDYWxsYmFjayIsInJlbW92ZU5vZGVzIiwiY29udGFpbmVyIiwic3RhcnQiLCJlbmQiLCJuIiwibmV4dFNpYmxpbmciLCJyZW1vdmVDaGlsZCIsIm1hcmtlciIsIlN0cmluZyIsIk1hdGgiLCJyYW5kb20iLCJzbGljZSIsIm5vZGVNYXJrZXIiLCJtYXJrZXJSZWdleCIsIlJlZ0V4cCIsIlRlbXBsYXRlIiwiW29iamVjdCBPYmplY3RdIiwicmVzdWx0IiwiZWxlbWVudCIsInRoaXMiLCJwYXJ0cyIsIm5vZGVzVG9SZW1vdmUiLCJzdGFjayIsIndhbGtlciIsImRvY3VtZW50IiwiY3JlYXRlVHJlZVdhbGtlciIsImNvbnRlbnQiLCJsYXN0UGFydEluZGV4IiwiaW5kZXgiLCJwYXJ0SW5kZXgiLCJzdHJpbmdzIiwidmFsdWVzIiwibGVuZ3RoIiwibm9kZSIsIm5leHROb2RlIiwibm9kZVR5cGUiLCJoYXNBdHRyaWJ1dGVzIiwiYXR0cmlidXRlcyIsImNvdW50IiwiaSIsImVuZHNXaXRoIiwibmFtZSIsInN0cmluZ0ZvclBhcnQiLCJsYXN0QXR0cmlidXRlTmFtZVJlZ2V4IiwiZXhlYyIsImF0dHJpYnV0ZUxvb2t1cE5hbWUiLCJ0b0xvd2VyQ2FzZSIsImF0dHJpYnV0ZVZhbHVlIiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwic3RhdGljcyIsInNwbGl0IiwicHVzaCIsInR5cGUiLCJ0YWdOYW1lIiwiY3VycmVudE5vZGUiLCJkYXRhIiwiaW5kZXhPZiIsInBhcmVudCIsInBhcmVudE5vZGUiLCJsYXN0SW5kZXgiLCJpbnNlcnQiLCJzIiwiY3JlYXRlTWFya2VyIiwibWF0Y2giLCJjcmVhdGVUZXh0Tm9kZSIsImluc2VydEJlZm9yZSIsInByZXZpb3VzU2libGluZyIsInBvcCIsInN0ciIsInN1ZmZpeCIsImlzVGVtcGxhdGVQYXJ0QWN0aXZlIiwicGFydCIsImNyZWF0ZUNvbW1lbnQiLCJyZW1vdmVOb2Rlc0Zyb21UZW1wbGF0ZSIsInRlbXBsYXRlIiwibmV4dEFjdGl2ZUluZGV4SW5UZW1wbGF0ZVBhcnRzIiwibm9kZUluZGV4IiwicmVtb3ZlQ291bnQiLCJub2Rlc1RvUmVtb3ZlSW5UZW1wbGF0ZSIsImN1cnJlbnRSZW1vdmluZ05vZGUiLCJoYXMiLCJmb3JFYWNoIiwiY291bnROb2RlcyIsInN0YXJ0SW5kZXgiLCJkaXJlY3RpdmVzIiwiV2Vha01hcCIsImRpcmVjdGl2ZSIsImYiLCJhcmdzIiwiZCIsInNldCIsImlzRGlyZWN0aXZlIiwibyIsIm5vQ2hhbmdlIiwibm90aGluZyIsIlRlbXBsYXRlSW5zdGFuY2UiLCJwcm9jZXNzb3IiLCJvcHRpb25zIiwiX19wYXJ0cyIsInNldFZhbHVlIiwiY29tbWl0IiwiZnJhZ21lbnQiLCJjbG9uZU5vZGUiLCJpbXBvcnROb2RlIiwibm9kZU5hbWUiLCJoYW5kbGVUZXh0RXhwcmVzc2lvbiIsImluc2VydEFmdGVyTm9kZSIsImhhbmRsZUF0dHJpYnV0ZUV4cHJlc3Npb25zIiwiYWRvcHROb2RlIiwidXBncmFkZSIsImNvbW1lbnRNYXJrZXIiLCJUZW1wbGF0ZVJlc3VsdCIsImwiLCJodG1sIiwiaXNDb21tZW50QmluZGluZyIsImNvbW1lbnRPcGVuIiwibGFzdEluZGV4T2YiLCJhdHRyaWJ1dGVNYXRjaCIsInN1YnN0ciIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJnZXRIVE1MIiwiaXNQcmltaXRpdmUiLCJ2YWx1ZSIsImlzSXRlcmFibGUiLCJBcnJheSIsImlzQXJyYXkiLCJTeW1ib2wiLCJpdGVyYXRvciIsIkF0dHJpYnV0ZUNvbW1pdHRlciIsImRpcnR5IiwiX2NyZWF0ZVBhcnQiLCJBdHRyaWJ1dGVQYXJ0IiwidGV4dCIsInYiLCJ0Iiwic2V0QXR0cmlidXRlIiwiX2dldFZhbHVlIiwiY29tbWl0dGVyIiwiTm9kZVBhcnQiLCJfX3BlbmRpbmdWYWx1ZSIsInN0YXJ0Tm9kZSIsImFwcGVuZENoaWxkIiwiZW5kTm9kZSIsInJlZiIsIl9faW5zZXJ0IiwiX19jb21taXRUZXh0IiwiX19jb21taXRUZW1wbGF0ZVJlc3VsdCIsIk5vZGUiLCJfX2NvbW1pdE5vZGUiLCJfX2NvbW1pdEl0ZXJhYmxlIiwiY2xlYXIiLCJ2YWx1ZUFzU3RyaW5nIiwidGVtcGxhdGVGYWN0b3J5IiwidXBkYXRlIiwiaW5zdGFuY2UiLCJfY2xvbmUiLCJpdGVtUGFydHMiLCJpdGVtUGFydCIsIml0ZW0iLCJhcHBlbmRJbnRvUGFydCIsImluc2VydEFmdGVyUGFydCIsIkJvb2xlYW5BdHRyaWJ1dGVQYXJ0IiwiRXJyb3IiLCJQcm9wZXJ0eUNvbW1pdHRlciIsInN1cGVyIiwic2luZ2xlIiwiUHJvcGVydHlQYXJ0IiwiZXZlbnRPcHRpb25zU3VwcG9ydGVkIiwiY2FwdHVyZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2UiLCJFdmVudFBhcnQiLCJldmVudE5hbWUiLCJldmVudENvbnRleHQiLCJfX2JvdW5kSGFuZGxlRXZlbnQiLCJlIiwiaGFuZGxlRXZlbnQiLCJuZXdMaXN0ZW5lciIsIm9sZExpc3RlbmVyIiwic2hvdWxkUmVtb3ZlTGlzdGVuZXIiLCJvbmNlIiwicGFzc2l2ZSIsInNob3VsZEFkZExpc3RlbmVyIiwiX19vcHRpb25zIiwiZ2V0T3B0aW9ucyIsImV2ZW50IiwiY2FsbCIsInRlbXBsYXRlQ2FjaGUiLCJ0ZW1wbGF0ZUNhY2hlcyIsImdldCIsInN0cmluZ3NBcnJheSIsImtleVN0cmluZyIsIk1hcCIsImtleSIsImpvaW4iLCJnZXRUZW1wbGF0ZUVsZW1lbnQiLCJkZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3IiLCJwcmVmaXgiLCJnZXRUZW1wbGF0ZUNhY2hlS2V5Iiwic2NvcGVOYW1lIiwiY29tcGF0aWJsZVNoYWR5Q1NTVmVyc2lvbiIsIlNoYWR5Q1NTIiwicHJlcGFyZVRlbXBsYXRlRG9tIiwiY29uc29sZSIsIndhcm4iLCJzaGFkeVRlbXBsYXRlRmFjdG9yeSIsImNhY2hlS2V5IiwiVEVNUExBVEVfVFlQRVMiLCJzaGFkeVJlbmRlclNldCIsIlNldCIsInByZXBhcmVUZW1wbGF0ZVN0eWxlcyIsInJlbmRlcmVkRE9NIiwiYWRkIiwidGVtcGxhdGVFbGVtZW50Iiwic3R5bGVzIiwicXVlcnlTZWxlY3RvckFsbCIsImNvbmRlbnNlZFN0eWxlIiwic3R5bGUiLCJ0ZXh0Q29udGVudCIsInRlbXBsYXRlcyIsImZyb20iLCJyZW1vdmVTdHlsZXNGcm9tTGl0VGVtcGxhdGVzIiwicmVmTm9kZSIsImluc2VydENvdW50Iiwid2Fsa2VySW5kZXgiLCJpbnNlcnROb2RlSW50b1RlbXBsYXRlIiwiZmlyc3RDaGlsZCIsInF1ZXJ5U2VsZWN0b3IiLCJuYXRpdmVTaGFkb3ciLCJyZW1vdmVzIiwiSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSIsInByb3AiLCJfb2JqIiwiZGVmYXVsdENvbnZlcnRlciIsIkJvb2xlYW4iLCJPYmplY3QiLCJKU09OIiwic3RyaW5naWZ5IiwiTnVtYmVyIiwicGFyc2UiLCJub3RFcXVhbCIsIm9sZCIsImRlZmF1bHRQcm9wZXJ0eURlY2xhcmF0aW9uIiwiYXR0cmlidXRlIiwiY29udmVydGVyIiwicmVmbGVjdCIsImhhc0NoYW5nZWQiLCJVcGRhdGluZ0VsZW1lbnQiLCJIVE1MRWxlbWVudCIsIl91cGRhdGVTdGF0ZSIsIl9pbnN0YW5jZVByb3BlcnRpZXMiLCJfdXBkYXRlUHJvbWlzZSIsIlByb21pc2UiLCJyZXMiLCJfZW5hYmxlVXBkYXRpbmdSZXNvbHZlciIsIl9jaGFuZ2VkUHJvcGVydGllcyIsIl9yZWZsZWN0aW5nUHJvcGVydGllcyIsImluaXRpYWxpemUiLCJvYnNlcnZlZEF0dHJpYnV0ZXMiLCJmaW5hbGl6ZSIsIl9jbGFzc1Byb3BlcnRpZXMiLCJwIiwiYXR0ciIsIl9hdHRyaWJ1dGVOYW1lRm9yUHJvcGVydHkiLCJfYXR0cmlidXRlVG9Qcm9wZXJ0eU1hcCIsImhhc093blByb3BlcnR5Iiwic3VwZXJQcm9wZXJ0aWVzIiwiZ2V0UHJvdG90eXBlT2YiLCJrIiwiX2Vuc3VyZUNsYXNzUHJvcGVydGllcyIsIm5vQWNjZXNzb3IiLCJwcm90b3R5cGUiLCJkZXNjcmlwdG9yIiwiZ2V0UHJvcGVydHlEZXNjcmlwdG9yIiwiZGVmaW5lUHJvcGVydHkiLCJfb3B0aW9ucyIsIm9sZFZhbHVlIiwiX3JlcXVlc3RVcGRhdGUiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwic3VwZXJDdG9yIiwicHJvcHMiLCJwcm9wZXJ0aWVzIiwicHJvcEtleXMiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiY3JlYXRlUHJvcGVydHkiLCJmcm9tQXR0cmlidXRlIiwidG9BdHRyaWJ1dGUiLCJfc2F2ZUluc3RhbmNlUHJvcGVydGllcyIsImNvbnN0cnVjdG9yIiwiX3YiLCJlbmFibGVVcGRhdGluZyIsIl9hdHRyaWJ1dGVUb1Byb3BlcnR5IiwiY3RvciIsImF0dHJWYWx1ZSIsIl9wcm9wZXJ0eVZhbHVlVG9BdHRyaWJ1dGUiLCJwcm9wTmFtZSIsImdldFByb3BlcnR5T3B0aW9ucyIsIl9wcm9wZXJ0eVZhbHVlRnJvbUF0dHJpYnV0ZSIsInNob3VsZFJlcXVlc3RVcGRhdGUiLCJfdmFsdWVIYXNDaGFuZ2VkIiwiX2hhc1JlcXVlc3RlZFVwZGF0ZSIsIl9lbnF1ZXVlVXBkYXRlIiwidXBkYXRlQ29tcGxldGUiLCJwZXJmb3JtVXBkYXRlIiwiaGFzVXBkYXRlZCIsIl9hcHBseUluc3RhbmNlUHJvcGVydGllcyIsInNob3VsZFVwZGF0ZSIsImNoYW5nZWRQcm9wZXJ0aWVzIiwiX21hcmtVcGRhdGVkIiwiZmlyc3RVcGRhdGVkIiwidXBkYXRlZCIsIl9nZXRVcGRhdGVDb21wbGV0ZSIsInNpemUiLCJfcHJvcGVydHlUb0F0dHJpYnV0ZSIsImN1c3RvbUVsZW1lbnQiLCJjbGFzc09yRGVzY3JpcHRvciIsImNsYXp6IiwiZGVmaW5lIiwibGVnYWN5Q3VzdG9tRWxlbWVudCIsImtpbmQiLCJlbGVtZW50cyIsInN0YW5kYXJkQ3VzdG9tRWxlbWVudCIsInN0YW5kYXJkUHJvcGVydHkiLCJhc3NpZ24iLCJwbGFjZW1lbnQiLCJpbml0aWFsaXplciIsInByb3BlcnR5IiwicHJvdG9PckRlc2NyaXB0b3IiLCJwcm90byIsImxlZ2FjeVByb3BlcnR5IiwicXVlcnkiLCJzZWxlY3RvciIsInJlbmRlclJvb3QiLCJsZWdhY3lRdWVyeSIsInN0YW5kYXJkUXVlcnkiLCJzdXBwb3J0c0Fkb3B0aW5nU3R5bGVTaGVldHMiLCJEb2N1bWVudCIsIkNTU1N0eWxlU2hlZXQiLCJjb25zdHJ1Y3Rpb25Ub2tlbiIsIkNTU1Jlc3VsdCIsImNzc1RleHQiLCJzYWZlVG9rZW4iLCJzdHlsZVNoZWV0IiwiX3N0eWxlU2hlZXQiLCJyZXBsYWNlU3luYyIsImNzcyIsInJlZHVjZSIsImFjYyIsImlkeCIsInRleHRGcm9tQ1NTUmVzdWx0IiwicmVuZGVyTm90SW1wbGVtZW50ZWQiLCJMaXRFbGVtZW50IiwidXNlclN0eWxlcyIsImdldFN0eWxlcyIsIl9zdHlsZXMiLCJhZGRTdHlsZXMiLCJyZWR1Y2VSaWdodCIsInVuc2hpZnQiLCJfZ2V0VW5pcXVlU3R5bGVzIiwiY3JlYXRlUmVuZGVyUm9vdCIsIlNoYWRvd1Jvb3QiLCJhZG9wdFN0eWxlcyIsImF0dGFjaFNoYWRvdyIsIm1vZGUiLCJhZG9wdGVkU3R5bGVTaGVldHMiLCJtYXAiLCJfbmVlZHNTaGltQWRvcHRlZFN0eWxlU2hlZXRzIiwiU2NvcGluZ1NoaW0iLCJwcmVwYXJlQWRvcHRlZENzc1RleHQiLCJsb2NhbE5hbWUiLCJjb25uZWN0ZWRDYWxsYmFjayIsInN0eWxlRWxlbWVudCIsInRlbXBsYXRlUmVzdWx0IiwicmVuZGVyIiwiaGFzUmVuZGVyZWQiLCJuZWVkc1Njb3BpbmciLCJob3N0IiwiZmlyc3RTY29wZVJlbmRlciIsInJlbmRlckNvbnRhaW5lciIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJhcHBlbmRJbnRvIiwibGl0UmVuZGVyIiwiZGVsZXRlIiwicHJldmlvdXNWYWx1ZXMiLCJ1bnNhZmVIVE1MIiwicHJldmlvdXNWYWx1ZSIsIkNsYXNzTGlzdCIsImNsYXNzZXMiLCJjaGFuZ2VkIiwiY2xhc3NMaXN0IiwiY2xzIiwiY2xhc3NTdHJpbmciLCJwcmV2aW91c0NsYXNzZXNDYWNoZSIsImNsYXNzTWFwIiwiY2xhc3NJbmZvIiwicHJldmlvdXNDbGFzc2VzIiwicmVtb3ZlIiwiZ2V0SW1hZ2VVcmwiLCJwb3N0IiwiX2EiLCJfYiIsInBvc3RfaGludCIsInVybCIsImdldFByZXZpZXciLCJfYyIsImlzSW1hZ2UiLCJpc0dhbGxlcnkiLCJmaXJzdEltYWdlIiwiZ2FsbGVyeV9kYXRhIiwiaXRlbXMiLCJtZXRhZGF0YSIsIm1lZGlhX21ldGFkYXRhIiwibWVkaWFfaWQiLCJ0aHVtYiIsImZpbmQiLCJpbmZvIiwieCIsInUiLCJ3aWR0aCIsImhlaWdodCIsInkiLCJnZXRHYWxsZXJ5SW1hZ2UiLCJwcmV2aWV3IiwiaW1hZ2VzIiwic291cmNlIiwicmVzb2x1dGlvbnMiLCJodG1sRGVjb2RlIiwiaW5wdXQiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJkb2N1bWVudEVsZW1lbnQiLCJmaXJzdE1hcmtkb3duRWxlbSIsImRpdiIsImZpcnN0RWxlbWVudENoaWxkIiwidG9TdHJpbmciLCJfX2RlY29yYXRlIiwiZGVjb3JhdG9ycyIsInRhcmdldCIsImRlc2MiLCJjIiwiYXJndW1lbnRzIiwiciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlN1YnJlZGRpdFZpZXciLCJzdWJyZWRkaXQiLCJtYWtlUXVlcnkiLCJwcmV2IiwiY3VyciIsImZldGNoQWJvdXQiLCJyZXNwIiwiZmV0Y2giLCJib2R5IiwianNvbiIsImxvZyIsImNoaWxkcmVuIiwidGl0bGUiLCJhYm91dCIsInBvc3RJZCIsInZpZGVvRWxlbSIsInBsYXkiLCJwYXVzZSIsImljb25VcmwiLCJpY29uX2ltZyIsImZpbHRlciIsInN0aWNraWVkIiwiaW1nVXJsIiwiaWQiLCJvbk1vdXNlT3ZlciIsIm9uTW91c2VPdXQiLCJzci1pY29uIiwibm8taWNvbiIsImF1dGhvciIsInNlbGZ0ZXh0X2h0bWwiLCJtZWRpYSIsInJlZGRpdF92aWRlbyIsImZhbGxiYWNrX3VybCIsIkNvbW11bml0eVNwb3RsaWdodCIsImN1cnJlbnQiLCJiYW5uZXJfaW1nIiwiaGVhZGVyX2ltZyIsImRpc3BsYXlfbmFtZSIsInB1YmxpY19kZXNjcmlwdGlvbl9odG1sIiwiQ2xhbXBSZXNwb25zZSIsIm9yaWdpbmFsIiwiY2xhbXBlZCIsImNsYW1wIiwid2luIiwidHJ1bmNhdGlvbkNoYXIiLCJzcGxpdE9uQ2hhcnMiLCJvcHQiLCJ0cnVuY2F0aW9uSFRNTCIsImNodW5rcyIsImxhc3RDaHVuayIsInNwbGl0Q2hhciIsIm9yaWdpbmFsVGV4dCIsImNsYW1wVmFsdWUiLCJpc0NTU1ZhbHVlIiwidHJ1bmNhdGlvbkhUTUxDb250YWluZXIiLCJjbGFtcGVkVGV4dCIsImNvbXB1dGVTdHlsZSIsImVsZW0iLCJnZXRDb21wdXRlZFN0eWxlIiwiZ2V0UHJvcGVydHlWYWx1ZSIsImdldE1heExpbmVzIiwiYXZhaWxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJsaW5lSGVpZ2h0IiwiZ2V0TGluZUhlaWdodCIsIm1heCIsImZsb29yIiwibGgiLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsImdldEVsZW1IZWlnaHQiLCJzY3JvbGxIZWlnaHQiLCJnZXRMYXN0Q2hpbGQiLCJsYXN0Q2hpbGQiLCJub2RlVmFsdWUiLCJhcHBseUVsbGlwc2lzIiwicGFyc2VJbnQiLCJjbG1wIiwidHJ1bmNhdGUiLCJtYXhIZWlnaHQiLCJ0cmltIiwicmVwbGFjZSIsInNoaWZ0IiwibnVtIiwiYXJyIiwicmFuZ2UiLCJHUklEX0dSQU5VTEFSSVRZIiwiVGlsZVRleHQiLCJpc0NsYW1wZWQiLCJleHBsb3JlU3R5bGVzIiwidGl0bGVFbGVtIiwic2VsZnRleHQiLCJib2R5RWxlbSIsIl9yZW5kZXJUZXh0IiwicG9zdC10aWxlLXRleHQiLCJzaGltIiwicG9zdC10aWxlLXRpdGxlIiwicG9zdC10aWxlLWJvZHkiLCJFeHBsb3JlUGFnZSIsInBlbmRpbmciLCJzaG93dGl0bGUiLCJzaG93c3VicmVkZGl0Iiwic2hvd3NoaW0iLCJsYXJnZUthcm1hVGhyZXNob2xkIiwibGFyZ2VDb21tZW50VGhyZXNob2xkIiwibG9hZGVyUmVnaXN0ZXJlZCIsInBvc3RzIiwib2JzZXJ2ZXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImVudHJpZXMiLCJpc0ludGVyc2VjdGluZyIsImFmdGVySWQiLCJfbG9hZGVyIiwidW5vYnNlcnZlIiwicm9vdCIsInJvb3RNYXJnaW4iLCJzZXRUaW1lb3V0Iiwib2JzZXJ2ZSIsIm11bHRpIiwiaW5jbHVkZXMiLCJjb25jYXQiLCJhZnRlciIsIl9yZW5kZXJUaWxlcyIsIl9yZW5kZXJTcGFjZXJzIiwiaXNNZWRpYSIsIl9yZW5kZXJNZWRpYVRpbGUiLCJfcmVuZGVyVGV4dFRpbGUiLCJmaWxsIiwiaXNMYXJnZSIsInVwcyIsIm51bV9jb21tZW50cyIsImltZ1N0eWxlcyIsInJhdGlvIiwiaW1hZ2UiLCJnZXRBc3BlY3RSYXRpbyIsInJvd1NwYW4iLCJyb3VuZCIsInNwYW5DbGFzcyIsInZhbCIsIm1pbiIsInBvc3QtdGlsZSIsInBvc3QtdGlsZS1sYXJnZSIsImlzVmlkZW8iLCJzcGFuNiIsInNwYW40IiwicG9zdC10ZXh0LW9ubHkiLCJUT1BJQ19SRSIsIk1VTFRJX1JFIiwiU1VCUkVESVRfUkUiLCJUT1BJQ1MiLCJnYW1pbmciLCJtdXNpYyIsInNwb3J0cyIsImJlYXV0eSIsImFzeW5jIiwiZXhwbG9yZSIsImJ1dHRvbiIsInRvcGljIiwiY2hlY2tlZCIsImV4cGxvcmVIZWFkZXIiLCJzdWJyZWRkaXRIZWFkZXIiLCJzaG93RXhwbG9yZUhlYWRlciIsImJhY2tCdXR0b24iLCJnbyIsInJvdXRlIiwibG9jYXRpb24iLCJoYXNoIiwiZ29Ub3BpYyIsImdvTXVsdGkiLCJn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
